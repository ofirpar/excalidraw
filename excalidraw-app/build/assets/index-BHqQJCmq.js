var fie=Object.defineProperty;var hie=(e,t,n)=>t in e?fie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var H=(e,t,n)=>(hie(e,typeof t!="symbol"?t+"":t,n),n);function gie(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uF={exports:{}},B8={},dF={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G2=Symbol.for("react.element"),pie=Symbol.for("react.portal"),mie=Symbol.for("react.fragment"),Uie=Symbol.for("react.strict_mode"),bie=Symbol.for("react.profiler"),yie=Symbol.for("react.provider"),vie=Symbol.for("react.context"),Eie=Symbol.for("react.forward_ref"),_ie=Symbol.for("react.suspense"),wie=Symbol.for("react.memo"),Iie=Symbol.for("react.lazy"),JA=Symbol.iterator;function Tie(e){return e===null||typeof e!="object"?null:(e=JA&&e[JA]||e["@@iterator"],typeof e=="function"?e:null)}var fF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hF=Object.assign,gF={};function r0(e,t,n){this.props=e,this.context=t,this.refs=gF,this.updater=n||fF}r0.prototype.isReactComponent={};r0.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};r0.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pF(){}pF.prototype=r0.prototype;function X9(e,t,n){this.props=e,this.context=t,this.refs=gF,this.updater=n||fF}var j9=X9.prototype=new pF;j9.constructor=X9;hF(j9,r0.prototype);j9.isPureReactComponent=!0;var ek=Array.isArray,mF=Object.prototype.hasOwnProperty,K9={current:null},UF={key:!0,ref:!0,__self:!0,__source:!0};function bF(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)mF.call(t,r)&&!UF.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:G2,type:e,key:o,ref:s,props:i,_owner:K9.current}}function xie(e,t){return{$$typeof:G2,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Y9(e){return typeof e=="object"&&e!==null&&e.$$typeof===G2}function Sie(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tk=/\/+/g;function P7(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sie(""+e.key):t.toString(36)}function Y5(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case G2:case pie:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+P7(s,0):r,ek(i)?(n="",e!=null&&(n=e.replace(tk,"$&/")+"/"),Y5(i,t,n,"",function(c){return c})):i!=null&&(Y9(i)&&(i=xie(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(tk,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",ek(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+P7(o,a);s+=Y5(o,t,n,l,i)}else if(l=Tie(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+P7(o,a++),s+=Y5(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function X6(e,t,n){if(e==null)return e;var r=[],i=0;return Y5(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Cie(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ji={current:null},Z5={transition:null},Aie={ReactCurrentDispatcher:Ji,ReactCurrentBatchConfig:Z5,ReactCurrentOwner:K9};xt.Children={map:X6,forEach:function(e,t,n){X6(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return X6(e,function(){t++}),t},toArray:function(e){return X6(e,function(t){return t})||[]},only:function(e){if(!Y9(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xt.Component=r0;xt.Fragment=mie;xt.Profiler=bie;xt.PureComponent=X9;xt.StrictMode=Uie;xt.Suspense=_ie;xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Aie;xt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hF({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=K9.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)mF.call(t,l)&&!UF.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:G2,type:e.type,key:i,ref:o,props:r,_owner:s}};xt.createContext=function(e){return e={$$typeof:vie,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yie,_context:e},e.Consumer=e};xt.createElement=bF;xt.createFactory=function(e){var t=bF.bind(null,e);return t.type=e,t};xt.createRef=function(){return{current:null}};xt.forwardRef=function(e){return{$$typeof:Eie,render:e}};xt.isValidElement=Y9;xt.lazy=function(e){return{$$typeof:Iie,_payload:{_status:-1,_result:e},_init:Cie}};xt.memo=function(e,t){return{$$typeof:wie,type:e,compare:t===void 0?null:t}};xt.startTransition=function(e){var t=Z5.transition;Z5.transition={};try{e()}finally{Z5.transition=t}};xt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};xt.useCallback=function(e,t){return Ji.current.useCallback(e,t)};xt.useContext=function(e){return Ji.current.useContext(e)};xt.useDebugValue=function(){};xt.useDeferredValue=function(e){return Ji.current.useDeferredValue(e)};xt.useEffect=function(e,t){return Ji.current.useEffect(e,t)};xt.useId=function(){return Ji.current.useId()};xt.useImperativeHandle=function(e,t,n){return Ji.current.useImperativeHandle(e,t,n)};xt.useInsertionEffect=function(e,t){return Ji.current.useInsertionEffect(e,t)};xt.useLayoutEffect=function(e,t){return Ji.current.useLayoutEffect(e,t)};xt.useMemo=function(e,t){return Ji.current.useMemo(e,t)};xt.useReducer=function(e,t,n){return Ji.current.useReducer(e,t,n)};xt.useRef=function(e){return Ji.current.useRef(e)};xt.useState=function(e){return Ji.current.useState(e)};xt.useSyncExternalStore=function(e,t,n){return Ji.current.useSyncExternalStore(e,t,n)};xt.useTransition=function(){return Ji.current.useTransition()};xt.version="18.2.0";dF.exports=xt;var D=dF.exports;const Ee=fd(D),kie=gie({__proto__:null,default:Ee},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rie=D,Pie=Symbol.for("react.element"),Mie=Symbol.for("react.fragment"),Lie=Object.prototype.hasOwnProperty,Die=Rie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nie={key:!0,ref:!0,__self:!0,__source:!0};function yF(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Lie.call(t,r)&&!Nie.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Pie,type:e,key:o,ref:s,props:i,_owner:Die.current}}B8.Fragment=Mie;B8.jsx=yF;B8.jsxs=yF;uF.exports=B8;var Z9=uF.exports;const ke=Z9.Fragment,p=Z9.jsx,z=Z9.jsxs;var vF={exports:{}},Xo={},EF={exports:{}},_F={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,Z){var te=q.length;q.push(Z);e:for(;0<te;){var pe=te-1>>>1,Ie=q[pe];if(0<i(Ie,Z))q[pe]=Z,q[te]=Ie,te=pe;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],te=q.pop();if(te!==Z){q[0]=te;e:for(var pe=0,Ie=q.length,Se=Ie>>>1;pe<Se;){var lt=2*(pe+1)-1,at=q[lt],gt=lt+1,ht=q[gt];if(0>i(at,te))gt<Ie&&0>i(ht,at)?(q[pe]=ht,q[gt]=te,pe=gt):(q[pe]=at,q[lt]=te,pe=lt);else if(gt<Ie&&0>i(ht,te))q[pe]=ht,q[gt]=te,pe=gt;else break e}}return Z}function i(q,Z){var te=q.sortIndex-Z.sortIndex;return te!==0?te:q.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,g=!1,U=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=q)r(c),Z.sortIndex=Z.expirationTime,t(l,Z);else break;Z=n(c)}}function T(q){if(b=!1,w(q),!U)if(n(l)!==null)U=!0,ne(A);else{var Z=n(c);Z!==null&&ee(T,Z.startTime-q)}}function A(q,Z){U=!1,b&&(b=!1,_(x),x=-1),g=!0;var te=f;try{for(w(Z),d=n(l);d!==null&&(!(d.expirationTime>Z)||q&&!O());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,f=d.priorityLevel;var Ie=pe(d.expirationTime<=Z);Z=e.unstable_now(),typeof Ie=="function"?d.callback=Ie:d===n(l)&&r(l),w(Z)}else r(l);d=n(l)}if(d!==null)var Se=!0;else{var lt=n(c);lt!==null&&ee(T,lt.startTime-Z),Se=!1}return Se}finally{d=null,f=te,g=!1}}var M=!1,S=null,x=-1,C=5,R=-1;function O(){return!(e.unstable_now()-R<C)}function F(){if(S!==null){var q=e.unstable_now();R=q;var Z=!0;try{Z=S(!0,q)}finally{Z?N():(M=!1,S=null)}}else M=!1}var N;if(typeof E=="function")N=function(){E(F)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,K=J.port2;J.port1.onmessage=F,N=function(){K.postMessage(null)}}else N=function(){v(F,0)};function ne(q){S=q,M||(M=!0,N())}function ee(q,Z){x=v(function(){q(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){U||g||(U=!0,ne(A))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(q){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var te=f;f=Z;try{return q()}finally{f=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=f;f=q;try{return Z()}finally{f=te}},e.unstable_scheduleCallback=function(q,Z,te){var pe=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?pe+te:pe):te=pe,q){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=te+Ie,q={id:u++,callback:Z,priorityLevel:q,startTime:te,expirationTime:Ie,sortIndex:-1},te>pe?(q.sortIndex=te,t(c,q),n(l)===null&&q===n(c)&&(b?(_(x),x=-1):b=!0,ee(T,te-pe))):(q.sortIndex=Ie,t(l,q),U||g||(U=!0,ne(A))),q},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(q){var Z=f;return function(){var te=f;f=Z;try{return q.apply(this,arguments)}finally{f=te}}}})(_F);EF.exports=_F;var Oie=EF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wF=D,Vo=Oie;function _e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IF=new Set,zm={};function hh(e,t){Ug(e,t),Ug(e+"Capture",t)}function Ug(e,t){for(zm[e]=t,e=0;e<t.length;e++)IF.add(t[e])}var uc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N4=Object.prototype.hasOwnProperty,Fie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nk={},rk={};function Bie(e){return N4.call(rk,e)?!0:N4.call(nk,e)?!1:Fie.test(e)?rk[e]=!0:(nk[e]=!0,!1)}function $ie(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zie(e,t,n,r){if(t===null||typeof t>"u"||$ie(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function eo(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ui[e]=new eo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ui[t]=new eo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ui[e]=new eo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ui[e]=new eo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ui[e]=new eo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ui[e]=new eo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ui[e]=new eo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ui[e]=new eo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ui[e]=new eo(e,5,!1,e.toLowerCase(),null,!1,!1)});var q9=/[\-:]([a-z])/g;function Q9(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(q9,Q9);ui[t]=new eo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(q9,Q9);ui[t]=new eo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(q9,Q9);ui[t]=new eo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ui[e]=new eo(e,1,!1,e.toLowerCase(),null,!1,!1)});ui.xlinkHref=new eo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ui[e]=new eo(e,1,!1,e.toLowerCase(),null,!0,!0)});function J9(e,t,n,r){var i=ui.hasOwnProperty(t)?ui[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zie(t,n,i,r)&&(n=null),r||i===null?Bie(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rc=wF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j6=Symbol.for("react.element"),A1=Symbol.for("react.portal"),k1=Symbol.for("react.fragment"),eI=Symbol.for("react.strict_mode"),O4=Symbol.for("react.profiler"),TF=Symbol.for("react.provider"),xF=Symbol.for("react.context"),tI=Symbol.for("react.forward_ref"),F4=Symbol.for("react.suspense"),B4=Symbol.for("react.suspense_list"),nI=Symbol.for("react.memo"),lu=Symbol.for("react.lazy"),SF=Symbol.for("react.offscreen"),ik=Symbol.iterator;function lp(e){return e===null||typeof e!="object"?null:(e=ik&&e[ik]||e["@@iterator"],typeof e=="function"?e:null)}var Kn=Object.assign,M7;function Op(e){if(M7===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M7=t&&t[1]||""}return`
`+M7+e}var L7=!1;function D7(e,t){if(!e||L7)return"";L7=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{L7=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Op(e):""}function Vie(e){switch(e.tag){case 5:return Op(e.type);case 16:return Op("Lazy");case 13:return Op("Suspense");case 19:return Op("SuspenseList");case 0:case 2:case 15:return e=D7(e.type,!1),e;case 11:return e=D7(e.type.render,!1),e;case 1:return e=D7(e.type,!0),e;default:return""}}function $4(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k1:return"Fragment";case A1:return"Portal";case O4:return"Profiler";case eI:return"StrictMode";case F4:return"Suspense";case B4:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xF:return(e.displayName||"Context")+".Consumer";case TF:return(e._context.displayName||"Context")+".Provider";case tI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nI:return t=e.displayName||null,t!==null?t:$4(e.type)||"Memo";case lu:t=e._payload,e=e._init;try{return $4(e(t))}catch{}}return null}function Hie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $4(t);case 8:return t===eI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ku(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function CF(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wie(e){var t=CF(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function K6(e){e._valueTracker||(e._valueTracker=Wie(e))}function AF(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=CF(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Vb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function z4(e,t){var n=t.checked;return Kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ok(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ku(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kF(e,t){t=t.checked,t!=null&&J9(e,"checked",t,!1)}function V4(e,t){kF(e,t);var n=Ku(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H4(e,t.type,n):t.hasOwnProperty("defaultValue")&&H4(e,t.type,Ku(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sk(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function H4(e,t,n){(t!=="number"||Vb(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fp=Array.isArray;function eg(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ku(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function W4(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return Kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ak(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_e(92));if(Fp(n)){if(1<n.length)throw Error(_e(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ku(n)}}function RF(e,t){var n=Ku(t.value),r=Ku(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function lk(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function PF(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G4(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?PF(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Y6,MF=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Y6=Y6||document.createElement("div"),Y6.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Y6.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vm(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var im={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gie=["Webkit","ms","Moz","O"];Object.keys(im).forEach(function(e){Gie.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),im[t]=im[e]})});function LF(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||im.hasOwnProperty(e)&&im[e]?(""+t).trim():t+"px"}function DF(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=LF(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Xie=Kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function X4(e,t){if(t){if(Xie[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function j4(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K4=null;function rI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Y4=null,tg=null,ng=null;function ck(e){if(e=K2(e)){if(typeof Y4!="function")throw Error(_e(280));var t=e.stateNode;t&&(t=W8(t),Y4(e.stateNode,e.type,t))}}function NF(e){tg?ng?ng.push(e):ng=[e]:tg=e}function OF(){if(tg){var e=tg,t=ng;if(ng=tg=null,ck(e),t)for(e=0;e<t.length;e++)ck(t[e])}}function FF(e,t){return e(t)}function BF(){}var N7=!1;function $F(e,t,n){if(N7)return e(t,n);N7=!0;try{return FF(e,t,n)}finally{N7=!1,(tg!==null||ng!==null)&&(BF(),OF())}}function Hm(e,t){var n=e.stateNode;if(n===null)return null;var r=W8(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_e(231,t,typeof n));return n}var Z4=!1;if(uc)try{var cp={};Object.defineProperty(cp,"passive",{get:function(){Z4=!0}}),window.addEventListener("test",cp,cp),window.removeEventListener("test",cp,cp)}catch{Z4=!1}function jie(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var om=!1,Hb=null,Wb=!1,q4=null,Kie={onError:function(e){om=!0,Hb=e}};function Yie(e,t,n,r,i,o,s,a,l){om=!1,Hb=null,jie.apply(Kie,arguments)}function Zie(e,t,n,r,i,o,s,a,l){if(Yie.apply(this,arguments),om){if(om){var c=Hb;om=!1,Hb=null}else throw Error(_e(198));Wb||(Wb=!0,q4=c)}}function gh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zF(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function uk(e){if(gh(e)!==e)throw Error(_e(188))}function qie(e){var t=e.alternate;if(!t){if(t=gh(e),t===null)throw Error(_e(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return uk(i),e;if(o===r)return uk(i),t;o=o.sibling}throw Error(_e(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?e:t}function VF(e){return e=qie(e),e!==null?HF(e):null}function HF(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=HF(e);if(t!==null)return t;e=e.sibling}return null}var WF=Vo.unstable_scheduleCallback,dk=Vo.unstable_cancelCallback,Qie=Vo.unstable_shouldYield,Jie=Vo.unstable_requestPaint,ur=Vo.unstable_now,eoe=Vo.unstable_getCurrentPriorityLevel,iI=Vo.unstable_ImmediatePriority,GF=Vo.unstable_UserBlockingPriority,Gb=Vo.unstable_NormalPriority,toe=Vo.unstable_LowPriority,XF=Vo.unstable_IdlePriority,$8=null,nl=null;function noe(e){if(nl&&typeof nl.onCommitFiberRoot=="function")try{nl.onCommitFiberRoot($8,e,void 0,(e.current.flags&128)===128)}catch{}}var aa=Math.clz32?Math.clz32:ooe,roe=Math.log,ioe=Math.LN2;function ooe(e){return e>>>=0,e===0?32:31-(roe(e)/ioe|0)|0}var Z6=64,q6=4194304;function Bp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xb(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Bp(a):(o&=s,o!==0&&(r=Bp(o)))}else s=n&~i,s!==0?r=Bp(s):o!==0&&(r=Bp(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-aa(t),i=1<<n,r|=e[n],t&=~i;return r}function soe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aoe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-aa(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=soe(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Q4(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jF(){var e=Z6;return Z6<<=1,!(Z6&4194240)&&(Z6=64),e}function O7(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function X2(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-aa(t),e[t]=n}function loe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-aa(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function oI(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-aa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var dn=0;function KF(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var YF,sI,ZF,qF,QF,J4=!1,Q6=[],ku=null,Ru=null,Pu=null,Wm=new Map,Gm=new Map,gu=[],coe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fk(e,t){switch(e){case"focusin":case"focusout":ku=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":Wm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gm.delete(t.pointerId)}}function up(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=K2(t),t!==null&&sI(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function uoe(e,t,n,r,i){switch(t){case"focusin":return ku=up(ku,e,t,n,r,i),!0;case"dragenter":return Ru=up(Ru,e,t,n,r,i),!0;case"mouseover":return Pu=up(Pu,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Wm.set(o,up(Wm.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Gm.set(o,up(Gm.get(o)||null,e,t,n,r,i)),!0}return!1}function JF(e){var t=uf(e.target);if(t!==null){var n=gh(t);if(n!==null){if(t=n.tag,t===13){if(t=zF(n),t!==null){e.blockedOn=t,QF(e.priority,function(){ZF(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function q5(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=e_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);K4=r,n.target.dispatchEvent(r),K4=null}else return t=K2(n),t!==null&&sI(t),e.blockedOn=n,!1;t.shift()}return!0}function hk(e,t,n){q5(e)&&n.delete(t)}function doe(){J4=!1,ku!==null&&q5(ku)&&(ku=null),Ru!==null&&q5(Ru)&&(Ru=null),Pu!==null&&q5(Pu)&&(Pu=null),Wm.forEach(hk),Gm.forEach(hk)}function dp(e,t){e.blockedOn===t&&(e.blockedOn=null,J4||(J4=!0,Vo.unstable_scheduleCallback(Vo.unstable_NormalPriority,doe)))}function Xm(e){function t(i){return dp(i,e)}if(0<Q6.length){dp(Q6[0],e);for(var n=1;n<Q6.length;n++){var r=Q6[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ku!==null&&dp(ku,e),Ru!==null&&dp(Ru,e),Pu!==null&&dp(Pu,e),Wm.forEach(t),Gm.forEach(t),n=0;n<gu.length;n++)r=gu[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<gu.length&&(n=gu[0],n.blockedOn===null);)JF(n),n.blockedOn===null&&gu.shift()}var rg=Rc.ReactCurrentBatchConfig,jb=!0;function foe(e,t,n,r){var i=dn,o=rg.transition;rg.transition=null;try{dn=1,aI(e,t,n,r)}finally{dn=i,rg.transition=o}}function hoe(e,t,n,r){var i=dn,o=rg.transition;rg.transition=null;try{dn=4,aI(e,t,n,r)}finally{dn=i,rg.transition=o}}function aI(e,t,n,r){if(jb){var i=e_(e,t,n,r);if(i===null)j7(e,t,r,Kb,n),fk(e,r);else if(uoe(i,e,t,n,r))r.stopPropagation();else if(fk(e,r),t&4&&-1<coe.indexOf(e)){for(;i!==null;){var o=K2(i);if(o!==null&&YF(o),o=e_(e,t,n,r),o===null&&j7(e,t,r,Kb,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else j7(e,t,r,null,n)}}var Kb=null;function e_(e,t,n,r){if(Kb=null,e=rI(r),e=uf(e),e!==null)if(t=gh(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zF(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kb=e,null}function eB(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eoe()){case iI:return 1;case GF:return 4;case Gb:case toe:return 16;case XF:return 536870912;default:return 16}default:return 16}}var yu=null,lI=null,Q5=null;function tB(){if(Q5)return Q5;var e,t=lI,n=t.length,r,i="value"in yu?yu.value:yu.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Q5=i.slice(e,1<r?1-r:void 0)}function J5(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function J6(){return!0}function gk(){return!1}function jo(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?J6:gk,this.isPropagationStopped=gk,this}return Kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=J6)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=J6)},persist:function(){},isPersistent:J6}),t}var i0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cI=jo(i0),j2=Kn({},i0,{view:0,detail:0}),goe=jo(j2),F7,B7,fp,z8=Kn({},j2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fp&&(fp&&e.type==="mousemove"?(F7=e.screenX-fp.screenX,B7=e.screenY-fp.screenY):B7=F7=0,fp=e),F7)},movementY:function(e){return"movementY"in e?e.movementY:B7}}),pk=jo(z8),poe=Kn({},z8,{dataTransfer:0}),moe=jo(poe),Uoe=Kn({},j2,{relatedTarget:0}),$7=jo(Uoe),boe=Kn({},i0,{animationName:0,elapsedTime:0,pseudoElement:0}),yoe=jo(boe),voe=Kn({},i0,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Eoe=jo(voe),_oe=Kn({},i0,{data:0}),mk=jo(_oe),woe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ioe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Toe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xoe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Toe[e])?!!t[e]:!1}function uI(){return xoe}var Soe=Kn({},j2,{key:function(e){if(e.key){var t=woe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=J5(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ioe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uI,charCode:function(e){return e.type==="keypress"?J5(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?J5(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Coe=jo(Soe),Aoe=Kn({},z8,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uk=jo(Aoe),koe=Kn({},j2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uI}),Roe=jo(koe),Poe=Kn({},i0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Moe=jo(Poe),Loe=Kn({},z8,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Doe=jo(Loe),Noe=[9,13,27,32],dI=uc&&"CompositionEvent"in window,sm=null;uc&&"documentMode"in document&&(sm=document.documentMode);var Ooe=uc&&"TextEvent"in window&&!sm,nB=uc&&(!dI||sm&&8<sm&&11>=sm),bk=" ",yk=!1;function rB(e,t){switch(e){case"keyup":return Noe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iB(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var R1=!1;function Foe(e,t){switch(e){case"compositionend":return iB(t);case"keypress":return t.which!==32?null:(yk=!0,bk);case"textInput":return e=t.data,e===bk&&yk?null:e;default:return null}}function Boe(e,t){if(R1)return e==="compositionend"||!dI&&rB(e,t)?(e=tB(),Q5=lI=yu=null,R1=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nB&&t.locale!=="ko"?null:t.data;default:return null}}var $oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$oe[e.type]:t==="textarea"}function oB(e,t,n,r){NF(r),t=Yb(t,"onChange"),0<t.length&&(n=new cI("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var am=null,jm=null;function zoe(e){mB(e,0)}function V8(e){var t=L1(e);if(AF(t))return e}function Voe(e,t){if(e==="change")return t}var sB=!1;if(uc){var z7;if(uc){var V7="oninput"in document;if(!V7){var Ek=document.createElement("div");Ek.setAttribute("oninput","return;"),V7=typeof Ek.oninput=="function"}z7=V7}else z7=!1;sB=z7&&(!document.documentMode||9<document.documentMode)}function _k(){am&&(am.detachEvent("onpropertychange",aB),jm=am=null)}function aB(e){if(e.propertyName==="value"&&V8(jm)){var t=[];oB(t,jm,e,rI(e)),$F(zoe,t)}}function Hoe(e,t,n){e==="focusin"?(_k(),am=t,jm=n,am.attachEvent("onpropertychange",aB)):e==="focusout"&&_k()}function Woe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return V8(jm)}function Goe(e,t){if(e==="click")return V8(t)}function Xoe(e,t){if(e==="input"||e==="change")return V8(t)}function joe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ma=typeof Object.is=="function"?Object.is:joe;function Km(e,t){if(ma(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!N4.call(t,i)||!ma(e[i],t[i]))return!1}return!0}function wk(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ik(e,t){var n=wk(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wk(n)}}function lB(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lB(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cB(){for(var e=window,t=Vb();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vb(e.document)}return t}function fI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Koe(e){var t=cB(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lB(n.ownerDocument.documentElement,n)){if(r!==null&&fI(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Ik(n,o);var s=Ik(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yoe=uc&&"documentMode"in document&&11>=document.documentMode,P1=null,t_=null,lm=null,n_=!1;function Tk(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;n_||P1==null||P1!==Vb(r)||(r=P1,"selectionStart"in r&&fI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lm&&Km(lm,r)||(lm=r,r=Yb(t_,"onSelect"),0<r.length&&(t=new cI("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=P1)))}function e5(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var M1={animationend:e5("Animation","AnimationEnd"),animationiteration:e5("Animation","AnimationIteration"),animationstart:e5("Animation","AnimationStart"),transitionend:e5("Transition","TransitionEnd")},H7={},uB={};uc&&(uB=document.createElement("div").style,"AnimationEvent"in window||(delete M1.animationend.animation,delete M1.animationiteration.animation,delete M1.animationstart.animation),"TransitionEvent"in window||delete M1.transitionend.transition);function H8(e){if(H7[e])return H7[e];if(!M1[e])return e;var t=M1[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uB)return H7[e]=t[n];return e}var dB=H8("animationend"),fB=H8("animationiteration"),hB=H8("animationstart"),gB=H8("transitionend"),pB=new Map,xk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hd(e,t){pB.set(e,t),hh(t,[e])}for(var W7=0;W7<xk.length;W7++){var G7=xk[W7],Zoe=G7.toLowerCase(),qoe=G7[0].toUpperCase()+G7.slice(1);hd(Zoe,"on"+qoe)}hd(dB,"onAnimationEnd");hd(fB,"onAnimationIteration");hd(hB,"onAnimationStart");hd("dblclick","onDoubleClick");hd("focusin","onFocus");hd("focusout","onBlur");hd(gB,"onTransitionEnd");Ug("onMouseEnter",["mouseout","mouseover"]);Ug("onMouseLeave",["mouseout","mouseover"]);Ug("onPointerEnter",["pointerout","pointerover"]);Ug("onPointerLeave",["pointerout","pointerover"]);hh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hh("onBeforeInput",["compositionend","keypress","textInput","paste"]);hh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $p="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qoe=new Set("cancel close invalid load scroll toggle".split(" ").concat($p));function Sk(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Zie(r,t,void 0,e),e.currentTarget=null}function mB(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Sk(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Sk(i,a,c),o=l}}}if(Wb)throw e=q4,Wb=!1,q4=null,e}function An(e,t){var n=t[a_];n===void 0&&(n=t[a_]=new Set);var r=e+"__bubble";n.has(r)||(UB(t,e,2,!1),n.add(r))}function X7(e,t,n){var r=0;t&&(r|=4),UB(n,e,r,t)}var t5="_reactListening"+Math.random().toString(36).slice(2);function Ym(e){if(!e[t5]){e[t5]=!0,IF.forEach(function(n){n!=="selectionchange"&&(Qoe.has(n)||X7(n,!1,e),X7(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[t5]||(t[t5]=!0,X7("selectionchange",!1,t))}}function UB(e,t,n,r){switch(eB(t)){case 1:var i=foe;break;case 4:i=hoe;break;default:i=aI}n=i.bind(null,t,n,e),i=void 0,!Z4||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function j7(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=uf(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}$F(function(){var c=o,u=rI(n),d=[];e:{var f=pB.get(e);if(f!==void 0){var g=cI,U=e;switch(e){case"keypress":if(J5(n)===0)break e;case"keydown":case"keyup":g=Coe;break;case"focusin":U="focus",g=$7;break;case"focusout":U="blur",g=$7;break;case"beforeblur":case"afterblur":g=$7;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=pk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=moe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Roe;break;case dB:case fB:case hB:g=yoe;break;case gB:g=Moe;break;case"scroll":g=goe;break;case"wheel":g=Doe;break;case"copy":case"cut":case"paste":g=Eoe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Uk}var b=(t&4)!==0,v=!b&&e==="scroll",_=b?f!==null?f+"Capture":null:f;b=[];for(var E=c,w;E!==null;){w=E;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,_!==null&&(T=Hm(E,_),T!=null&&b.push(Zm(E,T,w)))),v)break;E=E.return}0<b.length&&(f=new g(f,U,null,n,u),d.push({event:f,listeners:b}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&n!==K4&&(U=n.relatedTarget||n.fromElement)&&(uf(U)||U[dc]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(U=n.relatedTarget||n.toElement,g=c,U=U?uf(U):null,U!==null&&(v=gh(U),U!==v||U.tag!==5&&U.tag!==6)&&(U=null)):(g=null,U=c),g!==U)){if(b=pk,T="onMouseLeave",_="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(b=Uk,T="onPointerLeave",_="onPointerEnter",E="pointer"),v=g==null?f:L1(g),w=U==null?f:L1(U),f=new b(T,E+"leave",g,n,u),f.target=v,f.relatedTarget=w,T=null,uf(u)===c&&(b=new b(_,E+"enter",U,n,u),b.target=w,b.relatedTarget=v,T=b),v=T,g&&U)t:{for(b=g,_=U,E=0,w=b;w;w=l1(w))E++;for(w=0,T=_;T;T=l1(T))w++;for(;0<E-w;)b=l1(b),E--;for(;0<w-E;)_=l1(_),w--;for(;E--;){if(b===_||_!==null&&b===_.alternate)break t;b=l1(b),_=l1(_)}b=null}else b=null;g!==null&&Ck(d,f,g,b,!1),U!==null&&v!==null&&Ck(d,v,U,b,!0)}}e:{if(f=c?L1(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var A=Voe;else if(vk(f))if(sB)A=Xoe;else{A=Woe;var M=Hoe}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=Goe);if(A&&(A=A(e,c))){oB(d,A,n,u);break e}M&&M(e,f,c),e==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&H4(f,"number",f.value)}switch(M=c?L1(c):window,e){case"focusin":(vk(M)||M.contentEditable==="true")&&(P1=M,t_=c,lm=null);break;case"focusout":lm=t_=P1=null;break;case"mousedown":n_=!0;break;case"contextmenu":case"mouseup":case"dragend":n_=!1,Tk(d,n,u);break;case"selectionchange":if(Yoe)break;case"keydown":case"keyup":Tk(d,n,u)}var S;if(dI)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else R1?rB(e,n)&&(x="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(nB&&n.locale!=="ko"&&(R1||x!=="onCompositionStart"?x==="onCompositionEnd"&&R1&&(S=tB()):(yu=u,lI="value"in yu?yu.value:yu.textContent,R1=!0)),M=Yb(c,x),0<M.length&&(x=new mk(x,e,null,n,u),d.push({event:x,listeners:M}),S?x.data=S:(S=iB(n),S!==null&&(x.data=S)))),(S=Ooe?Foe(e,n):Boe(e,n))&&(c=Yb(c,"onBeforeInput"),0<c.length&&(u=new mk("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=S))}mB(d,t)})}function Zm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yb(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Hm(e,n),o!=null&&r.unshift(Zm(e,o,i)),o=Hm(e,t),o!=null&&r.push(Zm(e,o,i))),e=e.return}return r}function l1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ck(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Hm(n,o),l!=null&&s.unshift(Zm(n,l,a))):i||(l=Hm(n,o),l!=null&&s.push(Zm(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Joe=/\r\n?/g,ese=/\u0000|\uFFFD/g;function Ak(e){return(typeof e=="string"?e:""+e).replace(Joe,`
`).replace(ese,"")}function n5(e,t,n){if(t=Ak(t),Ak(e)!==t&&n)throw Error(_e(425))}function Zb(){}var r_=null,i_=null;function o_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var s_=typeof setTimeout=="function"?setTimeout:void 0,tse=typeof clearTimeout=="function"?clearTimeout:void 0,kk=typeof Promise=="function"?Promise:void 0,nse=typeof queueMicrotask=="function"?queueMicrotask:typeof kk<"u"?function(e){return kk.resolve(null).then(e).catch(rse)}:s_;function rse(e){setTimeout(function(){throw e})}function K7(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Xm(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xm(t)}function Mu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Rk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var o0=Math.random().toString(36).slice(2),Ya="__reactFiber$"+o0,qm="__reactProps$"+o0,dc="__reactContainer$"+o0,a_="__reactEvents$"+o0,ise="__reactListeners$"+o0,ose="__reactHandles$"+o0;function uf(e){var t=e[Ya];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dc]||n[Ya]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Rk(e);e!==null;){if(n=e[Ya])return n;e=Rk(e)}return t}e=n,n=e.parentNode}return null}function K2(e){return e=e[Ya]||e[dc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function L1(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_e(33))}function W8(e){return e[qm]||null}var l_=[],D1=-1;function gd(e){return{current:e}}function kn(e){0>D1||(e.current=l_[D1],l_[D1]=null,D1--)}function xn(e,t){D1++,l_[D1]=e.current,e.current=t}var Yu={},Pi=gd(Yu),yo=gd(!1),Nf=Yu;function bg(e,t){var n=e.type.contextTypes;if(!n)return Yu;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function vo(e){return e=e.childContextTypes,e!=null}function qb(){kn(yo),kn(Pi)}function Pk(e,t,n){if(Pi.current!==Yu)throw Error(_e(168));xn(Pi,t),xn(yo,n)}function bB(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(_e(108,Hie(e)||"Unknown",i));return Kn({},n,r)}function Qb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yu,Nf=Pi.current,xn(Pi,e),xn(yo,yo.current),!0}function Mk(e,t,n){var r=e.stateNode;if(!r)throw Error(_e(169));n?(e=bB(e,t,Nf),r.__reactInternalMemoizedMergedChildContext=e,kn(yo),kn(Pi),xn(Pi,e)):kn(yo),xn(yo,n)}var Wl=null,G8=!1,Y7=!1;function yB(e){Wl===null?Wl=[e]:Wl.push(e)}function sse(e){G8=!0,yB(e)}function pd(){if(!Y7&&Wl!==null){Y7=!0;var e=0,t=dn;try{var n=Wl;for(dn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wl=null,G8=!1}catch(i){throw Wl!==null&&(Wl=Wl.slice(e+1)),WF(iI,pd),i}finally{dn=t,Y7=!1}}return null}var N1=[],O1=0,Jb=null,ey=0,ds=[],fs=0,Of=null,Yl=1,Zl="";function Xd(e,t){N1[O1++]=ey,N1[O1++]=Jb,Jb=e,ey=t}function vB(e,t,n){ds[fs++]=Yl,ds[fs++]=Zl,ds[fs++]=Of,Of=e;var r=Yl;e=Zl;var i=32-aa(r)-1;r&=~(1<<i),n+=1;var o=32-aa(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yl=1<<32-aa(t)+i|n<<i|r,Zl=o+e}else Yl=1<<o|n<<i|r,Zl=e}function hI(e){e.return!==null&&(Xd(e,1),vB(e,1,0))}function gI(e){for(;e===Jb;)Jb=N1[--O1],N1[O1]=null,ey=N1[--O1],N1[O1]=null;for(;e===Of;)Of=ds[--fs],ds[fs]=null,Zl=ds[--fs],ds[fs]=null,Yl=ds[--fs],ds[fs]=null}var $o=null,Lo=null,$n=!1,ea=null;function EB(e,t){var n=ps(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Lk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$o=e,Lo=Mu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$o=e,Lo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Of!==null?{id:Yl,overflow:Zl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ps(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$o=e,Lo=null,!0):!1;default:return!1}}function c_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function u_(e){if($n){var t=Lo;if(t){var n=t;if(!Lk(e,t)){if(c_(e))throw Error(_e(418));t=Mu(n.nextSibling);var r=$o;t&&Lk(e,t)?EB(r,n):(e.flags=e.flags&-4097|2,$n=!1,$o=e)}}else{if(c_(e))throw Error(_e(418));e.flags=e.flags&-4097|2,$n=!1,$o=e}}}function Dk(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$o=e}function r5(e){if(e!==$o)return!1;if(!$n)return Dk(e),$n=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!o_(e.type,e.memoizedProps)),t&&(t=Lo)){if(c_(e))throw _B(),Error(_e(418));for(;t;)EB(e,t),t=Mu(t.nextSibling)}if(Dk(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lo=Mu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lo=null}}else Lo=$o?Mu(e.stateNode.nextSibling):null;return!0}function _B(){for(var e=Lo;e;)e=Mu(e.nextSibling)}function yg(){Lo=$o=null,$n=!1}function pI(e){ea===null?ea=[e]:ea.push(e)}var ase=Rc.ReactCurrentBatchConfig;function Zs(e,t){if(e&&e.defaultProps){t=Kn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var ty=gd(null),ny=null,F1=null,mI=null;function UI(){mI=F1=ny=null}function bI(e){var t=ty.current;kn(ty),e._currentValue=t}function d_(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ig(e,t){ny=e,mI=F1=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(po=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(mI!==e)if(e={context:e,memoizedValue:t,next:null},F1===null){if(ny===null)throw Error(_e(308));F1=e,ny.dependencies={lanes:0,firstContext:e}}else F1=F1.next=e;return t}var df=null;function yI(e){df===null?df=[e]:df.push(e)}function wB(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,yI(t)):(n.next=i.next,i.next=n),t.interleaved=n,fc(e,r)}function fc(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var cu=!1;function vI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IB(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,fc(e,n)}return i=r.interleaved,i===null?(t.next=t,yI(r)):(t.next=i.next,i.next=t),r.interleaved=t,fc(e,n)}function eb(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oI(e,n)}}function Nk(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ry(e,t,n,r){var i=e.updateQueue;cu=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,g=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var U=e,b=a;switch(f=t,g=n,b.tag){case 1:if(U=b.payload,typeof U=="function"){d=U.call(g,d,f);break e}d=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=b.payload,f=typeof U=="function"?U.call(g,d,f):U,f==null)break e;d=Kn({},d,f);break e;case 2:cu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=d):u=u.next=g,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Bf|=s,e.lanes=s,e.memoizedState=d}}function Ok(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(_e(191,i));i.call(r)}}}var TB=new wF.Component().refs;function f_(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Kn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var X8={isMounted:function(e){return(e=e._reactInternals)?gh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ki(),i=Nu(e),o=tc(r,i);o.payload=t,n!=null&&(o.callback=n),t=Lu(e,o,i),t!==null&&(la(t,e,i,r),eb(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ki(),i=Nu(e),o=tc(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Lu(e,o,i),t!==null&&(la(t,e,i,r),eb(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ki(),r=Nu(e),i=tc(n,r);i.tag=2,t!=null&&(i.callback=t),t=Lu(e,i,r),t!==null&&(la(t,e,r,n),eb(t,e,r))}};function Fk(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Km(n,r)||!Km(i,o):!0}function xB(e,t,n){var r=!1,i=Yu,o=t.contextType;return typeof o=="object"&&o!==null?o=Cs(o):(i=vo(t)?Nf:Pi.current,r=t.contextTypes,o=(r=r!=null)?bg(e,i):Yu),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=X8,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Bk(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&X8.enqueueReplaceState(t,t.state,null)}function h_(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=TB,vI(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Cs(o):(o=vo(t)?Nf:Pi.current,i.context=bg(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(f_(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&X8.enqueueReplaceState(i,i.state,null),ry(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function hp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;a===TB&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,e))}return e}function i5(e,t){throw e=Object.prototype.toString.call(t),Error(_e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $k(e){var t=e._init;return t(e._payload)}function SB(e){function t(_,E){if(e){var w=_.deletions;w===null?(_.deletions=[E],_.flags|=16):w.push(E)}}function n(_,E){if(!e)return null;for(;E!==null;)t(_,E),E=E.sibling;return null}function r(_,E){for(_=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function i(_,E){return _=Ou(_,E),_.index=0,_.sibling=null,_}function o(_,E,w){return _.index=w,e?(w=_.alternate,w!==null?(w=w.index,w<E?(_.flags|=2,E):w):(_.flags|=2,E)):(_.flags|=1048576,E)}function s(_){return e&&_.alternate===null&&(_.flags|=2),_}function a(_,E,w,T){return E===null||E.tag!==6?(E=nE(w,_.mode,T),E.return=_,E):(E=i(E,w),E.return=_,E)}function l(_,E,w,T){var A=w.type;return A===k1?u(_,E,w.props.children,T,w.key):E!==null&&(E.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===lu&&$k(A)===E.type)?(T=i(E,w.props),T.ref=hp(_,E,w),T.return=_,T):(T=sb(w.type,w.key,w.props,null,_.mode,T),T.ref=hp(_,E,w),T.return=_,T)}function c(_,E,w,T){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=rE(w,_.mode,T),E.return=_,E):(E=i(E,w.children||[]),E.return=_,E)}function u(_,E,w,T,A){return E===null||E.tag!==7?(E=If(w,_.mode,T,A),E.return=_,E):(E=i(E,w),E.return=_,E)}function d(_,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=nE(""+E,_.mode,w),E.return=_,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case j6:return w=sb(E.type,E.key,E.props,null,_.mode,w),w.ref=hp(_,null,E),w.return=_,w;case A1:return E=rE(E,_.mode,w),E.return=_,E;case lu:var T=E._init;return d(_,T(E._payload),w)}if(Fp(E)||lp(E))return E=If(E,_.mode,w,null),E.return=_,E;i5(_,E)}return null}function f(_,E,w,T){var A=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(_,E,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case j6:return w.key===A?l(_,E,w,T):null;case A1:return w.key===A?c(_,E,w,T):null;case lu:return A=w._init,f(_,E,A(w._payload),T)}if(Fp(w)||lp(w))return A!==null?null:u(_,E,w,T,null);i5(_,w)}return null}function g(_,E,w,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return _=_.get(w)||null,a(E,_,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case j6:return _=_.get(T.key===null?w:T.key)||null,l(E,_,T,A);case A1:return _=_.get(T.key===null?w:T.key)||null,c(E,_,T,A);case lu:var M=T._init;return g(_,E,w,M(T._payload),A)}if(Fp(T)||lp(T))return _=_.get(w)||null,u(E,_,T,A,null);i5(E,T)}return null}function U(_,E,w,T){for(var A=null,M=null,S=E,x=E=0,C=null;S!==null&&x<w.length;x++){S.index>x?(C=S,S=null):C=S.sibling;var R=f(_,S,w[x],T);if(R===null){S===null&&(S=C);break}e&&S&&R.alternate===null&&t(_,S),E=o(R,E,x),M===null?A=R:M.sibling=R,M=R,S=C}if(x===w.length)return n(_,S),$n&&Xd(_,x),A;if(S===null){for(;x<w.length;x++)S=d(_,w[x],T),S!==null&&(E=o(S,E,x),M===null?A=S:M.sibling=S,M=S);return $n&&Xd(_,x),A}for(S=r(_,S);x<w.length;x++)C=g(S,_,x,w[x],T),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?x:C.key),E=o(C,E,x),M===null?A=C:M.sibling=C,M=C);return e&&S.forEach(function(O){return t(_,O)}),$n&&Xd(_,x),A}function b(_,E,w,T){var A=lp(w);if(typeof A!="function")throw Error(_e(150));if(w=A.call(w),w==null)throw Error(_e(151));for(var M=A=null,S=E,x=E=0,C=null,R=w.next();S!==null&&!R.done;x++,R=w.next()){S.index>x?(C=S,S=null):C=S.sibling;var O=f(_,S,R.value,T);if(O===null){S===null&&(S=C);break}e&&S&&O.alternate===null&&t(_,S),E=o(O,E,x),M===null?A=O:M.sibling=O,M=O,S=C}if(R.done)return n(_,S),$n&&Xd(_,x),A;if(S===null){for(;!R.done;x++,R=w.next())R=d(_,R.value,T),R!==null&&(E=o(R,E,x),M===null?A=R:M.sibling=R,M=R);return $n&&Xd(_,x),A}for(S=r(_,S);!R.done;x++,R=w.next())R=g(S,_,x,R.value,T),R!==null&&(e&&R.alternate!==null&&S.delete(R.key===null?x:R.key),E=o(R,E,x),M===null?A=R:M.sibling=R,M=R);return e&&S.forEach(function(F){return t(_,F)}),$n&&Xd(_,x),A}function v(_,E,w,T){if(typeof w=="object"&&w!==null&&w.type===k1&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case j6:e:{for(var A=w.key,M=E;M!==null;){if(M.key===A){if(A=w.type,A===k1){if(M.tag===7){n(_,M.sibling),E=i(M,w.props.children),E.return=_,_=E;break e}}else if(M.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===lu&&$k(A)===M.type){n(_,M.sibling),E=i(M,w.props),E.ref=hp(_,M,w),E.return=_,_=E;break e}n(_,M);break}else t(_,M);M=M.sibling}w.type===k1?(E=If(w.props.children,_.mode,T,w.key),E.return=_,_=E):(T=sb(w.type,w.key,w.props,null,_.mode,T),T.ref=hp(_,E,w),T.return=_,_=T)}return s(_);case A1:e:{for(M=w.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(_,E.sibling),E=i(E,w.children||[]),E.return=_,_=E;break e}else{n(_,E);break}else t(_,E);E=E.sibling}E=rE(w,_.mode,T),E.return=_,_=E}return s(_);case lu:return M=w._init,v(_,E,M(w._payload),T)}if(Fp(w))return U(_,E,w,T);if(lp(w))return b(_,E,w,T);i5(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(n(_,E.sibling),E=i(E,w),E.return=_,_=E):(n(_,E),E=nE(w,_.mode,T),E.return=_,_=E),s(_)):n(_,E)}return v}var vg=SB(!0),CB=SB(!1),Y2={},rl=gd(Y2),Qm=gd(Y2),Jm=gd(Y2);function ff(e){if(e===Y2)throw Error(_e(174));return e}function EI(e,t){switch(xn(Jm,t),xn(Qm,e),xn(rl,Y2),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:G4(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=G4(t,e)}kn(rl),xn(rl,t)}function Eg(){kn(rl),kn(Qm),kn(Jm)}function AB(e){ff(Jm.current);var t=ff(rl.current),n=G4(t,e.type);t!==n&&(xn(Qm,e),xn(rl,n))}function _I(e){Qm.current===e&&(kn(rl),kn(Qm))}var Wn=gd(0);function iy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Z7=[];function wI(){for(var e=0;e<Z7.length;e++)Z7[e]._workInProgressVersionPrimary=null;Z7.length=0}var tb=Rc.ReactCurrentDispatcher,q7=Rc.ReactCurrentBatchConfig,Ff=0,jn=null,Rr=null,Wr=null,oy=!1,cm=!1,e2=0,lse=0;function Ui(){throw Error(_e(321))}function II(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ma(e[n],t[n]))return!1;return!0}function TI(e,t,n,r,i,o){if(Ff=o,jn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tb.current=e===null||e.memoizedState===null?fse:hse,e=n(r,i),cm){o=0;do{if(cm=!1,e2=0,25<=o)throw Error(_e(301));o+=1,Wr=Rr=null,t.updateQueue=null,tb.current=gse,e=n(r,i)}while(cm)}if(tb.current=sy,t=Rr!==null&&Rr.next!==null,Ff=0,Wr=Rr=jn=null,oy=!1,t)throw Error(_e(300));return e}function xI(){var e=e2!==0;return e2=0,e}function Fa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?jn.memoizedState=Wr=e:Wr=Wr.next=e,Wr}function As(){if(Rr===null){var e=jn.alternate;e=e!==null?e.memoizedState:null}else e=Rr.next;var t=Wr===null?jn.memoizedState:Wr.next;if(t!==null)Wr=t,Rr=e;else{if(e===null)throw Error(_e(310));Rr=e,e={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},Wr===null?jn.memoizedState=Wr=e:Wr=Wr.next=e}return Wr}function t2(e,t){return typeof t=="function"?t(e):t}function Q7(e){var t=As(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var r=Rr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Ff&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,jn.lanes|=u,Bf|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,ma(r,t.memoizedState)||(po=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,jn.lanes|=o,Bf|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function J7(e){var t=As(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);ma(o,t.memoizedState)||(po=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function kB(){}function RB(e,t){var n=jn,r=As(),i=t(),o=!ma(r.memoizedState,i);if(o&&(r.memoizedState=i,po=!0),r=r.queue,SI(LB.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Wr!==null&&Wr.memoizedState.tag&1){if(n.flags|=2048,n2(9,MB.bind(null,n,r,i,t),void 0,null),Yr===null)throw Error(_e(349));Ff&30||PB(n,t,i)}return i}function PB(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jn.updateQueue,t===null?(t={lastEffect:null,stores:null},jn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function MB(e,t,n,r){t.value=n,t.getSnapshot=r,DB(t)&&NB(e)}function LB(e,t,n){return n(function(){DB(t)&&NB(e)})}function DB(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ma(e,n)}catch{return!0}}function NB(e){var t=fc(e,1);t!==null&&la(t,e,1,-1)}function zk(e){var t=Fa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t2,lastRenderedState:e},t.queue=e,e=e.dispatch=dse.bind(null,jn,e),[t.memoizedState,e]}function n2(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jn.updateQueue,t===null?(t={lastEffect:null,stores:null},jn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function OB(){return As().memoizedState}function nb(e,t,n,r){var i=Fa();jn.flags|=e,i.memoizedState=n2(1|t,n,void 0,r===void 0?null:r)}function j8(e,t,n,r){var i=As();r=r===void 0?null:r;var o=void 0;if(Rr!==null){var s=Rr.memoizedState;if(o=s.destroy,r!==null&&II(r,s.deps)){i.memoizedState=n2(t,n,o,r);return}}jn.flags|=e,i.memoizedState=n2(1|t,n,o,r)}function Vk(e,t){return nb(8390656,8,e,t)}function SI(e,t){return j8(2048,8,e,t)}function FB(e,t){return j8(4,2,e,t)}function BB(e,t){return j8(4,4,e,t)}function $B(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zB(e,t,n){return n=n!=null?n.concat([e]):null,j8(4,4,$B.bind(null,t,e),n)}function CI(){}function VB(e,t){var n=As();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&II(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function HB(e,t){var n=As();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&II(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function WB(e,t,n){return Ff&21?(ma(n,t)||(n=jF(),jn.lanes|=n,Bf|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,po=!0),e.memoizedState=n)}function cse(e,t){var n=dn;dn=n!==0&&4>n?n:4,e(!0);var r=q7.transition;q7.transition={};try{e(!1),t()}finally{dn=n,q7.transition=r}}function GB(){return As().memoizedState}function use(e,t,n){var r=Nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XB(e))jB(t,n);else if(n=wB(e,t,n,r),n!==null){var i=Ki();la(n,e,r,i),KB(n,t,r)}}function dse(e,t,n){var r=Nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XB(e))jB(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ma(a,s)){var l=t.interleaved;l===null?(i.next=i,yI(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=wB(e,t,i,r),n!==null&&(i=Ki(),la(n,e,r,i),KB(n,t,r))}}function XB(e){var t=e.alternate;return e===jn||t!==null&&t===jn}function jB(e,t){cm=oy=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function KB(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oI(e,n)}}var sy={readContext:Cs,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},fse={readContext:Cs,useCallback:function(e,t){return Fa().memoizedState=[e,t===void 0?null:t],e},useContext:Cs,useEffect:Vk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,nb(4194308,4,$B.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nb(4194308,4,e,t)},useInsertionEffect:function(e,t){return nb(4,2,e,t)},useMemo:function(e,t){var n=Fa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fa();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=use.bind(null,jn,e),[r.memoizedState,e]},useRef:function(e){var t=Fa();return e={current:e},t.memoizedState=e},useState:zk,useDebugValue:CI,useDeferredValue:function(e){return Fa().memoizedState=e},useTransition:function(){var e=zk(!1),t=e[0];return e=cse.bind(null,e[1]),Fa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jn,i=Fa();if($n){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=t(),Yr===null)throw Error(_e(349));Ff&30||PB(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vk(LB.bind(null,r,o,e),[e]),r.flags|=2048,n2(9,MB.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Fa(),t=Yr.identifierPrefix;if($n){var n=Zl,r=Yl;n=(r&~(1<<32-aa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=e2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lse++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hse={readContext:Cs,useCallback:VB,useContext:Cs,useEffect:SI,useImperativeHandle:zB,useInsertionEffect:FB,useLayoutEffect:BB,useMemo:HB,useReducer:Q7,useRef:OB,useState:function(){return Q7(t2)},useDebugValue:CI,useDeferredValue:function(e){var t=As();return WB(t,Rr.memoizedState,e)},useTransition:function(){var e=Q7(t2)[0],t=As().memoizedState;return[e,t]},useMutableSource:kB,useSyncExternalStore:RB,useId:GB,unstable_isNewReconciler:!1},gse={readContext:Cs,useCallback:VB,useContext:Cs,useEffect:SI,useImperativeHandle:zB,useInsertionEffect:FB,useLayoutEffect:BB,useMemo:HB,useReducer:J7,useRef:OB,useState:function(){return J7(t2)},useDebugValue:CI,useDeferredValue:function(e){var t=As();return Rr===null?t.memoizedState=e:WB(t,Rr.memoizedState,e)},useTransition:function(){var e=J7(t2)[0],t=As().memoizedState;return[e,t]},useMutableSource:kB,useSyncExternalStore:RB,useId:GB,unstable_isNewReconciler:!1};function _g(e,t){try{var n="",r=t;do n+=Vie(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function eE(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function g_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pse=typeof WeakMap=="function"?WeakMap:Map;function YB(e,t,n){n=tc(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ly||(ly=!0,I_=r),g_(e,t)},n}function ZB(e,t,n){n=tc(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){g_(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){g_(e,t),typeof r!="function"&&(Du===null?Du=new Set([this]):Du.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Hk(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pse;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ase.bind(null,e,t,n),t.then(e,e))}function Wk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gk(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tc(-1,1),t.tag=2,Lu(n,t,1))),n.lanes|=1),e)}var mse=Rc.ReactCurrentOwner,po=!1;function Hi(e,t,n,r){t.child=e===null?CB(t,null,n,r):vg(t,e.child,n,r)}function Xk(e,t,n,r,i){n=n.render;var o=t.ref;return ig(t,i),r=TI(e,t,n,r,o,i),n=xI(),e!==null&&!po?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hc(e,t,i)):($n&&n&&hI(t),t.flags|=1,Hi(e,t,r,i),t.child)}function jk(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!NI(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,qB(e,t,o,r,i)):(e=sb(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Km,n(s,r)&&e.ref===t.ref)return hc(e,t,i)}return t.flags|=1,e=Ou(o,r),e.ref=t.ref,e.return=t,t.child=e}function qB(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Km(o,r)&&e.ref===t.ref)if(po=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(po=!0);else return t.lanes=e.lanes,hc(e,t,i)}return p_(e,t,n,r,i)}function QB(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn($1,Po),Po|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xn($1,Po),Po|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,xn($1,Po),Po|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,xn($1,Po),Po|=r;return Hi(e,t,i,n),t.child}function JB(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function p_(e,t,n,r,i){var o=vo(n)?Nf:Pi.current;return o=bg(t,o),ig(t,i),n=TI(e,t,n,r,o,i),r=xI(),e!==null&&!po?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hc(e,t,i)):($n&&r&&hI(t),t.flags|=1,Hi(e,t,n,i),t.child)}function Kk(e,t,n,r,i){if(vo(n)){var o=!0;Qb(t)}else o=!1;if(ig(t,i),t.stateNode===null)rb(e,t),xB(t,n,r),h_(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Cs(c):(c=vo(n)?Nf:Pi.current,c=bg(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Bk(t,s,r,c),cu=!1;var f=t.memoizedState;s.state=f,ry(t,r,s,i),l=t.memoizedState,a!==r||f!==l||yo.current||cu?(typeof u=="function"&&(f_(t,n,u,r),l=t.memoizedState),(a=cu||Fk(t,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,IB(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Zs(t.type,a),s.props=c,d=t.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Cs(l):(l=vo(n)?Nf:Pi.current,l=bg(t,l));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Bk(t,s,r,l),cu=!1,f=t.memoizedState,s.state=f,ry(t,r,s,i);var U=t.memoizedState;a!==d||f!==U||yo.current||cu?(typeof g=="function"&&(f_(t,n,g,r),U=t.memoizedState),(c=cu||Fk(t,n,c,r,f,U,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,U,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,U,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=U),s.props=r,s.state=U,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return m_(e,t,n,r,o,i)}function m_(e,t,n,r,i,o){JB(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&Mk(t,n,!1),hc(e,t,o);r=t.stateNode,mse.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=vg(t,e.child,null,o),t.child=vg(t,null,a,o)):Hi(e,t,a,o),t.memoizedState=r.state,i&&Mk(t,n,!0),t.child}function e$(e){var t=e.stateNode;t.pendingContext?Pk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pk(e,t.context,!1),EI(e,t.containerInfo)}function Yk(e,t,n,r,i){return yg(),pI(i),t.flags|=256,Hi(e,t,n,r),t.child}var U_={dehydrated:null,treeContext:null,retryLane:0};function b_(e){return{baseLanes:e,cachePool:null,transitions:null}}function t$(e,t,n){var r=t.pendingProps,i=Wn.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),xn(Wn,i&1),e===null)return u_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Z8(s,r,0,null),e=If(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=b_(n),t.memoizedState=U_,e):AI(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Use(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ou(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ou(a,o):(o=If(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?b_(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=U_,r}return o=e.child,e=o.sibling,r=Ou(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function AI(e,t){return t=Z8({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function o5(e,t,n,r){return r!==null&&pI(r),vg(t,e.child,null,n),e=AI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Use(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=eE(Error(_e(422))),o5(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Z8({mode:"visible",children:r.children},i,0,null),o=If(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&vg(t,e.child,null,s),t.child.memoizedState=b_(s),t.memoizedState=U_,o);if(!(t.mode&1))return o5(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(_e(419)),r=eE(o,r,void 0),o5(e,t,s,r)}if(a=(s&e.childLanes)!==0,po||a){if(r=Yr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,fc(e,i),la(r,e,i,-1))}return DI(),r=eE(Error(_e(421))),o5(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=kse.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Lo=Mu(i.nextSibling),$o=t,$n=!0,ea=null,e!==null&&(ds[fs++]=Yl,ds[fs++]=Zl,ds[fs++]=Of,Yl=e.id,Zl=e.overflow,Of=t),t=AI(t,r.children),t.flags|=4096,t)}function Zk(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),d_(e.return,t,n)}function tE(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function n$(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Hi(e,t,r.children,n),r=Wn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zk(e,n,t);else if(e.tag===19)Zk(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xn(Wn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&iy(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),tE(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&iy(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}tE(t,!0,n,null,o);break;case"together":tE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rb(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bf|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_e(153));if(t.child!==null){for(e=t.child,n=Ou(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ou(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bse(e,t,n){switch(t.tag){case 3:e$(t),yg();break;case 5:AB(t);break;case 1:vo(t.type)&&Qb(t);break;case 4:EI(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xn(ty,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xn(Wn,Wn.current&1),t.flags|=128,null):n&t.child.childLanes?t$(e,t,n):(xn(Wn,Wn.current&1),e=hc(e,t,n),e!==null?e.sibling:null);xn(Wn,Wn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return n$(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xn(Wn,Wn.current),r)break;return null;case 22:case 23:return t.lanes=0,QB(e,t,n)}return hc(e,t,n)}var r$,y_,i$,o$;r$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};y_=function(){};i$=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ff(rl.current);var o=null;switch(n){case"input":i=z4(e,i),r=z4(e,r),o=[];break;case"select":i=Kn({},i,{value:void 0}),r=Kn({},r,{value:void 0}),o=[];break;case"textarea":i=W4(e,i),r=W4(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Zb)}X4(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zm.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&An("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};o$=function(e,t,n,r){n!==r&&(t.flags|=4)};function gp(e,t){if(!$n)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function yse(e,t,n){var r=t.pendingProps;switch(gI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(t),null;case 1:return vo(t.type)&&qb(),bi(t),null;case 3:return r=t.stateNode,Eg(),kn(yo),kn(Pi),wI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(r5(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ea!==null&&(S_(ea),ea=null))),y_(e,t),bi(t),null;case 5:_I(t);var i=ff(Jm.current);if(n=t.type,e!==null&&t.stateNode!=null)i$(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_e(166));return bi(t),null}if(e=ff(rl.current),r5(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ya]=t,r[qm]=o,e=(t.mode&1)!==0,n){case"dialog":An("cancel",r),An("close",r);break;case"iframe":case"object":case"embed":An("load",r);break;case"video":case"audio":for(i=0;i<$p.length;i++)An($p[i],r);break;case"source":An("error",r);break;case"img":case"image":case"link":An("error",r),An("load",r);break;case"details":An("toggle",r);break;case"input":ok(r,o),An("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},An("invalid",r);break;case"textarea":ak(r,o),An("invalid",r)}X4(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&n5(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&n5(r.textContent,a,e),i=["children",""+a]):zm.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&An("scroll",r)}switch(n){case"input":K6(r),sk(r,o,!0);break;case"textarea":K6(r),lk(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Zb)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=PF(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Ya]=t,e[qm]=r,r$(e,t,!1,!1),t.stateNode=e;e:{switch(s=j4(n,r),n){case"dialog":An("cancel",e),An("close",e),i=r;break;case"iframe":case"object":case"embed":An("load",e),i=r;break;case"video":case"audio":for(i=0;i<$p.length;i++)An($p[i],e);i=r;break;case"source":An("error",e),i=r;break;case"img":case"image":case"link":An("error",e),An("load",e),i=r;break;case"details":An("toggle",e),i=r;break;case"input":ok(e,r),i=z4(e,r),An("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Kn({},r,{value:void 0}),An("invalid",e);break;case"textarea":ak(e,r),i=W4(e,r),An("invalid",e);break;default:i=r}X4(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?DF(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&MF(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vm(e,l):typeof l=="number"&&Vm(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(zm.hasOwnProperty(o)?l!=null&&o==="onScroll"&&An("scroll",e):l!=null&&J9(e,o,l,s))}switch(n){case"input":K6(e),sk(e,r,!1);break;case"textarea":K6(e),lk(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ku(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?eg(e,!!r.multiple,o,!1):r.defaultValue!=null&&eg(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Zb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bi(t),null;case 6:if(e&&t.stateNode!=null)o$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_e(166));if(n=ff(Jm.current),ff(rl.current),r5(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ya]=t,(o=r.nodeValue!==n)&&(e=$o,e!==null))switch(e.tag){case 3:n5(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&n5(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ya]=t,t.stateNode=r}return bi(t),null;case 13:if(kn(Wn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($n&&Lo!==null&&t.mode&1&&!(t.flags&128))_B(),yg(),t.flags|=98560,o=!1;else if(o=r5(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(_e(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(_e(317));o[Ya]=t}else yg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bi(t),o=!1}else ea!==null&&(S_(ea),ea=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Wn.current&1?Dr===0&&(Dr=3):DI())),t.updateQueue!==null&&(t.flags|=4),bi(t),null);case 4:return Eg(),y_(e,t),e===null&&Ym(t.stateNode.containerInfo),bi(t),null;case 10:return bI(t.type._context),bi(t),null;case 17:return vo(t.type)&&qb(),bi(t),null;case 19:if(kn(Wn),o=t.memoizedState,o===null)return bi(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)gp(o,!1);else{if(Dr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=iy(e),s!==null){for(t.flags|=128,gp(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xn(Wn,Wn.current&1|2),t.child}e=e.sibling}o.tail!==null&&ur()>wg&&(t.flags|=128,r=!0,gp(o,!1),t.lanes=4194304)}else{if(!r)if(e=iy(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gp(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!$n)return bi(t),null}else 2*ur()-o.renderingStartTime>wg&&n!==1073741824&&(t.flags|=128,r=!0,gp(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ur(),t.sibling=null,n=Wn.current,xn(Wn,r?n&1|2:n&1),t):(bi(t),null);case 22:case 23:return LI(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Po&1073741824&&(bi(t),t.subtreeFlags&6&&(t.flags|=8192)):bi(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function vse(e,t){switch(gI(t),t.tag){case 1:return vo(t.type)&&qb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Eg(),kn(yo),kn(Pi),wI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _I(t),null;case 13:if(kn(Wn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));yg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kn(Wn),null;case 4:return Eg(),null;case 10:return bI(t.type._context),null;case 22:case 23:return LI(),null;case 24:return null;default:return null}}var s5=!1,Ti=!1,Ese=typeof WeakSet=="function"?WeakSet:Set,$e=null;function B1(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nr(e,t,r)}else n.current=null}function v_(e,t,n){try{n()}catch(r){nr(e,t,r)}}var qk=!1;function _se(e,t){if(r_=jb,e=cB(),fI(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===e)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(i_={focusedElem:e,selectionRange:n},jb=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){t=$e;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var b=U.memoizedProps,v=U.memoizedState,_=t.stateNode,E=_.getSnapshotBeforeUpdate(t.elementType===t.type?b:Zs(t.type,b),v);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(T){nr(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}return U=qk,qk=!1,U}function um(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&v_(t,n,o)}i=i.next}while(i!==r)}}function K8(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function E_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function s$(e){var t=e.alternate;t!==null&&(e.alternate=null,s$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ya],delete t[qm],delete t[a_],delete t[ise],delete t[ose])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function a$(e){return e.tag===5||e.tag===3||e.tag===4}function Qk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||a$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function __(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zb));else if(r!==4&&(e=e.child,e!==null))for(__(e,t,n),e=e.sibling;e!==null;)__(e,t,n),e=e.sibling}function w_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(w_(e,t,n),e=e.sibling;e!==null;)w_(e,t,n),e=e.sibling}var ii=null,Qs=!1;function Jc(e,t,n){for(n=n.child;n!==null;)l$(e,t,n),n=n.sibling}function l$(e,t,n){if(nl&&typeof nl.onCommitFiberUnmount=="function")try{nl.onCommitFiberUnmount($8,n)}catch{}switch(n.tag){case 5:Ti||B1(n,t);case 6:var r=ii,i=Qs;ii=null,Jc(e,t,n),ii=r,Qs=i,ii!==null&&(Qs?(e=ii,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ii.removeChild(n.stateNode));break;case 18:ii!==null&&(Qs?(e=ii,n=n.stateNode,e.nodeType===8?K7(e.parentNode,n):e.nodeType===1&&K7(e,n),Xm(e)):K7(ii,n.stateNode));break;case 4:r=ii,i=Qs,ii=n.stateNode.containerInfo,Qs=!0,Jc(e,t,n),ii=r,Qs=i;break;case 0:case 11:case 14:case 15:if(!Ti&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&v_(n,t,s),i=i.next}while(i!==r)}Jc(e,t,n);break;case 1:if(!Ti&&(B1(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nr(n,t,a)}Jc(e,t,n);break;case 21:Jc(e,t,n);break;case 22:n.mode&1?(Ti=(r=Ti)||n.memoizedState!==null,Jc(e,t,n),Ti=r):Jc(e,t,n);break;default:Jc(e,t,n)}}function Jk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ese),t.forEach(function(r){var i=Rse.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hs(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:ii=a.stateNode,Qs=!1;break e;case 3:ii=a.stateNode.containerInfo,Qs=!0;break e;case 4:ii=a.stateNode.containerInfo,Qs=!0;break e}a=a.return}if(ii===null)throw Error(_e(160));l$(o,s,i),ii=null,Qs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){nr(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)c$(t,e),t=t.sibling}function c$(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hs(t,e),Pa(e),r&4){try{um(3,e,e.return),K8(3,e)}catch(b){nr(e,e.return,b)}try{um(5,e,e.return)}catch(b){nr(e,e.return,b)}}break;case 1:Hs(t,e),Pa(e),r&512&&n!==null&&B1(n,n.return);break;case 5:if(Hs(t,e),Pa(e),r&512&&n!==null&&B1(n,n.return),e.flags&32){var i=e.stateNode;try{Vm(i,"")}catch(b){nr(e,e.return,b)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&kF(i,o),j4(a,s);var c=j4(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?DF(i,d):u==="dangerouslySetInnerHTML"?MF(i,d):u==="children"?Vm(i,d):J9(i,u,d,c)}switch(a){case"input":V4(i,o);break;case"textarea":RF(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?eg(i,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?eg(i,!!o.multiple,o.defaultValue,!0):eg(i,!!o.multiple,o.multiple?[]:"",!1))}i[qm]=o}catch(b){nr(e,e.return,b)}}break;case 6:if(Hs(t,e),Pa(e),r&4){if(e.stateNode===null)throw Error(_e(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(b){nr(e,e.return,b)}}break;case 3:if(Hs(t,e),Pa(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xm(t.containerInfo)}catch(b){nr(e,e.return,b)}break;case 4:Hs(t,e),Pa(e);break;case 13:Hs(t,e),Pa(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(PI=ur())),r&4&&Jk(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Ti=(c=Ti)||u,Hs(t,e),Ti=c):Hs(t,e),Pa(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for($e=e,u=e.child;u!==null;){for(d=$e=u;$e!==null;){switch(f=$e,g=f.child,f.tag){case 0:case 11:case 14:case 15:um(4,f,f.return);break;case 1:B1(f,f.return);var U=f.stateNode;if(typeof U.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(b){nr(r,n,b)}}break;case 5:B1(f,f.return);break;case 22:if(f.memoizedState!==null){tR(d);continue}}g!==null?(g.return=f,$e=g):tR(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=LF("display",s))}catch(b){nr(e,e.return,b)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){nr(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Hs(t,e),Pa(e),r&4&&Jk(e);break;case 21:break;default:Hs(t,e),Pa(e)}}function Pa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(a$(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vm(i,""),r.flags&=-33);var o=Qk(e);w_(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Qk(e);__(e,a,s);break;default:throw Error(_e(161))}}catch(l){nr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wse(e,t,n){$e=e,u$(e)}function u$(e,t,n){for(var r=(e.mode&1)!==0;$e!==null;){var i=$e,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||s5;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ti;a=s5;var c=Ti;if(s5=s,(Ti=l)&&!c)for($e=i;$e!==null;)s=$e,l=s.child,s.tag===22&&s.memoizedState!==null?nR(i):l!==null?(l.return=s,$e=l):nR(i);for(;o!==null;)$e=o,u$(o),o=o.sibling;$e=i,s5=a,Ti=c}eR(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,$e=o):eR(e)}}function eR(e){for(;$e!==null;){var t=$e;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ti||K8(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ti)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Zs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ok(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ok(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Xm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}Ti||t.flags&512&&E_(t)}catch(f){nr(t,t.return,f)}}if(t===e){$e=null;break}if(n=t.sibling,n!==null){n.return=t.return,$e=n;break}$e=t.return}}function tR(e){for(;$e!==null;){var t=$e;if(t===e){$e=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$e=n;break}$e=t.return}}function nR(e){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{K8(4,t)}catch(l){nr(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){nr(t,i,l)}}var o=t.return;try{E_(t)}catch(l){nr(t,o,l)}break;case 5:var s=t.return;try{E_(t)}catch(l){nr(t,s,l)}}}catch(l){nr(t,t.return,l)}if(t===e){$e=null;break}var a=t.sibling;if(a!==null){a.return=t.return,$e=a;break}$e=t.return}}var Ise=Math.ceil,ay=Rc.ReactCurrentDispatcher,kI=Rc.ReactCurrentOwner,Es=Rc.ReactCurrentBatchConfig,Vt=0,Yr=null,yr=null,ci=0,Po=0,$1=gd(0),Dr=0,r2=null,Bf=0,Y8=0,RI=0,dm=null,fo=null,PI=0,wg=1/0,$l=null,ly=!1,I_=null,Du=null,a5=!1,vu=null,cy=0,fm=0,T_=null,ib=-1,ob=0;function Ki(){return Vt&6?ur():ib!==-1?ib:ib=ur()}function Nu(e){return e.mode&1?Vt&2&&ci!==0?ci&-ci:ase.transition!==null?(ob===0&&(ob=jF()),ob):(e=dn,e!==0||(e=window.event,e=e===void 0?16:eB(e.type)),e):1}function la(e,t,n,r){if(50<fm)throw fm=0,T_=null,Error(_e(185));X2(e,n,r),(!(Vt&2)||e!==Yr)&&(e===Yr&&(!(Vt&2)&&(Y8|=n),Dr===4&&pu(e,ci)),Eo(e,r),n===1&&Vt===0&&!(t.mode&1)&&(wg=ur()+500,G8&&pd()))}function Eo(e,t){var n=e.callbackNode;aoe(e,t);var r=Xb(e,e===Yr?ci:0);if(r===0)n!==null&&dk(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&dk(n),t===1)e.tag===0?sse(rR.bind(null,e)):yB(rR.bind(null,e)),nse(function(){!(Vt&6)&&pd()}),n=null;else{switch(KF(r)){case 1:n=iI;break;case 4:n=GF;break;case 16:n=Gb;break;case 536870912:n=XF;break;default:n=Gb}n=b$(n,d$.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function d$(e,t){if(ib=-1,ob=0,Vt&6)throw Error(_e(327));var n=e.callbackNode;if(og()&&e.callbackNode!==n)return null;var r=Xb(e,e===Yr?ci:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=uy(e,r);else{t=r;var i=Vt;Vt|=2;var o=h$();(Yr!==e||ci!==t)&&($l=null,wg=ur()+500,wf(e,t));do try{Sse();break}catch(a){f$(e,a)}while(!0);UI(),ay.current=o,Vt=i,yr!==null?t=0:(Yr=null,ci=0,t=Dr)}if(t!==0){if(t===2&&(i=Q4(e),i!==0&&(r=i,t=x_(e,i))),t===1)throw n=r2,wf(e,0),pu(e,r),Eo(e,ur()),n;if(t===6)pu(e,r);else{if(i=e.current.alternate,!(r&30)&&!Tse(i)&&(t=uy(e,r),t===2&&(o=Q4(e),o!==0&&(r=o,t=x_(e,o))),t===1))throw n=r2,wf(e,0),pu(e,r),Eo(e,ur()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(_e(345));case 2:jd(e,fo,$l);break;case 3:if(pu(e,r),(r&130023424)===r&&(t=PI+500-ur(),10<t)){if(Xb(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ki(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=s_(jd.bind(null,e,fo,$l),t);break}jd(e,fo,$l);break;case 4:if(pu(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-aa(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=ur()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ise(r/1960))-r,10<r){e.timeoutHandle=s_(jd.bind(null,e,fo,$l),r);break}jd(e,fo,$l);break;case 5:jd(e,fo,$l);break;default:throw Error(_e(329))}}}return Eo(e,ur()),e.callbackNode===n?d$.bind(null,e):null}function x_(e,t){var n=dm;return e.current.memoizedState.isDehydrated&&(wf(e,t).flags|=256),e=uy(e,t),e!==2&&(t=fo,fo=n,t!==null&&S_(t)),e}function S_(e){fo===null?fo=e:fo.push.apply(fo,e)}function Tse(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ma(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pu(e,t){for(t&=~RI,t&=~Y8,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-aa(t),r=1<<n;e[n]=-1,t&=~r}}function rR(e){if(Vt&6)throw Error(_e(327));og();var t=Xb(e,0);if(!(t&1))return Eo(e,ur()),null;var n=uy(e,t);if(e.tag!==0&&n===2){var r=Q4(e);r!==0&&(t=r,n=x_(e,r))}if(n===1)throw n=r2,wf(e,0),pu(e,t),Eo(e,ur()),n;if(n===6)throw Error(_e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jd(e,fo,$l),Eo(e,ur()),null}function MI(e,t){var n=Vt;Vt|=1;try{return e(t)}finally{Vt=n,Vt===0&&(wg=ur()+500,G8&&pd())}}function $f(e){vu!==null&&vu.tag===0&&!(Vt&6)&&og();var t=Vt;Vt|=1;var n=Es.transition,r=dn;try{if(Es.transition=null,dn=1,e)return e()}finally{dn=r,Es.transition=n,Vt=t,!(Vt&6)&&pd()}}function LI(){Po=$1.current,kn($1)}function wf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tse(n)),yr!==null)for(n=yr.return;n!==null;){var r=n;switch(gI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qb();break;case 3:Eg(),kn(yo),kn(Pi),wI();break;case 5:_I(r);break;case 4:Eg();break;case 13:kn(Wn);break;case 19:kn(Wn);break;case 10:bI(r.type._context);break;case 22:case 23:LI()}n=n.return}if(Yr=e,yr=e=Ou(e.current,null),ci=Po=t,Dr=0,r2=null,RI=Y8=Bf=0,fo=dm=null,df!==null){for(t=0;t<df.length;t++)if(n=df[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}df=null}return e}function f$(e,t){do{var n=yr;try{if(UI(),tb.current=sy,oy){for(var r=jn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oy=!1}if(Ff=0,Wr=Rr=jn=null,cm=!1,e2=0,kI.current=null,n===null||n.return===null){Dr=1,r2=t,yr=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=ci,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Wk(s);if(g!==null){g.flags&=-257,Gk(g,s,a,o,t),g.mode&1&&Hk(o,c,t),t=g,l=c;var U=t.updateQueue;if(U===null){var b=new Set;b.add(l),t.updateQueue=b}else U.add(l);break e}else{if(!(t&1)){Hk(o,c,t),DI();break e}l=Error(_e(426))}}else if($n&&a.mode&1){var v=Wk(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Gk(v,s,a,o,t),pI(_g(l,a));break e}}o=l=_g(l,a),Dr!==4&&(Dr=2),dm===null?dm=[o]:dm.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var _=YB(o,l,t);Nk(o,_);break e;case 1:a=l;var E=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Du===null||!Du.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var T=ZB(o,a,t);Nk(o,T);break e}}o=o.return}while(o!==null)}p$(n)}catch(A){t=A,yr===n&&n!==null&&(yr=n=n.return);continue}break}while(!0)}function h$(){var e=ay.current;return ay.current=sy,e===null?sy:e}function DI(){(Dr===0||Dr===3||Dr===2)&&(Dr=4),Yr===null||!(Bf&268435455)&&!(Y8&268435455)||pu(Yr,ci)}function uy(e,t){var n=Vt;Vt|=2;var r=h$();(Yr!==e||ci!==t)&&($l=null,wf(e,t));do try{xse();break}catch(i){f$(e,i)}while(!0);if(UI(),Vt=n,ay.current=r,yr!==null)throw Error(_e(261));return Yr=null,ci=0,Dr}function xse(){for(;yr!==null;)g$(yr)}function Sse(){for(;yr!==null&&!Qie();)g$(yr)}function g$(e){var t=U$(e.alternate,e,Po);e.memoizedProps=e.pendingProps,t===null?p$(e):yr=t,kI.current=null}function p$(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vse(n,t),n!==null){n.flags&=32767,yr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dr=6,yr=null;return}}else if(n=yse(n,t,Po),n!==null){yr=n;return}if(t=t.sibling,t!==null){yr=t;return}yr=t=e}while(t!==null);Dr===0&&(Dr=5)}function jd(e,t,n){var r=dn,i=Es.transition;try{Es.transition=null,dn=1,Cse(e,t,n,r)}finally{Es.transition=i,dn=r}return null}function Cse(e,t,n,r){do og();while(vu!==null);if(Vt&6)throw Error(_e(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_e(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(loe(e,o),e===Yr&&(yr=Yr=null,ci=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||a5||(a5=!0,b$(Gb,function(){return og(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Es.transition,Es.transition=null;var s=dn;dn=1;var a=Vt;Vt|=4,kI.current=null,_se(e,n),c$(n,e),Koe(i_),jb=!!r_,i_=r_=null,e.current=n,wse(n),Jie(),Vt=a,dn=s,Es.transition=o}else e.current=n;if(a5&&(a5=!1,vu=e,cy=i),o=e.pendingLanes,o===0&&(Du=null),noe(n.stateNode),Eo(e,ur()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ly)throw ly=!1,e=I_,I_=null,e;return cy&1&&e.tag!==0&&og(),o=e.pendingLanes,o&1?e===T_?fm++:(fm=0,T_=e):fm=0,pd(),null}function og(){if(vu!==null){var e=KF(cy),t=Es.transition,n=dn;try{if(Es.transition=null,dn=16>e?16:e,vu===null)var r=!1;else{if(e=vu,vu=null,cy=0,Vt&6)throw Error(_e(331));var i=Vt;for(Vt|=4,$e=e.current;$e!==null;){var o=$e,s=o.child;if($e.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($e=c;$e!==null;){var u=$e;switch(u.tag){case 0:case 11:case 15:um(8,u,o)}var d=u.child;if(d!==null)d.return=u,$e=d;else for(;$e!==null;){u=$e;var f=u.sibling,g=u.return;if(s$(u),u===c){$e=null;break}if(f!==null){f.return=g,$e=f;break}$e=g}}}var U=o.alternate;if(U!==null){var b=U.child;if(b!==null){U.child=null;do{var v=b.sibling;b.sibling=null,b=v}while(b!==null)}}$e=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,$e=s;else e:for(;$e!==null;){if(o=$e,o.flags&2048)switch(o.tag){case 0:case 11:case 15:um(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,$e=_;break e}$e=o.return}}var E=e.current;for($e=E;$e!==null;){s=$e;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,$e=w;else e:for(s=E;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:K8(9,a)}}catch(A){nr(a,a.return,A)}if(a===s){$e=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,$e=T;break e}$e=a.return}}if(Vt=i,pd(),nl&&typeof nl.onPostCommitFiberRoot=="function")try{nl.onPostCommitFiberRoot($8,e)}catch{}r=!0}return r}finally{dn=n,Es.transition=t}}return!1}function iR(e,t,n){t=_g(n,t),t=YB(e,t,1),e=Lu(e,t,1),t=Ki(),e!==null&&(X2(e,1,t),Eo(e,t))}function nr(e,t,n){if(e.tag===3)iR(e,e,n);else for(;t!==null;){if(t.tag===3){iR(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Du===null||!Du.has(r))){e=_g(n,e),e=ZB(t,e,1),t=Lu(t,e,1),e=Ki(),t!==null&&(X2(t,1,e),Eo(t,e));break}}t=t.return}}function Ase(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ki(),e.pingedLanes|=e.suspendedLanes&n,Yr===e&&(ci&n)===n&&(Dr===4||Dr===3&&(ci&130023424)===ci&&500>ur()-PI?wf(e,0):RI|=n),Eo(e,t)}function m$(e,t){t===0&&(e.mode&1?(t=q6,q6<<=1,!(q6&130023424)&&(q6=4194304)):t=1);var n=Ki();e=fc(e,t),e!==null&&(X2(e,t,n),Eo(e,n))}function kse(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),m$(e,n)}function Rse(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(t),m$(e,n)}var U$;U$=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yo.current)po=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return po=!1,bse(e,t,n);po=!!(e.flags&131072)}else po=!1,$n&&t.flags&1048576&&vB(t,ey,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rb(e,t),e=t.pendingProps;var i=bg(t,Pi.current);ig(t,n),i=TI(null,t,r,e,i,n);var o=xI();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vo(r)?(o=!0,Qb(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vI(t),i.updater=X8,t.stateNode=i,i._reactInternals=t,h_(t,r,e,n),t=m_(null,t,r,!0,o,n)):(t.tag=0,$n&&o&&hI(t),Hi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rb(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Mse(r),e=Zs(r,e),i){case 0:t=p_(null,t,r,e,n);break e;case 1:t=Kk(null,t,r,e,n);break e;case 11:t=Xk(null,t,r,e,n);break e;case 14:t=jk(null,t,r,Zs(r.type,e),n);break e}throw Error(_e(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zs(r,i),p_(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zs(r,i),Kk(e,t,r,i,n);case 3:e:{if(e$(t),e===null)throw Error(_e(387));r=t.pendingProps,o=t.memoizedState,i=o.element,IB(e,t),ry(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=_g(Error(_e(423)),t),t=Yk(e,t,r,n,i);break e}else if(r!==i){i=_g(Error(_e(424)),t),t=Yk(e,t,r,n,i);break e}else for(Lo=Mu(t.stateNode.containerInfo.firstChild),$o=t,$n=!0,ea=null,n=CB(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yg(),r===i){t=hc(e,t,n);break e}Hi(e,t,r,n)}t=t.child}return t;case 5:return AB(t),e===null&&u_(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,o_(r,i)?s=null:o!==null&&o_(r,o)&&(t.flags|=32),JB(e,t),Hi(e,t,s,n),t.child;case 6:return e===null&&u_(t),null;case 13:return t$(e,t,n);case 4:return EI(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vg(t,null,r,n):Hi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zs(r,i),Xk(e,t,r,i,n);case 7:return Hi(e,t,t.pendingProps,n),t.child;case 8:return Hi(e,t,t.pendingProps.children,n),t.child;case 12:return Hi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,xn(ty,r._currentValue),r._currentValue=s,o!==null)if(ma(o.value,s)){if(o.children===i.children&&!yo.current){t=hc(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=tc(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),d_(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(_e(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),d_(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Hi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ig(t,n),i=Cs(i),r=r(i),t.flags|=1,Hi(e,t,r,n),t.child;case 14:return r=t.type,i=Zs(r,t.pendingProps),i=Zs(r.type,i),jk(e,t,r,i,n);case 15:return qB(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zs(r,i),rb(e,t),t.tag=1,vo(r)?(e=!0,Qb(t)):e=!1,ig(t,n),xB(t,r,i),h_(t,r,i,n),m_(null,t,r,!0,e,n);case 19:return n$(e,t,n);case 22:return QB(e,t,n)}throw Error(_e(156,t.tag))};function b$(e,t){return WF(e,t)}function Pse(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(e,t,n,r){return new Pse(e,t,n,r)}function NI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mse(e){if(typeof e=="function")return NI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tI)return 11;if(e===nI)return 14}return 2}function Ou(e,t){var n=e.alternate;return n===null?(n=ps(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function sb(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")NI(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case k1:return If(n.children,i,o,t);case eI:s=8,i|=8;break;case O4:return e=ps(12,n,t,i|2),e.elementType=O4,e.lanes=o,e;case F4:return e=ps(13,n,t,i),e.elementType=F4,e.lanes=o,e;case B4:return e=ps(19,n,t,i),e.elementType=B4,e.lanes=o,e;case SF:return Z8(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case TF:s=10;break e;case xF:s=9;break e;case tI:s=11;break e;case nI:s=14;break e;case lu:s=16,r=null;break e}throw Error(_e(130,e==null?e:typeof e,""))}return t=ps(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function If(e,t,n,r){return e=ps(7,e,r,t),e.lanes=n,e}function Z8(e,t,n,r){return e=ps(22,e,r,t),e.elementType=SF,e.lanes=n,e.stateNode={isHidden:!1},e}function nE(e,t,n){return e=ps(6,e,null,t),e.lanes=n,e}function rE(e,t,n){return t=ps(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lse(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=O7(0),this.expirationTimes=O7(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O7(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function OI(e,t,n,r,i,o,s,a,l){return e=new Lse(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ps(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vI(o),e}function Dse(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A1,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function y$(e){if(!e)return Yu;e=e._reactInternals;e:{if(gh(e)!==e||e.tag!==1)throw Error(_e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(e.tag===1){var n=e.type;if(vo(n))return bB(e,n,t)}return t}function v$(e,t,n,r,i,o,s,a,l){return e=OI(n,r,!0,e,i,o,s,a,l),e.context=y$(null),n=e.current,r=Ki(),i=Nu(n),o=tc(r,i),o.callback=t??null,Lu(n,o,i),e.current.lanes=i,X2(e,i,r),Eo(e,r),e}function q8(e,t,n,r){var i=t.current,o=Ki(),s=Nu(i);return n=y$(n),t.context===null?t.context=n:t.pendingContext=n,t=tc(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Lu(i,t,s),e!==null&&(la(e,i,s,o),eb(e,i,s)),s}function dy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function oR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function FI(e,t){oR(e,t),(e=e.alternate)&&oR(e,t)}function Nse(){return null}var E$=typeof reportError=="function"?reportError:function(e){console.error(e)};function BI(e){this._internalRoot=e}Q8.prototype.render=BI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_e(409));q8(e,t,null,null)};Q8.prototype.unmount=BI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$f(function(){q8(null,e,null,null)}),t[dc]=null}};function Q8(e){this._internalRoot=e}Q8.prototype.unstable_scheduleHydration=function(e){if(e){var t=qF();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gu.length&&t!==0&&t<gu[n].priority;n++);gu.splice(n,0,e),n===0&&JF(e)}};function $I(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function J8(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sR(){}function Ose(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=dy(s);o.call(c)}}var s=v$(t,r,e,0,null,!1,!1,"",sR);return e._reactRootContainer=s,e[dc]=s.current,Ym(e.nodeType===8?e.parentNode:e),$f(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=dy(l);a.call(c)}}var l=OI(e,0,!1,null,null,!1,!1,"",sR);return e._reactRootContainer=l,e[dc]=l.current,Ym(e.nodeType===8?e.parentNode:e),$f(function(){q8(t,l,n,r)}),l}function e3(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=dy(s);a.call(l)}}q8(t,s,e,i)}else s=Ose(n,t,e,i,r);return dy(s)}YF=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bp(t.pendingLanes);n!==0&&(oI(t,n|1),Eo(t,ur()),!(Vt&6)&&(wg=ur()+500,pd()))}break;case 13:$f(function(){var r=fc(e,1);if(r!==null){var i=Ki();la(r,e,1,i)}}),FI(e,1)}};sI=function(e){if(e.tag===13){var t=fc(e,134217728);if(t!==null){var n=Ki();la(t,e,134217728,n)}FI(e,134217728)}};ZF=function(e){if(e.tag===13){var t=Nu(e),n=fc(e,t);if(n!==null){var r=Ki();la(n,e,t,r)}FI(e,t)}};qF=function(){return dn};QF=function(e,t){var n=dn;try{return dn=e,t()}finally{dn=n}};Y4=function(e,t,n){switch(t){case"input":if(V4(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=W8(r);if(!i)throw Error(_e(90));AF(r),V4(r,i)}}}break;case"textarea":RF(e,n);break;case"select":t=n.value,t!=null&&eg(e,!!n.multiple,t,!1)}};FF=MI;BF=$f;var Fse={usingClientEntryPoint:!1,Events:[K2,L1,W8,NF,OF,MI]},pp={findFiberByHostInstance:uf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Bse={bundleType:pp.bundleType,version:pp.version,rendererPackageName:pp.rendererPackageName,rendererConfig:pp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=VF(e),e===null?null:e.stateNode},findFiberByHostInstance:pp.findFiberByHostInstance||Nse,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var l5=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!l5.isDisabled&&l5.supportsFiber)try{$8=l5.inject(Bse),nl=l5}catch{}}Xo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fse;Xo.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$I(t))throw Error(_e(200));return Dse(e,t,null,n)};Xo.createRoot=function(e,t){if(!$I(e))throw Error(_e(299));var n=!1,r="",i=E$;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=OI(e,1,!1,null,null,n,!1,r,i),e[dc]=t.current,Ym(e.nodeType===8?e.parentNode:e),new BI(t)};Xo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_e(188)):(e=Object.keys(e).join(","),Error(_e(268,e)));return e=VF(t),e=e===null?null:e.stateNode,e};Xo.flushSync=function(e){return $f(e)};Xo.hydrate=function(e,t,n){if(!J8(t))throw Error(_e(200));return e3(null,e,t,!0,n)};Xo.hydrateRoot=function(e,t,n){if(!$I(e))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=E$;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=v$(t,null,e,1,n??null,i,!1,o,s),e[dc]=t.current,Ym(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Q8(t)};Xo.render=function(e,t,n){if(!J8(t))throw Error(_e(200));return e3(null,e,t,!1,n)};Xo.unmountComponentAtNode=function(e){if(!J8(e))throw Error(_e(40));return e._reactRootContainer?($f(function(){e3(null,null,e,!1,function(){e._reactRootContainer=null,e[dc]=null})}),!0):!1};Xo.unstable_batchedUpdates=MI;Xo.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!J8(n))throw Error(_e(200));if(e==null||e._reactInternals===void 0)throw Error(_e(38));return e3(e,t,n,!1,r)};Xo.version="18.2.0-next-9e3b772b8-20220608";function _$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_$)}catch(e){console.error(e)}}_$(),vF.exports=Xo;var Pr=vF.exports;const $se=fd(Pr);var w$,aR=Pr;w$=aR.createRoot,aR.hydrateRoot;const I$=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})};var zse={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Vse=new Set(["command_palette","export"]),Dt=(e,t,n,r)=>{try{if(typeof window>"u"||zse.VITE_WORKER_ID||!Vse.has(e))return;window.sa_event&&window.sa_event(t,{category:e,label:n,value:r})}catch(i){console.error("error during analytics",i)}},Hse="#ffffff",Wse="#000000",Gse=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],Xse=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],jse=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],Kse=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],Yse=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],Zse=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],qse=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],Qse=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],Jse=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],eae=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],tae=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],nae=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],rae=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],Kr={white:Hse,black:Wse,gray:Gse,red:Xse,pink:jse,grape:Kse,violet:Yse,indigo:Zse,blue:qse,cyan:Qse,teal:Jse,green:eae,lime:tae,yellow:nae,orange:rae},iae=(e,t)=>t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{}),oae=5,E1=5,sae=4,zp=4,Vp=1,Ws=[0,2,4,6,8],Gs=(e,t)=>t.map(n=>Kr[e][n]),ft={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Gs("gray",Ws),red:Gs("red",Ws),pink:Gs("pink",Ws),grape:Gs("grape",Ws),violet:Gs("violet",Ws),blue:Gs("blue",Ws),cyan:Gs("cyan",Ws),teal:Gs("teal",Ws),green:Gs("green",Ws),yellow:Gs("yellow",Ws),orange:Gs("orange",Ws),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},T$=iae(ft,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),x$=[ft.black,ft.red[zp],ft.green[zp],ft.blue[zp],ft.yellow[zp]],S$=[ft.transparent,ft.red[Vp],ft.green[Vp],ft.blue[Vp],ft.yellow[Vp]],C$=[ft.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],aae={transparent:ft.transparent,white:ft.white,gray:ft.gray,black:ft.black,bronze:ft.bronze,...T$},lae={transparent:ft.transparent,white:ft.white,gray:ft.gray,black:ft.black,bronze:ft.bronze,...T$},cae=e=>[ft.cyan[e],ft.blue[e],ft.violet[e],ft.grape[e],ft.pink[e],ft.green[e],ft.teal[e],ft.yellow[e],ft.orange[e],ft.red[e]],uae=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,dae="invert(93%) hue-rotate(180deg)",fae="302px",A$={themeFilter:dae,rightSidebarWidth:fae},sl=/Mac|iPod|iPhone|iPad/.test(navigator.platform),k$=/^Win/.test(navigator.platform),hae=/\b(android)\b/i.test(navigator.userAgent),i2="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,gae=navigator.userAgent.indexOf("Chrome")!==-1,pae=!gae&&navigator.userAgent.indexOf("Safari")!==-1,R$=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,mae=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},C_=typeof window<"u"&&"ResizeObserver"in window,nc="Excalidraw",Uae=36,Kd=10,ab=8,bae=5,lR=1,yae=30,Zu=Math.PI/12,vae="red",Qt={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},iu={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},Yd={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var ge=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(ge||{});const c5={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},P$={TEST:"test",DEVELOPMENT:"development"},Ig={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper"},z1="Xiaolai",o2="Segoe UI Emoji",On={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},V1={[z1]:100,[o2]:1e3},M$=e=>{switch(e){case On.Excalifont:return[z1,o2];default:return[o2]}},Ge={LIGHT:"light",DARK:"dark"},Fn={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},zI=1,Pc=20,md=On.Excalifont,Z2="left",fy="top",L$="{version}",zf=2,hy=2*zf,Eae=1e-5,_ae=2*hy-Eae,u5="#ffffff",wae="#1e1e1e",Iae="#a2f1a6",gy=20,D$=5,Tg={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},Ne={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...Tg},Tae=[Ne.text,Ne.html,...Object.values(Tg)],iE={png:"png",svg:"svg",clipboard:"clipboard"},_s={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},VI=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,xae=500,Sae=300,Cae=500,Aae=1e4,kae=3e4,Rae=100,t3=.1,HI=.1,WI=30,Pae=300,cR=6e4,uR=3e3,GI=A$.themeFilter,A_={addLibrary:"addLibrary"},k_={addLibrary:"addLibrary"},dR={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},Mae=730,Lae=1e3,Dae=500,Nae=1229,Oae=parseInt(A$.rightSidebarWidth),mp=2,XI=[1,2,3],s0=10,Fae=1440,fR=4*1024*1024,Mt="http://www.w3.org/2000/svg",N$=128,n3={excalidraw:2,excalidrawLibrary:2},vr=5,Bae=.7,$ae=11,Do={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},s2={LEFT:"left",CENTER:"center",RIGHT:"right"},zae=20,oE=.25,Vae=32,Er={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},O$={architect:0,artist:1,cartoonist:2},sE={thin:1,bold:2,extraBold:4},Gn={strokeColor:ft.black,backgroundColor:ft.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:O$.artist,opacity:100,locked:!1},py="library",Tf="search",ws={name:"default",defaultTab:py},F$=new Set(["iframe","embeddable","image"]),kr={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},hm={OAI_API_KEY:"excalidraw-oai-api-key",MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},B$="Untitled",H1={generalStats:1,elementProperties:2},us=1,Vr={sharp:"sharp",round:"round",elbow:"elbow"},$$=.3,my="element",Hae=XI.includes(devicePixelRatio)?devicePixelRatio:1,ks=()=>({showWelcomeScreen:!1,theme:Ge.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:Gn.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:Gn.fillStyle,currentItemFontFamily:md,currentItemFontSize:Pc,currentItemOpacity:Gn.opacity,currentItemRoughness:Gn.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:Gn.strokeColor,currentItemRoundness:"round",currentItemArrowType:Vr.round,currentItemStrokeStyle:Gn.strokeStyle,currentItemStrokeWidth:Gn.strokeWidth,currentItemTextAlign:Z2,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:Gn.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:Hae,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:gy,gridStep:D$,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:H1.generalStats|H1.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:ft.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:[]}),Wae=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}),jI=(e,t)=>{const n={};for(const r of Object.keys(e)){const i=Wae[r];if(i!=null&&i[t]){const o=e[r];n[r]=o}}return n},z$=e=>jI(e,"browser"),V$=e=>jI(e,"export"),Gae=e=>jI(e,"server"),Ha=({activeTool:e})=>e.type==="eraser",xg=({activeTool:e})=>e.type==="hand",Xae="modulepreload",jae=function(e){return"/"+e},hR={},Le=function(t,n,r){let i=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),i=Promise.all(n.map(o=>{if(o=jae(o),o in hR)return;hR[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":Xae,s||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),s)return new Promise((c,u)=>{l.addEventListener("load",c),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})}))),i.then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},Kae=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t)))})},H$={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library…",libraries:"Browse libraries",loadingScene:"Loading scene…",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame"},W$={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},G$={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},X$={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas..."},j$={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},K$={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},Y$={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},Z$={selection:"Selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw"},q$={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},Q$={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},J$={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},ez={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},tz={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},nz={or:"Or"},rz={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},iz={title:"Error"},oz={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},sz={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},az={title:"Clear canvas"},lz={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},cz={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},uz={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},dz={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},fz={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},hz={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},gz={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},pz={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},mz={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},Uz={mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},bz={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},yz={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},vz={placeholder:"Quick search"},Ez={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},_z={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},wz={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},KI={labels:H$,elementLink:W$,library:G$,search:X$,buttons:j$,alerts:K$,errors:Y$,toolBar:Z$,element:q$,headings:Q$,hints:J$,canvasError:ez,errorSplash:tz,shareDialog:nz,roomDialog:rz,errorDialog:iz,exportDialog:oz,helpDialog:sz,clearCanvasDialog:az,publishDialog:lz,publishSuccessDialog:cz,confirmDialog:uz,imageExportDialog:dz,encrypted:fz,stats:hz,toast:gz,colors:pz,welcomeScreen:mz,colorPicker:Uz,overwriteConfirm:bz,mermaid:yz,quickSearch:vz,fontList:Ez,userList:_z,commandPalette:wz},Yae=Object.freeze(Object.defineProperty({__proto__:null,alerts:K$,buttons:j$,canvasError:ez,clearCanvasDialog:az,colorPicker:Uz,colors:pz,commandPalette:wz,confirmDialog:uz,default:KI,element:q$,elementLink:W$,encrypted:fz,errorDialog:iz,errorSplash:tz,errors:Y$,exportDialog:oz,fontList:Ez,headings:Q$,helpDialog:sz,hints:J$,imageExportDialog:dz,labels:H$,library:G$,mermaid:yz,overwriteConfirm:bz,publishDialog:lz,publishSuccessDialog:cz,quickSearch:vz,roomDialog:rz,search:X$,shareDialog:nz,stats:hz,toast:gz,toolBar:Z$,userList:_z,welcomeScreen:mz},Symbol.toStringTag,{value:"Module"})),Iz=100,Tz=36,xz={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:Iz,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:Tz,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100},Zae=Object.freeze(Object.defineProperty({__proto__:null,default:xz,en:Iz,kaa:Tz},Symbol.toStringTag,{value:"Module"}));var gc={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let qae=0;function Pn(e,t){const n=`atom${++qae}`,r={toString(){return(gc?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=Qae,r.write=Jae),r}function Qae(e){return e(this)}function Jae(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const gR=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,R_=e=>"init"in e,aE=e=>!!e.write,Uy=new WeakMap,P_=e=>{var t;return M_(e)&&!((t=Uy.get(e))!=null&&t[1])},ele=(e,t)=>{const n=Uy.get(e);if(n)n[1]=!0,n[0].forEach(r=>r(t));else if((gc?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},tle=e=>{if(Uy.has(e))return;const t=[new Set,!1];Uy.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=r=>{t[0].add(r)}},M_=e=>typeof(e==null?void 0:e.then)=="function",pR=e=>"v"in e||"e"in e,d5=e=>{if("e"in e)throw e.e;if((gc?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},Sz=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},mR=(e,t,n,r,i)=>{var o;if((gc?"production":void 0)!=="production"&&r===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(r,i.n),P_(n.v)&&Sz(t,n.v,i),(o=i.m)==null||o.t.add(t),e&&nle(e,r,t)},Up=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),gm=(e,t,n)=>{e[t].add(n)},UR=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),gm(e,"M",()=>{var r;(r=n.m)==null||r.l.forEach(i=>gm(e,"M",i))}))},nle=(e,t,n)=>{const r=e.D.get(t);r&&r.add(n)},rle=(e,t)=>e.D.get(t),Vd=e=>{let t,n=!1;const r=i=>{try{i()}catch(o){n||(t=o,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(r),e.H.clear(),e.M.forEach(r),e.M.clear(),e.L.forEach(r),e.L.clear();if(n)throw t},Cz=(...[e,t,n,r])=>{const i=(_,E,w)=>{const T="v"in E,A=E.v,M=P_(E.v)?E.v:null;if(M_(w)){tle(w);for(const S of E.d.keys())Sz(_,w,e(S));E.v=w}else E.v=w;delete E.e,delete E.x,(!T||!Object.is(A,E.v))&&(++E.n,M&&ele(M,w))},o=(_,E)=>{var w;const T=e(E);if(pR(T)&&(T.m&&!T.x||Array.from(T.d).every(([R,O])=>o(_,R).n===O)))return T;T.d.clear();let A=!0;const M=R=>{if(gR(E,R)){const F=e(R);if(!pR(F))if(R_(R))i(R,F,R.init);else throw new Error("no atom init");return d5(F)}const O=o(_,R);try{return d5(O)}finally{if(A)mR(_,E,T,R,O);else{const F=Up();mR(F,E,T,R,O),d(F,E,T),Vd(F)}}};let S,x;const C={get signal(){return S||(S=new AbortController),S.signal},get setSelf(){return(gc?"production":void 0)!=="production"&&!aE(E)&&console.warn("setSelf function cannot be used with read-only atom"),!x&&aE(E)&&(x=(...R)=>{if((gc?"production":void 0)!=="production"&&A&&console.warn("setSelf function cannot be called in sync"),!A)return u(E,...R)}),x}};try{const R=t(E,M,C);if(i(E,T,R),M_(R)){(w=R.onCancel)==null||w.call(R,()=>S==null?void 0:S.abort());const O=()=>{if(T.m){const F=Up();d(F,E,T),Vd(F)}};R.then(O,O)}return T}catch(R){return delete T.v,T.e=R,delete T.x,++T.n,T}finally{A=!1}},s=_=>d5(o(void 0,_)),a=(_,E,w)=>{var T,A;const M=new Map;for(const S of((T=w.m)==null?void 0:T.t)||[]){const x=e(S);x.m&&M.set(S,x)}for(const S of w.p)M.set(S,e(S));return(A=rle(_,E))==null||A.forEach(S=>{M.set(S,e(S))}),M},l=(_,E,w)=>{const T=[],A=new Set,M=new Set,S=[[E,w]];for(;S.length>0;){const[x,C]=S[S.length-1];if(M.has(x)){S.pop();continue}if(A.has(x)){T.push([x,C,C.n]),M.add(x),C.x=!0,S.pop();continue}A.add(x);for(const[R,O]of a(_,x,C))x!==R&&!A.has(R)&&S.push([R,O])}gm(_,"H",()=>{const x=new Set([E]);for(let C=T.length-1;C>=0;--C){const[R,O,F]=T[C];let N=!1;for(const J of O.d.keys())if(J!==R&&x.has(J)){N=!0;break}N&&(o(_,R),d(_,R,O),F!==O.n&&(UR(_,R,O),x.add(R))),delete O.x}})},c=(_,E,...w)=>{let T=!0;const A=S=>d5(o(_,S)),M=(S,...x)=>{const C=e(S);try{if(gR(E,S)){if(!R_(S))throw new Error("atom not writable");const R=C.n,O=x[0];i(S,C,O),d(_,S,C),R!==C.n&&(UR(_,S,C),l(_,S,C));return}else return c(_,S,...x)}finally{T||Vd(_)}};try{return n(E,A,M,...w)}finally{T=!1}},u=(_,...E)=>{const w=Up();try{return c(w,_,...E)}finally{Vd(w)}},d=(_,E,w)=>{if(w.m&&!P_(w.v)){for(const T of w.d.keys())w.m.d.has(T)||(f(_,T,e(T)).t.add(E),w.m.d.add(T));for(const T of w.m.d||[])if(!w.d.has(T)){w.m.d.delete(T);const A=g(_,T,e(T));A==null||A.t.delete(E)}}},f=(_,E,w)=>{if(!w.m){o(_,E);for(const T of w.d.keys())f(_,T,e(T)).t.add(E);if(w.m={l:new Set,d:new Set(w.d.keys()),t:new Set},aE(E)){const T=w.m;let A;const M=(S,x)=>{let C=!0;A=(...R)=>{try{return c(S,E,...R)}finally{C||Vd(S)}};try{return x()}finally{C=!1}};gm(_,"L",()=>{const S=M(_,()=>r(E,(...x)=>A(...x)));S&&(T.u=x=>M(x,S))})}}return w.m},g=(_,E,w)=>{if(w.m&&!w.m.l.size&&!Array.from(w.m.t).some(T=>{var A;return(A=e(T).m)==null?void 0:A.d.has(E)})){const T=w.m.u;T&&gm(_,"L",()=>T(_)),delete w.m;for(const A of w.d.keys()){const M=g(_,A,e(A));M==null||M.t.delete(E)}return}return w.m};return{get:s,set:u,sub:(_,E)=>{const w=Up(),T=e(_),M=f(w,_,T).l;return M.add(E),Vd(w),()=>{M.delete(E);const S=Up();g(S,_,T),Vd(S)}},unstable_derive:_=>Cz(..._(e,t,n,r))}},ile=e=>{const t=new WeakMap,n=new Set;let r,i=0;const o=e.unstable_derive((l,c,u,d)=>(r=l,[f=>{let g=t.get(f);if(!g){const U=l(f);g=new Proxy(U,{set(b,v,_){return v==="m"&&n.add(f),Reflect.set(b,v,_)},deleteProperty(b,v){return v==="m"&&n.delete(f),Reflect.deleteProperty(b,v)}}),t.set(f,g)}return g},c,(f,g,U,...b)=>i?U(f,...b):u(f,g,U,...b),d])),s=o.set;return Object.assign(o,{dev4_get_internal_weak_map:()=>({get:l=>{const c=r(l);if(c.n!==0)return c}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:l=>{s({read:()=>null,write:(u,d)=>{++i;try{for(const[f,g]of l)R_(f)&&d(f,g)}finally{--i}}})}})},q2=()=>{const e=new WeakMap,n=Cz(r=>{if((gc?"production":void 0)!=="production"&&!r)throw new Error("Atom is undefined or null");let i=e.get(r);return i||(i={d:new Map,p:new Set,n:0},e.set(r,i)),i},(r,...i)=>r.read(...i),(r,...i)=>r.write(...i),(r,...i)=>{var o;return(o=r.onMount)==null?void 0:o.call(r,...i)});return(gc?"production":void 0)!=="production"?ile(n):n};let bp;const ole=()=>(bp||(bp=q2(),(gc?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=bp),globalThis.__JOTAI_DEFAULT_STORE__!==bp&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),bp);var Az={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const kz=D.createContext(void 0),r3=e=>{const t=D.useContext(kz);return(e==null?void 0:e.store)||t||ole()},sle=({children:e,store:t})=>{const n=D.useRef(void 0);return!t&&!n.current&&(n.current=q2()),D.createElement(kz.Provider,{value:t||n.current},e)},L_=e=>typeof(e==null?void 0:e.then)=="function",Rz=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},ale=Ee.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Rz(e),e)}),lE=new WeakMap,bR=e=>{let t=lE.get(e);return t||(t=new Promise((n,r)=>{let i=e;const o=l=>c=>{i===l&&n(c)},s=l=>c=>{i===l&&r(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((Az?"production":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");L_(c)?(lE.set(c,t),i=c,c.then(o(c),s(c)),a(c)):n(c)})};e.then(o(e),s(e)),a(e)}),lE.set(e,t)),t};function a2(e,t){const n=r3(t),[[r,i,o],s]=D.useReducer(c=>{const u=n.get(e);return Object.is(c[0],u)&&c[1]===n&&c[2]===e?c:[u,n,e]},void 0,()=>[n.get(e),n,e]);let a=r;(i!==n||o!==e)&&(s(),a=n.get(e));const l=t==null?void 0:t.delay;if(D.useEffect(()=>{const c=n.sub(e,()=>{if(typeof l=="number"){const u=n.get(e);L_(u)&&Rz(bR(u)),setTimeout(s,l);return}s()});return s(),c},[n,e,l]),D.useDebugValue(a),L_(a)){const c=bR(a);return ale(c)}return a}function YI(e,t){const n=r3(t);return D.useCallback((...i)=>{if((Az?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...i)},[n,e])}function Sg(e,t){return[a2(e,t),YI(e,t)]}const yR=new WeakMap;function lle(e,t){const n=r3(t),r=cle(n);for(const[i,o]of e)(!r.has(i)||t!=null&&t.dangerouslyForceHydrate)&&(r.add(i),n.set(i,o))}const cle=e=>{let t=yR.get(e);return t||(t=new WeakSet,yR.set(e,t)),t};function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W1.apply(this,arguments)}function Pz(){const e=D.createContext(null);function t({store:s,initialValues:a=[],children:l}){const c=D.useRef(s);return c.current||(c.current=q2()),lle(a,{store:c.current}),p(e.Provider,{value:c.current,children:l})}const n=s=>{const a=D.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return r3(W1({store:a},s))};return{Provider:t,useStore:n,useAtom:(s,a)=>{const l=n();return Sg(s,W1({store:l},a))},useAtomValue:(s,a)=>{const l=n();return a2(s,W1({store:l},a))},useSetAtom:(s,a)=>{const l=n();return YI(s,W1({store:l},a))}}}Pn(null);D.createContext({scope:void 0,baseStore:void 0});const Mz=Pz(),{useAtom:Yn,useSetAtom:i3,useAtomValue:Lz,useStore:CLe}=Mz,ule=Mz.Provider,ia=q2(),dle=85,ph={code:"en",label:"English"},o3=[ph,...[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"cs-CZ",label:"Česky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"Қазақ тілі"},{code:"ko-KR",label:"한국어"},{code:"ku-TR",label:"Kurdî"},{code:"lt-LT",label:"Lietuvių"},{code:"lv-LV",label:"Latviešu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenščina"},{code:"tr-TR",label:"Türkçe"},{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"vi-VN",label:"Tiếng Việt"},{code:"mr-IN",label:"मराठी"}].filter(e=>xz[e.code]>=dle).sort((e,t)=>e.label>t.label?1:-1)],Dz="__test__";let G1=ph,lb={};const Nz=async e=>{if(G1=e,document.documentElement.dir=G1.rtl?"rtl":"ltr",document.documentElement.lang=G1.code,e.code.startsWith(Dz))lb={};else try{lb=await Kae(Object.assign({"./locales/ar-SA.json":()=>Le(()=>import("./locales/ar-SA.json-D_jDFH8k.js"),__vite__mapDeps([])),"./locales/az-AZ.json":()=>Le(()=>import("./locales/az-AZ.json-BV3iXazI.js"),__vite__mapDeps([])),"./locales/bg-BG.json":()=>Le(()=>import("./locales/bg-BG.json-CFqJeJis.js"),__vite__mapDeps([])),"./locales/bn-BD.json":()=>Le(()=>import("./locales/bn-BD.json-Dg0jTBuU.js"),__vite__mapDeps([])),"./locales/ca-ES.json":()=>Le(()=>import("./locales/ca-ES.json-B_rqfBtq.js"),__vite__mapDeps([])),"./locales/cs-CZ.json":()=>Le(()=>import("./locales/cs-CZ.json-Cd3Jrse6.js"),__vite__mapDeps([])),"./locales/da-DK.json":()=>Le(()=>import("./locales/da-DK.json-DIUMM5f1.js"),__vite__mapDeps([])),"./locales/de-DE.json":()=>Le(()=>import("./locales/de-DE.json-BF0RlQMn.js"),__vite__mapDeps([])),"./locales/el-GR.json":()=>Le(()=>import("./locales/el-GR.json-DU1ye1AH.js"),__vite__mapDeps([])),"./locales/en.json":()=>Le(()=>Promise.resolve().then(()=>Yae),void 0),"./locales/es-ES.json":()=>Le(()=>import("./locales/es-ES.json-xlQfaHzf.js"),__vite__mapDeps([])),"./locales/eu-ES.json":()=>Le(()=>import("./locales/eu-ES.json-DHzY6Edt.js"),__vite__mapDeps([])),"./locales/fa-IR.json":()=>Le(()=>import("./locales/fa-IR.json-dG0Oexeb.js"),__vite__mapDeps([])),"./locales/fi-FI.json":()=>Le(()=>import("./locales/fi-FI.json-Bujb5Dw7.js"),__vite__mapDeps([])),"./locales/fr-FR.json":()=>Le(()=>import("./locales/fr-FR.json-XQSU67Np.js"),__vite__mapDeps([])),"./locales/gl-ES.json":()=>Le(()=>import("./locales/gl-ES.json-DtDal_zw.js"),__vite__mapDeps([])),"./locales/he-IL.json":()=>Le(()=>import("./locales/he-IL.json-DVcgm2lM.js"),__vite__mapDeps([])),"./locales/hi-IN.json":()=>Le(()=>import("./locales/hi-IN.json-C8kzCSp9.js"),__vite__mapDeps([])),"./locales/hu-HU.json":()=>Le(()=>import("./locales/hu-HU.json-DAfvrv_C.js"),__vite__mapDeps([])),"./locales/id-ID.json":()=>Le(()=>import("./locales/id-ID.json-CBiVsIt-.js"),__vite__mapDeps([])),"./locales/it-IT.json":()=>Le(()=>import("./locales/it-IT.json-WpaAwjln.js"),__vite__mapDeps([])),"./locales/ja-JP.json":()=>Le(()=>import("./locales/ja-JP.json-lTAhYhc8.js"),__vite__mapDeps([])),"./locales/kaa.json":()=>Le(()=>import("./locales/kaa.json-FVrrRyw0.js"),__vite__mapDeps([])),"./locales/kab-KAB.json":()=>Le(()=>import("./locales/kab-KAB.json-BrNis2fB.js"),__vite__mapDeps([])),"./locales/kk-KZ.json":()=>Le(()=>import("./locales/kk-KZ.json-D22q2uZy.js"),__vite__mapDeps([])),"./locales/km-KH.json":()=>Le(()=>import("./locales/km-KH.json-c8LT4rcW.js"),__vite__mapDeps([])),"./locales/ko-KR.json":()=>Le(()=>import("./locales/ko-KR.json-Be74AxMq.js"),__vite__mapDeps([])),"./locales/ku-TR.json":()=>Le(()=>import("./locales/ku-TR.json-DnNoknS4.js"),__vite__mapDeps([])),"./locales/lt-LT.json":()=>Le(()=>import("./locales/lt-LT.json-Bezae7cb.js"),__vite__mapDeps([])),"./locales/lv-LV.json":()=>Le(()=>import("./locales/lv-LV.json-DjX28ylN.js"),__vite__mapDeps([])),"./locales/mr-IN.json":()=>Le(()=>import("./locales/mr-IN.json-oZ81g7ZD.js"),__vite__mapDeps([])),"./locales/my-MM.json":()=>Le(()=>import("./locales/my-MM.json-DYr6nfRL.js"),__vite__mapDeps([])),"./locales/nb-NO.json":()=>Le(()=>import("./locales/nb-NO.json-KO5Ap4Cw.js"),__vite__mapDeps([])),"./locales/nl-NL.json":()=>Le(()=>import("./locales/nl-NL.json-CF-IsFrk.js"),__vite__mapDeps([])),"./locales/nn-NO.json":()=>Le(()=>import("./locales/nn-NO.json-BUxdfyBP.js"),__vite__mapDeps([])),"./locales/oc-FR.json":()=>Le(()=>import("./locales/oc-FR.json-DJSOwdjr.js"),__vite__mapDeps([])),"./locales/pa-IN.json":()=>Le(()=>import("./locales/pa-IN.json-CWeXowf0.js"),__vite__mapDeps([])),"./locales/percentages.json":()=>Le(()=>Promise.resolve().then(()=>Zae),void 0),"./locales/pl-PL.json":()=>Le(()=>import("./locales/pl-PL.json-DC_Gtqyg.js"),__vite__mapDeps([])),"./locales/pt-BR.json":()=>Le(()=>import("./locales/pt-BR.json-BP870iwO.js"),__vite__mapDeps([])),"./locales/pt-PT.json":()=>Le(()=>import("./locales/pt-PT.json-BCiUoe7O.js"),__vite__mapDeps([])),"./locales/ro-RO.json":()=>Le(()=>import("./locales/ro-RO.json-DDtEzs-o.js"),__vite__mapDeps([])),"./locales/ru-RU.json":()=>Le(()=>import("./locales/ru-RU.json-Cu66rc7c.js"),__vite__mapDeps([])),"./locales/si-LK.json":()=>Le(()=>import("./locales/si-LK.json-D8rbKfZA.js"),__vite__mapDeps([])),"./locales/sk-SK.json":()=>Le(()=>import("./locales/sk-SK.json-B-lk308q.js"),__vite__mapDeps([])),"./locales/sl-SI.json":()=>Le(()=>import("./locales/sl-SI.json-C9l50axt.js"),__vite__mapDeps([])),"./locales/sv-SE.json":()=>Le(()=>import("./locales/sv-SE.json-S0z3nuUO.js"),__vite__mapDeps([])),"./locales/ta-IN.json":()=>Le(()=>import("./locales/ta-IN.json-Bb4XJg6y.js"),__vite__mapDeps([])),"./locales/th-TH.json":()=>Le(()=>import("./locales/th-TH.json-D-2txP3v.js"),__vite__mapDeps([])),"./locales/tr-TR.json":()=>Le(()=>import("./locales/tr-TR.json-C8iTlMZv.js"),__vite__mapDeps([])),"./locales/uk-UA.json":()=>Le(()=>import("./locales/uk-UA.json-BmimCNFT.js"),__vite__mapDeps([])),"./locales/vi-VN.json":()=>Le(()=>import("./locales/vi-VN.json-Cs9mO6qO.js"),__vite__mapDeps([])),"./locales/zh-CN.json":()=>Le(()=>import("./locales/zh-CN.json-D5rso2fJ.js"),__vite__mapDeps([])),"./locales/zh-HK.json":()=>Le(()=>import("./locales/zh-HK.json-Cr1Xzg-X.js"),__vite__mapDeps([])),"./locales/zh-TW.json":()=>Le(()=>import("./locales/zh-TW.json-BhXss3zf.js"),__vite__mapDeps([]))}),`./locales/${G1.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),lb=KI}ia.set(Oz,e.code)},l2=()=>G1,vR=(e,t)=>{for(let n=0;n<t.length;++n){const r=t[n];if(e[r]===void 0)return;e=e[r]}if(typeof e=="string")return e},L=(e,t,n)=>{if(G1.code.startsWith(Dz))return`‪[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]‬`;const r=e.split(".");let i=vR(lb,r)||vR(KI,r)||n;if(i===void 0){const o=`Can't find translation for ${e}`;return console.warn(o),""}if(t)for(const o in t)i=i.replace(`{{${o}}}`,String(t[o]));return i},Oz=Pn(ph.code),Zn=()=>{const e=Lz(Oz);return{t:L,langCode:e}};function Fz(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Fz(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Re(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=Fz(t))&&(r&&(r+=" "),r+=n);return r}const Bz=()=>{const[e,t]=D.useState(null),n=D.useCallback(r=>t(r),[]);return[e,n]};function D_(e,t,n){if(e&&e.length){const[r,i]=t,o=Math.PI/180*n,s=Math.cos(o),a=Math.sin(o);for(const l of e){const[c,u]=l;l[0]=(c-r)*s-(u-i)*a+r,l[1]=(c-r)*a+(u-i)*s+i}}}function fle(e,t,n){const r=[];e.forEach(i=>r.push(...i)),D_(r,t,n)}function hle(e,t){return e[0]===t[0]&&e[1]===t[1]}function gle(e,t,n,r=1){const i=n,o=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(i)for(const c of s)D_(c,a,i);const l=ple(s,o,r);if(i){for(const c of s)D_(c,a,-i);fle(l,a,-i)}return l}function ple(e,t,n){const r=[];for(const c of e){const u=[...c];hle(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&r.push(u)}const i=[];t=Math.max(t,.1);const o=[];for(const c of r)for(let u=0;u<c.length-1;u++){const d=c[u],f=c[u+1];if(d[1]!==f[1]){const g=Math.min(d[1],f[1]);o.push({ymin:g,ymax:Math.max(d[1],f[1]),x:g===d[1]?d[0]:f[0],islope:(f[0]-d[0])/(f[1]-d[1])})}}if(o.sort((c,u)=>c.ymin<u.ymin?-1:c.ymin>u.ymin?1:c.x<u.x?-1:c.x>u.x?1:c.ymax===u.ymax?0:(c.ymax-u.ymax)/Math.abs(c.ymax-u.ymax)),!o.length)return i;let s=[],a=o[0].ymin,l=0;for(;s.length||o.length;){if(o.length){let c=-1;for(let d=0;d<o.length&&!(o[d].ymin>a);d++)c=d;o.splice(0,c+1).forEach(d=>{s.push({s:a,edge:d})})}if(s=s.filter(c=>!(c.edge.ymax<=a)),s.sort((c,u)=>c.edge.x===u.edge.x?0:(c.edge.x-u.edge.x)/Math.abs(c.edge.x-u.edge.x)),(n!==1||l%t===0)&&s.length>1)for(let c=0;c<s.length;c=c+2){const u=c+1;if(u>=s.length)break;const d=s[c].edge,f=s[u].edge;i.push([[Math.round(d.x),a],[Math.round(f.x),a]])}a+=n,s.forEach(c=>{c.edge.x=c.edge.x+n*c.edge.islope}),l++}return i}function Q2(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.max(i,.1);let o=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(o=i),gle(e,i,r,o||1)}class ZI{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=Q2(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function s3(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class mle extends ZI{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),o=Q2(t,i),s=Math.PI/180*n.hachureAngle,a=[],l=r*.5*Math.cos(s),c=r*.5*Math.sin(s);for(const[d,f]of o)s3([d,f])&&a.push([[d[0]-l,d[1]+c],[...f]],[[d[0]+l,d[1]-c],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class Ule extends ZI{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),o=this._fillPolygons(t,i);return r.ops=r.ops.concat(o.ops),r}}class ble{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=Q2(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let o=n.fillWeight;o<0&&(o=n.strokeWidth/2);const s=i/4;for(const a of t){const l=s3(a),c=l/i,u=Math.ceil(c)-1,d=l-u*i,f=(a[0][0]+a[1][0])/2-i/4,g=Math.min(a[0][1],a[1][1]);for(let U=0;U<u;U++){const b=g+d+U*i,v=f-s+Math.random()*2*s,_=b-s+Math.random()*2*s,E=this.helper.ellipse(v,_,o,o,n);r.push(...E.ops)}}return{type:"fillSketch",ops:r}}}class yle{constructor(t){this.helper=t}fillPolygons(t,n){const r=Q2(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,o=[];return t.forEach(s=>{const a=s3(s),l=Math.floor(a/(r+i)),c=(a+i-l*(r+i))/2;let u=s[0],d=s[1];u[0]>d[0]&&(u=s[1],d=s[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let g=0;g<l;g++){const U=g*(r+i),b=U+r,v=[u[0]+U*Math.cos(f)+c*Math.cos(f),u[1]+U*Math.sin(f)+c*Math.sin(f)],_=[u[0]+b*Math.cos(f)+c*Math.cos(f),u[1]+b*Math.sin(f)+c*Math.sin(f)];o.push(...this.helper.doubleLineOps(v[0],v[1],_[0],_[1],n))}}),o}}class vle{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const o=Q2(t,n);return{type:"fillSketch",ops:this.zigzagLines(o,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(o=>{const s=s3(o),a=Math.round(s/(2*n));let l=o[0],c=o[1];l[0]>c[0]&&(l=o[1],c=o[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const f=d*2*n,g=(d+1)*2*n,U=Math.sqrt(2*Math.pow(n,2)),b=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],v=[l[0]+g*Math.cos(u),l[1]+g*Math.sin(u)],_=[b[0]+U*Math.cos(u+Math.PI/4),b[1]+U*Math.sin(u+Math.PI/4)];i.push(...this.helper.doubleLineOps(b[0],b[1],_[0],_[1],r),...this.helper.doubleLineOps(_[0],_[1],v[0],v[1],r))}}),i}}const lo={};function Ele(e,t){let n=e.fillStyle||"hachure";if(!lo[n])switch(n){case"zigzag":lo[n]||(lo[n]=new mle(t));break;case"cross-hatch":lo[n]||(lo[n]=new Ule(t));break;case"dots":lo[n]||(lo[n]=new ble(t));break;case"dashed":lo[n]||(lo[n]=new yle(t));break;case"zigzag-line":lo[n]||(lo[n]=new vle(t));break;case"hachure":default:n="hachure",lo[n]||(lo[n]=new ZI(t));break}return lo[n]}function _le(){return Math.floor(Math.random()*2**31)}class $z{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const wle=0,N_=1,zz=2,f5={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Ile(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:wle,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:N_,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:zz,text:""},t}function cE(e,t){return e.type===t}function qI(e){const t=[],n=Ile(e);let r="BOD",i=0,o=n[i];for(;!cE(o,zz);){let s=0;const a=[];if(r==="BOD")if(o.text==="M"||o.text==="m")i++,s=f5[o.text],r=o.text;else return qI("M0,0"+e);else cE(o,N_)?s=f5[r]:(i++,s=f5[o.text],r=o.text);if(i+s<n.length){for(let l=i;l<i+s;l++){const c=n[l];if(cE(c,N_))a[a.length]=+c.text;else throw new Error("Param not a number: "+r+","+c.text)}if(typeof f5[r]=="number"){const l={key:r,data:a};t.push(l),i+=s,o=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function Vz(e){let t=0,n=0,r=0,i=0;const o=[];for(const{key:s,data:a}of e)switch(s){case"M":o.push({key:"M",data:[...a]}),[t,n]=a,[r,i]=a;break;case"m":t+=a[0],n+=a[1],o.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":o.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],o.push({key:"L",data:[t,n]});break;case"C":o.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);o.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":o.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);o.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":o.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],o.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":o.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);o.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":o.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],o.push({key:"T",data:[t,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=r,n=i;break}return o}function Hz(e){const t=[];let n="",r=0,i=0,o=0,s=0,a=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[r,i]=u,[o,s]=u;break;case"C":t.push({key:"C",data:[...u]}),r=u[4],i=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[r,i]=u;break;case"H":r=u[0],t.push({key:"L",data:[r,i]});break;case"V":i=u[0],t.push({key:"L",data:[r,i]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=r+(r-a),f=i+(i-l)):(d=r,f=i),t.push({key:"C",data:[d,f,...u]}),a=u[0],l=u[1],r=u[2],i=u[3];break}case"T":{const[d,f]=u;let g=0,U=0;n==="Q"||n==="T"?(g=r+(r-a),U=i+(i-l)):(g=r,U=i);const b=r+2*(g-r)/3,v=i+2*(U-i)/3,_=d+2*(g-d)/3,E=f+2*(U-f)/3;t.push({key:"C",data:[b,v,_,E,d,f]}),a=g,l=U,r=d,i=f;break}case"Q":{const[d,f,g,U]=u,b=r+2*(d-r)/3,v=i+2*(f-i)/3,_=g+2*(d-g)/3,E=U+2*(f-U)/3;t.push({key:"C",data:[b,v,_,E,g,U]}),a=d,l=f,r=g,i=U;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),g=u[2],U=u[3],b=u[4],v=u[5],_=u[6];d===0||f===0?(t.push({key:"C",data:[r,i,v,_,v,_]}),r=v,i=_):(r!==v||i!==_)&&(Wz(r,i,v,_,d,f,g,U,b).forEach(function(w){t.push({key:"C",data:w})}),r=v,i=_);break}case"Z":t.push({key:"Z",data:[]}),r=o,i=s;break}n=c}return t}function Tle(e){return Math.PI*e/180}function yp(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function Wz(e,t,n,r,i,o,s,a,l,c){const u=Tle(s);let d=[],f=0,g=0,U=0,b=0;if(c)[f,g,U,b]=c;else{[e,t]=yp(e,t,-u),[n,r]=yp(n,r,-u);const F=(e-n)/2,N=(t-r)/2;let J=F*F/(i*i)+N*N/(o*o);J>1&&(J=Math.sqrt(J),i=J*i,o=J*o);const K=a===l?-1:1,ne=i*i,ee=o*o,q=ne*ee-ne*N*N-ee*F*F,Z=ne*N*N+ee*F*F,te=K*Math.sqrt(Math.abs(q/Z));U=te*i*N/o+(e+n)/2,b=te*-o*F/i+(t+r)/2,f=Math.asin(parseFloat(((t-b)/o).toFixed(9))),g=Math.asin(parseFloat(((r-b)/o).toFixed(9))),e<U&&(f=Math.PI-f),n<U&&(g=Math.PI-g),f<0&&(f=Math.PI*2+f),g<0&&(g=Math.PI*2+g),l&&f>g&&(f=f-Math.PI*2),!l&&g>f&&(g=g-Math.PI*2)}let v=g-f;if(Math.abs(v)>Math.PI*120/180){const F=g,N=n,J=r;l&&g>f?g=f+Math.PI*120/180*1:g=f+Math.PI*120/180*-1,n=U+i*Math.cos(g),r=b+o*Math.sin(g),d=Wz(n,r,N,J,i,o,s,0,l,[g,F,U,b])}v=g-f;const _=Math.cos(f),E=Math.sin(f),w=Math.cos(g),T=Math.sin(g),A=Math.tan(v/4),M=4/3*i*A,S=4/3*o*A,x=[e,t],C=[e+M*E,t-S*_],R=[n+M*T,r-S*w],O=[n,r];if(C[0]=2*x[0]-C[0],C[1]=2*x[1]-C[1],c)return[C,R,O].concat(d);{d=[C,R,O].concat(d);const F=[];for(let N=0;N<d.length;N+=3){const J=yp(d[N][0],d[N][1],u),K=yp(d[N+1][0],d[N+1][1],u),ne=yp(d[N+2][0],d[N+2][1],u);F.push([J[0],J[1],K[0],K[1],ne[0],ne[1]])}return F}}const xle={randOffset:Rle,randOffsetWithRange:Ple,ellipse:Ale,doubleLineOps:Mle};function Gz(e,t,n,r,i){return{type:"path",ops:pc(e,t,n,r,i)}}function cb(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let o=0;o<r-1;o++)i.push(...pc(e[o][0],e[o][1],e[o+1][0],e[o+1][1],n));return t&&i.push(...pc(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return Gz(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function Sle(e,t){return cb(e,!0,t)}function Cle(e,t,n,r,i){const o=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return Sle(o,i)}function ER(e,t){let n=TR(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const r=TR(e,1.5*(1+t.roughness*.22),Lle(t));n=n.concat(r)}return{type:"path",ops:n}}function Ale(e,t,n,r,i){const o=Xz(n,r,i);return O_(e,t,i,o).opset}function Xz(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=Math.PI*2/i;let s=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return s+=Je(s*l,n),a+=Je(a*l,n),{increment:o,rx:s,ry:a}}function O_(e,t,n,r){const[i,o]=xR(r.increment,e,t,r.rx,r.ry,1,r.increment*by(.1,by(.4,1,n),n),n);let s=yy(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=xR(r.increment,e,t,r.rx,r.ry,1.5,0,n),l=yy(a,null,n);s=s.concat(l)}return{estimatedPoints:o,opset:{type:"path",ops:s}}}function _R(e,t,n,r,i,o,s,a,l){const c=e,u=t;let d=Math.abs(n/2),f=Math.abs(r/2);d+=Je(d*.01,l),f+=Je(f*.01,l);let g=i,U=o;for(;g<0;)g+=Math.PI*2,U+=Math.PI*2;U-g>Math.PI*2&&(g=0,U=Math.PI*2);const b=Math.PI*2/l.curveStepCount,v=Math.min(b/2,(U-g)/2),_=SR(v,c,u,d,f,g,U,1,l);if(!l.disableMultiStroke){const E=SR(v,c,u,d,f,g,U,1.5,l);_.push(...E)}return s&&(a?_.push(...pc(c,u,c+d*Math.cos(g),u+f*Math.sin(g),l),...pc(c,u,c+d*Math.cos(U),u+f*Math.sin(U),l)):_.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(g),u+f*Math.sin(g)]})),{type:"path",ops:_}}function wR(e,t){const n=Hz(Vz(qI(e))),r=[];let i=[0,0],o=[0,0];for(const{key:s,data:a}of n)switch(s){case"M":{o=[a[0],a[1]],i=[a[0],a[1]];break}case"L":r.push(...pc(o[0],o[1],a[0],a[1],t)),o=[a[0],a[1]];break;case"C":{const[l,c,u,d,f,g]=a;r.push(...Dle(l,c,u,d,f,g,o,t)),o=[f,g];break}case"Z":r.push(...pc(o[0],o[1],i[0],i[1],t)),o=[i[0],i[1]];break}return{type:"path",ops:r}}function uE(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,o=r.length;if(o>2){n.push({op:"move",data:[r[0][0]+Je(i,t),r[0][1]+Je(i,t)]});for(let s=1;s<o;s++)n.push({op:"lineTo",data:[r[s][0]+Je(i,t),r[s][1]+Je(i,t)]})}}return{type:"fillPath",ops:n}}function _1(e,t){return Ele(t,xle).fillPolygons(e,t)}function kle(e,t,n,r,i,o,s){const a=e,l=t;let c=Math.abs(n/2),u=Math.abs(r/2);c+=Je(c*.01,s),u+=Je(u*.01,s);let d=i,f=o;for(;d<0;)d+=Math.PI*2,f+=Math.PI*2;f-d>Math.PI*2&&(d=0,f=Math.PI*2);const g=(f-d)/s.curveStepCount,U=[];for(let b=d;b<=f;b=b+g)U.push([a+c*Math.cos(b),l+u*Math.sin(b)]);return U.push([a+c*Math.cos(f),l+u*Math.sin(f)]),U.push([a,l]),_1([U],s)}function Rle(e,t){return Je(e,t)}function Ple(e,t,n){return by(e,t,n)}function Mle(e,t,n,r,i){return pc(e,t,n,r,i,!0)}function Lle(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function jz(e){return e.randomizer||(e.randomizer=new $z(e.seed||0)),e.randomizer.next()}function by(e,t,n,r=1){return n.roughness*r*(jz(n)*(t-e)+e)}function Je(e,t,n=1){return by(-e,e,t,n)}function pc(e,t,n,r,i,o=!1){const s=o?i.disableMultiStrokeFill:i.disableMultiStroke,a=IR(e,t,n,r,i,!0,!1);if(s)return a;const l=IR(e,t,n,r,i,!0,!0);return a.concat(l)}function IR(e,t,n,r,i,o,s){const a=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(a);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let u=i.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,f=.2+jz(i)*.2;let g=i.bowing*i.maxRandomnessOffset*(r-t)/200,U=i.bowing*i.maxRandomnessOffset*(e-n)/200;g=Je(g,i,c),U=Je(U,i,c);const b=[],v=()=>Je(d,i,c),_=()=>Je(u,i,c),E=i.preserveVertices;return s?b.push({op:"move",data:[e+(E?0:v()),t+(E?0:v())]}):b.push({op:"move",data:[e+(E?0:Je(u,i,c)),t+(E?0:Je(u,i,c))]}),s?b.push({op:"bcurveTo",data:[g+e+(n-e)*f+v(),U+t+(r-t)*f+v(),g+e+2*(n-e)*f+v(),U+t+2*(r-t)*f+v(),n+(E?0:v()),r+(E?0:v())]}):b.push({op:"bcurveTo",data:[g+e+(n-e)*f+_(),U+t+(r-t)*f+_(),g+e+2*(n-e)*f+_(),U+t+2*(r-t)*f+_(),n+(E?0:_()),r+(E?0:_())]}),b}function TR(e,t,n){const r=[];r.push([e[0][0]+Je(t,n),e[0][1]+Je(t,n)]),r.push([e[0][0]+Je(t,n),e[0][1]+Je(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+Je(t,n),e[i][1]+Je(t,n)]),i===e.length-1&&r.push([e[i][0]+Je(t,n),e[i][1]+Je(t,n)]);return yy(r,null,n)}function yy(e,t,n){const r=e.length,i=[];if(r>3){const o=[],s=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<r;a++){const l=e[a];o[0]=[l[0],l[1]],o[1]=[l[0]+(s*e[a+1][0]-s*e[a-1][0])/6,l[1]+(s*e[a+1][1]-s*e[a-1][1])/6],o[2]=[e[a+1][0]+(s*e[a][0]-s*e[a+2][0])/6,e[a+1][1]+(s*e[a][1]-s*e[a+2][1])/6],o[3]=[e[a+1][0],e[a+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...pc(e[0][0],e[0][1],e[1][0],e[1][1],n));return i}function xR(e,t,n,r,i,o,s,a){const l=a.roughness===0,c=[],u=[];if(l){e=e/4,u.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const f=[t+r*Math.cos(d),n+i*Math.sin(d)];c.push(f),u.push(f)}u.push([t+r*Math.cos(0),n+i*Math.sin(0)]),u.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const d=Je(.5,a)-Math.PI/2;u.push([Je(o,a)+t+.9*r*Math.cos(d-e),Je(o,a)+n+.9*i*Math.sin(d-e)]);const f=Math.PI*2+d-.01;for(let g=d;g<f;g=g+e){const U=[Je(o,a)+t+r*Math.cos(g),Je(o,a)+n+i*Math.sin(g)];c.push(U),u.push(U)}u.push([Je(o,a)+t+r*Math.cos(d+Math.PI*2+s*.5),Je(o,a)+n+i*Math.sin(d+Math.PI*2+s*.5)]),u.push([Je(o,a)+t+.98*r*Math.cos(d+s),Je(o,a)+n+.98*i*Math.sin(d+s)]),u.push([Je(o,a)+t+.9*r*Math.cos(d+s*.5),Je(o,a)+n+.9*i*Math.sin(d+s*.5)])}return[u,c]}function SR(e,t,n,r,i,o,s,a,l){const c=o+Je(.1,l),u=[];u.push([Je(a,l)+t+.9*r*Math.cos(c-e),Je(a,l)+n+.9*i*Math.sin(c-e)]);for(let d=c;d<=s;d=d+e)u.push([Je(a,l)+t+r*Math.cos(d),Je(a,l)+n+i*Math.sin(d)]);return u.push([t+r*Math.cos(s),n+i*Math.sin(s)]),u.push([t+r*Math.cos(s),n+i*Math.sin(s)]),yy(u,null,l)}function Dle(e,t,n,r,i,o,s,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let g=0;g<d;g++)g===0?l.push({op:"move",data:[s[0],s[1]]}):l.push({op:"move",data:[s[0]+(f?0:Je(c[0],a)),s[1]+(f?0:Je(c[0],a))]}),u=f?[i,o]:[i+Je(c[g],a),o+Je(c[g],a)],l.push({op:"bcurveTo",data:[e+Je(c[g],a),t+Je(c[g],a),n+Je(c[g],a),r+Je(c[g],a),u[0],u[1]]});return l}function vp(e){return[...e]}function Nle(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(vp(e[0]),vp(e[1]),vp(e[2]),vp(e[2]));else{const i=[];i.push(e[0],e[0]);for(let a=1;a<e.length;a++)i.push(e[a]),a===e.length-1&&i.push(e[a]);const o=[],s=1-t;r.push(vp(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];o[0]=[l[0],l[1]],o[1]=[l[0]+(s*i[a+1][0]-s*i[a-1][0])/6,l[1]+(s*i[a+1][1]-s*i[a-1][1])/6],o[2]=[i[a+1][0]+(s*i[a][0]-s*i[a+2][0])/6,i[a+1][1]+(s*i[a][1]-s*i[a+2][1])/6],o[3]=[i[a+1][0],i[a+1][1]],r.push(o[1],o[2],o[3])}}return r}function Ole(e,t){return Math.sqrt(ub(e,t))}function ub(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Fle(e,t,n){const r=ub(t,n);if(r===0)return ub(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),ub(e,Zd(t,n,i))}function Zd(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Ble(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let a=3*r[1]-2*n[1]-o[1];a*=a;let l=3*i[0]-2*o[0]-n[0];l*=l;let c=3*i[1]-2*o[1]-n[1];return c*=c,s<l&&(s=l),a<c&&(a=c),s+a}function F_(e,t,n,r){const i=r||[];if(Ble(e,t)<n){const o=e[t+0];i.length?Ole(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=Zd(s,a,.5),d=Zd(a,l,.5),f=Zd(l,c,.5),g=Zd(u,d,.5),U=Zd(d,f,.5),b=Zd(g,U,.5);F_([s,u,g,b],0,n,i),F_([b,U,f,c],0,n,i)}return i}function B_(e,t,n,r,i){const o=i||[],s=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Fle(e[u],s,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>r?(B_(e,t,c+1,r,o),B_(e,c,n,r,o)):(o.length||o.push(s),o.push(a)),o}function $le(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;F_(e,s,t,r)}return n&&n>0?B_(r,0,r.length,n):r}function zle(e,t){return Math.sqrt(db(e,t))}function db(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Vle(e,t,n){const r=db(t,n);if(r===0)return db(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),db(e,qd(t,n,i))}function qd(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Hle(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let a=3*r[1]-2*n[1]-o[1];a*=a;let l=3*i[0]-2*o[0]-n[0];l*=l;let c=3*i[1]-2*o[1]-n[1];return c*=c,s<l&&(s=l),a<c&&(a=c),s+a}function $_(e,t,n,r){const i=r||[];if(Hle(e,t)<n){const o=e[t+0];i.length?zle(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=qd(s,a,.5),d=qd(a,l,.5),f=qd(l,c,.5),g=qd(u,d,.5),U=qd(d,f,.5),b=qd(g,U,.5);$_([s,u,g,b],0,n,i),$_([b,U,f,c],0,n,i)}return i}function Wle(e,t){return z_(e,0,e.length,t)}function z_(e,t,n,r,i){const o=i||[],s=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Vle(e[u],s,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>r?(z_(e,t,c+1,r,o),z_(e,c,n,r,o)):(o.length||o.push(s),o.push(a)),o}function Gle(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;$_(e,s,t,r)}return r}function Xle(e,t,n){const r=qI(e),i=Hz(Vz(r)),o=[];let s=[],a=[0,0],l=[];const c=()=>{l.length>=4&&s.push(...Gle(l,t)),l=[]},u=()=>{c(),s.length&&(o.push(s),s=[])};for(const{key:f,data:g}of i)switch(f){case"M":u(),a=[g[0],g[1]],s.push(a);break;case"L":c(),s.push([g[0],g[1]]);break;case"C":if(!l.length){const U=s.length?s[s.length-1]:a;l.push([U[0],U[1]])}l.push([g[0],g[1]]),l.push([g[2],g[3]]),l.push([g[4],g[5]]);break;case"Z":c(),s.push([a[0],a[1]]);break}if(u(),!n)return o;const d=[];for(const f of o){const g=Wle(f,n);g.length&&d.push(g)}return d}const Ro="none";class c2{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return _le()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,o){const s=this._o(o);return this._d("line",[Gz(t,n,r,i,s)],s)}rectangle(t,n,r,i,o){const s=this._o(o),a=[],l=Cle(t,n,r,i,s);if(s.fill){const c=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];s.fillStyle==="solid"?a.push(uE([c],s)):a.push(_1([c],s))}return s.stroke!==Ro&&a.push(l),this._d("rectangle",a,s)}ellipse(t,n,r,i,o){const s=this._o(o),a=[],l=Xz(r,i,s),c=O_(t,n,s,l);if(s.fill)if(s.fillStyle==="solid"){const u=O_(t,n,s,l).opset;u.type="fillPath",a.push(u)}else a.push(_1([c.estimatedPoints],s));return s.stroke!==Ro&&a.push(c.opset),this._d("ellipse",a,s)}circle(t,n,r,i){const o=this.ellipse(t,n,r,r,i);return o.shape="circle",o}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[cb(t,!1,r)],r)}arc(t,n,r,i,o,s,a=!1,l){const c=this._o(l),u=[],d=_R(t,n,r,i,o,s,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const g=_R(t,n,r,i,o,s,!0,!1,f);g.type="fillPath",u.push(g)}else u.push(kle(t,n,r,i,o,s,c));return c.stroke!==Ro&&u.push(d),this._d("arc",u,c)}curve(t,n){const r=this._o(n),i=[],o=ER(t,r);if(r.fill&&r.fill!==Ro&&t.length>=3)if(r.fillStyle==="solid"){const s=ER(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=Nle(t),a=$le(s,10,(1+r.roughness)/2);i.push(_1([a],r))}return r.stroke!==Ro&&i.push(o),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],o=cb(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(uE([t],r)):i.push(_1([t],r))),r.stroke!==Ro&&i.push(o),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=r.fill&&r.fill!=="transparent"&&r.fill!==Ro,s=r.stroke!==Ro,a=!!(r.simplification&&r.simplification<1),l=a?4-4*(r.simplification||1):(1+r.roughness)/2,c=Xle(t,1,l),u=wR(t,r);if(o)if(r.fillStyle==="solid")if(c.length===1){const d=wR(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else i.push(uE(c,r));else i.push(_1(c,r));return s&&(a?c.forEach(d=>{i.push(cb(d,!1,r))}):i.push(u)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const o=typeof n=="number"&&n>=0?i.data.map(s=>+s.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":r+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":r+=`L${o[0]} ${o[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const o of n){let s=null;switch(o.type){case"path":s={d:this.opsToPath(o),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:Ro};break;case"fillPath":s={d:this.opsToPath(o),stroke:Ro,strokeWidth:0,fill:r.fill||Ro};break;case"fillSketch":s=this.fillSketch(o,r);break}s&&i.push(s)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Ro,strokeWidth:r,fill:Ro}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class jle{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new c2(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const s of n)switch(s.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,s,o),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,o,a),i.restore();break}case"fillSketch":this.fillSketch(i,s,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map(a=>+a.toFixed(r)):o.data;switch(o.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s),s}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s),s}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s),s}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o),o}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,o,s,a=!1,l){const c=this.gen.arc(t,n,r,i,o,s,a,l);return this.draw(c),c}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const h5="http://www.w3.org/2000/svg";class Kle{constructor(t,n){this.svg=t,this.gen=new c2(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,o=i.createElementNS(h5,"g"),s=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=i.createElementNS(h5,"path"),l.setAttribute("d",this.opsToPath(a,s)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{l=i.createElementNS(h5,"path"),l.setAttribute("d",this.opsToPath(a,s)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(i,a,r);break}}l&&o.appendChild(l)}return o}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const o=t.createElementNS(h5,"path");return o.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),o.setAttribute("stroke",r.fill||""),o.setAttribute("stroke-width",i+""),o.setAttribute("fill","none"),r.fillLineDash&&o.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s)}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s)}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s)}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,o,s,a=!1,l){const c=this.gen.arc(t,n,r,i,o,s,a,l);return this.draw(c)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const Ud={canvas(e,t){return new jle(e,t)},svg(e,t){return new Kle(e,t)},generator(e){return new c2(e)},newSeed(){return c2.newSeed()}};let a3=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var Kz="Expected a function",CR=NaN,Yle="[object Symbol]",Zle=/^\s+|\s+$/g,qle=/^[-+]0x[0-9a-f]+$/i,Qle=/^0b[01]+$/i,Jle=/^0o[0-7]+$/i,ece=parseInt,tce=typeof Ka=="object"&&Ka&&Ka.Object===Object&&Ka,nce=typeof self=="object"&&self&&self.Object===Object&&self,rce=tce||nce||Function("return this")(),ice=Object.prototype,oce=ice.toString,sce=Math.max,ace=Math.min,dE=function(){return rce.Date.now()};function lce(e,t,n){var r,i,o,s,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(Kz);t=AR(t)||0,vy(n)&&(u=!!n.leading,d="maxWait"in n,o=d?sce(AR(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f);function g(M){var S=r,x=i;return r=i=void 0,c=M,s=e.apply(x,S),s}function U(M){return c=M,a=setTimeout(_,t),u?g(M):s}function b(M){var S=M-l,x=M-c,C=t-S;return d?ace(C,o-x):C}function v(M){var S=M-l,x=M-c;return l===void 0||S>=t||S<0||d&&x>=o}function _(){var M=dE();if(v(M))return E(M);a=setTimeout(_,b(M))}function E(M){return a=void 0,f&&r?g(M):(r=i=void 0,s)}function w(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function T(){return a===void 0?s:E(dE())}function A(){var M=dE(),S=v(M);if(r=arguments,i=this,l=M,S){if(a===void 0)return U(l);if(d)return a=setTimeout(_,t),g(l)}return a===void 0&&(a=setTimeout(_,t)),s}return A.cancel=w,A.flush=T,A}function cce(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(Kz);return vy(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),lce(e,t,{leading:r,maxWait:t,trailing:i})}function vy(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function uce(e){return!!e&&typeof e=="object"}function dce(e){return typeof e=="symbol"||uce(e)&&oce.call(e)==Yle}function AR(e){if(typeof e=="number")return e;if(dce(e))return CR;if(vy(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=vy(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Zle,"");var n=Qle.test(e);return n||Jle.test(e)?ece(e.slice(2),n?2:8):qle.test(e)?CR:+e}var fce=cce;const ql=fd(fce);var Yz={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ka,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(c,u){this._listeners[c]=this._listeners[c]||[],this._listeners[c].indexOf(u)<0&&this._listeners[c].push(u)},n.prototype.removeEventListener=function(c,u){if(this._listeners[c]){var d=this._listeners[c].indexOf(u);d>=0&&this._listeners[c].splice(d,1)}},n.prototype.dispatchEvent=function(c){if(this._listeners[c.type]&&this._listeners[c.type].length)for(var u=this._listeners[c.type].slice(),d=0,f=u.length;d<f;++d)u[d].call(this,c)};var r=function(c){return typeof c.constructor=="function"&&c.constructor.name==="GeneratorFunction"},i=function(c){return{next:function(){var u=c();return u?{value:u}:{done:!0}}}},o=function(c){var u=!1;return{next:function(){return u?{done:!0}:(u=!0,{value:c})}}},s=function(c,u){var d=typeof c;if(d==="object"){if(typeof c.next=="function")return c;if(typeof c.then=="function")return o(c)}return d==="function"?r(c)?c():i(c):o(u.resolve(c))},a=function(c,u,d){this.target=c,this.type=u,this.data=d},l=function(c,u,d){if(n.call(this),typeof u!="number"||Math.floor(u)!==u||u<1)throw new Error("Invalid concurrency");this._concurrency=u,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=s(c,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(c){return typeof c<"u"&&(this._concurrency=c,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var c=this,u=this._options.promise;return this._promise=new u(function(d,f){c._callbacks={reject:f,resolve:d},c._proceed()}),this._promise},l.prototype._fireEvent=function(c,u){this.dispatchEvent(new a(this,c,u))},l.prototype._settle=function(c){c?this._callbacks.reject(c):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(c,u){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:c,result:u}),this._proceed())},l.prototype._onPooledPromiseRejected=function(c,u){this._size--,this.active()&&(this._fireEvent("rejected",{promise:c,error:u}),this._settle(u||new Error("Unknown error")))},l.prototype._trackPromise=function(c){var u=this;c.then(function(d){u._onPooledPromiseFulfilled(c,d)},function(d){u._onPooledPromiseRejected(c,d)}).catch(function(d){u._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var c={done:!1};this._size<this._concurrency&&!(c=this._iterator.next()).done;)this._size++,this._trackPromise(c.value);this._done=c===null||!!c.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})})(Yz);var hce=Yz.exports;const gce=fd(hce),Vf=1e-4,dt=(e,t,n)=>Math.min(Math.max(e,t),n),rc=(e,t,n="round")=>{const r=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*r)/r},pce=(e,t,n="round")=>{const r=1/t;return Math[n](e*r)/r},g5=(e,t)=>(e+t)/2,pm=e=>typeof e=="number"&&Number.isFinite(e),kR=(e,t,n=Vf)=>Math.abs(e-t)<n,Ey=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function xf(e){return e*Math.PI/180}function J2(e){return e*180/Math.PI}function mce(e){return Math.abs(Math.sin(2*e))<Vf}function Gr(e,t,n=0,r=0){return[e-n,t-r]}function sn(e,t=[0,0]){return Gr(e[0]-t[0],e[1]-t[1])}function Ql(e,t){return e[0]*t[1]-t[0]*e[1]}function RR(e,t){return e[0]*t[0]+e[1]*t[1]}function Eu(e,t){return[e[0]+t[0],e[1]+t[1]]}function Sf(e,t){return[e[0]-t[0],e[1]-t[1]]}function el(e,t){return Gr(e[0]*t,e[1]*t)}function Uce(e){return e[0]*e[0]+e[1]*e[1]}function bce(e){return Math.sqrt(Uce(e))}const _y=e=>{const t=bce(e);return Gr(e[0]/t,e[1]/t)};function B(e,t){return[e,t]}function QI(e){return e.length===2?B(e[0],e[1]):void 0}function V_(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function Cg(e,t){const n=Math.abs;return n(e[0]-t[0])<Vf&&n(e[1]-t[1])<Vf}function le([e,t],[n,r],i){return B((e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r)}function Ag(e,t=[0,0]){return B(e[0]+t[0],e[1]+t[1])}function u2(e,t){return B((e[0]+t[0])/2,(e[1]+t[1])/2)}function Xn(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function PR(e,t){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}const Bl=(e,t,n)=>Ag(t,el(sn(e,t),n)),Zz=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function yce(e,t,n,r){return[e,t,n,r]}function un(e,t){return[e,t]}const vce=e=>Array.isArray(e)&&e.length===2&&V_(e[0])&&V_(e[0]),Ece=(e,t)=>{const n=sn(e[0]),r=sn(e[1]),i=sn(t[0]),o=sn(t[1]),s=Sf(r,n),a=Sf(o,i),l=Ql(s,a);if(l===0)return null;const c=Sf(sn(t[0]),sn(e[0])),u=Ql(c,s)/l,d=Ql(c,a)/l;if(u===0)return null;const f=Eu(n,el(s,d));return d>=0&&d<1&&u>=0&&u<1?f:null},eU=(e,t,n=Vf)=>{const r=_ce(e,t);return r===0?!0:r<n},_ce=(e,t)=>{const[n,r]=e,[[i,o],[s,a]]=t,l=n-i,c=r-o,u=s-i,d=a-o,f=l*u+c*d,g=u*u+d*d;let U=-1;g!==0&&(U=f/g);let b,v;U<0?(b=i,v=o):U>1?(b=s,v=a):(b=i+U*u,v=o+U*d);const _=n-b,E=r-v;return Math.sqrt(_*_+E*E)};function MR(...e){return qz(e)}function wy(e){return qz(e)}const LR=(e,t)=>{const n=e[0],r=e[1];let i=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o][0],l=t[o][1],c=t[s][0],u=t[s][1];(l>r&&u<=r||l<=r&&u>r)&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i},wce=(e,t,n=Vf)=>{let r=!1;for(let i=0,o=t.length-1;i<o;i++)if(eU(e,un(t[i],t[i+1]),n)){r=!0;break}return r};function qz(e){return Ice(e)?e:[...e,e[0]]}function Ice(e){return Cg(e[0],e[e.length-1])}function wi(e,t){return Ho([e,t])}const Iy=([e,t],[n,r])=>e<=n?t>=n:e>=n?r>=e:!1,Ty=([e,t],[n,r])=>{const i=Math.max(e,n),o=Math.min(t,r);return i<=o?Ho([i,o]):null},p5=(e,[t,n])=>e>=t&&e<=n;function c1([e,t,n],r){const i=(u,d,f)=>(u[0]-f[0])*(d[1]-f[1])-(d[0]-f[0])*(u[1]-f[1]),o=i(r,e,t),s=i(r,t,n),a=i(r,n,e),l=o<0||s<0||a<0,c=o>0||s>0||a>0;return!(l&&c)}const DR=()=>{const e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),r=`${e.getDate()}`.padStart(2,"0"),i=`${e.getHours()}`.padStart(2,"0"),o=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${r}-${i}${o}`},mm=e=>e.charAt(0).toUpperCase()+e.slice(1),Tce=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),H_=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,xce=e=>H_(e)||e instanceof Element&&!!e.closest("label, button"),rf=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),tU=({fontFamily:e})=>{for(const[t,n]of Object.entries(On))if(n===e)return`${t}${M$(n).map(r=>`, ${r}`).join("")}`;return o2},an=({fontSize:e,fontFamily:t})=>`${e}px ${tU({fontFamily:t})}`,mc=(e,t)=>{let n=0,r=null;const i=(...o)=>{r=o,clearTimeout(n),n=window.setTimeout(()=>{r=null,e(...o)},t)};return i.flush=()=>{if(clearTimeout(n),r){const o=r;r=null,e(...o)}},i.cancel=()=>{r=null,clearTimeout(n)},i},a0=(e,t)=>{let n=null,r=null,i=null;const o=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),r=null,i&&(r=i,i=null,o(r))})},s=(...a)=>{r=a,n===null?o(r):t!=null&&t.trailing&&(i=a)};return s.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),r&&(e(...i||r),r=i=null)},s.cancel=()=>{r=i=null,n!==null&&(cancelAnimationFrame(n),n=null)},s},Cf=e=>1-Math.pow(1-e,4),NR=(e,t,n)=>(t-e)*Cf(n)+e,Sce=({fromValues:e,toValues:t,onStep:n,duration:r=250,interpolateValue:i,onStart:o,onEnd:s,onCancel:a})=>{let l=!1,c=0,u;function d(f){if(l)return;u===void 0&&(u=f,o==null||o());const g=Math.min(f-u,r),U=Cf(g/r),b={};if(Object.keys(e).forEach(v=>{const _=v,E=(t[_]-e[_])*U+e[_];b[_]=E}),n(b),g<r){const v=g/r,_={};Object.keys(e).forEach(E=>{const w=E,T=e[w],A=t[w];let M;M=i?i(T,A,v,w):NR(T,A,v),M==null&&(M=NR(T,A,v)),_[w]=M}),n(_),c=window.requestAnimationFrame(d)}else n(t),s==null||s()}return c=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(c)}},Cce=(e,t)=>{if(!e.length||t<1)return[];let n=0,r=0;const i=Array(Math.ceil(e.length/t));for(;n<e.length;)i[r++]=e.slice(n,n+=t);return i},xi=(e,t)=>Math.abs(e-t),lr=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},de=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),sl?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),En=({clientX:e,clientY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:o,scrollY:s})=>{const a=(e-r)/n.value-o,l=(t-i)/n.value-s;return{x:a,y:l}},oa=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:o,scrollY:s})=>{const a=(e+o)*n.value+r,l=(t+s)*n.value+i;return{x:a,y:l}},m5=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),Ace="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",kce="֑-߿יִ-﷽ﹰ-ﻼ",Rce=new RegExp(`^[^${Ace}]*[${kce}]`),Qz=e=>Rce.test(e),ms=e=>{const[t,n]=e;return{x:t,y:n}},Jz=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},eV=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},of=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},sa=e=>{const t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===ft.transparent},fE=e=>e.fillStyle!=="solid"||sa(e.backgroundColor),l3=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},OR=(e,t)=>{const n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],r=/\.0+$|(\.[0-9]*[1-9])0+$/;let i;for(i=n.length-1;i>0&&!(e>=n[i].value);i--);return(e/n[i].value).toFixed(t).replace(r,"$1")+n[i].symbol},W_=()=>{var e;return((e=document.querySelector('meta[name="version"]'))==null?void 0:e.content)||L$},Pce=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},Mce=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},JI=e=>{e.preventDefault(),e.returnValue=""},tV=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),l0=()=>Date.now(),He=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),Lce=e=>e.reduce((t,n,r)=>(t.set(n.id,[n,r]),t),new Map),Dl=(e,t)=>e.reduce((n,r)=>(n[t?t(r):String(r)]=r,n),{}),Dce=e=>e.reduce((t,n,r)=>{const i={...n,prev:null,next:null};if(r!==0){const o=t[r-1];if(i.prev=o,o.next=i,r===e.length-1){const s=t[0];i.next=s,s.prev=i}}return t.push(i),t},[]),Nce=()=>!1,Oce=()=>typeof process<"u"&&!0,nV=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),fb=(e,t)=>{let n=!1;for(const r in t){const i=t[r];if(typeof i<"u"){if(e[r]===i&&(typeof i!="object"||i===null))continue;n=!0}}return n?{...e,...t}:e},nU=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Fce=()=>nU()==="iframe",rU=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,G_=e=>{const t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},FR=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,ai=(e,t,n,r=!1)=>{const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return r&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(const s of n)if(!(e[s]===t[s]||FR(e[s],t[s])))return r&&console.warn(`%cisShallowEqual: ${s} not equal ->`,"color: #8B4000",e[s],t[s]),!1;return!0}return i.every(s=>{const a=n==null?void 0:n[s],l=a?a(e[s],t[s]):e[s]===t[s]||FR(e[s],t[s]);return!l&&r&&console.warn(`%cisShallowEqual: ${s} not equal ->`,"color: #8B4000",e[s],t[s]),l})},c3=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(i){if(e==null||e(i),!n||!(i!=null&&i.defaultPrevented))return t==null?void 0:t(i)},qu=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function Yi(e,t){if(!e)throw new Error(t)}const Bce=e=>{let t,n;const r=function(i){const o=Object.entries(i);if(t){let a=!0;for(const[l,c]of o)if(t.get(l)!==c){a=!1;break}if(a)return n}const s=e(i);return t=new Map(o),n=s,s};return r.clear=()=>{t=void 0,n=void 0},r},rV=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),ic=e=>JSON.parse(JSON.stringify(e)),Ep=(e,t)=>ai(e,t)?e:t;function Dn(e,t,n,r){var i;return e?((i=e==null?void 0:e.addEventListener)==null||i.call(e,t,n,r),()=>{var o;(o=e==null?void 0:e.removeEventListener)==null||o.call(e,t,n,r)}):()=>{}}function $ce(e,t=!0){const n=e.length;if(n<4)return"";let r=e[0],i=e[1];const o=e[2];let s=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${g5(i[0],o[0]).toFixed(2)},${g5(i[1],o[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)r=e[a],i=e[a+1],s+=`${g5(r[0],i[0]).toFixed(2)},${g5(r[1],i[1]).toFixed(2)} `;return t&&(s+="Z"),s}const iV=e=>e.replace(/\r?\n|\r/g,`
`),Ho=e=>e,Qu=async(e,...t)=>new Promise(n=>{n(e(...t))}),zce=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Vce=e=>{try{return JSON.parse(e)}catch{return null}};class BR{constructor(t,n){H(this,"pool");H(this,"entries",{});this.pool=new gce(t,n)}all(){const t=n=>{if(n.data.result){const[r,i]=n.data.result;this.entries[r]=i}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}}const hb=e=>e.replace(/"/g,"&quot;"),$R=e=>Array.isArray(e)?e:[e],dr=e=>!!e&&e.type==="image"&&!!e.fileId,kt=e=>!!e&&e.type==="image",co=e=>!!e&&e.type==="embeddable",uu=e=>!!e&&e.type==="iframe",hs=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),Ae=e=>e!=null&&e.type==="text",oV=e=>e!=null&&e.type==="frame",gb=e=>e!=null&&e.type==="magicframe",We=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),Rs=e=>e!=null&&Hce(e.type),Hce=e=>e==="freedraw",et=e=>e!=null&&eT(e.type),st=e=>e!=null&&e.type==="arrow",De=e=>st(e)&&e.elbowed,eT=e=>e==="arrow"||e==="line",Za=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&sV(e.type),sV=e=>e==="arrow",Ua=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Wce=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Gce=e=>e!=null&&(e.type==="rectangle"||e.type==="image"||e.type==="text"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="freedraw"),Af=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||st(e)),aV=e=>{const t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return qu(t,null),!1}},u3=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",Ps=e=>{var t;return Af(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Cn=e=>e!==null&&"containerId"in e&&e.containerId!==null&&Ae(e),c0=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",lV=e=>e==="line"||e==="arrow"||e==="diamond",Xce=(e,t)=>!!((e===Er.ADAPTIVE_RADIUS||e===Er.LEGACY)&&c0(t.type)||e===Er.PROPORTIONAL_RADIUS&&lV(t.type)),jce=e=>lV(e.type)?{type:Er.PROPORTIONAL_RADIUS}:c0(e.type)?{type:Er.ADAPTIVE_RADIUS}:null,xy=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null;let Kce=new $z(Date.now());const al=()=>Math.floor(Kce.next()*2**31),Ms=()=>a3(),cV="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function X1(e,t,n){const r=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let s=0;for(;(e[s]||r)===t[s];)s++;if(s>0)return t.slice(0,s)+X1(e.slice(s),t.slice(s),n)}const i=e?n.indexOf(e[0]):0,o=t!=null?n.indexOf(t[0]):n.length;if(o-i>1){const s=Math.round(.5*(i+o));return n[s]}else return t&&t.length>1?t.slice(0,1):n[i]+X1(e.slice(1),null,n)}function uV(e){if(e.length!==dV(e[0]))throw new Error("invalid integer part of order key: "+e)}function dV(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function Hp(e){const t=dV(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function zR(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=Hp(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function VR(e,t){uV(e);const[n,...r]=e.split("");let i=!0;for(let o=r.length-1;i&&o>=0;o--){const s=t.indexOf(r[o])+1;s===t.length?r[o]=t[0]:(r[o]=t[s],i=!1)}if(i){if(n==="Z")return"a"+t[0];if(n==="z")return null;const o=String.fromCharCode(n.charCodeAt(0)+1);return o>"a"?r.push(t[0]):r.pop(),o+r.join("")}else return n+r.join("")}function Yce(e,t){uV(e);const[n,...r]=e.split("");let i=!0;for(let o=r.length-1;i&&o>=0;o--){const s=t.indexOf(r[o])-1;s===-1?r[o]=t.slice(-1):(r[o]=t[s],i=!1)}if(i){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const o=String.fromCharCode(n.charCodeAt(0)-1);return o<"Z"?r.push(t.slice(-1)):r.pop(),o+r.join("")}else return n+r.join("")}function u1(e,t,n=cV){if(e!=null&&zR(e,n),t!=null&&zR(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=Hp(t),c=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+X1("",c,n);if(l<t)return l;const u=Yce(l,n);if(u==null)throw new Error("cannot decrement any more");return u}if(t==null){const l=Hp(e),c=e.slice(l.length),u=VR(l,n);return u??l+X1(c,null,n)}const r=Hp(e),i=e.slice(r.length),o=Hp(t),s=t.slice(o.length);if(r===o)return r+X1(i,s,n);const a=VR(r,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:r+X1(i,null,n)}function X_(e,t,n,r=cV){if(n===0)return[];if(n===1)return[u1(e,t,r)];if(t==null){let s=u1(e,t,r);const a=[s];for(let l=0;l<n-1;l++)s=u1(s,t,r),a.push(s);return a}if(e==null){let s=u1(e,t,r);const a=[s];for(let l=0;l<n-1;l++)s=u1(e,s,r),a.push(s);return a.reverse(),a}const i=Math.floor(n/2),o=u1(e,t,r);return[...X_(e,o,i,r),o,...X_(o,t,n-i-1,r)]}class Zce extends Error{constructor(t="Couldn't export canvas.",n="CANVAS_ERROR"){super(),this.name=n,this.message=t}}class kg extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}class hf extends Error{constructor(n="Image Scene Data Error",r="IMAGE_SCENE_DATA_ERROR"){super(n);H(this,"code");this.name="EncodingError",this.code=r}}class qce extends Error{constructor(){super(...arguments);H(this,"code","ELEMENT_HAS_INVALID_INDEX")}}class fV extends Error{constructor(n="Worker URL is not defined!",r="WORKER_URL_NOT_DEFINED"){super(n);H(this,"code");this.name="WorkerUrlNotDefinedError",this.code=r}}class hV extends Error{constructor(n="Worker has to be in a separate chunk!",r="WORKER_IN_THE_MAIN_CHUNK"){super(n);H(this,"code");this.name="WorkerInTheMainChunkError",this.code=r}}class Us extends Error{constructor(t){super(t),this.name="ExcalidrawError"}}const ki=(e,t,n)=>{const r=e.split(`
`).map(a=>a||" ").join(`
`),i=parseFloat(t),o=tue(r,i,n);return{width:rT(r,t),height:o}},gV="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),pV=(e,t)=>{const n=nue(e);return n===0?ki(gV.split("").join(`
`),e,t).width+vr*2:n+vr*2},tT=(e,t)=>ki("",e,t).width+vr*2,Qce=()=>rT(gV,an({fontSize:Pc,fontFamily:md}))>0,Rg=e=>iV(e).replace(/\t/g,"        "),nT=e=>Rg(e).split(`
`),Jce=e=>{const t=nT(e.text).length;return e.height/t/e.fontSize},iU=(e,t)=>e*t,mV=(e,t)=>iU(e,t)+vr*2;let hE;class eue{constructor(){H(this,"canvas");this.canvas=document.createElement("canvas")}getLineWidth(t,n){const r=this.canvas.getContext("2d");return r.font=n,r.measureText(t).width}}const Hf=(e,t)=>(hE||(hE=new eue),hE.getLineWidth(e,t)),rT=(e,t)=>{const n=nT(e);let r=0;return n.forEach(i=>{r=Math.max(r,Hf(i,t))}),r},tue=(e,t,n)=>{const r=nT(e).length;return iU(t,n)*r},oU=(()=>{const e={};return{calculate:(i,o)=>{const s=i.charCodeAt(0);if(e[o]||(e[o]=[]),!e[o][s]){const a=Hf(i,o);e[o][s]=a}return e[o][s]},getCache:i=>e[i],clearCache:i=>{e[i]=[]}}})(),nue=e=>{const t=oU.getCache(e);if(!t)return 0;const n=t.filter(r=>r!==void 0);return Math.max(...n)};let gE,U5,pE;const rue=e=>(gE||(gE=Gt.class(...Object.values(zl))),gE.test(e)),iue=()=>{if(!U5)try{U5=sue()}catch{U5=oue()}return U5},iT=()=>(pE||(pE=aue()),pE),as={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?…\//u},zl={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}｀＇＾〃〰〆＃＆＊＋－ー／＼＝｜￤〒￢￣","u"),OPENING:/（［｛〈《｟｢「『【〖〔〘〚＜〝/u,CLOSING:/）］｝〉》｠｣」』】〗〕〙〛＞。．，、〟‥？！：；・〜〞/u,CURRENCY:/￥￦￡￠＄/u},Hd={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},oue=()=>Gt.or(iT(),tr.On(as.HYPHEN,as.WHITESPACE,zl.CHAR)),sue=()=>Gt.or(iT(),tr.Before(as.WHITESPACE).Build(),tr.After(as.WHITESPACE,as.HYPHEN).Build(),tr.Before(zl.CHAR,zl.CURRENCY).NotPrecededBy(as.OPENING,zl.OPENING).Build(),tr.After(zl.CHAR).NotFollowedBy(as.HYPHEN,as.CLOSING,zl.CLOSING).Build(),tr.BeforeMany(zl.OPENING).NotPrecededBy(as.OPENING).Build(),tr.AfterMany(zl.CLOSING).NotFollowedBy(as.CLOSING).Build(),tr.AfterMany(as.CLOSING).FollowedBy(as.OPENING).Build()),aue=()=>Gt.group(Gt.or(Hd.FLAG,Gt.and(Hd.MOST,Hd.JOINER,Gt.build(`(?:${Hd.ZWJ.source}(?:${Hd.FLAG.source}|${Hd.ANY.source}${Hd.JOINER.source}))*`)))),Gt={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>Gt.build(Gt.join(...e)),or:(...e)=>Gt.build(e.map(t=>t.source).join("|")),group:(...e)=>Gt.build(`(${Gt.join(...e)})`),class:(...e)=>Gt.build(`[${Gt.join(...e)}]`)},tr={On:(...e)=>{const t=Gt.join(...e);return Gt.build(`([${t}])`)},Before:(...e)=>{const t=Gt.join(...e),n=()=>Gt.build(`(?=[${t}])`);return tr.Chain(n)},After:(...e)=>{const t=Gt.join(...e),n=()=>Gt.build(`(?<=[${t}])`);return tr.Chain(n)},BeforeMany:(...e)=>{const t=Gt.join(...e),n=()=>Gt.build(`(?<![${t}])(?=[${t}])`);return tr.Chain(n)},AfterMany:(...e)=>{const t=Gt.join(...e),n=()=>Gt.build(`(?<=[${t}])(?![${t}])`);return tr.Chain(n)},NotBefore:(...e)=>{const t=Gt.join(...e),n=()=>Gt.build(`(?![${t}])`);return tr.Chain(n)},NotAfter:(...e)=>{const t=Gt.join(...e),n=()=>Gt.build(`(?<![${t}])`);return tr.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{const n=e(),r=tr.After(...t).Build(),i=()=>Gt.and(r,n);return tr.Chain(i)},FollowedBy:(...t)=>{const n=e(),r=tr.Before(...t).Build(),i=()=>Gt.and(n,r);return tr.Chain(i)},NotPrecededBy:(...t)=>{const n=e(),r=tr.NotAfter(...t).Build(),i=()=>Gt.and(r,n);return tr.Chain(i)},NotFollowedBy:(...t)=>{const n=e(),r=tr.NotBefore(...t).Build(),i=()=>Gt.and(n,r);return tr.Chain(i)}})},lue=e=>{const t=iue();return e.normalize("NFC").split(t).filter(Boolean)},mh=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;const r=[],i=e.split(`
`);for(const o of i){if(Hf(o,t)<=n){r.push(o);continue}const a=cue(o,t,n);r.push(...a)}return r.join(`
`)},cue=(e,t,n)=>{const r=[],o=lue(e)[Symbol.iterator]();let s="",a=0,l=o.next();for(;!l.done;){const c=l.value,u=s+c,d=fue(c)?a+oU.calculate(c,t):Hf(u,t);if(/\s/.test(c)||d<=n){s=u,a=d,l=o.next();continue}if(s)r.push(s.trimEnd()),s="",a=0;else{const f=uue(c,t,n),g=f[f.length-1]??"",U=f.slice(0,-1);r.push(...U),s=g,a=Hf(g,t),l=o.next()}}if(s){const c=due(s,t,n);r.push(c)}return r},uue=(e,t,n)=>{if(iT().test(e))return[e];const r=[],i=Array.from(e);let o="",s=0;for(const a of i){const l=oU.calculate(a,t),c=s+l;if(c<=n){o=o+a,s=c;continue}o&&r.push(o),o=a,s=l}return o&&r.push(o),r},due=(e,t,n)=>{if(!(Hf(e,t)>n))return e;let[,i,o]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],s=Hf(i,t);for(const a of Array.from(o)){const l=oU.calculate(a,t),c=s+l;if(c>n)break;i=i+a,s=c}return i},fue=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0;function HR(e,t,n,r=i=>i){return e*r(.5-t*(.5-n))}function hue(e){return[-e[0],-e[1]]}function qs(e,t){return[e[0]+t[0],e[1]+t[1]]}function cs(e,t){return[e[0]-t[0],e[1]-t[1]]}function js(e,t){return[e[0]*t,e[1]*t]}function gue(e,t){return[e[0]/t,e[1]/t]}function _p(e){return[e[1],-e[0]]}function WR(e,t){return e[0]*t[0]+e[1]*t[1]}function pue(e,t){return e[0]===t[0]&&e[1]===t[1]}function mue(e){return Math.hypot(e[0],e[1])}function Uue(e){return e[0]*e[0]+e[1]*e[1]}function GR(e,t){return Uue(cs(e,t))}function UV(e){return gue(e,mue(e))}function bue(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function wp(e,t,n){let r=Math.sin(n),i=Math.cos(n),o=e[0]-t[0],s=e[1]-t[1],a=o*i-s*r,l=o*r+s*i;return[a+t[0],l+t[1]]}function j_(e,t,n){return qs(e,js(cs(t,e),n))}function XR(e,t,n){return qs(e,js(t,n))}var{min:d1,PI:yue}=Math,jR=.275,Ip=yue+1e-4;function vue(e,t={}){let{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:o=!0,easing:s=ee=>ee,start:a={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=ee=>ee*(2-ee)}=a,{cap:f=!0,easing:g=ee=>--ee*ee*ee+1}=l;if(e.length===0||n<=0)return[];let U=e[e.length-1].runningLength,b=a.taper===!1?0:a.taper===!0?Math.max(n,U):a.taper,v=l.taper===!1?0:l.taper===!0?Math.max(n,U):l.taper,_=Math.pow(n*r,2),E=[],w=[],T=e.slice(0,10).reduce((ee,q)=>{let Z=q.pressure;if(o){let te=d1(1,q.distance/n),pe=d1(1,1-te);Z=d1(1,ee+(pe-ee)*(te*jR))}return(ee+Z)/2},e[0].pressure),A=HR(n,i,e[e.length-1].pressure,s),M,S=e[0].vector,x=e[0].point,C=x,R=x,O=C,F=!1;for(let ee=0;ee<e.length;ee++){let{pressure:q}=e[ee],{point:Z,vector:te,distance:pe,runningLength:Ie}=e[ee];if(ee<e.length-1&&U-Ie<3)continue;if(i){if(o){let pt=d1(1,pe/n),mt=d1(1,1-pt);q=d1(1,T+(mt-T)*(pt*jR))}A=HR(n,i,q,s)}else A=n/2;M===void 0&&(M=A);let Se=Ie<b?d(Ie/b):1,lt=U-Ie<v?g((U-Ie)/v):1;A=Math.max(.01,A*Math.min(Se,lt));let at=(ee<e.length-1?e[ee+1]:e[ee]).vector,gt=ee<e.length-1?WR(te,at):1,ht=WR(te,S)<0&&!F,tn=gt!==null&&gt<0;if(ht||tn){let pt=js(_p(S),A);for(let mt=1/13,Ot=0;Ot<=1;Ot+=mt)R=wp(cs(Z,pt),Z,Ip*Ot),E.push(R),O=wp(qs(Z,pt),Z,Ip*-Ot),w.push(O);x=R,C=O,tn&&(F=!0);continue}if(F=!1,ee===e.length-1){let pt=js(_p(te),A);E.push(cs(Z,pt)),w.push(qs(Z,pt));continue}let Kt=js(_p(j_(at,te,gt)),A);R=cs(Z,Kt),(ee<=1||GR(x,R)>_)&&(E.push(R),x=R),O=qs(Z,Kt),(ee<=1||GR(C,O)>_)&&(w.push(O),C=O),T=q,S=te}let N=e[0].point.slice(0,2),J=e.length>1?e[e.length-1].point.slice(0,2):qs(e[0].point,[1,1]),K=[],ne=[];if(e.length===1){if(!(b||v)||c){let ee=XR(N,UV(_p(cs(N,J))),-(M||A)),q=[];for(let Z=1/13,te=Z;te<=1;te+=Z)q.push(wp(ee,N,Ip*2*te));return q}}else{if(!(b||v&&e.length===1))if(u)for(let q=1/13,Z=q;Z<=1;Z+=q){let te=wp(w[0],N,Ip*Z);K.push(te)}else{let q=cs(E[0],w[0]),Z=js(q,.5),te=js(q,.51);K.push(cs(N,Z),cs(N,te),qs(N,te),qs(N,Z))}let ee=_p(hue(e[e.length-1].vector));if(v||b&&e.length===1)ne.push(J);else if(f){let q=XR(J,ee,A);for(let Z=1/29,te=Z;te<1;te+=Z)ne.push(wp(q,J,Ip*3*te))}else ne.push(qs(J,js(ee,A)),qs(J,js(ee,A*.99)),cs(J,js(ee,A*.99)),cs(J,js(ee,A)))}return E.concat(ne,w.reverse(),K)}function Eue(e,t={}){var n;let{streamline:r=.5,size:i=16,last:o=!1}=t;if(e.length===0)return[];let s=.15+(1-r)*.85,a=Array.isArray(e[0])?e:e.map(({x:g,y:U,pressure:b=.5})=>[g,U,b]);if(a.length===2){let g=a[1];a=a.slice(0,-1);for(let U=1;U<5;U++)a.push(j_(a[0],g,U/4))}a.length===1&&(a=[...a,[...qs(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=a.length-1;for(let g=1;g<a.length;g++){let U=o&&g===f?a[g].slice(0,2):j_(d.point,a[g],s);if(pue(d.point,U))continue;let b=bue(U,d.point);if(u+=b,g<f&&!c){if(u<i)continue;c=!0}d={point:U,pressure:a[g][2]>=0?a[g][2]:.5,vector:UV(cs(d.point,U)),distance:b,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function _ue(e,t={}){return vue(Eue(e,t),t)}const bV=(e,t,n)=>{const r=n.reduce((i,o)=>(o.groupIds.includes(e)&&(i[o.id]=!0),i),{});return Object.keys(r).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...r}}},Vi=function(){let e=null,t=null,n=null;const r=(o,s,a,l)=>{if(n!==void 0&&s===t&&o===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;const c={};for(const f of o){let g=f.groupIds;if(a.editingGroupId){const U=g.indexOf(a.editingGroupId);U>-1&&(g=g.slice(0,U))}if(g.length>0){const U=g[g.length-1];c[U]=!0}}const u={},d=s.reduce((f,g)=>{if(g.isDeleted)return f;const U=g.groupIds.find(b=>c[b]);return U&&(f[g.id]=!0,Array.isArray(u[U])?u[U].push(g.id):u[U]=[g.id]),f},{});for(const f of Object.keys(u))u[f].length<2&&c[f]&&(c[f]=!1);return t=s,e=o,n={editingGroupId:a.editingGroupId,selectedGroupIds:c,selectedElementIds:Bt({...a.selectedElementIds,...d},l)},n},i=(o,s,a,l)=>{const c=l?l.scene.getSelectedElements({selectedElementIds:o.selectedElementIds,elements:s}):ot(s,o);return c.length?r(c,s,o,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:Bt(o.selectedElementIds,a)}};return i.clearCache=()=>{t=null,e=null,n=null},i}(),yV=(e,t)=>vV(e,t)!=null,vV=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),kf=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),EV=(e,t)=>{let n={...t,selectedGroupIds:{}};for(const r of e){let i=r.groupIds;if(t.editingGroupId){const o=i.indexOf(t.editingGroupId);o>-1&&(i=i.slice(0,o))}if(i.length>0){const o=i[i.length-1];n={...n,...bV(o,n,e)}}}return n.selectedGroupIds},wue=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),d2=(e,t)=>e.groupIds.includes(t),Tn=(e,t)=>{const n=[];for(const r of e.values())d2(r,t)&&n.push(r);return n},Iue=(e,t)=>e.groupIds.find(n=>t[n]),Tue=(e,t,n)=>{const r=[...e],i=t?e.indexOf(t):-1,o=i>-1?i:e.length;for(let s=0;s<o;s++)r[s]=n(r[s]);return r},xue=(e,t,n)=>{const r=[...e],i=n?r.indexOf(n):-1,o=i>-1?i:r.length;return r.splice(o,0,t),r},Sue=(e,t)=>e.filter(n=>!t[n]),d3=(e,t)=>{const n=new Map;return e.forEach(r=>{const i=r.groupIds.length===0?r.id:r.groupIds[r.groupIds.length-1],o=n.get(i)||[],s=rt(r,t);s&&o.push(s),n.set(i,[...o,r])}),Array.from(n.values())},Cue=e=>{const t=new Set;for(const[,n]of e)if(!n.isDeleted)for(const r of n.groupIds??[])t.add(r);return t},_V=e=>{const t=e.flatMap(i=>i.groupIds),n=new Map;let r=0;for(const i of t)n.set(i,(n.get(i)??0)+1),n.get(i)>r&&(r=n.get(i));return r===e.length},Pg=e=>e.groupIds.length>0;var oT={};Object.defineProperty(oT,"__esModule",{value:!0});var wV=oT.sanitizeUrl=void 0,Aue=/^([^\w]*)(javascript|data|vbscript)/im,kue=/&#(\w+)(^\w|;)?/g,Rue=/&(newline|tab);/gi,Pue=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Mue=/^.+(:|&colon;)/gim,Lue=[".","/"];function Due(e){return Lue.indexOf(e[0])>-1}function Nue(e){return e.replace(kue,function(t,n){return String.fromCharCode(n)})}function Oue(e){var t=Nue(e||"").replace(Rue,"").replace(Pue,"").trim();if(!t)return"about:blank";if(Due(t))return t;var n=t.match(Mue);if(!n)return t;var r=n[0];return Aue.test(r)?"about:blank":t}wV=oT.sanitizeUrl=Oue;const zo=e=>(e=e.trim(),e&&wV(hb(e))),IV=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),sT=e=>{if(e=zo(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};let K_=[];const we=e=>(K_=K_.concat(e),e),TV='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',Fue='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',xV='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',Bue=`data:${Ne.svg},${encodeURIComponent(`${TV}${xV}</svg>`)}`,$ue=`data:${Ne.svg},${encodeURIComponent(`${TV}${Fue}${xV}</svg>`)}`,Ks=e=>{e&&(e.style.cursor="")},on=(e,t)=>{e&&(e.style.cursor=t)};let Ma,KR;const SV=(e,t)=>{const r=()=>{const i=t===Ge.DARK;Ma=document.createElement("canvas"),Ma.theme=t,Ma.height=20,Ma.width=20;const o=Ma.getContext("2d");o.lineWidth=1,o.beginPath(),o.arc(Ma.width/2,Ma.height/2,5,0,2*Math.PI),o.fillStyle=i?Kr.black:Kr.white,o.fill(),o.strokeStyle=i?Kr.white:Kr.black,o.stroke(),KR=Ma.toDataURL(Ne.svg)};(!Ma||Ma.theme!==t)&&r(),on(e,`url(${KR}) ${20/2} ${20/2}, auto`)},Ba=(e,t)=>{if(e)if(t.activeTool.type==="selection")Ks(e);else if(xg(t))e.style.cursor=Qt.GRAB;else if(Ha(t))SV(e,t.theme);else if(t.activeTool.type==="laser"){const n=t.theme===Ge.LIGHT?Bue:$ue;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=Qt.AUTO):e.style.cursor=Qt.CROSSHAIR},Ei=class Ei{};H(Ei,"rg",new c2),H(Ei,"cache",new WeakMap),H(Ei,"get",t=>Ei.cache.get(t)),H(Ei,"set",(t,n)=>Ei.cache.set(t,n)),H(Ei,"delete",t=>Ei.cache.delete(t)),H(Ei,"destroy",()=>{Ei.cache=new WeakMap}),H(Ei,"generateElementShape",(t,n)=>{const r=n!=null&&n.isExporting?void 0:Ei.get(t);if(r!==void 0)return r;Iw.delete(t);const i=S5e(t,Ei.rg,n||{isExporting:!1,canvasBackgroundColor:ft.white,embedsValidationStatus:null});return Ei.cache.set(t,i),i});let Sn=Ei;const ra=e=>"var(--icon-fill-color)",CV=e=>e===Ge.LIGHT?Kr.white:"#1e1e1e",ie=(e,t=512)=>{const{width:n=512,height:r=n,mirror:i,style:o,...s}=typeof t=="number"?{width:t}:t;return p("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${r}`,className:Re({"rtl-mirror":i}),style:o,...s,children:typeof e=="string"?p("path",{fill:"currentColor",d:e}):e})},Te={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},nt={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("rect",{x:3,y:8,width:18,height:4,rx:1}),p("line",{x1:12,y1:8,x2:12,y2:21}),p("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),p("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),Te);const aT=ie(z("g",{strokeWidth:"1.25",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),p("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),p("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),p("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),p("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),Te),zue=ie(z("svg",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),p("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Te),Vue=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("circle",{cx:"12",cy:"12",r:"1"}),p("circle",{cx:"12",cy:"19",r:"1"}),p("circle",{cx:"12",cy:"5",r:"1"})]}),Te),Hue=ie(z("svg",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),p("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),p("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),Te),f3=ie(z("g",{children:[p("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),p("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),p("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:p("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),p("g",{mask:"url(#UnlockedIcon)",children:p("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),nt),lT=ie(z("g",{strokeWidth:"1.25",children:[p("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),p("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),p("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),nt),Wue=ie(z(ke,{children:[p("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),p("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),p("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),Gue=ie(z(ke,{children:[p("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),p("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),p("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),Xue=ie(z(ke,{children:[p("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),p("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),p("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),Y_=ie(p("g",{fill:"currentColor",children:p("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),jue=ie(z("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),p("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),Kue=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),Te),Yue=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),Te),Zue=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("circle",{cx:"12",cy:"12",r:"9"})]}),Te),que=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),p("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),p("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),Te),Que=ie(p("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),nt),Jue=ie(z("g",{strokeWidth:"1.25",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),p("path",{d:"M16 7h4"}),p("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),Te),f2=ie(z("g",{strokeWidth:"1.25",children:[p("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),p("path",{d:"m11.25 5.417 3.333 3.333"})]}),nt),AV=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),p("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),p("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),p("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),p("polyline",{points:"5 20 11 4 13 4 20 20"})]}),Te),ede=ie(z("g",{strokeWidth:"1.25",children:[p("path",{d:"M12.5 6.667h.01"}),p("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),p("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),p("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),nt),tde=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),p("path",{d:"M18 13.3l-6.3 -6.3"})]}),Te),YR=ie(p("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),nt),ZR=ie(p("path",{d:"M5 10h10",strokeWidth:"1.25"}),nt),nde=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M21 21l-6 -6"}),p("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),p("path",{d:"M3 4v4h4"})]}),Te),Ju=ie(p("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),nt),rde=ie(z("g",{strokeWidth:"1.25",children:[p("polyline",{points:"12 16 18 10 12 4"}),p("polyline",{points:"8 4 2 10 8 16"})]}),nt),Z_=ie(z("g",{strokeWidth:"1.25",children:[p("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),p("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),nt),q_=ie(p("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),nt),Q_=ie(p("g",{stroke:"currentColor",strokeLinejoin:"round",children:p("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...nt,strokeWidth:1.5}),kV=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),p("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),p("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),Te),h3=ie(p("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),nt),cT=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("circle",{cx:"12",cy:"12",r:"9"}),p("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),p("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Te),ide=ie(z("g",{strokeWidth:"1.25",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("circle",{cx:"12",cy:"12",r:"9"}),p("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),p("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Te),qR=ie(p("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),nt),uT=ie(p("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),nt),RV=ie(z("g",{strokeWidth:"1.25",children:[p("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),p("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),nt),PV=ie(z("g",{strokeWidth:"1.25",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),p("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),Te),ode=ie(p("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),Sy=ie(z("g",{strokeWidth:"1.25",children:[p("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),p("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),nt),sde=ie("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),ade=ie("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),dT=ie(p("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),nt);ie("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});const lde=ie("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),mE=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),p("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),p("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),Te),MV=ie(z("g",{strokeWidth:"1.25",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M15 8h.01"}),p("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),p("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),p("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),p("path",{d:"M19 16v6"}),p("path",{d:"M22 19l-3 3l-3 -3"})]}),Te),cde=ie("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});ie("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});ie("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});const ude=ie("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");ie("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");const QR=ie(p("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),nt),JR=ie(p("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),nt),dde=ie("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),fT=ie(p("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),nt),fde=ie("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"),hde=ie("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),gde=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),p("path",{d:"M12 14v-11"}),p("path",{d:"M9 6l3 -3l3 3"})]}),Te),pde=ie(z(ke,{children:[p("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),p("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});ie(p("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});const LV=z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M12 10l0 10"}),p("path",{d:"M12 10l4 4"}),p("path",{d:"M12 10l-4 4"}),p("path",{d:"M4 4l16 0"})]}),DV=z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M12 5l0 14"}),p("path",{d:"M16 9l-4 -4"}),p("path",{d:"M8 9l4 -4"})]}),eP=ie(DV,Te),tP=ie(DV,{...Te,style:{transform:"rotate(180deg)"}}),nP=ie(LV,Te),rP=ie(LV,{...Te,style:{transform:"rotate(180deg)"}}),iP=ie(z(ke,{children:[z("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[p("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),oP=ie(z(ke,{children:[z("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[p("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),sP=ie(z(ke,{children:[z("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[p("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),aP=ie(z(ke,{children:[z("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[p("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),mde=ie(z(ke,{children:[z("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[p("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),Ude=ie(z(ke,{children:[z("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[p("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),lP=ie(z("g",{stroke:"currentColor",strokeWidth:"1.25",children:[p("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),p("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),nt),cP=ie(z("g",{stroke:"currentColor",strokeWidth:"1.25",children:[p("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),p("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),p("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),nt),hT=ie(z("g",{strokeWidth:"1.5",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("circle",{cx:"9",cy:"7",r:"4"}),p("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),p("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),p("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),Te);ie("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");ie("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");const Uh=ie(z(ke,{children:[p("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:p("path",{d:"M15 5 5 15M5 5l10 10"})}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt);ie("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});const bde=ie("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});ie("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});const uP=Ee.memo(({theme:e})=>ie(z(ke,{children:[p("path",{d:"M25 26H111V111H25",fill:ra()}),p("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:ra(),strokeWidth:"2"}),p("path",{d:"M100 100H160V160H100",fill:ra()}),p("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:ra(),strokeWidth:"2"}),z("g",{fill:CV(e),stroke:ra(),strokeWidth:"6",children:[p("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),p("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),p("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),p("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),dP=Ee.memo(({theme:e})=>ie(z(ke,{children:[p("path",{d:"M25 26H111V111H25",fill:ra()}),p("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:ra(),strokeWidth:"2"}),p("path",{d:"M100 100H160V160H100",fill:ra()}),p("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:ra(),strokeWidth:"2"}),z("g",{fill:CV(e),stroke:ra(),strokeWidth:"6",children:[p("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),p("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),p("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),p("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),p("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),p("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),yde=ie(p("g",{strokeWidth:1.25,children:p("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),nt),vde=ie(z(ke,{children:[p("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),p("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:p("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),p("g",{mask:"url(#FillHachureIcon)",children:p("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),nt),Ede=ie(z(ke,{children:[z("g",{clipPath:"url(#a)",children:[p("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),p("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:p("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),p("g",{mask:"url(#FillCrossHatchIcon)",children:p("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),_de=ie(z(ke,{children:[p("g",{clipPath:"url(#a)",children:p("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...nt,fill:"currentColor"}),NV=ie(p(ke,{children:p("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),nt),wde=ie(p("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),nt),Ide=ie(p("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),nt);Ee.memo(({theme:e})=>ie(p("path",{d:"M6 10H34",stroke:ra(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));const Tde=ie(z("g",{strokeWidth:"2",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M5 12h2"}),p("path",{d:"M17 12h2"}),p("path",{d:"M11 12h2"})]}),Te),xde=ie(z("g",{strokeWidth:"2",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M4 12v.01"}),p("path",{d:"M8 12v.01"}),p("path",{d:"M12 12v.01"}),p("path",{d:"M16 12v.01"}),p("path",{d:"M20 12v.01"})]}),Te),Sde=ie(p("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),nt),Cde=ie(p("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),nt),Ade=ie(p("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),nt),kde=ie(z("svg",{strokeWidth:"1.5",children:[p("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),p("path",{d:"M13.3333 3.33331V3.34331"}),p("path",{d:"M16.6667 3.33331V3.34331"}),p("path",{d:"M16.6667 6.66669V6.67669"}),p("path",{d:"M16.6667 10V10.01"}),p("path",{d:"M3.33334 13.3333V13.3433"}),p("path",{d:"M16.6667 13.3333V13.3433"}),p("path",{d:"M3.33334 16.6667V16.6767"}),p("path",{d:"M6.66666 16.6667V16.6767"}),p("path",{d:"M10 16.6667V16.6767"}),p("path",{d:"M13.3333 16.6667V16.6767"}),p("path",{d:"M16.6667 16.6667V16.6767"})]}),nt),Rde=ie(z("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),p("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),p("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),p("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),p("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),p("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),p("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),p("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),p("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),p("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),p("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),p("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),Te),Pde=ie(z("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[p("path",{d:"M12 12l9 0"}),p("path",{d:"M3 9l6 6"}),p("path",{d:"M3 15l6 -6"})]}),Te),J_=Ee.memo(({flip:e=!1})=>ie(z("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[p("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),p("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),Mde=Ee.memo(({flip:e=!1})=>ie(z("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[p("path",{d:"M32 10L6 10",strokeWidth:2}),p("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Lde=Ee.memo(({flip:e=!1})=>ie(z("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[p("path",{d:"M26 10L6 10"}),p("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Dde=Ee.memo(({flip:e=!1})=>ie(p("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:p("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),Nde=Ee.memo(({flip:e=!1})=>ie(z("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[p("path",{d:"M32 10L6 10",strokeWidth:2}),p("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Ode=Ee.memo(({flip:e=!1})=>ie(z("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[p("path",{d:"M6,9.5H27"}),p("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),Fde=Ee.memo(({flip:e=!1})=>ie(z("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[p("path",{d:"M6,9.5H20"}),p("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Bde=Ee.memo(({flip:e=!1})=>ie(z("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[p("path",{d:"M6,9.5H20"}),p("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),$de=Ee.memo(({flip:e=!1})=>ie(p("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:p("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),zde=Ee.memo(({flip:e=!1})=>ie(p("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:p("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),Vde=Ee.memo(({flip:e=!1})=>ie(p("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:p("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Hde=ie(z(ke,{children:[p("g",{clipPath:"url(#a)",children:p("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),Wde=ie(z(ke,{children:[p("g",{clipPath:"url(#a)",children:p("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),Gde=ie(z(ke,{children:[p("g",{clipPath:"url(#a)",children:p("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),Xde=ie(p(ke,{children:p("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),nt),g3=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M3 7v-2h13v2"}),p("path",{d:"M10 5v14"}),p("path",{d:"M12 19h-4"}),p("path",{d:"M15 13v-1h6v1"}),p("path",{d:"M18 12v7"}),p("path",{d:"M17 19h2"})]}),Te),jde=ie(p(ke,{children:z("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M7 12h10"}),p("path",{d:"M7 5v14"}),p("path",{d:"M17 5v14"}),p("path",{d:"M15 19h4"}),p("path",{d:"M15 5h4"}),p("path",{d:"M5 19h4"}),p("path",{d:"M5 5h4"})]})}),Te),Cy=ie(p(ke,{children:p("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:p("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),nt),ew=ie(z(ke,{children:[p("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:p("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),p("defs",{children:p("clipPath",{id:"a",children:p("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),nt),Kde=ie(z("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),p("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),p("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),Te),Yde=ie(z("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),p("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),p("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),Te),Zde=ie(z("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),p("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),p("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),Te),qde=Ee.memo(({theme:e})=>ie(z("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),p("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),Te)),Qde=Ee.memo(({theme:e})=>ie(z("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),p("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),Te)),Jde=Ee.memo(({theme:e})=>ie(z("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),p("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),p("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),Te)),OV=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M21 19h-18l9 -15"}),p("path",{d:"M20.615 15.171h.015"}),p("path",{d:"M19.515 11.771h.015"}),p("path",{d:"M17.715 8.671h.015"}),p("path",{d:"M15.415 5.971h.015"})]}),Te),efe=ie(p("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});ie(p("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));const FV=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),p("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),p("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),p("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),Te),fP=ie(z(ke,{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),p("path",{d:"M7 11l5 5l5 -5"}),p("path",{d:"M12 4l0 12"})]}),Te),sU=ie(z(ke,{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),p("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),Te),tfe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),p("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),p("path",{d:"M9.15 14.85l8.85 -10.85"}),p("path",{d:"M6 4l8.85 10.85"})]}),Te),nfe=ie(z(ke,{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),p("path",{d:"M12 17l0 .01"}),p("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Te),rfe=ie(z(ke,{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M7 4v16l13 -8z"})]}),Te),ife=ie(z(ke,{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),Te),ofe=ie(z(ke,{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M5 12l5 5l10 -10"})]}),Te),sfe=ie(z(ke,{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),p("path",{d:"M12 9v4"}),p("path",{d:"M12 17h.01"})]}),Te),afe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M11 7l6 6"}),p("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),Te),lfe=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M12 3l-4 7h8z"}),p("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),p("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),Te),BV=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M4 7l16 0"}),p("path",{d:"M4 17l16 0"}),p("path",{d:"M7 4l0 16"}),p("path",{d:"M17 4l0 16"})]}),Te),$V=ie(p("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),pb=ie(z("g",{strokeWidth:"1.25",children:[p("path",{d:"M4.16602 10H15.8327"}),p("path",{d:"M12.5 13.3333L15.8333 10"}),p("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),nt),zV=ie(z("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[p("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),p("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),VV=ie(z("g",{stroke:"currentColor",fill:"none",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),p("path",{d:"M15 6l3 3"}),p("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),p("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),Te);ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),p("path",{d:"M15 6l3 3"}),p("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),p("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),Te);ie(z("g",{stroke:"currentColor",fill:"none",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),p("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),p("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),p("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),p("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),p("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),Te);const cfe=ie(z("g",{stroke:"currentColor",fill:"none",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),p("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),p("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),p("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),Te),gT=ie(z("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),p("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),Te),ufe=ie(z("g",{stroke:"currentColor",fill:"none",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),p("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),p("path",{d:"M3 3l18 18"})]}),Te),dfe=ie(z("g",{stroke:"currentColor",fill:"none",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),p("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),p("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),p("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),p("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),p("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),Te),ffe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),p("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),p("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),p("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),p("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),p("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),Te),Wf=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),p("path",{d:"M21 21l-6 -6"})]}),Te),hfe=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),p("path",{d:"M12 7v5l3 3"}),p("path",{d:"M19 16l-2 3h4l-2 3"})]}),Te),gfe=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),p("path",{d:"M5 10a7 7 0 0 0 14 0"}),p("path",{d:"M8 21l8 0"}),p("path",{d:"M12 17l0 4"})]}),Te),pfe=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M3 3l18 18"}),p("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),p("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),p("path",{d:"M8 21l8 0"}),p("path",{d:"M12 17l0 4"})]}),Te),HV=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),Te),mfe=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),p("path",{d:"M12 20v.01"}),p("path",{d:"M16 20v.01"}),p("path",{d:"M8 20v.01"}),p("path",{d:"M4 20v.01"}),p("path",{d:"M4 16v.01"}),p("path",{d:"M4 12v.01"}),p("path",{d:"M4 8v.01"}),p("path",{d:"M4 4v.01"}),p("path",{d:"M8 4v.01"}),p("path",{d:"M12 4v.01"}),p("path",{d:"M16 4v.01"}),p("path",{d:"M20 4v.01"}),p("path",{d:"M20 8v.01"}),p("path",{d:"M20 12v.01"}),p("path",{d:"M20 16v.01"}),p("path",{d:"M20 20v.01"})]}),Te),Ufe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M5 3v18"}),p("path",{d:"M19 21v-18"}),p("path",{d:"M5 7h14"}),p("path",{d:"M5 15h14"}),p("path",{d:"M8 13v4"}),p("path",{d:"M11 13v4"}),p("path",{d:"M16 13v4"}),p("path",{d:"M14 5v4"}),p("path",{d:"M11 5v4"}),p("path",{d:"M8 5v4"}),p("path",{d:"M3 21h18"})]}),Te),bfe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M3 12l18 0"}),p("path",{d:"M7 16l10 0l-10 5l0 -5"}),p("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),Te),yfe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M12 3l0 18"}),p("path",{d:"M16 7l0 10l5 0l-5 -10"}),p("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),Te),WV=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),p("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),p("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),Te),pT=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),p("path",{d:"M22 22l-3 -3"}),p("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),p("path",{d:"M3 11v-1"}),p("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),p("path",{d:"M10 3h1"}),p("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),Te),vfe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),p("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),p("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),p("path",{d:"M10 15l2 6l2 -6"}),p("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),Te),Efe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),p("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),p("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),p("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),p("path",{d:"M11 21v-6l3 6v-6"})]}),Te),_fe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),p("path",{d:"M4 8l5 0"}),p("path",{d:"M15 8l4 0"})]}),Te),wfe=ie(z("g",{strokeWidth:1.25,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),p("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),p("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),p("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),p("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),Te),Ife=ie(z("g",{stroke:"currentColor",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...Te,strokeWidth:1.5}),GV=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),p("path",{d:"M21 12h-13l3 -3"}),p("path",{d:"M11 15l-3 -3"})]}),Te),XV=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),p("path",{d:"M10 9l5 3l-5 3z"})]}),Te),Tfe=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M3 6h18"}),p("path",{d:"M3 12h18"}),p("path",{d:"M3 18h18"}),p("path",{d:"M6 3v18"}),p("path",{d:"M12 3v18"}),p("path",{d:"M18 3v18"})]}),Te),xfe=ie(z("g",{strokeWidth:1.5,children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),p("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),p("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),Te),Sfe=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M6 18l12 -12"}),p("path",{d:"M18 10v-4h-4"})]}),Te),Cfe=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),p("path",{d:"M18 4l3 3l-3 3"})]}),Te),Afe=ie(z("g",{children:[p("path",{d:"M16,12L20,9L16,6"}),p("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),Te),jV=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M6 9l6 6l6 -6"})]}),Te),kfe=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M6 15l6 -6l6 6"})]}),Te),Rfe=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M6 15l6 -6l6 6"})]}),Te),hP=ie(z("g",{strokeWidth:"1.25",children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),p("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),Te),KV=ie(z("g",{children:[p("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),p("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),p("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),p("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),p("path",{d:"M5 7l0 10"}),p("path",{d:"M7 5l10 0"}),p("path",{d:"M7 19l10 0"}),p("path",{d:"M19 7l0 10"})]}),Te),Ay={[On.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:f2},[On.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35},icon:Cy},[On["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15},icon:jde},[On["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25},icon:ew},[On.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:f2,deprecated:!0},[On.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},icon:Cy,deprecated:!0,local:!0},[On.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},icon:ew,deprecated:!0},[On["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[V1.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[V1["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},sf={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},mT="local:";class Pfe{constructor(t){H(this,"instance");H(this,"debounceTerminate");this.instance=new Worker(t,{type:"module"})}}class UT{constructor(t,n){H(this,"idleWorkers",new Set);H(this,"workerUrl");H(this,"workerTTL");this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new fV;if(!import.meta.url||t.toString()===import.meta.url)throw new hV;return new UT(t,n)}async postMessage(t,n){let r;const i=Array.from(this.idleWorkers).shift();return i?(this.idleWorkers.delete(i),r=i):r=await this.createWorker(),new Promise((o,s)=>{r.instance.onmessage=this.onMessageHandler(r,o),r.instance.onerror=this.onErrorHandler(r,s),r.instance.postMessage(t,n),r.debounceTerminate(()=>s(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(const t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){const t=new Pfe(this.workerUrl);return t.debounceTerminate=mc(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return r=>{t.debounceTerminate(),this.idleWorkers.add(t),n(r.data)}}onErrorHandler(t,n){return r=>{t.debounceTerminate(()=>n(r)),t.debounceTerminate.flush(),this.clear()}}}let gP=typeof Worker<"u";const Mfe=async(e,t)=>{const{Commands:n,subsetToBase64:r,toBase64:i}=await Dfe();return gP?Qu(async()=>{try{const o=await Nfe(),s=e.slice(0),a=await o.postMessage({command:n.Subset,arrayBuffer:s,codePoints:t},{transfer:[s]});return i(a)}catch(o){return gP=!1,Oce()&&(o instanceof fV||o instanceof hV)||console.error("Failed to use workers for subsetting, falling back to the main thread.",o),r(e,t)}}):r(e,t)};let UE=null,bE=null;const Lfe=async()=>(UE||(UE=Le(()=>import("./subset-worker.chunk-BQzNBZro.js"),__vite__mapDeps([0,1]))),UE),Dfe=async()=>(bE||(bE=Le(()=>import("./subset-shared.chunk-xwIkZ9An.js"),__vite__mapDeps([]))),bE);let yE=null;const Nfe=()=>(yE||(yE=Qu(async()=>{const{WorkerUrl:e}=await Lfe();return UT.create(e)})),yE);var vE={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Q1=class Q1{constructor(t,n,r){H(this,"urls");H(this,"fontFace");this.urls=Q1.createUrls(n);const i=this.urls.map(o=>`url(${o}) ${Q1.getFormat(o)}`).join(", ");this.fontFace=new FontFace(t,i,{display:"swap",style:"normal",weight:"400",...r})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;const n=Array.from(t).map(r=>r.codePointAt(0));return this.getContent(n).then(r=>`@font-face { font-family: ${this.fontFace.family}; src: url(${r}); }`)}async getContent(t){let n=0;const r=[];for(;n<this.urls.length;){const i=this.urls[n];try{const o=await this.fetchFont(i);return await Mfe(o,t)}catch(o){r.push(`"${i.toString()}" returned error "${o}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(r,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return Qu(async()=>{const n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){const i=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${i}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){const t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{const[r,i]=n.replace("U+","").split("-");return i?`\\u{${r}}-\\u{${i}}`:`\\u{${r}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(mT))return[];if(t.startsWith("http"))return[new URL(t)];const n=t.replace(/^\/+/,""),r=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){const i=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);r.push(new URL(n,i))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(i=>{const o=this.normalizeBaseUrl(i);r.push(new URL(n,o))});return r.push(new URL(n,Q1.UNPKG_FALLBACK_URL)),r}static getFormat(t){if(!(t instanceof URL))return"";try{const n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var r;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(r=window==null?void 0:window.location)==null?void 0:r.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};H(Q1,"UNPKG_FALLBACK_URL",`https://unpkg.com/${vE.VITE_PKG_NAME?`${vE.VITE_PKG_NAME}@${vE.PKG_VERSION}`:"@excalidraw/excalidraw"}/dist/prod/`);let tw=Q1;const Ofe="/fonts/CascadiaCode/CascadiaCode-Regular.woff2",Ffe=[{uri:Ofe}],Bfe="/fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",$fe="/fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",zfe="/fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",Vfe="/fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",Hfe=[{uri:Bfe,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:$fe,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:zfe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:Vfe,descriptors:{unicodeRange:"U+3bb"}}],Wfe=[{uri:mT}],Gfe="/fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",Xfe="/fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",jfe="/fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",Kfe="/fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",Yfe="/fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",Zfe="/fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",qfe="/fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",Qfe=[{uri:Gfe,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:Xfe,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:jfe,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:Kfe,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:Yfe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:Zfe,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:qfe,descriptors:{unicodeRange:"U+300-301,U+303"}}],Jfe=[{uri:mT}],ehe="/fonts/LiberationSans/LiberationSans-Regular.woff2",the=[{uri:ehe}],nhe="/fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",rhe="/fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",ihe=[{uri:rhe,descriptors:{unicodeRange:sf.LATIN_EXT}},{uri:nhe,descriptors:{unicodeRange:sf.LATIN}}],ohe="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",she="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",ahe="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",lhe="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",che="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",uhe=[{uri:lhe,descriptors:{unicodeRange:sf.CYRILIC_EXT,weight:"500"}},{uri:ahe,descriptors:{unicodeRange:sf.CYRILIC,weight:"500"}},{uri:che,descriptors:{unicodeRange:sf.VIETNAMESE,weight:"500"}},{uri:she,descriptors:{unicodeRange:sf.LATIN_EXT,weight:"500"}},{uri:ohe,descriptors:{unicodeRange:sf.LATIN,weight:"500"}}],dhe="/fonts/Virgil/Virgil-Regular.woff2",fhe=[{uri:dhe}],hhe="/fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",ghe="/fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",phe="/fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",mhe="/fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",Uhe="/fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",bhe="/fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",yhe="/fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",vhe="/fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",Ehe="/fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",_he="/fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",whe="/fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",Ihe="/fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",The="/fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",xhe="/fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",She="/fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",Che="/fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",Ahe="/fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",khe="/fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",Rhe="/fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",Phe="/fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",Mhe="/fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",Lhe="/fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",Dhe="/fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",Nhe="/fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",Ohe="/fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",Fhe="/fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",Bhe="/fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",$he="/fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",zhe="/fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",Vhe="/fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",Hhe="/fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",Whe="/fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",Ghe="/fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",Xhe="/fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",jhe="/fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",Khe="/fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",Yhe="/fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",Zhe="/fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",qhe="/fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",Qhe="/fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",Jhe="/fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",e1e="/fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",t1e="/fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",n1e="/fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",r1e="/fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",i1e="/fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",o1e="/fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",s1e="/fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",a1e="/fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",l1e="/fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",c1e="/fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",u1e="/fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",d1e="/fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",f1e="/fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",h1e="/fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",g1e="/fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",p1e="/fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",m1e="/fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",U1e="/fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",b1e="/fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",y1e="/fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",v1e="/fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",E1e="/fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",_1e="/fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",w1e="/fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",I1e="/fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",T1e="/fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",x1e="/fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",S1e="/fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",C1e="/fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",A1e="/fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",k1e="/fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",R1e="/fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",P1e="/fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",M1e="/fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",L1e="/fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",D1e="/fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",N1e="/fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",O1e="/fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",F1e="/fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",B1e="/fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",$1e="/fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",z1e="/fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",V1e="/fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",H1e="/fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",W1e="/fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",G1e="/fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",X1e="/fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",j1e="/fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",K1e="/fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",Y1e="/fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",Z1e="/fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",q1e="/fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",Q1e="/fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",J1e="/fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",ege="/fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",tge="/fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",nge="/fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",rge="/fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",ige="/fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",oge="/fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",sge="/fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",age="/fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",lge="/fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",cge="/fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",uge="/fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",dge="/fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",fge="/fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",hge="/fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",gge="/fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",pge="/fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",mge="/fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",Uge="/fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",bge="/fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",yge="/fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",vge="/fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",Ege="/fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",_ge="/fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",wge="/fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",Ige="/fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",Tge="/fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",xge="/fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",Sge="/fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",Cge="/fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",Age="/fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",kge="/fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",Rge="/fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",Pge="/fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",Mge="/fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",Lge="/fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",Dge="/fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",Nge="/fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",Oge="/fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",Fge="/fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",Bge="/fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",$ge="/fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",zge="/fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",Vge="/fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",Hge="/fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",Wge="/fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",Gge="/fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",Xge="/fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",jge="/fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",Kge="/fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",Yge="/fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",Zge="/fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",qge="/fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",Qge="/fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",Jge="/fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",e0e="/fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",t0e="/fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",n0e="/fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",r0e="/fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",i0e="/fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",o0e="/fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",s0e="/fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",a0e="/fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",l0e="/fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",c0e="/fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",u0e="/fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",d0e="/fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",f0e="/fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",h0e="/fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",g0e="/fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",p0e="/fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",m0e="/fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",U0e="/fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",b0e="/fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",y0e="/fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",v0e="/fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",E0e="/fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",_0e="/fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",w0e="/fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",I0e="/fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",T0e="/fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",x0e="/fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",S0e="/fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",C0e="/fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",A0e="/fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",k0e="/fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",R0e="/fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",P0e="/fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",M0e="/fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",L0e="/fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",D0e="/fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",N0e="/fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",O0e="/fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",F0e="/fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",B0e="/fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",$0e="/fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",z0e="/fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",V0e="/fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",H0e="/fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",W0e="/fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",G0e="/fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",X0e="/fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",j0e="/fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",K0e="/fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",Y0e="/fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",Z0e="/fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",q0e="/fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",Q0e="/fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",J0e="/fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",epe="/fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",tpe="/fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",npe="/fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",rpe="/fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",ipe="/fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",ope="/fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",spe=[{uri:hhe,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:ghe,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:phe,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:mhe,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:Uhe,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:bhe,descriptors:{unicodeRange:"U+d520-d608"}},{uri:yhe,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:vhe,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:Ehe,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:_he,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:whe,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:Ihe,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:The,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:xhe,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:She,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:Che,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:Ahe,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:khe,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:Rhe,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:Phe,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:Mhe,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:Lhe,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:Dhe,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:Nhe,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:Ohe,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:Fhe,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:Bhe,descriptors:{unicodeRange:"U+c258-c340"}},{uri:$he,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:zhe,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:Vhe,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:Hhe,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:Whe,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:Ghe,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:Xhe,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:jhe,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:Khe,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:Yhe,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:Zhe,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:qhe,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:Qhe,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:Jhe,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:e1e,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:t1e,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:n1e,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:r1e,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:i1e,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:o1e,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:s1e,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:a1e,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:l1e,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:c1e,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:u1e,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:d1e,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:f1e,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:h1e,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:g1e,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:p1e,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:m1e,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:U1e,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:b1e,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:y1e,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:v1e,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:E1e,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:_1e,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:w1e,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:I1e,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:T1e,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:x1e,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:S1e,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:C1e,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:A1e,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:k1e,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:R1e,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:P1e,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:M1e,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:L1e,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:D1e,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:N1e,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:O1e,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:F1e,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:B1e,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:$1e,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:z1e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:V1e,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:H1e,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:W1e,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:G1e,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:X1e,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:j1e,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:K1e,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:Y1e,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:Z1e,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:q1e,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:Q1e,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:J1e,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:ege,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:tge,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:nge,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:rge,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:ige,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:oge,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:sge,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:age,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:lge,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:cge,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:uge,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:dge,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:fge,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:hge,descriptors:{unicodeRange:"U+487a-4932"}},{uri:gge,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:pge,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:mge,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:Uge,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:bge,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:yge,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:vge,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:Ege,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:_ge,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:wge,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:Ige,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:Tge,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:xge,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:Sge,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:Cge,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:Age,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:kge,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:Rge,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:Pge,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:Mge,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:Lge,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:Dge,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:Nge,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:Oge,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:Fge,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:Bge,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:$ge,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:zge,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:Vge,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:Hge,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:Wge,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:Gge,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:Xge,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:jge,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:Kge,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:Yge,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:Zge,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:qge,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:Qge,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:Jge,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:e0e,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:t0e,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:n0e,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:r0e,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:i0e,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:o0e,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:s0e,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:a0e,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:l0e,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:c0e,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:u0e,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:d0e,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:f0e,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:h0e,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:g0e,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:p0e,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:m0e,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:U0e,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:b0e,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:y0e,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:v0e,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:E0e,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:_0e,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:w0e,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:I0e,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:T0e,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:x0e,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:S0e,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:C0e,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:A0e,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:k0e,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:R0e,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:P0e,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:M0e,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:L0e,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:D0e,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:N0e,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:O0e,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:F0e,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:B0e,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:$0e,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:z0e,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:V0e,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:H0e,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:W0e,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:G0e,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:X0e,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:j0e,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:K0e,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:Y0e,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:Z0e,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:q0e,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:Q0e,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:J0e,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:epe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:tpe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:npe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:rpe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:ipe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:ope,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],_t=class _t{constructor(t){H(this,"scene");H(this,"getSceneFamilies",()=>_t.getUniqueFamilies(this.scene.getNonDeletedElements()));H(this,"onLoaded",t=>{let n=!0;for(const o of t){const s=`${o.family}-${o.style}-${o.weight}-${o.unicodeRange}`;_t.loadedFontsCache.has(s)||(_t.loadedFontsCache.add(s),n=!1)}if(n)return;let r=!1;const i=this.scene.getNonDeletedElementsMap();for(const o of this.scene.getNonDeletedElements())if(Ae(o)){r=!0,Sn.delete(o),oU.clearCache(an(o));const s=Zr(o,i);s&&Sn.delete(s)}r&&this.scene.triggerUpdate()});H(this,"loadSceneFonts",async()=>{const t=this.getSceneFamilies(),n=_t.getCharsPerFamily(this.scene.getNonDeletedElements());return _t.loadFontFaces(t,n)});this.scene=t}static get registered(){return _t._registered?_t._initialized||(_t._registered=new Map([..._t.init().entries(),..._t._registered.entries()])):_t._registered=_t.init(),_t._registered}get registered(){return _t.registered}static async generateFontFaceDeclarations(t){const n=_t.getUniqueFamilies(t),r=_t.getCharsPerFamily(t),i=n.find(l=>M$(l).includes(z1));if(i){const l=_t.getCharacters(r,i);if(rue(l)){const c=V1[z1];r[c]=new Set(l),n.unshift(V1[z1])}}const o=_t.fontFacesStylesGenerator(n,r),s=3,a=await new BR(o,s).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(const{fontFaces:s,metadata:a}of _t.registered.values())if(!a.local)for(const{fontFace:l}of s)window.document.fonts.has(l)||window.document.fonts.add(l);const r=_t.fontFacesLoader(t,n),i=10;return(await new BR(r,i).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(const[r,i]of t.entries()){const o=an({fontFamily:i,fontSize:16}),s=_t.getCharacters(n,i);window.document.fonts.check(o,s)||(yield Qu(async()=>{var a;try{const l=await window.document.fonts.load(o,s);return[r,l]}catch(l){console.error(`Failed to load font "${o}" from urls "${(a=_t.registered.get(i))==null?void 0:a.fontFaces.map(c=>c.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(const[r,i]of t.entries()){const{fontFaces:o,metadata:s}=_t.registered.get(i)??{};if(!Array.isArray(o)){console.error(`Couldn't find registered fonts for font-family "${i}"`,_t.registered);continue}if(!(s!=null&&s.local))for(const[a,l]of o.entries())yield Qu(async()=>{try{const c=_t.getCharacters(n,i),u=await l.toCSS(c);return u?[r*1e4+a,u]:void 0}catch(c){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,c)}})}}static register(t,n,...r){const i=On[t]??V1[t];return this.registered.get(i)||this.registered.set(i,{metadata:n,fontFaces:r.map(({uri:s,descriptors:a})=>new tw(t,s,a))}),this.registered}static init(){const t={registered:new Map},n=(r,...i)=>{const o=On[r]??V1[r],s=Ay[o]??Ay[On.Excalifont];_t.register.call(t,r,s,...i)};return n("Cascadia",...Ffe),n("Comic Shanns",...Hfe),n("Excalifont",...Qfe),n("Helvetica",...Jfe),n("Liberation Sans",...the),n("Lilita One",...ihe),n("Nunito",...uhe),n("Virgil",...fhe),n(z1,...spe),n(o2,...Wfe),_t._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,r)=>(Ae(r)&&n.add(r.fontFamily),n),new Set))}static getCharsPerFamily(t){const n={};for(const r of t)if(Ae(r))for(const i of r.originalText)n[r.fontFamily]||(n[r.fontFamily]=new Set),n[r.fontFamily].add(i);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(_t.registered.keys())}};H(_t,"loadedFontsCache",new Set),H(_t,"_registered"),H(_t,"_initialized",!1),H(_t,"loadElementsFonts",async t=>{const n=_t.getUniqueFamilies(t),r=_t.getCharsPerFamily(t);return _t.loadFontFaces(n,r)});let ca=_t;const YV=(e,t,n)=>{var c;const{unitsPerEm:r,ascender:i,descender:o}=((c=ca.registered.get(e))==null?void 0:c.metadata.metrics)||Ay[On.Virgil].metrics,s=t/r,a=(n-s*i+s*o)/2;return s*i+a},Gf=e=>{var n;const{lineHeight:t}=((n=ca.registered.get(e))==null?void 0:n.metadata.metrics)||Ay[On.Excalifont].metrics;return t},ba=(e,{x:t,y:n,strokeColor:r=Gn.strokeColor,backgroundColor:i=Gn.backgroundColor,fillStyle:o=Gn.fillStyle,strokeWidth:s=Gn.strokeWidth,strokeStyle:a=Gn.strokeStyle,roughness:l=Gn.roughness,opacity:c=Gn.opacity,width:u=0,height:d=0,angle:f=0,groupIds:g=[],frameId:U=null,index:b=null,roundness:v=null,boundElements:_=null,link:E=null,locked:w=Gn.locked,...T})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||u<-1e6||u>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:u,height:d,points:T.points}),{id:T.id||Ms(),type:e,x:t,y:n,width:u,height:d,angle:f,strokeColor:r,backgroundColor:i,fillStyle:o,strokeWidth:s,strokeStyle:a,roughness:l,opacity:c,groupIds:g,frameId:U,index:b,roundness:v,seed:T.seed??al(),version:T.version||1,versionNonce:T.versionNonce??0,isDeleted:!1,boundElements:_,updated:l0(),link:E,locked:w,customData:T.customData}),Uc=e=>ba(e.type,e),pP=e=>ba("embeddable",e),ape=e=>({...ba("iframe",e)}),bT=e=>Xe({...ba("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),nw=e=>Xe({...ba("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),ZV=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),Wo=e=>{const t=e.fontFamily||md,n=e.fontSize||Pc,r=e.lineHeight||Gf(t),i=Rg(e.text),o=ki(i,an({fontFamily:t,fontSize:n}),r),s=e.textAlign||Z2,a=e.verticalAlign||fy,l=ZV({textAlign:s,verticalAlign:a},o),c={...ba("text",e),text:i,fontSize:n,fontFamily:t,textAlign:s,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:o.width,height:o.height,containerId:e.containerId||null,originalText:e.originalText??i,autoResize:e.autoResize??!0,lineHeight:r};return Xe(c,{})},lpe=(e,t,n)=>{let{width:r,height:i}=ki(n,an(e),e.lineHeight);e.autoResize||(r=e.width);const{textAlign:o,verticalAlign:s}=e;let a,l;if(o==="center"&&s===Do.MIDDLE&&!e.containerId&&e.autoResize){const c=ki(e.text,an(e),e.lineHeight),u=ZV(e,{width:r-c.width,height:i-c.height});a=e.x-u.x,l=e.y-u.y}else{const[c,u,d,f]=Ke(e,t),[g,U,b,v]=zu(e,r,i,!1),_=(c-g)/2,E=(u-U)/2,w=(d-b)/2,T=(f-v)/2;[a,l]=cpe({s:!0,e:o==="center"||o==="left",w:o==="center"||o==="right"},e.x,e.y,e.angle,_,E,w,T)}return{width:r,height:i,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},cpe=(e,t,n,r,i,o,s,a)=>{const l=Math.cos(r),c=Math.sin(r);return e.e&&e.w?t+=i+s:e.e?(t+=i*(1+l),n+=i*c,t+=s*(1-l),n+=s*-c):e.w&&(t+=i*(1-l),n+=i*-c,t+=s*(1+l),n+=s*c),e.n&&e.s?n+=o+a:e.n?(t+=o*c,n+=o*(1-l),t+=a*-c,n+=a*(1+l)):(t+=o*-c,n+=o*(1+l),t+=a*c,n+=a*(1-l)),[t,n]},qV=(e,t,n,r=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(r=mh(r,an(e),t?_c(t,e):e.width));const i=lpe(e,n,r);return{text:r,...i}},upe=e=>({...ba(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),Rf=e=>({...ba(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),yT=e=>e.elbowed?{...ba(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...ba(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},QV=e=>({...ba("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),ky=(e,t=0)=>{if(e==null||typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){const r=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(const i in e)if(e.hasOwnProperty(i)){if(t===0&&(i==="shape"||i==="canvas"))continue;r[i]=ky(e[i],t+1)}return r}if(Array.isArray(e)){let r=e.length;const i=new Array(r);for(;r--;)i[r]=ky(e[r],t+1);return i}return e},bh=e=>ky(e),Ry=()=>Ms(),JV=(e,t,n,r)=>{let i=bh(n);return i.id=Ry(),i.boundElements=null,i.updated=l0(),i.seed=al(),i.groupIds=Tue(i.groupIds,e,o=>(t.has(o)||t.set(o,Ry()),t.get(o))),r&&(i=Object.assign(i,r)),i},eH=(e,t)=>{const n=[],r=He(e),i=new Map,o=a=>{if(i.has(a))return i.get(a);if(r.has(a)){const l=Ry();return i.set(a,l),l}return null},s=new Map;for(const a of e){const l=ky(a);if(l.id=o(a.id),t!=null&&t.randomizeSeed&&(l.seed=al(),O3(l)),l.groupIds&&(l.groupIds=l.groupIds.map(c=>(s.has(c)||s.set(c,Ry()),s.get(c)))),"containerId"in l&&l.containerId){const c=o(l.containerId);l.containerId=c}if("boundElements"in l&&l.boundElements&&(l.boundElements=l.boundElements.reduce((c,u)=>{const d=o(u.id);return d&&c.push({...u,id:d}),c},[])),"endBinding"in l&&l.endBinding){const c=o(l.endBinding.elementId);l.endBinding=c?{...l.endBinding,elementId:c}:null}if("startBinding"in l&&l.startBinding){const c=o(l.startBinding.elementId);l.startBinding=c?{...l.startBinding,elementId:c}:null}l.frameId&&(l.frameId=o(l.frameId)),n.push(l)}return n},Gi=(e,t)=>[0,0,0,0,t,e,1,0],dpe=(e,t)=>[0,0,0,0,t,e,0,0],yh=(e=0,t=0)=>{const n=[0,0,0,0,0,0,0,0];if(t<0||t>7)throw new Error(`Expected \`index\` between 0 and 7, got \`${t}\``);return e!==0&&(n[t]=e),n},p3=e=>[e[0],e[1],e[2],e[3],-e[4],-e[5],-e[6],-e[7]],fpe=(e,t)=>vT(t)?[e[0]+t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7]],mP=(e,t)=>vT(t)?[e[0]-t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7]],Mg=(e,t)=>vT(t)?[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t]:[hpe(e,t),t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[7]*e[3]+t[0]*e[4]+t[6]*e[5]-t[5]*e[6]+t[3]*e[7],t[5]*e[0]-t[3]*e[1]+t[7]*e[2]+t[1]*e[3]-t[6]*e[4]+t[0]*e[5]+t[4]*e[6]+t[2]*e[7],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]+t[0]*e[7]],hpe=(e,t)=>t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6],gpe=(e,t)=>[t[0]*e[0],t[1]*e[0]+t[0]*e[1],t[2]*e[0]+t[0]*e[2],t[3]*e[0]+t[0]*e[3],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[0]*e[4],t[5]*e[0]-t[3]*e[1]+t[1]*e[3]+t[0]*e[5],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]],tH=(e,t)=>[nH(e,t),e[1]*t[7]+e[4]*t[5]-e[5]*t[4]+e[7]*t[1],e[2]*t[7]-e[4]*t[6]+e[6]*t[4]+e[7]*t[2],e[3]*t[7]+e[5]*t[6]-e[6]*t[5]+e[7]*t[3],e[4]*t[7]+e[7]*t[4],e[5]*t[7]+e[7]*t[5],e[6]*t[7]+e[7]*t[6],e[7]*t[7]],nH=(e,t)=>e[0]*t[7]+e[1]*t[6]+e[2]*t[5]+e[3]*t[4]+e[4]*t[3]+e[5]*t[2]+e[6]*t[1]+e[7]*t[0],ppe=(e,t)=>[t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6],t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[7]*e[3]+t[0]*e[4]+t[3]*e[7],t[5]*e[0]+t[7]*e[2]+t[0]*e[5]+t[2]*e[7],t[6]*e[0]+t[0]*e[6],t[7]*e[0]+t[0]*e[7]],rH=e=>Math.sqrt(Math.abs(e[0]*e[0]-e[2]*e[2]-e[3]*e[3]+e[6]*e[6])),mpe=e=>Math.sqrt(Math.abs(e[7]*e[7]-e[5]*e[5]-e[4]*e[4]+e[1]*e[1])),m3=e=>{const t=rH(e);if(t===0||t===1)return e;const n=e[6]<0?-1:1;return Mg(e,n/t)},Upe=e=>{const t=mpe(e);return t===0||t===1?e:Mg(e,1/t)},vT=e=>typeof e=="number";yh(1,1);yh(1,2);yh(1,3);yh(1,4);yh(1,5);yh(1,6);yh(1,7);const rw=(e,t,n)=>m3([0,n,e,t,0,0,0,0]),aU=(e,t)=>m3(tH(t,e)),bpe=(e,t)=>ppe(e,t),ype=(e,t)=>bpe(aU(e,t),t),vpe=e=>Math.sign(e[1]),Lg=([e,t])=>[0,0,0,0,t,e,1,0],Dg=e=>[e[5],e[4]],Epe=e=>[0,0,0,0,Math.abs(e[4]),Math.abs(e[5]),1,0],_pe=(e,t)=>m3(gpe(e,t)),UP=(e,t)=>rH(tH(e,t)),Xf=(e,t)=>nH(e,t),iH=e=>[0,0,0,0,e[4],e[5],0,0],wpe=(e,t)=>Upe([0,0,0,0,t[4]-e[4],t[5]-e[5],0,0]),oH=(e,t)=>fpe(Mg(e,Math.sin(t/2)),Math.cos(t/2)),Ipe=e=>[1,0,0,0,-(.5*e[5]),.5*e[4],0,0],Tpe=(e,t)=>{const n=.5*t;return[1,0,0,0,n*e[4],n*e[5],0,0]},xpe=(e,t)=>Mg(t,e),il=(e,t)=>m3(Mg(Mg(e,t),p3(e)));function Spe(e,t){return Math.sqrt(mb(e,t))}function mb(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Cpe(e,t,n){const r=mb(t,n);if(r===0)return mb(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),mb(e,Qd(t,n,i))}function Qd(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Ape(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let a=3*r[1]-2*n[1]-o[1];a*=a;let l=3*i[0]-2*o[0]-n[0];l*=l;let c=3*i[1]-2*o[1]-n[1];return c*=c,s<l&&(s=l),a<c&&(a=c),s+a}function iw(e,t,n,r){const i=r||[];if(Ape(e,t)<n){const o=e[t+0];i.length?Spe(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=Qd(s,a,.5),d=Qd(a,l,.5),f=Qd(l,c,.5),g=Qd(u,d,.5),U=Qd(d,f,.5),b=Qd(g,U,.5);iw([s,u,g,b],0,n,i),iw([b,U,f,c],0,n,i)}return i}function kpe(e,t){return Py(e,0,e.length,t)}function Py(e,t,n,r,i){const o=i||[],s=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Cpe(e[u],s,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>r?(Py(e,t,c+1,r,o),Py(e,c,n,r,o)):(o.length||o.push(s),o.push(a)),o}function Rpe(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;iw(e,s,t,r)}return Py(r,0,r.length,n)}const sH=e=>{const{angle:t,width:n,height:r,x:i,y:o}=e,s=i+n/2,a=o+r/2,l=B(s,a);let c;return e.type==="diamond"?c=MR(le(B(s,o),l,t),le(B(i+n,a),l,t),le(B(s,o+r),l,t),le(B(i,a),l,t)):c=MR(le(B(i,o),l,t),le(B(i+n,o),l,t),le(B(i+n,o+r),l,t),le(B(i,o+r),l,t)),{type:"polygon",data:c}},Ppe=(e,t,n=10)=>{let[r,i,o,s,a,l]=Ke(e,t,!0);r-=n,o+=n,i-=n,s+=n;const c=B(a,l),u=le(B(r,i),c,e.angle),d=le(B(o,i),c,e.angle),f=le(B(r,s),c,e.angle),g=le(B(o,s),c,e.angle);return{type:"polygon",data:[u,d,g,f]}},Mpe=e=>{const{width:t,height:n,angle:r,x:i,y:o}=e;return{type:"ellipse",data:{center:B(i+t/2,o+n/2),angle:r,halfWidth:t/2,halfHeight:n/2}}},ET=e=>{for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},Lpe=(e,t=B(0,0),n,r)=>{const i=l=>le(B(l[0]+t[0],l[1]+t[1]),r,n),o=ET(e),s=[];let a=B(0,0);for(const l of o){if(l.op==="move"){const c=QI(l.data);Yi(c!=null,"Ops data is not a point"),a=i(c)}if(l.op==="bcurveTo"){const c=i(B(l.data[0],l.data[1])),u=i(B(l.data[2],l.data[3])),d=i(B(l.data[4],l.data[5]));s.push(yce(a,c,u,d)),a=d}}return{type:"polycurve",data:s}},Dpe=e=>{let t=e[0];const n=[];for(let r=1;r<e.length;r++){const i=e[r];n.push(un(t,i)),t=i}return n},Npe=(e,t,n=!1)=>{const r=o=>le(Eu(sn(o),Gr(e.x,e.y)),t,e.angle),i=Dpe(e.points.map(o=>r(o)));return n?{type:"polygon",data:wy(i.flat())}:{type:"polyline",data:i}},Ope=(e,t,n=B(0,0),r,i)=>{const o=u=>le(B(u[0]+n[0],u[1]+n[1]),i,r);if(e.roundness===null)return{type:"polygon",data:wy(e.points.map(u=>o(u)))};const s=ET(t),a=[];let l=!1;for(const u of s)u.op==="move"?(l=!l,l&&a.push(B(u.data[0],u.data[1]))):u.op==="bcurveTo"?l&&(a.push(B(u.data[0],u.data[1])),a.push(B(u.data[2],u.data[3])),a.push(B(u.data[4],u.data[5]))):u.op==="lineTo"&&l&&a.push(B(u.data[0],u.data[1]));const c=Rpe(a,10,5).map(u=>o(u));return{type:"polygon",data:wy(c)}},Fpe=(e,t,n=0)=>{const r=[e.x-n,e.y-n,e.x+e.width+n,e.y+e.height+n],i=B((r[0]+r[2])/2,(r[1]+r[3])/2);return[un(le(B(r[0],r[1]),i,e.angle),le(B(r[2],r[1]),i,e.angle)),un(le(B(r[2],r[1]),i,e.angle),le(B(r[2],r[3]),i,e.angle)),un(le(B(r[2],r[3]),i,e.angle),le(B(r[0],r[3]),i,e.angle)),un(le(B(r[0],r[3]),i,e.angle),le(B(r[0],r[1]),i,e.angle))].map(o=>Ece(t,o)).filter(o=>!!o)},Bpe=(e,t)=>{const{angle:n,halfWidth:r,halfHeight:i,center:o}=t,s=r,a=i,l=Eu(sn(e),el(sn(o),-1)),[c,u]=le(l,B(0,0),-n),d=Math.abs(c),f=Math.abs(u);let g=.707,U=.707;for(let _=0;_<3;_++){const E=s*g,w=a*U,T=(s*s-a*a)*g**3/s,A=(a*a-s*s)*U**3/a,M=E-T,S=w-A,x=d-T,C=f-A,R=Math.hypot(S,M),O=Math.hypot(C,x);g=Math.min(1,Math.max(0,(x*R/O+T)/s)),U=Math.min(1,Math.max(0,(C*R/O+A)/a));const F=Math.hypot(U,g);g/=F,U/=F}const[b,v]=[s*g*Math.sign(c),a*U*Math.sign(u)];return Xn(B(c,u),B(b,v))},$pe=(e,t,n=Vf)=>Bpe(e,t)<=n,zpe=(e,t)=>{const{center:n,angle:r,halfWidth:i,halfHeight:o}=t,s=Eu(sn(e),el(sn(n),-1)),[a,l]=le(s,B(0,0),-r);return a/i*(a/i)+l/o*(l/o)<=1},ow=(e,t,n=0)=>{switch(t.type){case"polygon":return wce(e,t.data,n);case"ellipse":return $pe(e,t.data,n);case"line":return eU(e,t.data,n);case"polyline":return lH(e,t.data,n);case"curve":return aH(e,t.data,n);case"polycurve":return Vpe(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},My=(e,t)=>{switch(t.type){case"polygon":return LR(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return zpe(e,t.data);case"polyline":{const n=wy(t.data.flat());return LR(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},Vpe=(e,t,n)=>t.some(r=>aH(e,r,n)),Hpe=e=>{const[t,n,r,i]=e;return(o,s)=>Math.pow(1-o,3)*i[s]+3*o*Math.pow(1-o,2)*r[s]+3*Math.pow(o,2)*(1-o)*n[s]+t[s]*Math.pow(o,3)},Wpe=(e,t=10)=>{const n=Hpe(e);let r=[n(0,0),n(0,1)];const i=[];let o=0;const s=1/t;for(let a=0;a<t;a++)if(o+=s,o<=1){const l=B(n(o,0),n(o,1));i.push(un(r,l)),r=l}return i},aH=(e,t,n)=>lH(e,Wpe(t),n),lH=(e,t,n=1e-4)=>t.some(r=>eU(e,r,n)),It={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},j={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:sl?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},Gpe=new Map([[j.Z,It.Z],[j.Y,It.Y]]),Xpe=e=>/^[a-z]$/.test(e.toLowerCase()),sw=(e,t)=>{if(t===e.key.toLowerCase())return!0;const n=Gpe.get(t);return!!(n&&!Xpe(e.key)&&e.code===n)},Wp=e=>e===j.ARROW_LEFT||e===j.ARROW_RIGHT||e===j.ARROW_DOWN||e===j.ARROW_UP,EE=e=>e.altKey,Tp=e=>e.shiftKey,Um=e=>e.shiftKey,aw=e=>{if(e.type==="arrow")return!1;const t=!sa(e.backgroundColor)||Ps(e)||hs(e)||Ae(e);return e.type==="line"||e.type==="freedraw"?t&&bc(e.points):t||kt(e)},w1=({x:e,y:t,element:n,shape:r,threshold:i=10,frameNameBound:o=null})=>{let s=aw(n)&&My(B(e,t),r)||ow(B(e,t),r,i);return!s&&o&&(s=My(B(e,t),{type:"polygon",data:sH(o).data})),s},_T=(e,t,n,r,i=0)=>{let[o,s,a,l]=vc(n,r);return o-=i,s-=i,a+=i,l+=i,Zz(B(o,s),B(e,t),B(a,l))},jpe=(e,t)=>!w1(e)&&!cH(e.x,e.y,uH(e.element,t))&&_T(e.x,e.y,e.element,t),cH=(e,t,n)=>!!n&&My(B(e,t),n),wT=[{icon:jue,value:"selection",key:j.V,numericKey:j[1],fillable:!0},{icon:Kue,value:"rectangle",key:j.R,numericKey:j[2],fillable:!0},{icon:Yue,value:"diamond",key:j.D,numericKey:j[3],fillable:!0},{icon:Zue,value:"ellipse",key:j.O,numericKey:j[4],fillable:!0},{icon:que,value:"arrow",key:j.A,numericKey:j[5],fillable:!0},{icon:Que,value:"line",key:j.L,numericKey:j[6],fillable:!0},{icon:f2,value:"freedraw",key:[j.P,j.X],numericKey:j[7],fillable:!1},{icon:AV,value:"text",key:j.T,numericKey:j[8],fillable:!1},{icon:ede,value:"image",key:null,numericKey:j[9],fillable:!1},{icon:tde,value:"eraser",key:j.E,numericKey:j[0],fillable:!1}],Kpe=e=>{const t=wT.find((n,r)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e)));return(t==null?void 0:t.value)||null},Gl=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return sH(e);case"arrow":case"line":{const r=((n=Sn.get(e))==null?void 0:n[0])??Sn.generateElementShape(e,null)[0],[,,,,i,o]=Ke(e,t);return aw(e)?Ope(e,r,B(e.x,e.y),e.angle,B(i,o)):Lpe(r,B(e.x,e.y),e.angle,B(i,o))}case"ellipse":return Mpe(e);case"freedraw":{const[,,,,r,i]=Ke(e,t);return Npe(e,B(r,i),aw(e))}}},uH=(e,t)=>{const n=rt(e,t);return n?e.type==="arrow"?Gl({...n,...Ce.getBoundTextElementPosition(e,n,t)},t):Gl(n,t):null},dH=(e,t)=>{const n=Sn.generateElementShape(e,null);if(!n)return null;const r=ET(n[0]);let i=B(0,0),o=0,s=1/0,a=null;for(;o<r.length;){const{op:l,data:c}=r[o];if(l==="move"&&(Yi(V_(c),"The returned ops is not compatible with a point"),i=c),l==="bcurveTo"){const u=i,d=B(c[0],c[1]),f=B(c[2],c[3]),g=B(c[4],c[5]),U=Xn(g,t);U<s&&(s=U,a=[u,d,f,g]),i=g}o++}return a},fH=(e,t,n,r,i)=>{const o=(l,c)=>Math.pow(1-l,3)*r[c]+3*l*Math.pow(1-l,2)*n[c]+3*Math.pow(l,2)*(1-l)*t[c]+e[c]*Math.pow(l,3),s=o(i,0),a=o(i,1);return B(s,a)},Ype=(e,t)=>{const n=dH(e,t);if(!n)return[];const r=[];let i=1;for(;i>0;){const o=fH(n[0],n[1],n[2],n[3],i);r.push(B(o[0],o[1])),i-=.05}return r.length&&Cg(r.at(-1),t)&&r.push(B(t[0],t[1])),r},hH=(e,t)=>{const n=[];n[0]=0;const r=Ype(e,t);let i=0,o=0;for(;i<r.length-1;){const s=Xn(r[i],r[i+1]);o+=s,n.push(o),i++}return n},Zpe=(e,t)=>hH(e,t).at(-1),qpe=(e,t,n)=>{const r=hH(e,t),i=r.length-1,o=r.at(-1),s=n*o;let a=0,l=i,c=0;for(;a<l;)c=Math.floor(a+(l-a)/2),r[c]<s?a=c+1:l=c;return r[c]>s&&c--,r[c]===s?c/i:1-(c+(s-r[c])/(r[c+1]-r[c]))/i},ja=(e,t)=>{const n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=B(n.midX,n.midY),[i,o]=le(B(n.minX,n.minY),r,e.angle),[s,a]=le(B(n.maxX,n.minY),r,e.angle),[l,c]=le(B(n.maxX,n.maxY),r,e.angle),[u,d]=le(B(n.minX,n.maxY),r,e.angle),f=[Math.min(i,s,l,u),Math.min(o,a,c,d),Math.max(i,s,l,u),Math.max(o,a,c,d)];if(t){const[g,U,b,v]=t;return[f[0]-v,f[1]-g,f[2]+U,f[3]+b]}return f},Ng=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],Fu=(e,t)=>{var n,r,i,o;if(((n=t.roundness)==null?void 0:n.type)===Er.PROPORTIONAL_RADIUS||((r=t.roundness)==null?void 0:r.type)===Er.LEGACY)return e*oE;if(((i=t.roundness)==null?void 0:i.type)===Er.ADAPTIVE_RADIUS){const s=((o=t.roundness)==null?void 0:o.value)??Vae,a=s/oE;return e<=a?e*oE:s}return 0},bc=(e,t=1)=>{if(e.length>=3){const[n,r]=[e[0],e[e.length-1]];return Xn(n,r)<=ab/t}return!1},Vn=[1,0],jr=[0,1],ji=[-1,0],ho=[0,-1],b5=(e,t)=>{const n=J2(Math.atan2(t[1]-e[1],t[0]-e[0]));return n>=315||n<45?ho:n>=45&&n<135?Vn:n>=135&&n<225?jr:ji},jf=e=>{const[t,n]=e,r=Math.abs(t),i=Math.abs(n);return t>i?Vn:t<=-i?ji:n>r?jr:ho},h2=(e,t)=>jf(sn(e,t)),Kl=(e,t)=>Jl(h2(e,t)),Rn=(e,t)=>e[0]===t[0]&&e[1]===t[1],Jl=e=>Rn(e,Vn)||Rn(e,ji),IT=(e,t,n)=>{const i=yG(t);if(e.type==="diamond"){if(n[0]<e.x)return ji;if(n[1]<e.y)return ho;if(n[0]>e.x+e.width)return Vn;if(n[1]>e.y+e.height)return jr;const c=le(Bl(B(e.x+e.width/2,e.y),i,2),i,e.angle),u=le(Bl(B(e.x+e.width,e.y+e.height/2),i,2),i,e.angle),d=le(Bl(B(e.x+e.width/2,e.y+e.height),i,2),i,e.angle),f=le(Bl(B(e.x,e.y+e.height/2),i,2),i,e.angle);return c1([c,u,i],n)?b5(c,u):c1([u,d,i],n)?b5(u,d):c1([d,f,i],n)?b5(d,f):b5(f,c)}const o=Bl(B(t[0],t[1]),i,2),s=Bl(B(t[2],t[1]),i,2),a=Bl(B(t[0],t[3]),i,2),l=Bl(B(t[2],t[3]),i,2);return c1([o,s,i],n)?ho:c1([s,l,i],n)?Vn:c1([l,a,i],n)?jr:ji},gH=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],Qpe=e=>!e[j.CTRL_OR_CMD],gf=e=>e.isBindingEnabled,_n=5,TT=10,xT=4,Jpe=(e,t)=>{const n=[];return t.forEach(r=>{const i=e.getNonDeletedElement(r);i!=null&&n.push(i)}),n},U3=(e,t,n,r,i)=>{const o=new Set,s=new Set;bP(e,t,n,"start",o,s,r),bP(e,n,t,"end",o,s,r);const a=Array.from(s).filter(l=>!o.has(l));Jpe(i,a).forEach(l=>{var c;fe(l,{boundElements:(c=l.boundElements)==null?void 0:c.filter(u=>u.type!=="arrow"||u.id!==e.id)})})},bP=(e,t,n,r,i,o,s)=>{if(t!=="keep"){if(t===null){const a=ime(e,r);a!=null&&o.add(a);return}bH(e)?(n==null||(n==="keep"?!mH(e,t,r):r==="start"||n.id!==t.id))&&(ll(e,t,r,s),i.add(t.id)):(ll(e,t,r,s),i.add(t.id))}},eme=(e,t,n,r)=>{var s,a;const i=yH(e,t,n),o=t==="start"?(s=e.startBinding)==null?void 0:s.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(o){const l=n.get(o);if(Ua(l)&&Ub(l,i,n,r))return l}return null},pH=(e,t,n)=>["start","end"].map(r=>eme(e,r,t,n)),tme=(e,t,n,r,i,o)=>{const a=e.points.length-1,l=n.findIndex(f=>f===0)>-1,c=n.findIndex(f=>f===a)>-1,u=l?t?j1(e,"start",r,i,o):null:j1(e,"start",r,i,o),d=c?t?j1(e,"end",r,i,o):null:j1(e,"end",r,i,o);return[u,d]},nme=(e,t,n,r,i)=>{const[o,s]=pH(e,t,i),a=o&&r?j1(e,"start",t,n,i):null,l=s&&r?j1(e,"end",t,n,i):null;return[a,l]},Ly=(e,t,n,r,i,o,s)=>{e.forEach(a=>{const[l,c]=o!=null&&o.length?tme(a,i,o??[],t,n,s):nme(a,t,n,i,s);U3(a,l,c,t,r)})},_E=(e,t,n)=>e.length>50?[]:e.filter(et).flatMap(r=>pH(r,t,n)).filter(r=>r!==null).filter(r=>e.filter(i=>i.id===(r==null?void 0:r.id)).length===0),lw=(e,t,n,r,i)=>{t.startBoundElement!=null&&ll(e,t.startBoundElement,"start",r);const o=bs(n,i,r,t.zoom,De(e),De(e));o!==null&&(mH(e,o,"end")||ll(e,o,"end",r))},rme=(e,t)=>{let n=e.gap;const r=lU(t,t.width,t.height);return n>r&&(n=TT+xT),{...e,gap:n}},ll=(e,t,n,r)=>{if(!st(e))return;const i={elementId:t.id,...rme(ame(e,t,n,r),t),...De(e)?Ny(e,t,n,r):{fixedPoint:null}};fe(e,{[n==="start"?"startBinding":"endBinding"]:i}),He(t.boundElements||[]).has(e.id)||fe(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},mH=(e,t,n)=>{const r=e[n==="start"?"endBinding":"startBinding"];return UH(e,r==null?void 0:r.elementId,t)},UH=(e,t,n)=>t===n.id&&bH(e),bH=e=>e.points.length<3,ime=(e,t)=>{const n=t==="start"?"startBinding":"endBinding",r=e[n];return r==null?null:(fe(e,{[n]:null}),r.elementId)},bs=(e,t,n,r,i,o)=>{if(o){let a=!1;const l=sme(t,u=>Ua(u,!1)&&Ub(u,e,n,r,(i||!fE(u))&&!We(u))).filter(u=>a?!1:(fE(u)||(a=!0),!0));if(!l||l.length===0)return null;if(l.length===1)return l[0];const c=l.filter(u=>Ub(u,e,n,r,!1));return c.length===1?c[0]:l.sort((u,d)=>d.width**2+d.height**2-(u.width**2+u.height**2)).pop()}return ome(t,a=>Ua(a,!1)&&Ub(a,e,n,r,(i||!fE(a))&&!We(a)))},ome=(e,t)=>{let n=null;for(let r=e.length-1;r>=0;--r){const i=e[r];if(!i.isDeleted&&t(i)){n=i;break}}return n},sme=(e,t)=>{const n=[];for(let r=e.length-1;r>=0;--r){const i=e[r];i.isDeleted||t(i)&&n.push(i)}return n},ame=(e,t,n,r)=>{const i=n==="start"?-1:1,o=i===-1?0:e.points.length-1,s=o-i,a=Ce.getPointAtIndexGlobalCoordinates(e,o,r),l=Ce.getPointAtIndexGlobalCoordinates(e,s,r);return{focus:vme(t,l,a,r),gap:Math.max(1,cU(t,a,r))}},_o=(e,t,n)=>{const{newSize:r,simultaneouslyUpdated:i}=n??{},o=cme(i);Ua(e)&&Oy(t,e,s=>{var u,d;if(!et(s)||s.isDeleted||!lme(s,e))return;const a={startBinding:yP(e,s.startBinding,r),endBinding:yP(e,s.endBinding,r)};if(o.has(s.id)){fe(s,a,!0);return}const l=Fy(t,s,(f,g)=>{var U;if(f&&Ua(f)&&(g==="startBinding"||g==="endBinding")&&e.id===((U=s[g])==null?void 0:U.elementId)){const b=pme(s,g,a[g],f,t);if(b)return{index:g==="startBinding"?0:s.points.length-1,point:b}}return null}).filter(f=>f!==null);Ce.movePoints(s,l,{...e.id===((u=s.startBinding)==null?void 0:u.elementId)?{startBinding:a.startBinding}:{},...e.id===((d=s.endBinding)==null?void 0:d.elementId)?{endBinding:a.endBinding}:{}});const c=rt(s,t);c&&!c.isDeleted&&mU(s,t,!1)})},lme=(e,t)=>{var n,r;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((r=e.endBinding)==null?void 0:r.elementId)===t.id},cme=e=>new Set((e||[]).map(t=>t.id)),ume=(e,t,n,r,i,o,s)=>{const a=jf(sn(t,e));return!n||!r?a:dme(o,n,i,s)?IT(n,r,e):jf(sn(e,B(n.x+n.width/2,n.y+n.height/2)))},dme=(e,t,n,r)=>{const i=cU(t,e,n),o=lU(t,t.width,t.height,r);return i>o?null:i},Dy=(e,t,n,r)=>{const i=n&&ja(n);if(n&&i){const o=IT(n,i,e),s=[...cw(n,B(e[0],e[1]-2*n.height),B(e[0],e[1]+2*n.height),_n,r)??[],...cw(n,B(e[0]-2*n.width,e[1]),B(e[0]+2*n.width,e[1]),_n,r)??[]],a=Rn(o,ji)||Rn(o,Vn),l=Math.abs(cU(n,e,r)),c=a?l<n.width*-.1:l<n.height*-.1;return s.sort((u,d)=>PR(u,e)-PR(d,e)),c?fme(t,n,i):s.filter(u=>a?Math.abs(e[1]-u[1])<.1:Math.abs(e[0]-u[0])<.1)[0]??e}return e},fme=(e,t,n)=>{const r=yG(n),i=jf(sn(e,r));switch(!0){case Rn(i,ho):return le(B((n[0]+n[2])/2+.1,n[1]),r,t.angle);case Rn(i,Vn):return le(B(n[2],(n[1]+n[3])/2+.1),r,t.angle);case Rn(i,jr):return le(B((n[0]+n[2])/2-.1,n[3]),r,t.angle);default:return le(B(n[0],(n[1]+n[3])/2-.1),r,t.angle)}},hme=(e,t)=>{const n=B(e.x+e.width/2,e.y+e.height/2),r=le(t,n,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-_n?le(B(e.x-_n,e.y),n,e.angle):le(B(e.x,e.y-_n),n,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-_n?le(B(e.x,e.y+e.height+_n),n,e.angle):le(B(e.x-_n,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+_n?le(B(e.x+e.width,e.y+e.height+_n),n,e.angle):le(B(e.x+e.width+_n,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+_n?le(B(e.x+e.width,e.y-_n),n,e.angle):le(B(e.x+e.width+_n,e.y),n,e.angle):t},gme=(e,t,n=.05)=>{const{x:r,y:i,width:o,height:s,angle:a}=e,l=B(r+o/2-.1,i+s/2-.1),c=le(t,l,-a),u=dt(n*s,5,80),d=dt(n*o,5,80);return c[0]<=r+o/2&&c[1]>l[1]-u&&c[1]<l[1]+u?le(B(r-_n,l[1]),l,a):c[1]<=i+s/2&&c[0]>l[0]-d&&c[0]<l[0]+d?le(B(l[0],i-_n),l,a):c[0]>=r+o/2&&c[1]>l[1]-u&&c[1]<l[1]+u?le(B(r+o+_n,l[1]),l,a):c[1]>=i+s/2&&c[0]>l[0]-d&&c[0]<l[0]+d?le(B(l[0],i+s+_n),l,a):t},pme=(e,t,n,r,i)=>{if(n==null||n.elementId!==r.id&&e.points.length>2)return null;const o=t==="startBinding"?-1:1,s=o===-1?0:e.points.length-1;if(De(e)&&xy(n)){const d=b3(n.fixedPoint)??Ny(e,r,t==="startBinding"?"start":"end",i).fixedPoint,f=B(r.x+r.width/2,r.y+r.height/2),g=B(r.x+d[0]*r.width,r.y+d[1]*r.height),U=le(g,f,r.angle);return Ce.pointFromAbsoluteCoords(e,U,i)}const a=s-o,l=Ce.getPointAtIndexGlobalCoordinates(e,a,i),c=Eme(r,n.focus,l,i);let u;if(n.gap===0)u=c;else{const d=cw(r,l,c,n.gap,i);!d||d.length===0?u=c:u=d[0]}return Ce.pointFromAbsoluteCoords(e,u,i)},Ny=(e,t,n,r)=>{const i=[t.x,t.y,t.x+t.width,t.y+t.height],o=n==="start"?0:e.points.length-1,s=Ce.getPointAtIndexGlobalCoordinates(e,o,r),a=Ce.getPointAtIndexGlobalCoordinates(e,o,r),l=Dy(s,a,t,r),c=B(i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2),u=le(l,c,-t.angle);return{fixedPoint:b3([(u[0]-t.x)/t.width,(u[1]-t.y)/t.height])}},yP=(e,t,n)=>{if(t==null||n==null)return t;const{width:r,height:i}=n,{width:o,height:s}=e,a=Math.max(1,Math.min(lU(e,r,i),t.gap*(r<i?r/o:i/s)));return{...t,gap:a}},j1=(e,t,n,r,i)=>bs(yH(e,t,n),r,n,i,De(e),De(e)),yH=(e,t,n)=>{const r=t==="start"?0:-1;return ms(Ce.getPointAtIndexGlobalCoordinates(e,r,n))},vH=(e,t,n,r)=>{const i=new Set,o=new Set,s=r==="duplicatesServeAsOld",a=new Map([...n].map(([l,c])=>[c,l]));t.forEach(l=>{const{boundElements:c}=l;if(c!=null&&c.length>0&&(c.forEach(u=>{s&&!n.has(u.id)&&i.add(u.id)}),o.add(n.get(l.id))),Za(l)){if(l.startBinding!=null){const{elementId:u}=l.startBinding;s&&!n.has(u)&&o.add(u)}if(l.endBinding!=null){const{elementId:u}=l.endBinding;s&&!n.has(u)&&o.add(u)}(l.startBinding!=null||l.endBinding!=null)&&i.add(n.get(l.id))}}),e.filter(({id:l})=>i.has(l)).forEach(l=>{const{startBinding:c,endBinding:u}=l;fe(l,{startBinding:vP(c,n),endBinding:vP(u,n)})}),e.filter(({id:l})=>o.has(l)).forEach(l=>{var d;const c=a.get(l.id),u=(d=e.find(({id:f})=>f===c))==null?void 0:d.boundElements;u&&u.length>0&&fe(l,{boundElements:u.map(f=>n.has(f.id)?{id:n.get(f.id),type:f.type}:f)})})},vP=(e,t)=>e==null?null:{...e,elementId:t.get(e.elementId)??e.elementId},EH=(e,t)=>{const n=He(e);for(const r of t)K1.unbindAffected(n,r,fe),Y1.unbindAffected(n,r,fe)},bm=(e,t,n=[])=>{if(!e)return null;const r=e.filter(i=>!t.has(i.id));return r.push(...n.map(i=>({id:i.id,type:i.type}))),r},Ub=(e,{x:t,y:n},r,i,o)=>{const s=lU(e,e.width,e.height,i),a=Gl(e,r);return ow(B(t,n),a,s)||o===!0&&Ng(B(t,n),ja(e))},lU=(e,t,n,r)=>{const i=r!=null&&r.value&&r.value<1?r.value:1,s=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*s,32),TT/i+xT)},cU=(e,t,n)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return mme(e,t,n);case"diamond":return Ume(e,t,n);case"ellipse":return bme(e,t,n)}},mme=(e,t,n)=>{const[,r,i,o]=ST(e,t,n);return Math.max(Xf(r,rw(0,1,-o)),Xf(r,rw(1,0,-i)))},Ume=(e,t,n)=>{const[,r,i,o]=ST(e,t,n),s=rw(o,i,-o*i);return Xf(r,s)},bme=(e,t,n)=>{const[r,i]=yme(e,t,n);return-vpe(i)*Xf(r,i)},yme=(e,t,n)=>{const[,r,i,o]=ST(e,t,n),[s,a]=Dg(r);let l=.707,c=.707;const u=i,d=o;[0,1,2,3].forEach(U=>{const b=u*l,v=d*c,_=(u*u-d*d)*l**3/u,E=(d*d-u*u)*c**3/d,w=b-_,T=v-E,A=s-_,M=a-E,S=Math.hypot(T,w),x=Math.hypot(M,A);l=Math.min(1,Math.max(0,(A*S/x+_)/u)),c=Math.min(1,Math.max(0,(M*S/x+E)/d));const C=Math.hypot(c,l);l/=C,c/=C});const f=Gi(u*l,d*c),g=ype(r,f);return[r,g]},ST=(e,t,n)=>{const r=Lg(t),[i,o,s,a]=Ke(e,n),l=AT(i,o,s,a),c=oH(l,e.angle),u=il(c,r),d=mP(u,iH(l)),f=Epe(d),g=dpe(e.x,e.y),U=mP(u,g),b=(s-i)/2,v=(a-o)/2;return[U,f,b,v]},CT=(e,t)=>{const[n,r,i,o]=Ke(e,t),s=AT(n,r,i,o),a=oH(s,e.angle),l=p3(Ipe(iH(s)));return xpe(a,l)},AT=(e,t,n,r)=>Gi((e+n)/2,(t+r)/2),vme=(e,t,n,r)=>{const i=CT(e,r),o=il(i,Lg(t)),s=il(i,Lg(n)),a=aU(o,s),l=e.height/e.width,c=e.width/2,u=e.height/2,d=a[2],f=a[3],g=a[1],U=Math.abs(f),b=Math.abs(d);let v;switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":v=g/(c*(b+l*U));break;case"diamond":v=U<b?g/(b*c):g/(U*u);break;case"ellipse":v=g/(c*Math.sqrt(d**2+l**2*f**2));break}return v||0},Eme=(e,t,n,r)=>{if(t===0){const[l,c,u,d]=Ke(e,r),f=AT(l,c,u,d);return Dg(f)}const i=CT(e,r),o=il(i,Lg(n)),s=p3(i);let a;switch(e.type){case"rectangle":case"image":case"text":case"diamond":case"iframe":case"embeddable":case"frame":case"magicframe":a=Cme(e,t,o);break;case"ellipse":a=Sme(e,t,o);break}return Dg(il(s,a))},cw=(e,t,n,r=0,i)=>{if(Gce(e))return Fpe(e,un(t,n),r);const o=CT(e,i),s=il(o,Lg(t)),a=il(o,Lg(n)),l=aU(s,a),c=p3(o);return _me(e,l,s,r).map(d=>Dg(il(c,d)))},_me=(e,t,n,r=0)=>{let i;switch(e.type){case"rectangle":case"image":case"text":case"diamond":case"iframe":case"embeddable":case"frame":case"magicframe":const s=_H(e);i=s.flatMap((a,l)=>{const c=[a,s[(l+1)%4]];return wme(t,Ime(c,r))}).concat(s.flatMap(a=>xme(a,r,t)));break;case"ellipse":i=Tme(e,r,t);break}if(i.length<2)return[];const o=i.sort((s,a)=>UP(s,n)-UP(a,n));return[o[0],o[o.length-1]]},_H=(e,t=1)=>{const n=t*e.width/2,r=t*e.height/2;switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return[Gi(n,r),Gi(n,-r),Gi(-n,-r),Gi(-n,r)];case"diamond":return[Gi(0,r),Gi(n,0),Gi(0,-r),Gi(-n,0)]}},wme=(e,t)=>{const[n,r]=t,i=Xf(n,e),o=Xf(r,e);return i*o>=0?[]:[_pe(e,aU(n,r))]},Ime=(e,t)=>{const[n,r]=e,i=Tpe(wpe(n,r),t);return[il(i,n),il(i,r)]},Tme=(e,t,n)=>{const r=e.width/2+t,i=e.height/2+t,o=n[2],s=n[3],a=n[1],l=r*r*o*o+i*i*s*s,c=l-a*a;if(l===0||c<=0)return[];const u=Math.sqrt(c),d=-r*r*o*a,f=-i*i*s*a;return[Gi((d+r*i*s*u)/l,(f-r*i*o*u)/l),Gi((d-r*i*s*u)/l,(f+r*i*o*u)/l)]},xme=(e,t,n)=>{if(t===0)return Xf(n,e)===0?[e]:[];const r=n[2],i=n[3],o=n[1],[s,a]=Dg(e),l=t,c=r*r+i*i,u=l*l*c-(r*s+i*a+o)**2;if(c===0||u<=0)return[];const d=Math.sqrt(u),f=s*i*i-a*r*i-r*o,g=a*r*r-s*r*i-i*o;return[Gi((f+i*d)/c,(g-r*d)/c),Gi((f-i*d)/c,(g+r*d)/c)]},Sme=(e,t,n)=>{const r=Math.abs(t),i=e.width*r/2,o=e.height*r/2,s=Math.sign(t),[a,l]=Dg(n),c=l===0?1e-4:l,u=a**2*o**2+c**2*i**2,d=(-a*o**2+s*c*Math.sqrt(Math.max(0,u-i**2*o**2)))/u;let f=(-d*a-1)/c;f===0&&(f=(Object.is(f,-0)?-1:1)*.01);const g=-(i**2*d)/(f**2*o**2+d**2*i**2);return Gi(g,(-d*g-1)/f)},Cme=(e,t,n)=>{const r=Math.abs(t),i=Math.sign(t),o=_H(e,r);let s=0,a=null;return o.forEach(l=>{const c=i*aU(n,l)[1];c>s&&(s=c,a=l)}),a},Ame=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),Oy=(e,t,n)=>{var r;Ua(t)&&(((r=t.boundElements)==null?void 0:r.slice())??[]).forEach(({id:o})=>{n(e.get(o),"boundElements",o)})},Fy=(e,t,n)=>{const r=[];if(t.frameId){const i=t.frameId;r.push(n(e.get(i),"frameId",i))}if(Cn(t)){const i=t.containerId;r.push(n(e.get(i),"containerId",i))}if(st(t)){if(t.startBinding){const i=t.startBinding.elementId;r.push(n(e.get(i),"startBinding",i))}if(t.endBinding){const i=t.endBinding.elementId;r.push(n(e.get(i),"endBinding",i))}}return r};class K1{static unbindAffected(t,n,r){n&&Fy(t,n,i=>{!i||i.isDeleted||Oy(t,i,(o,s,a)=>{a===n.id&&r(i,{boundElements:bm(i.boundElements,new Set([a]))})})})}}H(K1,"rebindAffected",(t,n,r)=>{!n||n.isDeleted||Fy(t,n,(i,o)=>{var s,a;if(!i||i.isDeleted){r(n,{[o]:null});return}o!=="frameId"&&((s=i.boundElements)!=null&&s.find(l=>l.id===n.id)||(st(n)&&r(i,{boundElements:bm(i.boundElements,new Set,new Array(n))}),Ae(n)&&((a=i.boundElements)!=null&&a.find(l=>l.type==="text")?r(n,{[o]:null}):r(i,{boundElements:bm(i.boundElements,new Set,new Array(n))}))))})});class Y1{static unbindAffected(t,n,r){n&&Oy(t,n,i=>{!i||i.isDeleted||Fy(t,i,(o,s,a)=>{a===n.id&&r(i,{[s]:null})})})}}H(Y1,"rebindAffected",(t,n,r)=>{!n||n.isDeleted||Oy(t,n,(i,o,s)=>{var a,l;if(!i||i.isDeleted){r(n,{boundElements:bm(n.boundElements,new Set([s]))});return}Ae(i)&&(((l=(((a=n.boundElements)==null?void 0:a.slice())??[]).reverse().find(u=>u.type==="text"))==null?void 0:l.id)===i.id?i.containerId!==n.id&&r(i,{containerId:n.id}):(i.containerId!==null&&r(i,{containerId:null}),r(n,{boundElements:bm(n.boundElements,new Set([i.id]))})))})});const uw=(e,t)=>{const[n,r]=b3(e);return le(B(t.x+t.width*n,t.y+t.height*r),B(t.x+t.width/2,t.y+t.height/2),t.angle)},kme=(e,t)=>{const n=e.startBinding&&t.get(e.startBinding.elementId),r=e.endBinding&&t.get(e.endBinding.elementId),i=n&&e.startBinding?uw(e.startBinding.fixedPoint,n):B(e.x+e.points[0][0],e.y+e.points[0][1]),o=r&&e.endBinding?uw(e.endBinding.fixedPoint,r):B(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[i,o]},Rme=(e,t)=>{const[n,r]=kme(e,t);return[Ce.pointFromAbsoluteCoords(e,n,t),Ce.pointFromAbsoluteCoords(e,r,t)]},b3=e=>e&&(e[0]===.5||e[1]===.5)?e.map(t=>t===.5?.5001:t):e;class en{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,r,i){const o=r&&i!=="inserted"?r(t):t,s=r&&i!=="deleted"?r(n):n;return new en(o,s)}static calculate(t,n,r,i){if(t===n)return en.empty();const o={},s={};for(const c of this.distinctKeysIterator("full",t,n))o[c]=t[c],s[c]=n[c];const[a,l]=i?i(o,s):[o,s];return en.create(a,l,r)}static empty(){return new en({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,r){const i={...t};for(const o of Object.keys(r))delete i[o];return{...i,...n}}static mergeArrays(t,n,r,i){return Object.values(en.mergeObjects(Dl(t??[],i),Dl(n??[],i),Dl(r??[],i)))}static diffObjects(t,n,r,i){if(!(!t[r]&&!n[r])&&(typeof t[r]=="object"||typeof n[r]=="object")){const o=t[r]??{},s=n[r]??{},a=en.getLeftDifferences(o,s).reduce((c,u)=>(c[u]=i(o[u]),c),{}),l=en.getRightDifferences(o,s).reduce((c,u)=>(c[u]=i(s[u]),c),{});Object.keys(a).length||Object.keys(l).length?(Reflect.set(t,r,a),Reflect.set(n,r,l)):(Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r))}}static diffArrays(t,n,r,i){if(!(!t[r]&&!n[r])&&(Array.isArray(t[r])||Array.isArray(n[r]))){const o=Array.isArray(t[r])?t[r]:[],s=Array.isArray(n[r])?n[r]:[],a=Dl(en.getLeftDifferences(Dl(o,i),Dl(s,i))),l=Dl(en.getRightDifferences(Dl(o,i),Dl(s,i)));if(Object.keys(a).length||Object.keys(l).length){const c=o.filter(d=>a[i?i(d):String(d)]),u=s.filter(d=>l[i?i(d):String(d)]);Reflect.set(t,r,c),Reflect.set(n,r,u)}else Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r)}}static isLeftDifferent(t,n,r=!1){return!!this.distinctKeysIterator("left",t,n,r).next().value}static isRightDifferent(t,n,r=!1){return!!this.distinctKeysIterator("right",t,n,r).next().value}static getLeftDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("left",t,n,r))}static getRightDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("right",t,n,r))}static*distinctKeysIterator(t,n,r,i=!1){if(n===r)return;let o=[];t==="left"?o=Object.keys(n):t==="right"?o=Object.keys(r):t==="full"?o=Array.from(new Set([...Object.keys(n),...Object.keys(r)])):qu(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(const s of o){const a=n[s],l=r[s];if(a!==l){if(!i&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&ai(a,l))continue;yield s}}}}class _i{constructor(t){this.delta=t}static calculate(t,n){const r=en.calculate(t,n,void 0,_i.postProcess);return new _i(r)}static empty(){return new _i(en.create({},{}))}inverse(){const t=en.create(this.delta.inserted,this.delta.deleted);return new _i(t)}applyTo(t,n){try{const{selectedElementIds:r={},selectedGroupIds:i={}}=this.delta.deleted,{selectedElementIds:o={},selectedGroupIds:s={},selectedLinearElementId:a,editingLinearElementId:l,...c}=this.delta.inserted,u=en.mergeObjects(t.selectedElementIds,o,r),d=en.mergeObjects(t.selectedGroupIds,s,i),f=a&&n.has(a)?new Ce(n.get(a)):null,g=l&&n.has(l)?new Ce(n.get(l)):null,U={...t,...c,selectedElementIds:u,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?f:t.selectedLinearElement,editingLinearElement:typeof l<"u"?g:t.editingLinearElement},b=this.filterInvisibleChanges(t,U,n);return[U,b]}catch(r){return console.error("Couldn't apply appstate change",r),[t,!1]}}isEmpty(){return en.isEmpty(this.delta)}static postProcess(t,n){try{en.diffObjects(t,n,"selectedElementIds",r=>!0),en.diffObjects(t,n,"selectedGroupIds",r=>r??!1)}catch{console.error("Couldn't postprocess appstate change deltas.")}finally{return[t,n]}}filterInvisibleChanges(t,n,r){const i=$y(t),o=$y(n),s=en.isRightDifferent(_i.stripElementsProps(i),_i.stripElementsProps(o)),a=en.isRightDifferent(_i.stripStandaloneProps(i),_i.stripStandaloneProps(o));if(!s&&!a)return!1;const l={value:s};if(a){const c=en.getRightDifferences(_i.stripStandaloneProps(i),_i.stripStandaloneProps(o));let u=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(u=Cue(r));for(const d of c)switch(d){case"selectedElementIds":n[d]=_i.filterSelectedElements(n[d],r,l);break;case"selectedGroupIds":n[d]=_i.filterSelectedGroups(n[d],u,l);break;case"croppingElementId":{const b=n[d],v=b&&r.get(b);v&&!v.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":const f=n[d];f?u.has(f)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":const g=_i.convertToAppStateKey(d),U=n[g];if(!U)l.value=!0;else{const b=r.get(U.elementId);b&&!b.isDeleted?l.value=!0:n[g]=null}break;default:qu(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,r){const i=Object.keys(t);if(!i.length)return r.value=!0,t;const o={...t};for(const s of i){const a=n.get(s);a&&!a.isDeleted?r.value=!0:delete o[s]}return o}static filterSelectedGroups(t,n,r){if(!Object.keys(t).length)return r.value=!0,t;const o={...t};for(const s of Object.keys(o))n.has(s)?r.value=!0:delete o[s];return o}static stripElementsProps(t){const{editingGroupId:n,selectedGroupIds:r,selectedElementIds:i,editingLinearElementId:o,selectedLinearElementId:s,croppingElementId:a,...l}=t;return l}static stripStandaloneProps(t){const{name:n,viewBackgroundColor:r,...i}=t;return i}}const cn=class cn{constructor(t,n,r){this.added=t,this.removed=n,this.updated=r}static create(t,n,r,i={shouldRedistribute:!1}){let o;if(i.shouldRedistribute){const s=new Map,a=new Map,l=new Map,c=[...t,...n,...r];for(const[u,d]of c)this.satisfiesAddition(d)?s.set(u,d):this.satisfiesRemoval(d)?a.set(u,d):l.set(u,d);o=new cn(s,a,l)}else o=new cn(t,n,r);return o}static validate(t,n,r){for(const[i,o]of t[n].entries())if(!r(o))throw console.error(`Broken invariant for "${n}" delta, element "${i}", delta:`,o),new Error(`ElementsChange invariant broken for element "${i}".`)}static calculate(t,n){if(t===n)return cn.empty();const r=new Map,i=new Map,o=new Map;for(const s of t.values())if(!n.get(s.id)){const l={...s,isDeleted:!1},c={isDeleted:!0},u=en.create(l,c,cn.stripIrrelevantProps);i.set(s.id,u)}for(const s of n.values()){const a=t.get(s.id);if(!a){const l={isDeleted:!0},c={...s,isDeleted:!1},u=en.create(l,c,cn.stripIrrelevantProps);r.set(s.id,u);continue}if(a.versionNonce!==s.versionNonce){const l=en.calculate(a,s,cn.stripIrrelevantProps,cn.postProcess);if(typeof a.isDeleted=="boolean"&&typeof s.isDeleted=="boolean"&&a.isDeleted!==s.isDeleted){a.isDeleted&&!s.isDeleted?r.set(s.id,l):i.set(s.id,l);continue}en.isEmpty(l)||o.set(s.id,l)}}return cn.create(r,i,o)}static empty(){return cn.create(new Map,new Map,new Map)}inverse(){const t=o=>{const s=new Map;for(const[a,l]of o.entries())s.set(a,en.create(l.inserted,l.deleted));return s},n=t(this.added),r=t(this.removed),i=t(this.updated);return cn.create(r,n,i)}isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}applyLatestChanges(t){const n=a=>l=>{const c={};for(const u of Object.keys(l))switch(u){case"boundElements":c[u]=l[u];break;default:c[u]=a[u]}return c},r=a=>{const l=new Map;for(const[c,u]of a.entries()){const d=t.get(c);if(d){const f=en.create(u.deleted,u.inserted,n(d),"inserted");l.set(c,f)}else l.set(c,u)}return l},i=r(this.added),o=r(this.removed),s=r(this.updated);return cn.create(i,o,s,{shouldRedistribute:!0})}applyTo(t,n){let r=Ho(new Map(t)),i;const o={containsVisibleDifference:!1,containsZindexDifference:!1};try{const s=cn.createApplier(r,n,o),a=s(this.added),l=s(this.removed),c=s(this.updated),u=this.resolveConflicts(t,r);i=new Map([...a,...l,...c,...u])}catch(s){return console.error("Couldn't apply elements change",s),[t,!0]}try{cn.redrawTextBoundingBoxes(r,i),r=cn.reorderElements(r,i,o),cn.redrawBoundArrows(r,i)}catch(s){console.error("Couldn't mutate elements after applying elements change",s)}finally{return[r,o.containsVisibleDifference]}}static applyDelta(t,n,r={containsVisibleDifference:!0,containsZindexDifference:!0}){var s,a;const{boundElements:i,...o}=n.inserted;if((s=n.deleted.boundElements)!=null&&s.length||(a=n.inserted.boundElements)!=null&&a.length){const l=en.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,c=>c.id);Object.assign(o,{boundElements:l})}if(kt(t)){const l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(o,{crop:l.inserted.crop??null})}if(!r.containsVisibleDifference){const{index:l,...c}=o,u=cn.checkForVisibleDifference(t,c);r.containsVisibleDifference=u}return r.containsZindexDifference||(r.containsZindexDifference=n.deleted.index!==n.inserted.index),Xe(t,o)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:en.isRightDifferent(t,n)}resolveConflicts(t,n){const r=new Map,i=(c,u)=>{const d=n.get(c.id);if(!d)return;let f;t.get(c.id)===d?f=Xe(d,u):f=fe(d,u),r.set(f.id,f),n.set(f.id,f)};for(const[c]of this.removed)cn.unbindAffected(t,n,c,i);for(const[c]of this.added)cn.rebindAffected(t,n,c,i);for(const[c]of Array.from(this.updated).filter(([u,d])=>Object.keys({...d.deleted,...d.inserted}).find(f=>Ame.has(f)))){const u=n.get(c);!u||u.isDeleted||cn.rebindAffected(t,n,c,i)}const o=new Map(Array.from(t).filter(([c])=>r.has(c))),{added:s,removed:a,updated:l}=cn.calculate(o,r);for(const[c,u]of s)this.added.set(c,u);for(const[c,u]of a)this.removed.set(c,u);for(const[c,u]of l)this.updated.set(c,u);return r}static unbindAffected(t,n,r,i){const o=()=>t.get(r),s=()=>n.get(r);K1.unbindAffected(n,o(),i),K1.unbindAffected(n,s(),i),Y1.unbindAffected(n,o(),i),Y1.unbindAffected(n,s(),i)}static rebindAffected(t,n,r,i){const o=()=>t.get(r),s=()=>n.get(r);K1.unbindAffected(n,o(),i),K1.rebindAffected(n,s(),i),Y1.unbindAffected(n,o(),(a,l)=>{Ae(a)&&i(a,l)}),Y1.rebindAffected(n,s(),i)}static redrawTextBoundingBoxes(t,n){const r=new Map;for(const i of n.values()){if(Cn(i)){const{containerId:o}=i,s=o?t.get(o):void 0;s&&r.set(s.id,{container:s,boundText:i})}if(Ps(i)){const o=Ec(i),s=o?t.get(o):void 0;s&&r.set(i.id,{container:i,boundText:s})}}for(const{container:i,boundText:o}of r.values())i.isDeleted||o.isDeleted||Zi(o,i,t,!1)}static redrawBoundArrows(t,n){for(const r of n.values())!r.isDeleted&&Ua(r)&&_o(r,t,{changedElements:n})}static reorderElements(t,n,r){if(!r.containsZindexDifference)return t;const i=Array.from(t.values()),o=IG([...i]),s=en.getRightDifferences(i,o,!0).reduce((a,l)=>{const c=i[Number(l)];return c&&n.has(c.id)&&a.set(c.id,c),a},new Map);return!r.containsVisibleDifference&&s.size&&(r.containsVisibleDifference=!0),He(ul(o,s))}static postProcess(t,n){try{en.diffArrays(t,n,"boundElements",r=>r.id)}catch{console.error("Couldn't postprocess elements change deltas.")}finally{return[t,n]}}static stripIrrelevantProps(t){const{id:n,updated:r,version:i,versionNonce:o,seed:s,...a}=t;return a}};H(cn,"satisfiesAddition",({deleted:t,inserted:n})=>t.isDeleted===!0&&!n.isDeleted),H(cn,"satisfiesRemoval",({deleted:t,inserted:n})=>!t.isDeleted&&n.isDeleted===!0),H(cn,"satisfiesUpdate",({deleted:t,inserted:n})=>!!t.isDeleted==!!n.isDeleted),H(cn,"createApplier",(t,n,r)=>{const i=cn.createGetter(t,n,r);return o=>Array.from(o.entries()).reduce((s,[a,l])=>{const c=i(a,l.inserted);if(c){const u=cn.applyDelta(c,l,r);t.set(u.id,u),s.set(u.id,u)}return s},new Map)}),H(cn,"createGetter",(t,n,r)=>(i,o)=>{let s=t.get(i);return s||(s=n.get(i),s&&(r.containsZindexDifference=!0,(o.isDeleted===!1||o.isDeleted!==!0&&s.isDeleted===!1)&&(r.containsVisibleDifference=!0))),s});let By=cn;class Wa{constructor(){H(this,"subscribers",[])}on(...t){const n=t.flat().filter(r=>typeof r=="function");return this.subscribers.push(...n),()=>this.off(n)}once(...t){const n=t.flat().filter(i=>typeof i=="function");n.push(()=>r());const r=this.on(...n);return r}off(...t){const n=t.flat();this.subscribers=this.subscribers.filter(r=>!n.includes(r))}trigger(...t){for(const n of this.subscribers)n(...t);return this}clear(){this.subscribers=[]}}const wH="__observedAppState",$y=e=>{var n,r;const t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((r=e.selectedLinearElement)==null?void 0:r.elementId)||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,wH,{value:!0,enumerable:!1}),t},Pme=e=>!!Reflect.get(e,wH),ae={CAPTURE:"capture",UPDATE:"update",NONE:"none"};class Mme{constructor(t,n){this.elementsChange=t,this.appStateChange=n}}class Lme{constructor(){H(this,"onStoreIncrementEmitter",new Wa);H(this,"scheduledActions",new Set);H(this,"_snapshot",g2.empty());H(this,"shouldCaptureIncrement",()=>{this.scheduleAction(ae.CAPTURE)});H(this,"shouldUpdateSnapshot",()=>{this.scheduleAction(ae.UPDATE)});H(this,"scheduleAction",t=>{this.scheduledActions.add(t),this.satisfiesScheduledActionsInvariant()});H(this,"commit",(t,n)=>{try{this.scheduledActions.has(ae.CAPTURE)?this.captureIncrement(t,n):this.scheduledActions.has(ae.UPDATE)&&this.updateSnapshot(t,n)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}});H(this,"captureIncrement",(t,n)=>{const r=this.snapshot,i=this.snapshot.maybeClone(t,n);if(r!==i){const o=i.meta.didElementsChange?By.calculate(r.elements,i.elements):By.empty(),s=i.meta.didAppStateChange?_i.calculate(r.appState,i.appState):_i.empty();(!o.isEmpty()||!s.isEmpty())&&this.onStoreIncrementEmitter.trigger(new Mme(o,s)),this.snapshot=i}});H(this,"updateSnapshot",(t,n)=>{const r=this.snapshot.maybeClone(t,n);this.snapshot!==r&&(this.snapshot=r)});H(this,"filterUncomittedElements",(t,n)=>{for(const[r,i]of t.entries()){if(!n.get(r))continue;const s=this.snapshot.elements.get(r);s?s.version<i.version&&n.set(r,s):n.delete(r)}return n});H(this,"clear",()=>{this.snapshot=g2.empty(),this.scheduledActions=new Set});H(this,"satisfiesScheduledActionsInvariant",()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){const t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;console.error(t,this.scheduledActions.values())}})}get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}}class g2{constructor(t,n,r={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t,this.appState=n,this.meta=r}static empty(){return new g2(new Map,$y(ks()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,n){const r=this.maybeCreateElementsSnapshot(t),i=this.maybeCreateAppStateSnapshot(n);let o=!1,s=!1;return this.elements!==r&&(o=!0),this.appState!==i&&(s=!0),!o&&!s?this:new g2(r,i,{didElementsChange:o,didAppStateChange:s})}maybeCreateAppStateSnapshot(t){if(!t)return this.appState;const n=Pme(t)?t:$y(t);return this.detectChangedAppState(n)?n:this.appState}detectChangedAppState(t){return!ai(this.appState,t,{selectedElementIds:ai,selectedGroupIds:ai})}maybeCreateElementsSnapshot(t){return t?this.detectChangedElements(t)?this.createElementsSnapshot(t):this.elements:this.elements}detectChangedElements(t){if(this.elements===t)return!1;if(this.elements.size!==t.size)return!0;const n=Array.from(t.keys());for(let r=n.length-1;r>=0;r--){const i=this.elements.get(n[r]),o=t.get(n[r]);if(!i||!o||i.id!==o.id||i.versionNonce!==o.versionNonce)return!0}return!1}createElementsSnapshot(t){const n=new Map;for(const[r,i]of this.elements.entries())t.get(r)?n.set(r,i):n.set(r,Xe(i,{isDeleted:!0}));for(const[r,i]of t.entries()){const o=n.get(r);(!o||o&&o.versionNonce!==i.versionNonce)&&n.set(r,bh(i))}return n}}const La=new Map,Dme=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,Nme=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,Ome=/^https:\/\/(?:www\.)?figma\.com/,EP=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,Fme=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,_P=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,Bme=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,$me=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,zme=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,wP=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,IP=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,Vme=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,dw=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com"]),TP=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com"]),ym=e=>`<html><body>${e}</body></html>`,Z1=e=>{if(!e)return null;if(La.has(e))return La.get(e);const t=e,n=TP.has(fw(e,TP)||"");let r="generic",i={w:560,h:840};const o=e.match(Dme);if(o!=null&&o[2]){const c=o[3]?`&start=${o[3]}`:"",u=e.includes("shorts");switch(r="video",o[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${o[2]}?enablejsapi=1${c}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${o[2]}&enablejsapi=1${c}`;break;default:e=`https://www.youtube.com/embed/${o[2]}?enablejsapi=1${c}`;break}return i=u?{w:315,h:560}:{w:560,h:315},La.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}}const s=e.match(Nme);if(s!=null&&s[1]){const c=s==null?void 0:s[1],u=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return r="video",e=`https://player.vimeo.com/video/${c}?api=1`,i={w:560,h:315},La.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,error:u,sandbox:{allowSameOrigin:n}}}if(e.match(Ome))return r="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,i={w:550,h:550},La.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};const l=e.match($me);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),La.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};if(_P.test(e)){const c=e.match(_P)[1],u=hb(`https://twitter.com/x/status/${c}`),d={type:"document",srcdoc:f=>ym(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${f}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return La.set(t,d),d}if(IP.test(e)){const[,c,u,d]=e.match(IP),f=hb(`https://reddit.com/r/${c}/comments/${u}/${d}`),g={type:"document",srcdoc:U=>ym(`<blockquote class="reddit-embed-bq" data-embed-theme="${U}"><a href="${f}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return La.set(t,g),g}if(EP.test(e)){const[,c,u]=e.match(EP),d=hb(`https://gist.github.com/${c}/${u}`),f={type:"document",srcdoc:()=>ym(`
          <script src="${d}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return La.set(e,f),f}return La.set(e,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}},IH=e=>{let t;uu(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;const n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),r=On.Helvetica,i=an({fontSize:n,fontFamily:r});return Wo({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:r,fontSize:n,text:mh(t,i,e.width-20),textAlign:"center",verticalAlign:Do.MIDDLE,angle:e.angle??0})};we({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,r)=>{const i=lr(t,{type:"embeddable"});return Ba(r.canvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:lr(t,{type:"embeddable"})},storeAction:ae.NONE}}});const fw=(e,t)=>{try{const{hostname:n}=new URL(e),r=n.replace(/^www\./,"");if(t instanceof Set){if(dw.has(r))return r;const o=r.replace(/^([^.]+)/,"*");return dw.has(o)?o:null}const i=t.replace(/^www\./,"");if(r===i)return i}catch{}return null},Hme=e=>{const t=e.match(Bme);if(t&&t.length===2)return t[1];const n=e.match(Vme);if(n&&n.length===2)return n[1];const r=e.match(Fme);if(r&&r.length===2)return r[1];if(wP.test(e))return`https://giphy.com/embed/${wP.exec(e)[1]}`;const i=e.match(zme);return i&&i.length===2?i[1]:e},bb=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){const n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(const n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(fw(e,n))return!0;return!1}}return!!fw(e,dw)},zr=10,Wme=(e,t,n,r,i,o,s)=>{var R,O;const{width:a,height:l}=yc(e),c=n/a,u=r/l,d=(((R=e.crop)==null?void 0:R.x)??0)/c,f=(((O=e.crop)==null?void 0:O.y)??0)/u,g=le(B(i,o),B(e.x+e.width/2,e.y+e.height/2),-e.angle);i=g[0],o=g[1];let U=e.width,b=e.height,v=e.crop??{x:0,y:0,width:n,height:r,naturalWidth:n,naturalHeight:r};const _=v.height,E=v.width,w=e.scale[0]===-1,T=e.scale[1]===-1;let A=o-e.y,M=i-e.x;t.includes("n")&&(b=dt(e.height-A,zr,T?l-f:e.height+f)),t.includes("s")&&(A=o-e.y-e.height,b=dt(e.height+A,zr,T?e.height+f:l-f)),t.includes("e")&&(M=i-e.x-e.width,U=dt(e.width+M,zr,w?e.width+d:a-d)),t.includes("w")&&(U=dt(e.width-M,zr,w?a-d:e.width+d));const S=F=>{F.height=b*u,F.width=U*c};S(v);const x=(F,N)=>{S(N),F.includes("n")&&(T||(N.y+=_-N.height)),F.includes("s")&&T&&(N.y+=_-N.height),F.includes("e")&&w&&(N.x+=E-N.width),F.includes("w")&&(w||(N.x+=E-N.width))};switch(t){case"n":{if(s){const F=d+e.width/2,N=a-d-e.width/2,J=Math.min(F,N)*2;U=dt(b*s,zr,J),b=U/s}x(t,v),s&&(v.x+=(E-v.width)/2);break}case"s":{if(s){const F=d+e.width/2,N=a-d-e.width/2,J=Math.min(F,N)*2;U=dt(b*s,zr,J),b=U/s}x(t,v),s&&(v.x+=(E-v.width)/2);break}case"w":{if(s){const F=f+e.height/2,N=l-f-e.height/2,J=Math.min(F,N)*2;b=dt(U/s,zr,J),U=b*s}x(t,v),s&&(v.y+=(_-v.height)/2);break}case"e":{if(s){const F=f+e.height/2,N=l-f-e.height/2,J=Math.min(F,N)*2;b=dt(U/s,zr,J),U=b*s}x(t,v),s&&(v.y+=(_-v.height)/2);break}case"ne":{if(s)if(M>-A){const F=T?l-f:f+e.height;b=dt(U/s,zr,F),U=b*s}else{const F=w?d+e.width:a-d;U=dt(b*s,zr,F),b=U/s}x(t,v);break}case"nw":{if(s)if(M<A){const F=T?l-f:f+e.height;b=dt(U/s,zr,F),U=b*s}else{const F=w?a-d:d+e.width;U=dt(b*s,zr,F),b=U/s}x(t,v);break}case"se":{if(s)if(M>A){const F=T?f+e.height:l-f;b=dt(U/s,zr,F),U=b*s}else{const F=w?d+e.width:a-d;U=dt(b*s,zr,F),b=U/s}x(t,v);break}case"sw":{if(s)if(-M>A){const F=T?f+e.height:l-f;b=dt(U/s,zr,F),U=b*s}else{const F=w?a-d:d+e.width;U=dt(b*s,zr,F),b=U/s}x(t,v);break}}const C=Gme(e,t,U,b,!!s);return kR(v.width,v.naturalWidth)&&kR(v.height,v.naturalHeight)&&(v=null),{x:C[0],y:C[1],width:U,height:b,crop:v}},Gme=(e,t,n,r,i)=>{const[o,s,a,l]=zu(e,e.width,e.height,!0),c=B(o,s),u=B(a,l),d=u2(c,u),[f,g,U,b]=zu(e,n,r,!0),v=U-f,_=b-g;let E=[...c];if(["n","w","nw"].includes(t)&&(E=[u[0]-Math.abs(v),u[1]-Math.abs(_)]),t==="ne"){const x=[c[0],u[1]];E=[x[0],x[1]-Math.abs(_)]}if(t==="sw"){const x=[u[0],c[1]];E=[x[0]-Math.abs(v),x[1]]}i&&(["s","n"].includes(t)&&(E[0]=d[0]-v/2),["e","w"].includes(t)&&(E[1]=d[1]-_/2));const w=e.angle,T=le(E,d,w),A=[E[0]+Math.abs(v)/2,E[1]+Math.abs(_)/2],M=le(A,d,w);E=le(T,M,-w);const S=[...E];return S[0]+=e.x-f,S[1]+=e.y-g,S},Xme=(e,t)=>{if(e.crop){const{width:n,height:r}=yc(e),[i,o,s,a,l,c]=Ke(e,t),u=sn(le(B(i,o),B(l,c),e.angle)),d=sn(le(B(s,o),B(l,c),e.angle)),f=_y(Sf(d,u)),g=sn(le(B(i,a),B(l,c),e.angle)),U=Sf(g,u),b=_y(U),{cropX:v,cropY:_}=jme(e.crop,e.scale),E=Eu(Eu(u,el(f,-v*n/e.crop.naturalWidth)),el(b,-_*r/e.crop.naturalHeight)),w=Eu(Eu(E,el(f,n/2)),el(b,r/2)),T=le(E,w,-e.angle);return{...e,x:T[0],y:T[1],width:n,height:r,crop:null}}return e},yc=e=>{if(e.crop){const t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},jme=(e,t)=>{let n=e.x,r=e.y;const i=t[0]===-1,o=t[1]===-1;return i&&(n=e.naturalWidth-Math.abs(n)-e.width),o&&(r=e.naturalHeight-Math.abs(r)-e.height),{cropX:n,cropY:r}},Kme=(e,t=!1)=>{const n=e.crop;if(!n)return null;const r=e.scale[0]===-1,i=e.scale[1]===-1;let o=n.x,s=n.y;if(r&&(o=n.naturalWidth-n.width-n.x),i&&(s=n.naturalHeight-n.height-n.y),t)return{x:o,y:s};const{width:a,height:l}=yc(e);return{x:o/(n.naturalWidth/a),y:s/(n.naturalHeight/l)}},xp=(e,t,n)=>{const r={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(r)},Sp=(e,t,n,r,i)=>{if(!r.enabled||!r.clip)return null;const o=wo(e,i);if(o){const s=t.ownerDocument.createElementNS(Mt,"g");return s.setAttributeNS(Mt,"clip-path",`url(#${o.id})`),n.forEach(a=>s.appendChild(a)),s}return null},yb=(e,t,n,r,i,o,s,a)=>{var w;const l={x:o,y:s},[c,u,d,f]=Ke(e,t);let g=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);if(Ae(e)){const T=Zr(e,t);if(st(T)){const[A,M,S,x]=Ke(T,t),C=Ce.getBoundTextElementPosition(T,e,t);g=(S-A)/2-(C.x-A),U=(x-M)/2-(C.y-M),o=o+C.x-e.x,s=s+C.y-e.y}}const b=180*e.angle/Math.PI;let v=r;if(e.link){const T=r.ownerDocument.createElementNS(Mt,"a");T.setAttribute("href",zo(e.link)),v.appendChild(T),v=T}const _=(T,A)=>{v.appendChild(T)},E=(((w=wo(e,t))==null?void 0:w.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{const T=Sn.generateElementShape(e,null),A=xp(n,T,mp);E!==1&&(A.setAttribute("stroke-opacity",`${E}`),A.setAttribute("fill-opacity",`${E}`)),A.setAttribute("stroke-linecap","round"),A.setAttribute("transform",`translate(${o||0} ${s||0}) rotate(${b} ${g} ${U})`);const M=Sp(e,v,[A],a.frameRendering,t);_(M||A);break}case"iframe":case"embeddable":{const T=Sn.generateElementShape(e,a),A=xp(n,T,mp),M=e.opacity/100;M!==1&&(A.setAttribute("stroke-opacity",`${M}`),A.setAttribute("fill-opacity",`${M}`)),A.setAttribute("stroke-linecap","round"),A.setAttribute("transform",`translate(${o||0} ${s||0}) rotate(${b} ${g} ${U})`),_(A);const S=IH(e);yb(S,t,n,v,i,S.x+l.x-e.x,S.y+l.y-e.y,a);const x=xp(n,T,mp);for(x.setAttribute("stroke-linecap","round"),x.setAttribute("transform",`translate(${o||0} ${s||0}) rotate(${b} ${g} ${U})`);x.firstChild;)x.removeChild(x.firstChild);const C=Fu(Math.min(e.width,e.height),e),R=Z1(sT(e.link||""));if(a.renderEmbeddables===!1||(R==null?void 0:R.type)==="document"){const O=r.ownerDocument.createElementNS(Mt,"a");O.setAttribute("href",zo(e.link||"")),O.setAttribute("target","_blank"),O.setAttribute("rel","noopener noreferrer"),O.style.borderRadius=`${C}px`,x.appendChild(O)}else{const O=r.ownerDocument.createElementNS(Mt,"foreignObject");O.style.width=`${e.width}px`,O.style.height=`${e.height}px`,O.style.border="none";const F=O.ownerDocument.createElementNS(Mt,"div");F.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),F.style.width="100%",F.style.height="100%";const N=F.ownerDocument.createElement("iframe");N.src=(R==null?void 0:R.link)??"",N.style.width="100%",N.style.height="100%",N.style.border="none",N.style.borderRadius=`${C}px`,N.style.top="0",N.style.left="0",N.allowFullscreen=!0,F.appendChild(N),O.appendChild(F),x.appendChild(O)}_(x);break}case"line":case"arrow":{const T=rt(e,t),A=r.ownerDocument.createElementNS(Mt,"mask");if(T){A.setAttribute("id",`mask-${e.id}`);const C=r.ownerDocument.createElementNS(Mt,"rect");o=o||0,s=s||0,C.setAttribute("x","0"),C.setAttribute("y","0"),C.setAttribute("fill","#fff"),C.setAttribute("width",`${e.width+100+o}`),C.setAttribute("height",`${e.height+100+s}`),A.appendChild(C);const R=r.ownerDocument.createElementNS(Mt,"rect"),O=Ce.getBoundTextElementPosition(e,T,t),F=o+O.x-e.x,N=s+O.y-e.y;R.setAttribute("x",F.toString()),R.setAttribute("y",N.toString()),R.setAttribute("fill","#000"),R.setAttribute("width",`${T.width}`),R.setAttribute("height",`${T.height}`),R.setAttribute("opacity","1"),A.appendChild(R)}const M=r.ownerDocument.createElementNS(Mt,"g");T&&M.setAttribute("mask",`url(#mask-${e.id})`),M.setAttribute("stroke-linecap","round"),Sn.generateElementShape(e,a).forEach(C=>{const R=xp(n,C,mp);E!==1&&(R.setAttribute("stroke-opacity",`${E}`),R.setAttribute("fill-opacity",`${E}`)),R.setAttribute("transform",`translate(${o||0} ${s||0}) rotate(${b} ${g} ${U})`),e.type==="line"&&bc(e.points)&&e.backgroundColor!=="transparent"&&R.setAttribute("fill-rule","evenodd"),M.appendChild(R)});const x=Sp(e,v,[M,A],a.frameRendering,t);x?(_(x),v.appendChild(x)):(_(M),v.append(A));break}case"freedraw":{const T=Sn.generateElementShape(e,a),A=T?xp(n,T,mp):r.ownerDocument.createElementNS(Mt,"g");E!==1&&(A.setAttribute("stroke-opacity",`${E}`),A.setAttribute("fill-opacity",`${E}`)),A.setAttribute("transform",`translate(${o||0} ${s||0}) rotate(${b} ${g} ${U})`),A.setAttribute("stroke","none");const M=r.ownerDocument.createElementNS(Mt,"path");M.setAttribute("fill",e.strokeColor),M.setAttribute("d",mG(e)),A.appendChild(M);const S=Sp(e,v,[A],a.frameRendering,t);_(S||A);break}case"image":{const T=Math.round(e.width),A=Math.round(e.height),M=dr(e)&&i[e.fileId];if(M){const{reuseImages:S=!0}=a;let x=`image-${M.id}`,C=e.width,R=e.height;e.crop&&({width:C,height:R}=yc(e),x=`image-crop-${M.id}-${LG(`${C}x${R}`)}`),S||(x=`image-${e.id}`);let O=r.querySelector(`#${x}`);if(!O){O=r.ownerDocument.createElementNS(Mt,"symbol"),O.id=x;const Z=r.ownerDocument.createElementNS(Mt,"image");Z.setAttribute("href",M.dataURL),Z.setAttribute("preserveAspectRatio","none"),e.crop||!S?(Z.setAttribute("width",`${C}`),Z.setAttribute("height",`${R}`)):(Z.setAttribute("width","100%"),Z.setAttribute("height","100%")),O.appendChild(Z),(v.querySelector("defs")||v).prepend(O)}const F=r.ownerDocument.createElementNS(Mt,"use");F.setAttribute("href",`#${x}`),a.exportWithDarkMode&&M.mimeType!==Ne.svg&&F.setAttribute("filter",lG);let N=0,J=0;if(e.crop){const{width:Z,height:te}=yc(e);N=e.crop.x/(e.crop.naturalWidth/Z),J=e.crop.y/(e.crop.naturalHeight/te)}const K=g+N,ne=U+J;F.setAttribute("width",`${T+N}`),F.setAttribute("height",`${A+J}`),F.setAttribute("opacity",`${E}`),(e.scale[0]!==1||e.scale[1]!==1)&&F.setAttribute("transform",`translate(${K} ${ne}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-K} ${-ne})`);const ee=r.ownerDocument.createElementNS(Mt,"g");if(e.crop){const Z=r.ownerDocument.createElementNS(Mt,"mask");Z.setAttribute("id",`mask-image-crop-${e.id}`),Z.setAttribute("fill","#fff");const te=r.ownerDocument.createElementNS(Mt,"rect");te.setAttribute("x",`${N}`),te.setAttribute("y",`${J}`),te.setAttribute("width",`${T}`),te.setAttribute("height",`${A}`),Z.appendChild(te),v.appendChild(Z),ee.setAttribute("mask",`url(#${Z.id})`)}if(ee.appendChild(F),ee.setAttribute("transform",`translate(${o-N} ${s-J}) rotate(${b} ${K} ${ne})`),e.roundness){const Z=r.ownerDocument.createElementNS(Mt,"clipPath");Z.id=`image-clipPath-${e.id}`;const te=r.ownerDocument.createElementNS(Mt,"rect"),pe=Fu(Math.min(e.width,e.height),e);te.setAttribute("width",`${e.width}`),te.setAttribute("height",`${e.height}`),te.setAttribute("rx",`${pe}`),te.setAttribute("ry",`${pe}`),Z.appendChild(te),_(Z),ee.setAttributeNS(Mt,"clip-path",`url(#${Z.id})`)}const q=Sp(e,v,[ee],a.frameRendering,t);_(q||ee)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){const T=document.createElementNS(Mt,"rect");T.setAttribute("transform",`translate(${o||0} ${s||0}) rotate(${b} ${g} ${U})`),T.setAttribute("width",`${e.width}px`),T.setAttribute("height",`${e.height}px`),T.setAttribute("rx",Fn.radius.toString()),T.setAttribute("ry",Fn.radius.toString()),T.setAttribute("fill","none"),T.setAttribute("stroke",Fn.strokeColor),T.setAttribute("stroke-width",Fn.strokeWidth.toString()),_(T)}break}default:if(Ae(e)){const T=r.ownerDocument.createElementNS(Mt,"g");E!==1&&(T.setAttribute("stroke-opacity",`${E}`),T.setAttribute("fill-opacity",`${E}`)),T.setAttribute("transform",`translate(${o||0} ${s||0}) rotate(${b} ${g} ${U})`);const A=e.text.replace(/\r\n?/g,`
`).split(`
`),M=iU(e.fontSize,e.lineHeight),S=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,x=YV(e.fontFamily,e.fontSize,M),C=Qz(e.text)?"rtl":"ltr",R=e.textAlign==="center"?"middle":e.textAlign==="right"||C==="rtl"?"end":"start";for(let F=0;F<A.length;F++){const N=r.ownerDocument.createElementNS(Mt,"text");N.textContent=A[F],N.setAttribute("x",`${S}`),N.setAttribute("y",`${F*M+x}`),N.setAttribute("font-family",tU(e)),N.setAttribute("font-size",`${e.fontSize}px`),N.setAttribute("fill",e.strokeColor),N.setAttribute("text-anchor",R),N.setAttribute("style","white-space: pre;"),N.setAttribute("direction",C),N.setAttribute("dominant-baseline","alphabetic"),T.appendChild(N)}const O=Sp(e,v,[T],a.frameRendering,t);_(O||T)}else throw new Error(`Unimplemented type ${e.type}`)}},Yme=(e,t,n,r,i,o)=>{r&&(e.filter(s=>!hs(s)).forEach(s=>{if(!s.isDeleted){if(Ae(s)&&s.containerId&&t.has(s.containerId))return;try{yb(s,t,n,r,i,s.x+o.offsetX,s.y+o.offsetY,o);const a=rt(s,t);a&&yb(a,t,n,r,i,a.x+o.offsetX,a.y+o.offsetY,o)}catch(a){console.error(a)}}}),e.filter(s=>hs(s)).forEach(s=>{if(!s.isDeleted)try{yb(s,t,n,r,i,s.x+o.offsetX,s.y+o.offsetY,o)}catch(a){console.error(a)}}))},vh=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),Zme=Le(vh?()=>import("./file-open-002ab408-CQ9a1yTP.js"):()=>import("./file-open-7c801643-CD3BRLr1.js"),__vite__mapDeps([]));async function qme(...e){return(await Zme).default(...e)}Le(vh?()=>import("./directory-open-4ed118d0-BNgAhb94.js"):()=>import("./directory-open-01563666-DWU9wJ6I.js"),__vite__mapDeps([]));const Qme=Le(vh?()=>import("./file-save-745eba88-D6MGJDcB.js"):()=>import("./file-save-3189631c-x92wctJd.js"),__vite__mapDeps([]));async function Jme(...e){return(await Qme).default(...e)}const xP=500,kT=e=>{var r,i;const t=(r=e.extensions)==null?void 0:r.reduce((o,s)=>(o.push(Ne[s]),o),[]),n=(i=e.extensions)==null?void 0:i.reduce((o,s)=>s==="jpg"?o.concat(".jpg",".jpeg"):o.concat(`.${s}`),[]);return qme({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(o,s,a)=>{const l=mc(s,xP),c=()=>{u(),document.addEventListener(ge.KEYUP,l),document.addEventListener(ge.POINTER_UP,l),l()},u=()=>{var f;if((f=a.files)!=null&&f.length){const g=e.multiple?[...a.files]:a.files[0];o(g)}};requestAnimationFrame(()=>{window.addEventListener(ge.FOCUS,c)});const d=window.setInterval(()=>{u()},xP);return f=>{clearInterval(d),l.cancel(),window.removeEventListener(ge.FOCUS,c),document.removeEventListener(ge.KEYUP,l),document.removeEventListener(ge.POINTER_UP,l),f&&(console.warn("Opening the file was canceled (legacy-fs)."),f(new kg))}}})},zy=(e,t)=>Jme(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle);var Mc={};(function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(o,s){return Object.prototype.hasOwnProperty.call(o,s)}e.assign=function(o){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var a=s.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)n(a,l)&&(o[l]=a[l])}}return o},e.shrinkBuf=function(o,s){return o.length===s?o:o.subarray?o.subarray(0,s):(o.length=s,o)};var r={arraySet:function(o,s,a,l,c){if(s.subarray&&o.subarray){o.set(s.subarray(a,a+l),c);return}for(var u=0;u<l;u++)o[c+u]=s[a+u]},flattenChunks:function(o){var s,a,l,c,u,d;for(l=0,s=0,a=o.length;s<a;s++)l+=o[s].length;for(d=new Uint8Array(l),c=0,s=0,a=o.length;s<a;s++)u=o[s],d.set(u,c),c+=u.length;return d}},i={arraySet:function(o,s,a,l,c){for(var u=0;u<l;u++)o[c+u]=s[a+u]},flattenChunks:function(o){return[].concat.apply([],o)}};e.setTyped=function(o){o?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)})(Mc);var uU={},ml={},u0={},e2e=Mc,t2e=4,SP=0,CP=1,n2e=2;function d0(e){for(var t=e.length;--t>=0;)e[t]=0}var r2e=0,TH=1,i2e=2,o2e=3,s2e=258,RT=29,dU=256,p2=dU+1+RT,sg=30,PT=19,xH=2*p2+1,pf=15,wE=16,a2e=7,MT=256,SH=16,CH=17,AH=18,hw=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],vb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],l2e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],kH=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c2e=512,Xl=new Array((p2+2)*2);d0(Xl);var vm=new Array(sg*2);d0(vm);var m2=new Array(c2e);d0(m2);var U2=new Array(s2e-o2e+1);d0(U2);var LT=new Array(RT);d0(LT);var Vy=new Array(sg);d0(Vy);function IE(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}var RH,PH,MH;function TE(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function LH(e){return e<256?m2[e]:m2[256+(e>>>7)]}function b2(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function mo(e,t,n){e.bi_valid>wE-n?(e.bi_buf|=t<<e.bi_valid&65535,b2(e,e.bi_buf),e.bi_buf=t>>wE-e.bi_valid,e.bi_valid+=n-wE):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function qa(e,t,n){mo(e,n[t*2],n[t*2+1])}function DH(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function u2e(e){e.bi_valid===16?(b2(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function d2e(e,t){var n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length,c,u,d,f,g,U,b=0;for(f=0;f<=pf;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<xH;c++)u=e.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,b++),n[u*2+1]=f,!(u>r)&&(e.bl_count[f]++,g=0,u>=a&&(g=s[u-a]),U=n[u*2],e.opt_len+=U*(f+g),o&&(e.static_len+=U*(i[u*2+1]+g)));if(b!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,b-=2}while(b>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--c],!(d>r)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}}function NH(e,t,n){var r=new Array(pf+1),i=0,o,s;for(o=1;o<=pf;o++)r[o]=i=i+n[o-1]<<1;for(s=0;s<=t;s++){var a=e[s*2+1];a!==0&&(e[s*2]=DH(r[a]++,a))}}function f2e(){var e,t,n,r,i,o=new Array(pf+1);for(n=0,r=0;r<RT-1;r++)for(LT[r]=n,e=0;e<1<<hw[r];e++)U2[n++]=r;for(U2[n-1]=r,i=0,r=0;r<16;r++)for(Vy[r]=i,e=0;e<1<<vb[r];e++)m2[i++]=r;for(i>>=7;r<sg;r++)for(Vy[r]=i<<7,e=0;e<1<<vb[r]-7;e++)m2[256+i++]=r;for(t=0;t<=pf;t++)o[t]=0;for(e=0;e<=143;)Xl[e*2+1]=8,e++,o[8]++;for(;e<=255;)Xl[e*2+1]=9,e++,o[9]++;for(;e<=279;)Xl[e*2+1]=7,e++,o[7]++;for(;e<=287;)Xl[e*2+1]=8,e++,o[8]++;for(NH(Xl,p2+1,o),e=0;e<sg;e++)vm[e*2+1]=5,vm[e*2]=DH(e,5);RH=new IE(Xl,hw,dU+1,p2,pf),PH=new IE(vm,vb,0,sg,pf),MH=new IE(new Array(0),l2e,0,PT,a2e)}function OH(e){var t;for(t=0;t<p2;t++)e.dyn_ltree[t*2]=0;for(t=0;t<sg;t++)e.dyn_dtree[t*2]=0;for(t=0;t<PT;t++)e.bl_tree[t*2]=0;e.dyn_ltree[MT*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function FH(e){e.bi_valid>8?b2(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function h2e(e,t,n,r){FH(e),b2(e,n),b2(e,~n),e2e.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function AP(e,t,n,r){var i=t*2,o=n*2;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function xE(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&AP(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!AP(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function kP(e,t,n){var r,i,o=0,s,a;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],i=e.pending_buf[e.l_buf+o],o++,r===0?qa(e,i,t):(s=U2[i],qa(e,s+dU+1,t),a=hw[s],a!==0&&(i-=LT[s],mo(e,i,a)),r--,s=LH(r),qa(e,s,n),a=vb[s],a!==0&&(r-=Vy[s],mo(e,r,a)));while(o<e.last_lit);qa(e,MT,t)}function gw(e,t){var n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,s,a,l=-1,c;for(e.heap_len=0,e.heap_max=xH,s=0;s<o;s++)n[s*2]!==0?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[s*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)xE(e,n,s);c=o;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],xE(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[c*2]=n[s*2]+n[a*2],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[s*2+1]=n[a*2+1]=c,e.heap[1]=c++,xE(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d2e(e,t),NH(n,l,e.bl_count)}function RP(e,t,n){var r,i=-1,o,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)o=s,s=t[(r+1)*2+1],!(++a<l&&o===s)&&(a<c?e.bl_tree[o*2]+=a:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[SH*2]++):a<=10?e.bl_tree[CH*2]++:e.bl_tree[AH*2]++,a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))}function PP(e,t,n){var r,i=-1,o,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),r=0;r<=n;r++)if(o=s,s=t[(r+1)*2+1],!(++a<l&&o===s)){if(a<c)do qa(e,o,e.bl_tree);while(--a!==0);else o!==0?(o!==i&&(qa(e,o,e.bl_tree),a--),qa(e,SH,e.bl_tree),mo(e,a-3,2)):a<=10?(qa(e,CH,e.bl_tree),mo(e,a-3,3)):(qa(e,AH,e.bl_tree),mo(e,a-11,7));a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}}function g2e(e){var t;for(RP(e,e.dyn_ltree,e.l_desc.max_code),RP(e,e.dyn_dtree,e.d_desc.max_code),gw(e,e.bl_desc),t=PT-1;t>=3&&e.bl_tree[kH[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function p2e(e,t,n,r){var i;for(mo(e,t-257,5),mo(e,n-1,5),mo(e,r-4,4),i=0;i<r;i++)mo(e,e.bl_tree[kH[i]*2+1],3);PP(e,e.dyn_ltree,t-1),PP(e,e.dyn_dtree,n-1)}function m2e(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return SP;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return CP;for(n=32;n<dU;n++)if(e.dyn_ltree[n*2]!==0)return CP;return SP}var MP=!1;function U2e(e){MP||(f2e(),MP=!0),e.l_desc=new TE(e.dyn_ltree,RH),e.d_desc=new TE(e.dyn_dtree,PH),e.bl_desc=new TE(e.bl_tree,MH),e.bi_buf=0,e.bi_valid=0,OH(e)}function BH(e,t,n,r){mo(e,(r2e<<1)+(r?1:0),3),h2e(e,t,n)}function b2e(e){mo(e,TH<<1,3),qa(e,MT,Xl),u2e(e)}function y2e(e,t,n,r){var i,o,s=0;e.level>0?(e.strm.data_type===n2e&&(e.strm.data_type=m2e(e)),gw(e,e.l_desc),gw(e,e.d_desc),s=g2e(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?BH(e,t,n,r):e.strategy===t2e||o===i?(mo(e,(TH<<1)+(r?1:0),3),kP(e,Xl,vm)):(mo(e,(i2e<<1)+(r?1:0),3),p2e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),kP(e,e.dyn_ltree,e.dyn_dtree)),OH(e),r&&FH(e)}function v2e(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(U2[n]+dU+1)*2]++,e.dyn_dtree[LH(t)*2]++),e.last_lit===e.lit_bufsize-1}u0._tr_init=U2e;u0._tr_stored_block=BH;u0._tr_flush_block=y2e;u0._tr_tally=v2e;u0._tr_align=b2e;function E2e(e,t,n,r){for(var i=e&65535|0,o=e>>>16&65535|0,s=0;n!==0;){s=n>2e3?2e3:n,n-=s;do i=i+t[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}var $H=E2e;function _2e(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var w2e=_2e();function I2e(e,t,n,r){var i=w2e,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^i[(e^t[s])&255];return e^-1}var zH=I2e,DT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Xi=Mc,Is=u0,VH=$H,ou=zH,T2e=DT,Eh=0,x2e=1,S2e=3,Bu=4,LP=5,Qa=0,DP=1,Ts=-2,C2e=-3,SE=-5,A2e=-1,k2e=1,y5=2,R2e=3,P2e=4,M2e=0,L2e=2,y3=8,D2e=9,N2e=15,O2e=8,F2e=29,B2e=256,pw=B2e+1+F2e,$2e=30,z2e=19,V2e=2*pw+1,H2e=15,At=3,_u=258,ua=_u+At+1,W2e=32,v3=42,mw=69,Eb=73,_b=91,wb=103,mf=113,Gp=666,Mr=1,fU=2,Kf=3,f0=4,G2e=3;function wu(e,t){return e.msg=T2e[t],t}function NP(e){return(e<<1)-(e>4?9:0)}function mu(e){for(var t=e.length;--t>=0;)e[t]=0}function su(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(Xi.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function li(e,t){Is._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,su(e.strm)}function Wt(e,t){e.pending_buf[e.pending++]=t}function Cp(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function X2e(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,Xi.arraySet(t,e.input,e.next_in,i,n),e.state.wrap===1?e.adler=VH(e.adler,t,i,n):e.state.wrap===2&&(e.adler=ou(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function HH(e,t){var n=e.max_chain_length,r=e.strstart,i,o,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-ua?e.strstart-(e.w_size-ua):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+_u,g=c[r+s-1],U=c[r+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(c[i+s]!==U||c[i+s-1]!==g||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<f);if(o=_u-(f-r),r=f-_u,o>s){if(e.match_start=t,s=o,o>=a)break;g=c[r+s-1],U=c[r+s]}}while((t=d[t&u])>l&&--n!==0);return s<=e.lookahead?s:e.lookahead}function Yf(e){var t=e.w_size,n,r,i,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ua)){Xi.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);o+=t}if(e.strm.avail_in===0)break;if(r=X2e(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=At)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+At-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<At)););}while(e.lookahead<ua&&e.strm.avail_in!==0)}function j2e(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Yf(e),e.lookahead===0&&t===Eh)return Mr;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,li(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-ua&&(li(e,!1),e.strm.avail_out===0))return Mr}return e.insert=0,t===Bu?(li(e,!0),e.strm.avail_out===0?Kf:f0):(e.strstart>e.block_start&&(li(e,!1),e.strm.avail_out===0),Mr)}function CE(e,t){for(var n,r;;){if(e.lookahead<ua){if(Yf(e),e.lookahead<ua&&t===Eh)return Mr;if(e.lookahead===0)break}if(n=0,e.lookahead>=At&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+At-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ua&&(e.match_length=HH(e,n)),e.match_length>=At)if(r=Is._tr_tally(e,e.strstart-e.match_start,e.match_length-At),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=At){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+At-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Is._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(li(e,!1),e.strm.avail_out===0))return Mr}return e.insert=e.strstart<At-1?e.strstart:At-1,t===Bu?(li(e,!0),e.strm.avail_out===0?Kf:f0):e.last_lit&&(li(e,!1),e.strm.avail_out===0)?Mr:fU}function f1(e,t){for(var n,r,i;;){if(e.lookahead<ua){if(Yf(e),e.lookahead<ua&&t===Eh)return Mr;if(e.lookahead===0)break}if(n=0,e.lookahead>=At&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+At-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=At-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ua&&(e.match_length=HH(e,n),e.match_length<=5&&(e.strategy===k2e||e.match_length===At&&e.strstart-e.match_start>4096)&&(e.match_length=At-1)),e.prev_length>=At&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-At,r=Is._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-At),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+At-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=At-1,e.strstart++,r&&(li(e,!1),e.strm.avail_out===0))return Mr}else if(e.match_available){if(r=Is._tr_tally(e,0,e.window[e.strstart-1]),r&&li(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Mr}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Is._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<At-1?e.strstart:At-1,t===Bu?(li(e,!0),e.strm.avail_out===0?Kf:f0):e.last_lit&&(li(e,!1),e.strm.avail_out===0)?Mr:fU}function K2e(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=_u){if(Yf(e),e.lookahead<=_u&&t===Eh)return Mr;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=At&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+_u;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=_u-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=At?(n=Is._tr_tally(e,1,e.match_length-At),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Is._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(li(e,!1),e.strm.avail_out===0))return Mr}return e.insert=0,t===Bu?(li(e,!0),e.strm.avail_out===0?Kf:f0):e.last_lit&&(li(e,!1),e.strm.avail_out===0)?Mr:fU}function Y2e(e,t){for(var n;;){if(e.lookahead===0&&(Yf(e),e.lookahead===0)){if(t===Eh)return Mr;break}if(e.match_length=0,n=Is._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(li(e,!1),e.strm.avail_out===0))return Mr}return e.insert=0,t===Bu?(li(e,!0),e.strm.avail_out===0?Kf:f0):e.last_lit&&(li(e,!1),e.strm.avail_out===0)?Mr:fU}function Da(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var q1;q1=[new Da(0,0,0,0,j2e),new Da(4,4,8,4,CE),new Da(4,5,16,8,CE),new Da(4,6,32,32,CE),new Da(4,4,16,16,f1),new Da(8,16,32,32,f1),new Da(8,16,128,128,f1),new Da(8,32,128,256,f1),new Da(32,128,258,1024,f1),new Da(32,258,258,4096,f1)];function Z2e(e){e.window_size=2*e.w_size,mu(e.head),e.max_lazy_match=q1[e.level].max_lazy,e.good_match=q1[e.level].good_length,e.nice_match=q1[e.level].nice_length,e.max_chain_length=q1[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=At-1,e.match_available=0,e.ins_h=0}function q2e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y3,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Xi.Buf16(V2e*2),this.dyn_dtree=new Xi.Buf16((2*$2e+1)*2),this.bl_tree=new Xi.Buf16((2*z2e+1)*2),mu(this.dyn_ltree),mu(this.dyn_dtree),mu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Xi.Buf16(H2e+1),this.heap=new Xi.Buf16(2*pw+1),mu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Xi.Buf16(2*pw+1),mu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function WH(e){var t;return!e||!e.state?wu(e,Ts):(e.total_in=e.total_out=0,e.data_type=L2e,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?v3:mf,e.adler=t.wrap===2?0:1,t.last_flush=Eh,Is._tr_init(t),Qa)}function GH(e){var t=WH(e);return t===Qa&&Z2e(e.state),t}function Q2e(e,t){return!e||!e.state||e.state.wrap!==2?Ts:(e.state.gzhead=t,Qa)}function XH(e,t,n,r,i,o){if(!e)return Ts;var s=1;if(t===A2e&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>D2e||n!==y3||r<8||r>15||t<0||t>9||o<0||o>P2e)return wu(e,Ts);r===8&&(r=9);var a=new q2e;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+At-1)/At),a.window=new Xi.Buf8(a.w_size*2),a.head=new Xi.Buf16(a.hash_size),a.prev=new Xi.Buf16(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Xi.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,GH(e)}function J2e(e,t){return XH(e,t,y3,N2e,O2e,M2e)}function eUe(e,t){var n,r,i,o;if(!e||!e.state||t>LP||t<0)return e?wu(e,Ts):Ts;if(r=e.state,!e.output||!e.input&&e.avail_in!==0||r.status===Gp&&t!==Bu)return wu(e,e.avail_out===0?SE:Ts);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===v3)if(r.wrap===2)e.adler=0,Wt(r,31),Wt(r,139),Wt(r,8),r.gzhead?(Wt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Wt(r,r.gzhead.time&255),Wt(r,r.gzhead.time>>8&255),Wt(r,r.gzhead.time>>16&255),Wt(r,r.gzhead.time>>24&255),Wt(r,r.level===9?2:r.strategy>=y5||r.level<2?4:0),Wt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Wt(r,r.gzhead.extra.length&255),Wt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=ou(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=mw):(Wt(r,0),Wt(r,0),Wt(r,0),Wt(r,0),Wt(r,0),Wt(r,r.level===9?2:r.strategy>=y5||r.level<2?4:0),Wt(r,G2e),r.status=mf);else{var s=y3+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=y5||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,s|=a<<6,r.strstart!==0&&(s|=W2e),s+=31-s%31,r.status=mf,Cp(r,s),r.strstart!==0&&(Cp(r,e.adler>>>16),Cp(r,e.adler&65535)),e.adler=1}if(r.status===mw)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=ou(e.adler,r.pending_buf,r.pending-i,i)),su(e),i=r.pending,r.pending===r.pending_buf_size));)Wt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=ou(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=Eb)}else r.status=Eb;if(r.status===Eb)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=ou(e.adler,r.pending_buf,r.pending-i,i)),su(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,Wt(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=ou(e.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.gzindex=0,r.status=_b)}else r.status=_b;if(r.status===_b)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=ou(e.adler,r.pending_buf,r.pending-i,i)),su(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,Wt(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=ou(e.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.status=wb)}else r.status=wb;if(r.status===wb&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&su(e),r.pending+2<=r.pending_buf_size&&(Wt(r,e.adler&255),Wt(r,e.adler>>8&255),e.adler=0,r.status=mf)):r.status=mf),r.pending!==0){if(su(e),e.avail_out===0)return r.last_flush=-1,Qa}else if(e.avail_in===0&&NP(t)<=NP(n)&&t!==Bu)return wu(e,SE);if(r.status===Gp&&e.avail_in!==0)return wu(e,SE);if(e.avail_in!==0||r.lookahead!==0||t!==Eh&&r.status!==Gp){var l=r.strategy===y5?Y2e(r,t):r.strategy===R2e?K2e(r,t):q1[r.level].func(r,t);if((l===Kf||l===f0)&&(r.status=Gp),l===Mr||l===Kf)return e.avail_out===0&&(r.last_flush=-1),Qa;if(l===fU&&(t===x2e?Is._tr_align(r):t!==LP&&(Is._tr_stored_block(r,0,0,!1),t===S2e&&(mu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),su(e),e.avail_out===0))return r.last_flush=-1,Qa}return t!==Bu?Qa:r.wrap<=0?DP:(r.wrap===2?(Wt(r,e.adler&255),Wt(r,e.adler>>8&255),Wt(r,e.adler>>16&255),Wt(r,e.adler>>24&255),Wt(r,e.total_in&255),Wt(r,e.total_in>>8&255),Wt(r,e.total_in>>16&255),Wt(r,e.total_in>>24&255)):(Cp(r,e.adler>>>16),Cp(r,e.adler&65535)),su(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Qa:DP)}function tUe(e){var t;return!e||!e.state?Ts:(t=e.state.status,t!==v3&&t!==mw&&t!==Eb&&t!==_b&&t!==wb&&t!==mf&&t!==Gp?wu(e,Ts):(e.state=null,t===mf?wu(e,C2e):Qa))}function nUe(e,t){var n=t.length,r,i,o,s,a,l,c,u;if(!e||!e.state||(r=e.state,s=r.wrap,s===2||s===1&&r.status!==v3||r.lookahead))return Ts;for(s===1&&(e.adler=VH(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(s===0&&(mu(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new Xi.Buf8(r.w_size),Xi.arraySet(u,t,n-r.w_size,r.w_size,0),t=u,n=r.w_size),a=e.avail_in,l=e.next_in,c=e.input,e.avail_in=n,e.next_in=0,e.input=t,Yf(r);r.lookahead>=At;){i=r.strstart,o=r.lookahead-(At-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+At-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--o);r.strstart=i,r.lookahead=At-1,Yf(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=At-1,r.match_available=0,e.next_in=l,e.input=c,e.avail_in=a,r.wrap=s,Qa}ml.deflateInit=J2e;ml.deflateInit2=XH;ml.deflateReset=GH;ml.deflateResetKeep=WH;ml.deflateSetHeader=Q2e;ml.deflate=eUe;ml.deflateEnd=tUe;ml.deflateSetDictionary=nUe;ml.deflateInfo="pako deflate (from Nodeca project)";var _h={},E3=Mc,jH=!0,KH=!0;try{String.fromCharCode.apply(null,[0])}catch{jH=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{KH=!1}var y2=new E3.Buf8(256);for(var eu=0;eu<256;eu++)y2[eu]=eu>=252?6:eu>=248?5:eu>=240?4:eu>=224?3:eu>=192?2:1;y2[254]=y2[254]=1;_h.string2buf=function(e){var t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new E3.Buf8(a),o=0,i=0;o<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};function YH(e,t){if(t<65534&&(e.subarray&&KH||!e.subarray&&jH))return String.fromCharCode.apply(null,E3.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}_h.buf2binstring=function(e){return YH(e,e.length)};_h.binstring2buf=function(e){for(var t=new E3.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t};_h.buf2string=function(e,t){var n,r,i,o,s=t||e.length,a=new Array(s*2);for(r=0,n=0;n<s;){if(i=e[n++],i<128){a[r++]=i;continue}if(o=y2[i],o>4){a[r++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<s;)i=i<<6|e[n++]&63,o--;if(o>1){a[r++]=65533;continue}i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|i&1023)}return YH(a,r)};_h.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+y2[e[n]]>t?n:t};function rUe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ZH=rUe,Em=ml,_m=Mc,Uw=_h,bw=DT,iUe=ZH,qH=Object.prototype.toString,oUe=0,AE=4,ag=0,OP=1,FP=2,sUe=-1,aUe=0,lUe=8;function Zf(e){if(!(this instanceof Zf))return new Zf(e);this.options=_m.assign({level:sUe,method:lUe,chunkSize:16384,windowBits:15,memLevel:8,strategy:aUe,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iUe,this.strm.avail_out=0;var n=Em.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ag)throw new Error(bw[n]);if(t.header&&Em.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(typeof t.dictionary=="string"?r=Uw.string2buf(t.dictionary):qH.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Em.deflateSetDictionary(this.strm,r),n!==ag)throw new Error(bw[n]);this._dict_set=!0}}Zf.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;o=t===~~t?t:t===!0?AE:oUe,typeof e=="string"?n.input=Uw.string2buf(e):qH.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new _m.Buf8(r),n.next_out=0,n.avail_out=r),i=Em.deflate(n,o),i!==OP&&i!==ag)return this.onEnd(i),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(o===AE||o===FP))&&(this.options.to==="string"?this.onData(Uw.buf2binstring(_m.shrinkBuf(n.output,n.next_out))):this.onData(_m.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&i!==OP);return o===AE?(i=Em.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===ag):(o===FP&&(this.onEnd(ag),n.avail_out=0),!0)};Zf.prototype.onData=function(e){this.chunks.push(e)};Zf.prototype.onEnd=function(e){e===ag&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_m.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function NT(e,t){var n=new Zf(t);if(n.push(e,!0),n.err)throw n.msg||bw[n.err];return n.result}function cUe(e,t){return t=t||{},t.raw=!0,NT(e,t)}function uUe(e,t){return t=t||{},t.gzip=!0,NT(e,t)}uU.Deflate=Zf;uU.deflate=NT;uU.deflateRaw=cUe;uU.gzip=uUe;var hU={},Ea={},v5=30,dUe=12,fUe=function(t,n){var r,i,o,s,a,l,c,u,d,f,g,U,b,v,_,E,w,T,A,M,S,x,C,R,O;r=t.state,i=t.next_in,R=t.input,o=i+(t.avail_in-5),s=t.next_out,O=t.output,a=s-(n-t.avail_out),l=s+(t.avail_out-257),c=r.dmax,u=r.wsize,d=r.whave,f=r.wnext,g=r.window,U=r.hold,b=r.bits,v=r.lencode,_=r.distcode,E=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;e:do{b<15&&(U+=R[i++]<<b,b+=8,U+=R[i++]<<b,b+=8),T=v[U&E];t:for(;;){if(A=T>>>24,U>>>=A,b-=A,A=T>>>16&255,A===0)O[s++]=T&65535;else if(A&16){M=T&65535,A&=15,A&&(b<A&&(U+=R[i++]<<b,b+=8),M+=U&(1<<A)-1,U>>>=A,b-=A),b<15&&(U+=R[i++]<<b,b+=8,U+=R[i++]<<b,b+=8),T=_[U&w];n:for(;;){if(A=T>>>24,U>>>=A,b-=A,A=T>>>16&255,A&16){if(S=T&65535,A&=15,b<A&&(U+=R[i++]<<b,b+=8,b<A&&(U+=R[i++]<<b,b+=8)),S+=U&(1<<A)-1,S>c){t.msg="invalid distance too far back",r.mode=v5;break e}if(U>>>=A,b-=A,A=s-a,S>A){if(A=S-A,A>d&&r.sane){t.msg="invalid distance too far back",r.mode=v5;break e}if(x=0,C=g,f===0){if(x+=u-A,A<M){M-=A;do O[s++]=g[x++];while(--A);x=s-S,C=O}}else if(f<A){if(x+=u+f-A,A-=f,A<M){M-=A;do O[s++]=g[x++];while(--A);if(x=0,f<M){A=f,M-=A;do O[s++]=g[x++];while(--A);x=s-S,C=O}}}else if(x+=f-A,A<M){M-=A;do O[s++]=g[x++];while(--A);x=s-S,C=O}for(;M>2;)O[s++]=C[x++],O[s++]=C[x++],O[s++]=C[x++],M-=3;M&&(O[s++]=C[x++],M>1&&(O[s++]=C[x++]))}else{x=s-S;do O[s++]=O[x++],O[s++]=O[x++],O[s++]=O[x++],M-=3;while(M>2);M&&(O[s++]=O[x++],M>1&&(O[s++]=O[x++]))}}else if(A&64){t.msg="invalid distance code",r.mode=v5;break e}else{T=_[(T&65535)+(U&(1<<A)-1)];continue n}break}}else if(A&64)if(A&32){r.mode=dUe;break e}else{t.msg="invalid literal/length code",r.mode=v5;break e}else{T=v[(T&65535)+(U&(1<<A)-1)];continue t}break}}while(i<o&&s<l);M=b>>3,i-=M,b-=M<<3,U&=(1<<b)-1,t.next_in=i,t.next_out=s,t.avail_in=i<o?5+(o-i):5-(i-o),t.avail_out=s<l?257+(l-s):257-(s-l),r.hold=U,r.bits=b},BP=Mc,h1=15,$P=852,zP=592,VP=0,kE=1,HP=2,hUe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],gUe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],pUe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],mUe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],UUe=function(t,n,r,i,o,s,a,l){var c=l.bits,u=0,d=0,f=0,g=0,U=0,b=0,v=0,_=0,E=0,w=0,T,A,M,S,x,C=null,R=0,O,F=new BP.Buf16(h1+1),N=new BP.Buf16(h1+1),J=null,K=0,ne,ee,q;for(u=0;u<=h1;u++)F[u]=0;for(d=0;d<i;d++)F[n[r+d]]++;for(U=c,g=h1;g>=1&&F[g]===0;g--);if(U>g&&(U=g),g===0)return o[s++]=1<<24|64<<16|0,o[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<g&&F[f]===0;f++);for(U<f&&(U=f),_=1,u=1;u<=h1;u++)if(_<<=1,_-=F[u],_<0)return-1;if(_>0&&(t===VP||g!==1))return-1;for(N[1]=0,u=1;u<h1;u++)N[u+1]=N[u]+F[u];for(d=0;d<i;d++)n[r+d]!==0&&(a[N[n[r+d]]++]=d);if(t===VP?(C=J=a,O=19):t===kE?(C=hUe,R-=257,J=gUe,K-=257,O=256):(C=pUe,J=mUe,O=-1),w=0,d=0,u=f,x=s,b=U,v=0,M=-1,E=1<<U,S=E-1,t===kE&&E>$P||t===HP&&E>zP)return 1;for(;;){ne=u-v,a[d]<O?(ee=0,q=a[d]):a[d]>O?(ee=J[K+a[d]],q=C[R+a[d]]):(ee=96,q=0),T=1<<u-v,A=1<<b,f=A;do A-=T,o[x+(w>>v)+A]=ne<<24|ee<<16|q|0;while(A!==0);for(T=1<<u-1;w&T;)T>>=1;if(T!==0?(w&=T-1,w+=T):w=0,d++,--F[u]===0){if(u===g)break;u=n[r+a[d]]}if(u>U&&(w&S)!==M){for(v===0&&(v=U),x+=f,b=u-v,_=1<<b;b+v<g&&(_-=F[b+v],!(_<=0));)b++,_<<=1;if(E+=1<<b,t===kE&&E>$P||t===HP&&E>zP)return 1;M=w&S,o[M]=U<<24|b<<16|x-s|0}}return w!==0&&(o[x+w]=u-v<<24|64<<16|0),l.bits=U,0},No=Mc,yw=$H,Na=zH,bUe=fUe,wm=UUe,yUe=0,QH=1,JH=2,WP=4,vUe=5,E5=6,qf=0,EUe=1,_Ue=2,Ls=-2,eW=-3,tW=-4,wUe=-5,GP=8,nW=1,XP=2,jP=3,KP=4,YP=5,ZP=6,qP=7,QP=8,JP=9,eM=10,Hy=11,Nl=12,RE=13,tM=14,PE=15,nM=16,rM=17,iM=18,oM=19,_5=20,w5=21,sM=22,aM=23,lM=24,cM=25,uM=26,ME=27,dM=28,fM=29,Ln=30,rW=31,IUe=32,TUe=852,xUe=592,SUe=15,CUe=SUe;function hM(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function AUe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new No.Buf16(320),this.work=new No.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function iW(e){var t;return!e||!e.state?Ls:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=nW,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new No.Buf32(TUe),t.distcode=t.distdyn=new No.Buf32(xUe),t.sane=1,t.back=-1,qf)}function oW(e){var t;return!e||!e.state?Ls:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,iW(e))}function sW(e,t){var n,r;return!e||!e.state||(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Ls:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,oW(e))}function aW(e,t){var n,r;return e?(r=new AUe,e.state=r,r.window=null,n=sW(e,t),n!==qf&&(e.state=null),n):Ls}function kUe(e){return aW(e,CUe)}var gM=!0,LE,DE;function RUe(e){if(gM){var t;for(LE=new No.Buf32(512),DE=new No.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(wm(QH,e.lens,0,288,LE,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;wm(JH,e.lens,0,32,DE,0,e.work,{bits:5}),gM=!1}e.lencode=LE,e.lenbits=9,e.distcode=DE,e.distbits=5}function lW(e,t,n,r){var i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new No.Buf8(o.wsize)),r>=o.wsize?(No.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),No.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(No.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function PUe(e,t){var n,r,i,o,s,a,l,c,u,d,f,g,U,b,v=0,_,E,w,T,A,M,S,x,C=new No.Buf8(4),R,O,F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Ls;n=e.state,n.mode===Nl&&(n.mode=RE),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,x=qf;e:for(;;)switch(n.mode){case nW:if(n.wrap===0){n.mode=RE;break}for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,C[0]=c&255,C[1]=c>>>8&255,n.check=Na(n.check,C,2,0),c=0,u=0,n.mode=XP;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Ln;break}if((c&15)!==GP){e.msg="unknown compression method",n.mode=Ln;break}if(c>>>=4,u-=4,S=(c&15)+8,n.wbits===0)n.wbits=S;else if(S>n.wbits){e.msg="invalid window size",n.mode=Ln;break}n.dmax=1<<S,e.adler=n.check=1,n.mode=c&512?eM:Nl,c=0,u=0;break;case XP:for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==GP){e.msg="unknown compression method",n.mode=Ln;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Ln;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,n.check=Na(n.check,C,2,0)),c=0,u=0,n.mode=jP;case jP:for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=Na(n.check,C,4,0)),c=0,u=0,n.mode=KP;case KP:for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,n.check=Na(n.check,C,2,0)),c=0,u=0,n.mode=YP;case YP:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,n.check=Na(n.check,C,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=ZP;case ZP:if(n.flags&1024&&(g=n.length,g>a&&(g=a),g&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),No.arraySet(n.head.extra,r,o,g,S)),n.flags&512&&(n.check=Na(n.check,r,g,o)),a-=g,o+=g,n.length-=g),n.length))break e;n.length=0,n.mode=qP;case qP:if(n.flags&2048){if(a===0)break e;g=0;do S=r[o+g++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S));while(S&&g<a);if(n.flags&512&&(n.check=Na(n.check,r,g,o)),a-=g,o+=g,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=QP;case QP:if(n.flags&4096){if(a===0)break e;g=0;do S=r[o+g++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S));while(S&&g<a);if(n.flags&512&&(n.check=Na(n.check,r,g,o)),a-=g,o+=g,S)break e}else n.head&&(n.head.comment=null);n.mode=JP;case JP:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Ln;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Nl;break;case eM:for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}e.adler=n.check=hM(c),c=0,u=0,n.mode=Hy;case Hy:if(n.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,_Ue;e.adler=n.check=1,n.mode=Nl;case Nl:if(t===vUe||t===E5)break e;case RE:if(n.last){c>>>=u&7,u-=u&7,n.mode=ME;break}for(;u<3;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=tM;break;case 1:if(RUe(n),n.mode=_5,t===E5){c>>>=2,u-=2;break e}break;case 2:n.mode=rM;break;case 3:e.msg="invalid block type",n.mode=Ln}c>>>=2,u-=2;break;case tM:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Ln;break}if(n.length=c&65535,c=0,u=0,n.mode=PE,t===E5)break e;case PE:n.mode=nM;case nM:if(g=n.length,g){if(g>a&&(g=a),g>l&&(g=l),g===0)break e;No.arraySet(i,r,o,g,s),a-=g,o+=g,l-=g,s+=g,n.length-=g;break}n.mode=Nl;break;case rM:for(;u<14;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Ln;break}n.have=0,n.mode=iM;case iM:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.lens[F[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},x=wm(yUe,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,x){e.msg="invalid code lengths set",n.mode=Ln;break}n.have=0,n.mode=oM;case oM:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[c&(1<<n.lenbits)-1],_=v>>>24,E=v>>>16&255,w=v&65535,!(_<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(w<16)c>>>=_,u-=_,n.lens[n.have++]=w;else{if(w===16){for(O=_+2;u<O;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c>>>=_,u-=_,n.have===0){e.msg="invalid bit length repeat",n.mode=Ln;break}S=n.lens[n.have-1],g=3+(c&3),c>>>=2,u-=2}else if(w===17){for(O=_+3;u<O;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=_,u-=_,S=0,g=3+(c&7),c>>>=3,u-=3}else{for(O=_+7;u<O;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=_,u-=_,S=0,g=11+(c&127),c>>>=7,u-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Ln;break}for(;g--;)n.lens[n.have++]=S}}if(n.mode===Ln)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Ln;break}if(n.lenbits=9,R={bits:n.lenbits},x=wm(QH,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,x){e.msg="invalid literal/lengths set",n.mode=Ln;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},x=wm(JH,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,x){e.msg="invalid distances set",n.mode=Ln;break}if(n.mode=_5,t===E5)break e;case _5:n.mode=w5;case w5:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,bUe(e,f),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===Nl&&(n.back=-1);break}for(n.back=0;v=n.lencode[c&(1<<n.lenbits)-1],_=v>>>24,E=v>>>16&255,w=v&65535,!(_<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(E&&!(E&240)){for(T=_,A=E,M=w;v=n.lencode[M+((c&(1<<T+A)-1)>>T)],_=v>>>24,E=v>>>16&255,w=v&65535,!(T+_<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=T,u-=T,n.back+=T}if(c>>>=_,u-=_,n.back+=_,n.length=w,E===0){n.mode=uM;break}if(E&32){n.back=-1,n.mode=Nl;break}if(E&64){e.msg="invalid literal/length code",n.mode=Ln;break}n.extra=E&15,n.mode=sM;case sM:if(n.extra){for(O=n.extra;u<O;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=aM;case aM:for(;v=n.distcode[c&(1<<n.distbits)-1],_=v>>>24,E=v>>>16&255,w=v&65535,!(_<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(!(E&240)){for(T=_,A=E,M=w;v=n.distcode[M+((c&(1<<T+A)-1)>>T)],_=v>>>24,E=v>>>16&255,w=v&65535,!(T+_<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=T,u-=T,n.back+=T}if(c>>>=_,u-=_,n.back+=_,E&64){e.msg="invalid distance code",n.mode=Ln;break}n.offset=w,n.extra=E&15,n.mode=lM;case lM:if(n.extra){for(O=n.extra;u<O;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Ln;break}n.mode=cM;case cM:if(l===0)break e;if(g=f-l,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Ln;break}g>n.wnext?(g-=n.wnext,U=n.wsize-g):U=n.wnext-g,g>n.length&&(g=n.length),b=n.window}else b=i,U=s-n.offset,g=n.length;g>l&&(g=l),l-=g,n.length-=g;do i[s++]=b[U++];while(--g);n.length===0&&(n.mode=w5);break;case uM:if(l===0)break e;i[s++]=n.length,l--,n.mode=w5;break;case ME:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[o++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?Na(n.check,i,f,s-f):yw(n.check,i,f,s-f)),f=l,(n.flags?c:hM(c))!==n.check){e.msg="incorrect data check",n.mode=Ln;break}c=0,u=0}n.mode=dM;case dM:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Ln;break}c=0,u=0}n.mode=fM;case fM:x=EUe;break e;case Ln:x=eW;break e;case rW:return tW;case IUe:default:return Ls}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<Ln&&(n.mode<ME||t!==WP))&&lW(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?Na(n.check,i,f,e.next_out-f):yw(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Nl?128:0)+(n.mode===_5||n.mode===PE?256:0),(d===0&&f===0||t===WP)&&x===qf&&(x=wUe),x}function MUe(e){if(!e||!e.state)return Ls;var t=e.state;return t.window&&(t.window=null),e.state=null,qf}function LUe(e,t){var n;return!e||!e.state||(n=e.state,!(n.wrap&2))?Ls:(n.head=t,t.done=!1,qf)}function DUe(e,t){var n=t.length,r,i,o;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==Hy)?Ls:r.mode===Hy&&(i=1,i=yw(i,t,n,0),i!==r.check)?eW:(o=lW(e,t,n,n),o?(r.mode=rW,tW):(r.havedict=1,qf))}Ea.inflateReset=oW;Ea.inflateReset2=sW;Ea.inflateResetKeep=iW;Ea.inflateInit=kUe;Ea.inflateInit2=aW;Ea.inflate=PUe;Ea.inflateEnd=MUe;Ea.inflateGetHeader=LUe;Ea.inflateSetDictionary=DUe;Ea.inflateInfo="pako inflate (from Nodeca project)";var cW={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function NUe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var OUe=NUe,lg=Ea,Im=Mc,Ib=_h,ar=cW,vw=DT,FUe=ZH,BUe=OUe,uW=Object.prototype.toString;function Qf(e){if(!(this instanceof Qf))return new Qf(e);this.options=Im.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new FUe,this.strm.avail_out=0;var n=lg.inflateInit2(this.strm,t.windowBits);if(n!==ar.Z_OK)throw new Error(vw[n]);if(this.header=new BUe,lg.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Ib.string2buf(t.dictionary):uW.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=lg.inflateSetDictionary(this.strm,t.dictionary),n!==ar.Z_OK)))throw new Error(vw[n])}Qf.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a,l,c,u=!1;if(this.ended)return!1;s=t===~~t?t:t===!0?ar.Z_FINISH:ar.Z_NO_FLUSH,typeof e=="string"?n.input=Ib.binstring2buf(e):uW.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new Im.Buf8(r),n.next_out=0,n.avail_out=r),o=lg.inflate(n,ar.Z_NO_FLUSH),o===ar.Z_NEED_DICT&&i&&(o=lg.inflateSetDictionary(this.strm,i)),o===ar.Z_BUF_ERROR&&u===!0&&(o=ar.Z_OK,u=!1),o!==ar.Z_STREAM_END&&o!==ar.Z_OK)return this.onEnd(o),this.ended=!0,!1;n.next_out&&(n.avail_out===0||o===ar.Z_STREAM_END||n.avail_in===0&&(s===ar.Z_FINISH||s===ar.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=Ib.utf8border(n.output,n.next_out),l=n.next_out-a,c=Ib.buf2string(n.output,a),n.next_out=l,n.avail_out=r-l,l&&Im.arraySet(n.output,n.output,a,l,0),this.onData(c)):this.onData(Im.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(u=!0)}while((n.avail_in>0||n.avail_out===0)&&o!==ar.Z_STREAM_END);return o===ar.Z_STREAM_END&&(s=ar.Z_FINISH),s===ar.Z_FINISH?(o=lg.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===ar.Z_OK):(s===ar.Z_SYNC_FLUSH&&(this.onEnd(ar.Z_OK),n.avail_out=0),!0)};Qf.prototype.onData=function(e){this.chunks.push(e)};Qf.prototype.onEnd=function(e){e===ar.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Im.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function OT(e,t){var n=new Qf(t);if(n.push(e,!0),n.err)throw n.msg||vw[n.err];return n.result}function $Ue(e,t){return t=t||{},t.raw=!0,OT(e,t)}hU.Inflate=Qf;hU.inflate=OT;hU.inflateRaw=$Ue;hU.ungzip=OT;var zUe=Mc.assign,VUe=uU,HUe=hU,WUe=cW,dW={};zUe(dW,VUe,HUe,WUe);var _3=dW;const Tb=12,GUe=()=>{const e=new Uint8Array(Tb);return window.crypto.getRandomValues(e)},FT=async e=>{const t=await window.crypto.subtle.generateKey({name:"AES-GCM",length:N$},!0,["encrypt","decrypt"]);return e==="cryptoKey"?t:(await window.crypto.subtle.exportKey("jwk",t)).k},fW=(e,t)=>window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:N$},!1,[t]),w3=async(e,t)=>{const n=typeof e=="string"?await fW(e,"encrypt"):e,r=GUe(),i=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:t instanceof Blob?await Iu(t):t;return{encryptedBuffer:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,i),iv:r}},v2=async(e,t,n)=>{const r=await fW(n,"decrypt");return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},r,t)},Wy=e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e);let n="";for(const r of t)n+=String.fromCharCode(r);return n},hW=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},gW=e=>new TextDecoder("utf-8").decode(hW(e)),pW=(e,t=!1)=>t?window.btoa(e):window.btoa(Wy(e)),mW=(e,t=!1)=>t?window.atob(e):gW(window.atob(e)),pM=e=>window.atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"=")),UW=({text:e,compress:t})=>{let n;if(t!==!1)try{n=Wy(_3.deflate(e))}catch(r){console.error("encode: cannot deflate",r)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||Wy(e)}},bW=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:gW(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?_3.inflate(new Uint8Array(hW(t)),{to:"string"}):t},yW=1,xb=4,cg=4,NE={1:8,2:16,4:32};function Gy(e,t,n,r){if(r!=null){if(r>Math.pow(2,NE[t])-1)throw new Error(`attempting to set value higher than the allocated bytes (value: ${r}, bytes: ${t})`);const o=`setUint${NE[t]}`;return new DataView(e.buffer)[o](n,r),e}const i=`getUint${NE[t]}`;return new DataView(e.buffer)[i](n)}const mM=(...e)=>{const t=new Uint8Array(xb+cg*e.length+e.reduce((r,i)=>r+i.byteLength,0));let n=0;Gy(t,xb,n,yW),n+=xb;for(const r of e)Gy(t,cg,n,r.byteLength),n+=cg,t.set(r,n),n+=r.byteLength;return t},UM=e=>{const t=[];let n=0;const r=Gy(e,cg,n);if(r>yW)throw new Error(`invalid version ${r}`);for(n+=xb;;){const i=Gy(e,cg,n);if(n+=cg,t.push(e.slice(n,n+i)),n+=i,n>=e.byteLength)break}return t},XUe=async(e,t)=>{const{encryptedBuffer:n,iv:r}=await w3(t,_3.deflate(e));return{iv:r,buffer:new Uint8Array(n)}},vW=async(e,t)=>{const n={version:2,compression:"pako@1",encryption:"AES-GCM"},r=new TextEncoder().encode(JSON.stringify(n)),i=new TextEncoder().encode(JSON.stringify(t.metadata||null)),{iv:o,buffer:s}=await XUe(mM(i,e),t.encryptionKey);return mM(r,o,s)},jUe=async(e,t,n,r)=>(t=new Uint8Array(await v2(e,t,n)),r?_3.inflate(t):t),EW=async(e,t)=>{const[n,r,i]=UM(e),o=JSON.parse(new TextDecoder().decode(n));try{const[s,a]=UM(await jUe(r,i,t.decryptionKey,!!o.compression));return{metadata:JSON.parse(new TextDecoder().decode(s)),data:a}}catch(s){throw console.error("Error during decompressing and decrypting the file.",o),s}},Og=e=>{const t=e.map(r=>r[0]),n=e.map(r=>r[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},Xy=(e,t,n,r)=>{const i=n.map(g=>g[e]),o=Math.max(...i),s=Math.min(...i),a=o-s,l=a===0?1:t/a;let c=1/0;const u=n.map(g=>{const U=g[e]*l,b=[...g];return b[e]=U,U<c&&(c=U),b});if(!r||u.length===2)return u;const d=s-c;return u.map(g=>g.map((U,b)=>b===e?U+d:U))},KUe={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},YUe=e=>Object.keys(On).includes(e)?On[e]:md,g1=(e,t)=>{if(!t)return null;const n=t.focus||0;return De(e)?xy(t)?{...t,focus:n,fixedPoint:b3(t.fixedPoint??[0,0])}:null:{...t,focus:n}},tu=(e,t)=>{const n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||Ms(),fillStyle:e.fillStyle||Gn.fillStyle,strokeWidth:e.strokeWidth||Gn.strokeWidth,strokeStyle:e.strokeStyle??Gn.strokeStyle,roughness:e.roughness??Gn.roughness,opacity:e.opacity==null?Gn.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||Gn.strokeColor,backgroundColor:e.backgroundColor||Gn.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:c0(e.type)?Er.LEGACY:Er.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??l0(),link:e.link?zo(e.link):null,locked:e.locked??!1};return("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData),(e.x<-1e6||e.x>1e6||e.y<-1e6||e.y>1e6||e.width<-1e6||e.width>1e6||e.height<-1e6||e.height>1e6)&&console.error("Restore element with properties size or position is too large",{element:e}),{...e,...n,...CG(n),...t}},ZUe=e=>{switch((e.x<-1e6||e.x>1e6||e.y<-1e6||e.y>1e6||e.width<-1e6||e.width>1e6||e.height<-1e6||e.height>1e6)&&console.error("Restore element size or position is too large",{element:e}),e.type){case"text":let t=e.fontSize,n=e.fontFamily;if("font"in e){const[u,d]=e.font.split(" ");t=parseFloat(u),n=YUe(d)}const r=typeof e.text=="string"&&e.text||"",i=e.lineHeight||(e.height?Jce(e):Gf(e.fontFamily));return e=tu(e,{fontSize:t,fontFamily:n,text:r,textAlign:e.textAlign||Z2,verticalAlign:e.verticalAlign||fy,containerId:e.containerId??null,originalText:e.originalText||r,autoResize:e.autoResize??!0,lineHeight:i}),!r&&!e.isDeleted&&(e={...e,originalText:r,isDeleted:!0},e=O3(e)),e;case"freedraw":return tu(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return tu(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":const{startArrowhead:o=null,endArrowhead:s=null}=e;let a=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[B(0,0),B(e.width,e.height)]:e.points;return(c[0][0]!==0||c[0][1]!==0)&&({points:c,x:a,y:l}=Ce.getNormalizedPoints(e)),tu(e,{type:e.type==="draw"?"line":e.type,startBinding:g1(e,e.startBinding),endBinding:g1(e,e.endBinding),lastCommittedPoint:null,startArrowhead:o,endArrowhead:s,points:c,x:a,y:l,...Og(c)});case"arrow":{const{startArrowhead:u=null,endArrowhead:d="arrow"}=e;let f=e.x,g=e.y,U=!Array.isArray(e.points)||e.points.length<2?[B(0,0),B(e.width,e.height)]:e.points;(U[0][0]!==0||U[0][1]!==0)&&({points:U,x:f,y:g}=Ce.getNormalizedPoints(e));const b={type:e.type,startBinding:g1(e,e.startBinding),endBinding:g1(e,e.endBinding),lastCommittedPoint:null,startArrowhead:u,endArrowhead:d,points:U,x:f,y:g,elbowed:e.elbowed,...Og(U)};return De(e)?tu(e,{...b,elbowed:!0,startBinding:g1(e,e.startBinding),endBinding:g1(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):tu(e,b)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return tu(e,{});case"magicframe":case"frame":return tu(e,{name:e.name??null})}return null},qUe=(e,t)=>{if(e.boundElements){const n=e.boundElements.slice(),r=new Set;e.boundElements=n.reduce((i,o)=>{const s=t.get(o.id);if(s&&!r.has(o.id)){if(r.add(o.id),s.isDeleted)return i;i.push(o),Ae(s)&&!s.containerId&&(s.containerId=e.id)}return i},[])}},QUe=(e,t)=>{const n=e.containerId?t.get(e.containerId):null;if(!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(r=>r.id===e.id)){const r=(n.boundElements||(n.boundElements=[])).slice();r.push({type:"text",id:e.id}),n.boundElements=r}},JUe=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},Jf=(e,t,n)=>{const r=new Set,i=t?He(t):null,o=wc((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!nh(l)){let c=ZUe(l);if(c){const u=i==null?void 0:i.get(l.id);u&&u.version>c.version&&(c=O3(c,u.version)),r.has(c.id)&&(c={...c,id:Ms()}),r.add(c.id),a.push(c)}}return a},[]));if(!(n!=null&&n.repairBindings))return o;const s=He(o);for(const a of o)a.frameId&&JUe(a,s),Ae(a)&&a.containerId?QUe(a,s):a.boundElements&&qUe(a,s),n.refreshDimensions&&Ae(a)&&Object.assign(a,qV(a,Zr(a,s),s)),et(a)&&(a.startBinding&&(!s.has(a.startBinding.elementId)||!st(a))&&(a.startBinding=null),a.endBinding&&(!s.has(a.endBinding.elementId)||!st(a))&&(a.endBinding=null));return o},e6e=(e,t,n)=>{const r=t[e];return r!==void 0?r:n[e]},bM={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??e6e("defaultSidebarDockedPreference",e,t)]},_W=(e,t)=>{var i;e=e||{};const n=ks(),r={};for(const o of Object.keys(bM))if(o in e){const[s,a]=bM[o](e,n);r[s]=a}for(const[o,s]of Object.entries(n)){const a=e[o],l=t?t[o]:void 0;r[o]=a!==void 0?a:l!==void 0?l:s}return{...r,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...lr(n,r.activeTool.type&&KUe[r.activeTool.type]?r.activeTool:{type:"selection"}),lastActiveTool:null,locked:r.activeTool.locked??!1},zoom:{value:ec(pm(e.zoom)?e.zoom:((i=e.zoom)==null?void 0:i.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:ws.name}:r.openSidebar,gridSize:$be(pm(e.gridSize)?e.gridSize:gy),gridStep:$G(pm(e.gridStep)?e.gridStep:D$),editingFrame:null}},eh=(e,t,n,r)=>({elements:Jf(e==null?void 0:e.elements,n,r),appState:_W(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),yM=e=>{const t=Jf(Un(e.elements),null);return t.length?{...e,elements:t}:null},I3=(e=[],t)=>{const n=[];for(const r of e)if(Array.isArray(r)){const i=yM({status:t,elements:r,id:Ms(),created:Date.now()});i&&n.push(i)}else{const i=r,o=yM({...i,id:i.id||Ms(),status:i.status||t,created:i.created||Date.now()});o&&n.push(o)}return n},wW=async e=>{let t;if(e.type===Ne.png)try{return await(await Le(()=>Promise.resolve().then(()=>KW),void 0)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new hf("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new hf("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{const r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),e.type===Ne.svg)try{return v6e({svg:t})}catch(n){throw n.message==="INVALID"?new hf("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new hf("Error: cannot restore image")}return t},IW=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},t6e=e=>e==="png"||e==="svg",BT=e=>{const t=IW(e);return t==="png"||t==="svg"},TW=e=>!!e&&Object.values(Tg).includes(e),Pf=e=>{const{type:t}=e||{};return TW(t)},xW=async(e,t,n,r)=>{const i=await wW(e);let o;try{try{o=JSON.parse(i)}catch(s){throw Pf(e)?new hf("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):s}if(f6e(o))return{type:Ne.excalidraw,data:eh({elements:DG(o.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:r||e.handle||null,...V$(o.appState||{}),...t?x2(o.elements||[],t):{}},files:o.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(AW(o))return{type:Ne.excalidrawlib,data:o};throw new Error("Error: invalid file")}catch(s){throw s instanceof hf?s:new Error("Error: invalid file")}},$T=async(e,t,n,r)=>{const i=await xW(e,t,n,r);if(i.type!==Ne.excalidraw)throw new Error("Error: invalid file");return i.data},SW=(e,t="unpublished")=>{const n=JSON.parse(e);if(!AW(n))throw new Error("Invalid library");const r=n.libraryItems||n.library;return I3(r,t)},n6e=async(e,t="unpublished")=>SW(await wW(e),t),E2=async e=>new Promise(async(t,n)=>{try{rU(e)&&(e=await e),e.toBlob(r=>{if(!r)return n(new Zce("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(r)})}catch(r){n(r)}}),r6e=async e=>{try{const t=await window.crypto.subtle.digest("SHA-1",await Iu(e));return tV(new Uint8Array(t))}catch(t){return console.error(t),a3(40)}},Ew=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),i6e=(e,t)=>`data:${t};base64,${pW(Wy(e),!0)}`,o6e=(e,t="")=>{const n=e.indexOf(","),r=atob(e.slice(n+1)),i=e.slice(0,n).split(":")[1].split(";")[0],o=new ArrayBuffer(r.length),s=new Uint8Array(o);for(let a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return new File([o],t,{type:i})},s6e=e=>mW(e.slice(e.indexOf(",")+1)),_w=async(e,t)=>{if(e.type===Ne.svg)return e;const[n,r]=await Promise.all([Le(()=>import("./pica-Cm97YrSP.js").then(o=>o.p),__vite__mapDeps([2,3])).then(o=>o.default),Le(()=>import("./image-blob-reduce.esm-xKov1Fz_.js"),__vite__mapDeps([])).then(o=>o.default)]),i=r({pica:n({features:["js","wasm"]})});if(t.outputType){const{outputType:o}=t;i._create_blob=function(s){return this.pica.toBlob(s.out_canvas,o,.8).then(a=>(s.out_blob=a,s))}}if(!Pf(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await i.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},vM=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:Ne.svg}),a6e=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});const r=await n.blob();if(r.type&&Pf(r)){const i=t||r.name||"";return new File([r],i,{type:r.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},l6e=async e=>{const t=e.dataTransfer.files.item(0),n=await c6e(e);return{file:t?await zT(t):null,fileHandle:n}},c6e=async e=>{if(vh)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},EM=e=>{let t=null;const n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,r={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===r.png?t=Ne.png:n.startsWith(r.jpg)?t=Ne.jpg:n.startsWith(r.gif)&&(t=Ne.gif),t},Xp=(e,t,n)=>new File([e],n||"",{type:t}),zT=async e=>{var t,n;if(e.type){if(Pf(e)){const r=await Iu(e),i=EM(r);i&&i!==e.type&&(e=Xp(r,i,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=Xp(await Iu(e),Ne.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=Xp(await Iu(e),Ne.excalidraw,e.name);else{const r=await Iu(e),i=EM(r);i&&(e=Xp(r,i,e.name))}return e},Iu=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{var o;if(!((o=i.target)!=null&&o.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),u6e=(e,t)=>{const n={};for(const r of e)!r.isDeleted&&"fileId"in r&&r.fileId&&t[r.fileId]&&(n[r.fileId]=t[r.fileId]);return n},h0=(e,t,n,r)=>{const i={type:_s.excalidraw,version:n3.excalidraw,source:VI,elements:r==="local"?DG(e):Obe(e),appState:r==="local"?V$(t):Gae(t),files:r==="local"?u6e(e,n):void 0};return JSON.stringify(i,null,2)},CW=async(e,t,n,r=t.name||B$)=>{const i=h0(e,t,n,"local"),o=new Blob([i],{type:Ne.excalidraw});return{fileHandle:await zy(o,{name:r,extension:"excalidraw",description:"Excalidraw file",fileHandle:BT(t.fileHandle)?null:t.fileHandle})}},d6e=async(e,t)=>{const n=await kT({description:"Excalidraw files"});return $T(await zT(n),e,t,n.handle)},f6e=e=>(e==null?void 0:e.type)===_s.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),AW=e=>typeof e=="object"&&e&&e.type===_s.excalidrawLibrary&&(e.version===1||e.version===2),kW=e=>{const t={type:_s.excalidrawLibrary,version:n3.excalidrawLibrary,source:VI,libraryItems:e};return JSON.stringify(t,null,2)},h6e=async e=>{const t=kW(e);await zy(new Blob([t],{type:Ne.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},RW=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),PW=async({fileIds:e,files:t,imageCache:n})=>{const r=new Map,i=new Map;return await Promise.all(e.reduce((o,s)=>{const a=t[s];return a&&!r.has(s)?(r.set(s,!0),o.concat((async()=>{try{if(a.mimeType===Ne.binary)throw new Error("Only images can be added to ImageCache");const l=RW(a.dataURL),c={image:l,mimeType:a.mimeType};n.set(s,c);const u=await l;n.set(s,{...c,image:u})}catch{i.set(s,!0)}})())):o},[])),{imageCache:n,updatedFiles:r,erroredFiles:i}},MW=e=>e.filter(t=>dr(t)),g6e=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",_M=e=>{const t=new DOMParser().parseFromString(e,Ne.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!g6e(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",Mt);let i=n.getAttribute("width"),o=n.getAttribute("height");(i!=null&&i.includes("%")||i==="auto")&&(i=null),(o!=null&&o.includes("%")||o==="auto")&&(o=null);const s=n.getAttribute("viewBox");if(!i||!o){if(i=i||"50",o=o||"50",s){const a=s.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);a&&([,i,o]=a)}n.setAttribute("width",i),n.setAttribute("height",o)}return s||n.setAttribute("viewBox",`0 0 ${i} ${o}`),n.outerHTML}},LW=document.createElement("img");LW.src=`data:${Ne.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;const DW=document.createElement("img");DW.src=`data:${Ne.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;const VT=([e,t,n,r],i,o)=>{const s=b5e,a=s/o.zoom.value,l=s/o.zoom.value,c=s/o.zoom.value,u=(e+n)/2,d=(t+r)/2,f=(s-8)/(2*o.zoom.value),g=4/o.zoom.value,U=n+g-f,b=t-g-c+f,[v,_]=le(B(U+a/2,b+l/2),B(u,d),i);return[v-a/2,_-l/2,a,l]},NW=(e,t,n,[r,i])=>{const o=4/n.zoom.value,[s,a,l,c]=Ke(e,t),[u,d,f,g]=VT([s,a,l,c],e.angle,n);return r>u-o&&r<u+o+f&&i>d-o&&i<d+g+o},OE=(e,t,n,[r,i],o)=>!e.link||n.selectedElementIds[e.id]?!1:!o&&n.viewModeEnabled&&_T(r,i,e,t)?!0:NW(e,t,n,B(r,i)),T3=(e,t,n,r,i=!0)=>{e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill(),i&&e.stroke()},x3=(e,t)=>[e.width/t,e.height/t],S3=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:r,theme:i,isExporting:o,viewBackgroundColor:s})=>{const a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),o&&i===Ge.DARK&&(a.filter=GI),typeof s=="string"?((s==="transparent"||s.length===5||s.length===9||/(hsla|rgba)\(/.test(s))&&a.clearRect(0,0,n,r),a.save(),a.fillStyle=s,a.fillRect(0,0,n,r),a.restore()):a.clearRect(0,0,n,r),a},OW=(e,t)=>{const n=window.location.href;try{const r=new URL(n);return r.searchParams.set(my,e),zo(r.toString())}catch(r){console.error(r)}return zo(n)},FW=(e,t)=>{if(e.length>0&&jy(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){const n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},jy=e=>!!(e.length===1||e.length>1&&_V(e)),ug=e=>{try{const t=new URL(e);return t.searchParams.has(my)&&t.host===window.location.host}catch{return!1}},p6e=e=>{try{const{searchParams:t}=new URL(e);if(t.has(my))return t.get(my)}catch{}return null},I5={Bold:"#dddddd",Regular:"#e5e5e5"},m6e=(e,t,n,r,i,o,s,a)=>{const l=r%t-t,c=i%t-t,u=t*o.value,d=1/o.value;e.save(),o.value===1&&e.translate(l%1?0:.5,c%1?0:.5);for(let f=l;f<l+s+t*2;f+=t){const g=n>1&&Math.round(f-r)%(n*t)===0;if(!g&&u<10)continue;const U=Math.min(1/o.value,g?4:1);e.lineWidth=U;const b=[U*3,d+(U+d)];e.beginPath(),e.setLineDash(g?[]:b),e.strokeStyle=g?I5.Bold:I5.Regular,e.moveTo(f,c-t),e.lineTo(f,Math.ceil(c+a+t*2)),e.stroke()}for(let f=c;f<c+a+t*2;f+=t){const g=n>1&&Math.round(f-i)%(n*t)===0;if(!g&&u<10)continue;const U=Math.min(1/o.value,g?4:1);e.lineWidth=U;const b=[U*3,d+(U+d)];e.beginPath(),e.setLineDash(g?[]:b),e.strokeStyle=g?I5.Bold:I5.Regular,e.moveTo(l-t,f),e.lineTo(Math.ceil(l+s+t*2),f),e.stroke()}e.restore()},wM=(e,t,n,r)=>{t.translate(e.x+r.scrollX,e.y+r.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,Fn.radius/r.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+r.scrollX),-(e.y+r.scrollY))},IM={regularLink:null,elementLink:null},TM=(e,t,n,r)=>{if(e.link&&!n.selectedElementIds[e.id]){const[i,o,s,a]=Ke(e,r),[l,c,u,d]=VT([i,o,s,a],e.angle,n),f=l+u/2,g=c+d/2;t.save(),t.translate(n.scrollX+f,n.scrollY+g),t.rotate(e.angle);const U=ug(e.link)?"elementLink":"regularLink";let b=IM[U];if(!b||b.zoom!==n.zoom.value){b=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),b.width=u*window.devicePixelRatio*n.zoom.value,b.height=d*window.devicePixelRatio*n.zoom.value,IM[U]=b;const v=b.getContext("2d");v.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),v.fillStyle="#fff",v.fillRect(0,0,u,d),U==="elementLink"?v.drawImage(DW,0,0,u,d):v.drawImage(LW,0,0,u,d),v.restore()}t.drawImage(b,l-f,c-g,u,d),t.restore()}},BW=({canvas:e,rc:t,elementsMap:n,allElementsMap:r,visibleElements:i,scale:o,appState:s,renderConfig:a})=>{var b;if(e===null)return;const{renderGrid:l=!0,isExporting:c}=a,[u,d]=x3(e,o),f=S3({canvas:e,scale:o,normalizedWidth:u,normalizedHeight:d,theme:s.theme,isExporting:c,viewBackgroundColor:s.viewBackgroundColor});f.scale(s.zoom.value,s.zoom.value),l&&m6e(f,s.gridSize,s.gridStep,s.scrollX,s.scrollY,s.zoom,u/s.zoom.value,d/s.zoom.value);const g=new Set;i.forEach(v=>{v.groupIds.length>0&&s.frameToHighlight&&s.selectedElementIds[v.id]&&(ed(v,s.frameToHighlight,n)||v.groupIds.find(_=>g.has(_)))&&v.groupIds.forEach(_=>g.add(_))});const U=new Map;i.filter(v=>!hs(v)).forEach(v=>{var _;try{const E=v.frameId||((_=s.frameToHighlight)==null?void 0:_.id);if(Ae(v)&&v.containerId&&n.has(v.containerId))return;if(f.save(),E&&s.frameRendering.enabled&&s.frameRendering.clip){const T=ww(v,n,s);T&&MM(v,T,s,n,U)&&wM(T,f,a,s),Jd(v,n,r,t,f,a,s)}else Jd(v,n,r,t,f,a,s);const w=rt(v,n);w&&Jd(w,n,r,t,f,a,s),f.restore(),c||TM(v,f,s,n)}catch(E){console.error(E)}}),i.filter(v=>hs(v)).forEach(v=>{var _;try{const E=()=>{if(Jd(v,n,r,t,f,a,s),hs(v)&&(c||co(v)&&a.embedsValidationStatus.get(v.id)!==!0)&&v.width&&v.height){const T=IH(v);Jd(T,n,r,t,f,a,s)}c||TM(v,f,s,n)};if((v.frameId||((_=s.frameToHighlight)==null?void 0:_.id))&&s.frameRendering.enabled&&s.frameRendering.clip){f.save();const T=ww(v,n,s);T&&MM(v,T,s,n,U)&&wM(T,f,a,s),E(),f.restore()}else E()}catch(E){console.error(E)}}),(b=a.pendingFlowchartNodes)==null||b.forEach(v=>{try{Jd(v,n,r,t,f,a,s)}catch(_){console.error(_)}})},$W=a0(e=>{BW(e)},{trailing:!0}),zW=(e,t)=>{if(t){$W(e);return}BW(e)},U6e=(e,t)=>{if(e.width<=t)return e;const r=document.createElement("canvas").getContext("2d");r.font=an({fontFamily:e.fontFamily,fontSize:e.fontSize});let i=e.text;if(r.measureText(i).width>t)for(let s=i.length;s>0;s--){const a=`${i.slice(0,s)}...`;if(r.measureText(a).width<=t){i=a;break}}return Xe(e,{text:i,width:t})},b6e=(e,t)=>{const n=[];for(const r of e){if(We(r)){let i=Wo({x:r.x,y:r.y-Fn.nameOffsetY,fontFamily:On.Helvetica,fontSize:Fn.nameFontSize,lineHeight:Fn.nameLineHeight,strokeColor:t.exportWithDarkMode?Fn.nameColorDarkTheme:Fn.nameColorLightTheme,text:sG(r)});i.y-=i.height,i=U6e(i,r.width),n.push(i)}n.push(r)}return n},VW=(e,t)=>(t=t||ks().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),HW=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:r})=>{let i;return t?i=QT(e,t):n.enabled&&n.name?i=b6e(e,{exportWithDarkMode:r}):i=e,i},WW=async(e,t,n,{exportBackground:r,exportPadding:i=s0,viewBackgroundColor:o,exportingFrame:s},a=(c,u)=>{const d=document.createElement("canvas");return d.width=c*t.exportScale,d.height=u*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await ca.loadElementsFonts(e)})=>{await l();const c=VW(s??null,t.frameRendering??null);s&&(c.clip=!1);const u=HW({elements:e,exportingFrame:s,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});s&&(i=0);const[d,f,g,U]=WT(s?[s]:qT(u),i),{canvas:b,scale:v=1}=a(g,U),_=ks(),{imageCache:E}=await PW({imageCache:new Map,fileIds:MW(u).map(w=>w.fileId),files:n});return zW({canvas:b,rc:Ud.canvas(b),elementsMap:Ho(He(u)),allElementsMap:Ho(He(wc(e))),visibleElements:u,scale:v,appState:{...t,frameRendering:c,viewBackgroundColor:r?o:null,scrollX:-d+i,scrollY:-f+i,zoom:_.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?Ge.DARK:Ge.LIGHT},renderConfig:{canvasBackgroundColor:o,imageCache:E,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),b},jp=e=>document.createComment(` ${e} `),HT=async(e,t,n,r)=>{const i=VW((r==null?void 0:r.exportingFrame)??null,t.frameRendering??null);let{exportPadding:o=s0,exportWithDarkMode:s=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:c}=t;const{exportingFrame:u=null}=r||{},d=HW({elements:e,exportingFrame:u,exportWithDarkMode:s,frameRendering:i});u&&(o=0);const[f,g,U,b]=WT(u?[u]:qT(d),o),v=-f+o,_=-g+o,E=document.createElementNS(Mt,"svg");E.setAttribute("version","1.1"),E.setAttribute("xmlns",Mt),E.setAttribute("viewBox",`0 0 ${U} ${b}`),E.setAttribute("width",`${U*l}`),E.setAttribute("height",`${b*l}`),s&&E.setAttribute("filter",GI);const w=E.ownerDocument.createElementNS(Mt,"defs"),T=E.ownerDocument.createElementNS(Mt,"metadata");if(E.appendChild(jp("svg-source:excalidraw")),E.appendChild(T),E.appendChild(w),c)try{y6e({metadataElement:T,payload:h0(e,t,n||{},"local")})}catch(O){console.error(O)}const A=ZT(e);if(A.length){const O=He(e);for(const F of A){const N=E.ownerDocument.createElementNS(Mt,"clipPath");N.setAttribute("id",F.id);const[J,K,ne,ee]=Ke(F,O),q=(ne-J)/2-(F.x-J),Z=(ee-K)/2-(F.y-K),te=E.ownerDocument.createElementNS(Mt,"rect");te.setAttribute("transform",`translate(${F.x+v} ${F.y+_}) rotate(${F.angle} ${q} ${Z})`),te.setAttribute("width",`${F.width}`),te.setAttribute("height",`${F.height}`),u||(te.setAttribute("rx",`${Fn.radius}`),te.setAttribute("ry",`${Fn.radius}`)),N.appendChild(te),w.appendChild(N)}}const M=r!=null&&r.skipInliningFonts?[]:await ca.generateFontFaceDeclarations(e),S=`
      `,x=E.ownerDocument.createElementNS(Mt,"style");if(x.classList.add("style-fonts"),x.appendChild(document.createTextNode(`${S}${M.join(S)}`)),w.appendChild(x),t.exportBackground&&a){const O=E.ownerDocument.createElementNS(Mt,"rect");O.setAttribute("x","0"),O.setAttribute("y","0"),O.setAttribute("width",`${U}`),O.setAttribute("height",`${b}`),O.setAttribute("fill",a),E.appendChild(O)}const C=Ud.svg(E),R=(r==null?void 0:r.renderEmbeddables)??!1;return Yme(d,Ho(He(d)),C,E,n||{},{offsetX:v,offsetY:_,isExporting:!0,exportWithDarkMode:s,renderEmbeddables:R,frameRendering:i,canvasBackgroundColor:a,embedsValidationStatus:R?new Map(d.filter(O=>We(O)).map(O=>[O.id,!0])):new Map,reuseImages:(r==null?void 0:r.reuseImages)??!0}),E},y6e=({payload:e,metadataElement:t})=>{const n=pW(JSON.stringify(UW({text:e})),!0);t.appendChild(jp(`payload-type:${Ne.excalidraw}`)),t.appendChild(jp("payload-version:2")),t.appendChild(jp("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(jp("payload-end"))},v6e=({svg:e})=>{if(e.includes(`payload-type:${Ne.excalidraw}`)){const t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");const n=e.match(/<!-- payload-version:(\d+) -->/),i=((n==null?void 0:n[1])||"1")!=="1";try{const o=mW(t[1],i),s=JSON.parse(o);if(!("encoded"in s)){if("type"in s&&s.type===_s.excalidraw)return o;throw new Error("FAILED")}return bW(s)}catch(o){throw console.error(o),new Error("FAILED")}}throw new Error("INVALID")},WT=(e,t)=>{const[n,r,i,o]=jt(e),s=xi(n,i)+t*2,a=xi(r,o)+t*2;return[n,r,s,a]},E6e=(e,t,n)=>{const[,,r,i]=WT(e,t).map(o=>Math.trunc(o*n));return[r,i]};var GT={};(function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var c=0,u=new Array(256),d=0;d!=256;++d)c=d,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,u[d]=c;return typeof Int32Array<"u"?new Int32Array(u):u}var r=n(),i=typeof Buffer<"u";function o(c){if(c.length>32768&&i)return a(new Buffer(c));for(var u=-1,d=c.length-1,f=0;f<d;)u=r[(u^c.charCodeAt(f++))&255]^u>>>8,u=r[(u^c.charCodeAt(f++))&255]^u>>>8;return f===d&&(u=u>>>8^r[(u^c.charCodeAt(f))&255]),u^-1}function s(c){if(c.length>1e4)return a(c);for(var u=-1,d=0,f=c.length-3;d<f;)u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255];for(;d<f+3;)u=u>>>8^r[(u^c[d++])&255];return u^-1}function a(c){for(var u=-1,d=0,f=c.length-7;d<f;)u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255],u=u>>>8^r[(u^c[d++])&255];for(;d<f+7;)u=u>>>8^r[(u^c[d++])&255];return u^-1}function l(c){for(var u=-1,d=0,f=c.length,g,U;d<f;)g=c.charCodeAt(d++),g<128?u=u>>>8^r[(u^g)&255]:g<2048?(u=u>>>8^r[(u^(192|g>>6&31))&255],u=u>>>8^r[(u^(128|g&63))&255]):g>=55296&&g<57344?(g=(g&1023)+64,U=c.charCodeAt(d++)&1023,u=u>>>8^r[(u^(240|g>>8&7))&255],u=u>>>8^r[(u^(128|g>>2&63))&255],u=u>>>8^r[(u^(128|U>>6&15|g&3))&255],u=u>>>8^r[(u^(128|U&63))&255]):(u=u>>>8^r[(u^(224|g>>12&15))&255],u=u>>>8^r[(u^(128|g>>6&63))&255],u=u>>>8^r[(u^(128|g&63))&255]);return u^-1}t.table=r,t.bstr=o,t.buf=s,t.str=l})})(GT);var _6e=GT,w6e=x6e,$a=new Uint8Array(4),I6e=new Int32Array($a.buffer),T6e=new Uint32Array($a.buffer);function x6e(e){if(e[0]!==137)throw new Error("Invalid .png file header");if(e[1]!==80)throw new Error("Invalid .png file header");if(e[2]!==78)throw new Error("Invalid .png file header");if(e[3]!==71)throw new Error("Invalid .png file header");if(e[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[6]!==26)throw new Error("Invalid .png file header");if(e[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],r=8;r<e.length;){$a[3]=e[r++],$a[2]=e[r++],$a[1]=e[r++],$a[0]=e[r++];var i=T6e[0]+4,o=new Uint8Array(i);o[0]=e[r++],o[1]=e[r++],o[2]=e[r++],o[3]=e[r++];var s=String.fromCharCode(o[0])+String.fromCharCode(o[1])+String.fromCharCode(o[2])+String.fromCharCode(o[3]);if(!n.length&&s!=="IHDR")throw new Error("IHDR header missing");if(s==="IEND"){t=!0,n.push({name:s,data:new Uint8Array(0)});break}for(var a=4;a<i;a++)o[a]=e[r++];$a[3]=e[r++],$a[2]=e[r++],$a[1]=e[r++],$a[0]=e[r++];var l=I6e[0],c=_6e.buf(o);if(c!==l)throw new Error("CRC values for "+s+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(o.buffer.slice(4));n.push({name:s,data:u})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n}const GW=fd(w6e);var C3={},S6e=C6e;function C6e(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=e.length+t.length+1,r=new Uint8Array(n),i=0,o,s=0;s<e.length;s++){if(!(o=e.charCodeAt(s)))throw new Error("0x00 character is not permitted in tEXt keywords");r[i++]=o}r[i++]=0;for(var a=0;a<t.length;a++){if(!(o=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt content");r[i++]=o}return{name:"tEXt",data:r}}var A6e=k6e;function k6e(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",r="",i=0;i<e.length;i++){var o=e[i];if(t)o?r+=String.fromCharCode(o):t=!1;else if(o)n+=String.fromCharCode(o);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:r,text:n}}C3.encode=S6e;C3.decode=A6e;var R6e=function(e,t,n){var r=[],i=e.length;if(i===0)return r;var o=t<0?Math.max(0,t+i):t||0;for(n!==void 0&&(i=n<0?n+i:n);i-- >o;)r[i-o]=e[i];return r},P6e=R6e,M6e=GT,L6e=O6e,za=new Uint8Array(4),D6e=new Int32Array(za.buffer),N6e=new Uint32Array(za.buffer);function O6e(e){var t=8,n=t,r;for(r=0;r<e.length;r++)t+=e[r].data.length,t+=12;var i=new Uint8Array(t);for(i[0]=137,i[1]=80,i[2]=78,i[3]=71,i[4]=13,i[5]=10,i[6]=26,i[7]=10,r=0;r<e.length;r++){var o=e[r],s=o.name,a=o.data,l=a.length,c=[s.charCodeAt(0),s.charCodeAt(1),s.charCodeAt(2),s.charCodeAt(3)];N6e[0]=l,i[n++]=za[3],i[n++]=za[2],i[n++]=za[1],i[n++]=za[0],i[n++]=c[0],i[n++]=c[1],i[n++]=c[2],i[n++]=c[3];for(var u=0;u<l;)i[n++]=a[u++];var d=c.concat(P6e(a)),f=M6e.buf(d);D6e[0]=f,i[n++]=za[3],i[n++]=za[2],i[n++]=za[1],i[n++]=za[0]}return i}const F6e=fd(L6e),XW=async e=>{const n=GW(new Uint8Array(await Iu(e))).find(r=>r.name==="tEXt");return n?C3.decode(n.data):null},jW=async({blob:e,metadata:t})=>{const n=GW(new Uint8Array(await Iu(e))),r=C3.encode(Ne.excalidraw,JSON.stringify(UW({text:t,compress:!0})));return n.splice(-1,0,r),new Blob([F6e(n)],{type:Ne.png})},B6e=async e=>{const t=await XW(e);if((t==null?void 0:t.keyword)===Ne.excalidraw)try{const n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===_s.excalidraw)return t.text;throw new Error("FAILED")}return bW(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},KW=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:B6e,encodePngMetadata:jW,getTEXtChunk:XW},Symbol.toStringTag,{value:"Module"})),ta=32,gn=12,$u=256,YW=50,af="NOT_SPREADSHEET",_2="VALID_SPREADSHEET",Kp=e=>{const t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},FE=(e,t)=>e.slice(1).every(n=>Kp(n[t])!==null),xM=e=>{const t=e[0].length;if(t>2)return{type:af,reason:"More than 2 columns"};if(t===1){if(!FE(e,0))return{type:af,reason:"Value is not numeric"};const l=Kp(e[0][0])===null,c=(l?e.slice(1):e).map(u=>Kp(u[0]));return c.length<2?{type:af,reason:"Less than two rows"}:{type:_2,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}const n=FE(e,0),r=FE(e,1);if(!n&&!r)return{type:af,reason:"Value is not numeric"};const[i,o]=r?[0,1]:[1,0],s=Kp(e[0][o])===null,a=s?e.slice(1):e;return a.length<2?{type:af,reason:"Less than 2 rows"}:{type:_2,spreadsheet:{title:s?e[0][o]:null,labels:a.map(l=>l[i]),values:a.map(l=>Kp(l[o]))}}},$6e=e=>{const t=[];for(let n=0;n<e[0].length;n++){const r=[];for(let i=0;i<e.length;i++)r.push(e[i][n]);t.push(r)}return t},z6e=e=>{let t=e.trim().split(`
`).map(o=>o.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(o=>o.trim().split(","))),t.length===0)return{type:af,reason:"No values"};const n=t[0].length;if(!t.every(o=>o.length===n))return{type:af,reason:"All rows don't have same number of columns"};const i=xM(t);if(i.type!==_2){const o=xM($6e(t));if(o.type===_2)return o}return i},Ky=cae(sae),da={fillStyle:"hachure",fontFamily:md,fontSize:Pc,opacity:100,roughness:1,strokeColor:ft.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:Do.MIDDLE,locked:!1},ZW=e=>{const t=(ta+gn)*e.values.length+gn,n=$u+gn*2;return{chartWidth:t,chartHeight:n}},V6e=(e,t,n,r,i)=>{var o;return((o=e.labels)==null?void 0:o.map((s,a)=>Wo({groupIds:[r],backgroundColor:i,...da,text:s.length>8?`${s.slice(0,5)}...`:s,x:t+a*(ta+gn)+gn*2,y:n+gn/2,width:ta,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},H6e=(e,t,n,r,i)=>{const o=Wo({groupIds:[r],backgroundColor:i,...da,x:t-gn,y:n-gn,text:"0",textAlign:"right"}),s=Wo({groupIds:[r],backgroundColor:i,...da,x:t-gn,y:n-$u-o.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[o,s]},W6e=(e,t,n,r,i)=>{const{chartWidth:o,chartHeight:s}=ZW(e),a=Rf({backgroundColor:i,groupIds:[r],...da,type:"line",x:t,y:n,width:o,points:[B(0,0),B(o,0)]}),l=Rf({backgroundColor:i,groupIds:[r],...da,type:"line",x:t,y:n,height:s,points:[B(0,0),B(0,-s)]}),c=Rf({backgroundColor:i,groupIds:[r],...da,type:"line",x:t,y:n-$u-gn,strokeStyle:"dotted",width:o,opacity:YW,points:[B(0,0),B(o,0)]});return[a,l,c]},qW=(e,t,n,r,i,o)=>{const{chartWidth:s,chartHeight:a}=ZW(e),l=e.title?Wo({backgroundColor:i,groupIds:[r],...da,text:e.title,x:t+s/2,y:n-$u-gn*2-Pc,roundness:null,textAlign:"center"}):null;return[...l?[l]:[],...V6e(e,t,n,r,i),...H6e(e,t,n,r,i),...W6e(e,t,n,r,i)]},G6e=(e,t,n)=>{const r=Math.max(...e.values),i=Ms(),o=Ky[Math.floor(Math.random()*Ky.length)];return[...e.values.map((a,l)=>{const c=a/r*$u;return Uc({backgroundColor:o,groupIds:[i],...da,type:"rectangle",x:t+l*(ta+gn)+gn,y:n-c-gn,width:ta,height:c})}),...qW(e,t,n,i,o)]},X6e=(e,t,n)=>{const r=Math.max(...e.values),i=Ms(),o=Ky[Math.floor(Math.random()*Ky.length)];let s=0;const a=[];for(const b of e.values){const v=s*(ta+gn),_=-(b/r)*$u;a.push([v,_]),s++}const l=Math.max(...a.map(b=>b[0])),c=Math.max(...a.map(b=>b[1])),u=Math.min(...a.map(b=>b[0])),d=Math.min(...a.map(b=>b[1])),f=Rf({backgroundColor:o,groupIds:[i],...da,type:"line",x:t+gn+ta/2,y:n-gn,height:c-d,width:l-u,strokeWidth:2,points:a}),g=e.values.map((b,v)=>{const _=v*(ta+gn)+gn/2,E=-(b/r)*$u+gn/2;return Uc({backgroundColor:o,groupIds:[i],...da,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+_+ta/2,y:n+E-gn*2,width:gn,height:gn})}),U=e.values.map((b,v)=>{const _=v*(ta+gn)+gn/2,E=b/r*$u+gn/2+gn;return Rf({backgroundColor:o,groupIds:[i],...da,type:"line",x:t+_+ta/2+gn/2,y:n-E,height:E,strokeStyle:"dotted",opacity:YW,points:[B(0,0),B(0,E)]})});return[...qW(e,t,n,i,o),f,...U,...g]},j6e=(e,t,n,r)=>e==="line"?X6e(t,n,r):G6e(t,n,r),XT="clipboard"in navigator&&"writeText"in navigator.clipboard,jT="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,K6e=e=>!!([_s.excalidraw,_s.excalidrawClipboard,_s.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),Y6e=({types:e,files:t})=>{var r,i,o,s;!e&&!t&&console.warn("createPasteEvent: no types or files provided");const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(const[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((r=n.clipboardData)==null||r.setData(a,l),((i=n.clipboardData)==null?void 0:i.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(c){throw new Error(c.message)}}if(t){let a=-1;for(const l of t){a++;try{if((o=n.clipboardData)==null||o.items.add(l),((s=n.clipboardData)==null?void 0:s.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(c){throw new Error(c.message)}}}return n},Z6e=({elements:e,files:t})=>{const n=He(e),r=new Set(e.filter(a=>We(a)));let i=!1;const o=e.reduce((a,l)=>(dr(l)&&(i=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});i&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");const s={type:_s.excalidrawClipboard,elements:e.map(a=>{if(wo(a,n)&&!r.has(wo(a,n))){const l=bh(a);return fe(l,{frameId:null}),l}return a}),files:t?o:void 0};return JSON.stringify(s)},q6e=async(e,t,n)=>{await bd(Z6e({elements:e,files:t}),n)},Q6e=e=>{const t=z6e(e);return t.type===_2?{spreadsheet:t.spreadsheet}:null};function QW(e){var n;let t=[];for(const r of e.childNodes)if(r.nodeType===3){const i=(n=r.textContent)==null?void 0:n.trim();i&&t.push({type:"text",value:i})}else if(r instanceof HTMLImageElement){const i=r.getAttribute("src");i&&i.startsWith("http")&&t.push({type:"imageUrl",value:i})}else t=t.concat(QW(r));return t}const J6e=e=>{var n;const t=(n=e.clipboardData)==null?void 0:n.getData(Ne.html);if(!t)return null;try{const r=new DOMParser().parseFromString(t,Ne.html),i=QW(r.body);if(i.length)return{type:"mixedContent",value:i}}catch(r){console.error(`error in parseHTMLFromPaste: ${r.message}`)}return null},e5e=async()=>{var n,r,i,o;const e={};let t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(s){try{if((r=navigator.clipboard)!=null&&r.readText){console.warn(`navigator.clipboard.readText() failed (${s.message}). Failling back to navigator.clipboard.read()`);const a=await((i=navigator.clipboard)==null?void 0:i.readText());if(a)return{[Ne.text]:a}}}catch(a){if((o=navigator.clipboard)!=null&&o.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw s}for(const s of t)for(const a of s.types)if(rV(Tae,a))try{if(a===Ne.text||a===Ne.html)e[a]=await(await s.getType(a)).text();else if(TW(a)){const l=await s.getType(a),c=Xp(l,a,void 0);e[a]=c}else throw new Us(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof Us?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},t5e=async(e,t=!1)=>{var n,r;try{const i=!t&&e&&J6e(e);return i?i.value.every(s=>s.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(Ne.text))||i.value.map(s=>s.value).join(`
`).trim()}:i:{type:"text",value:(((r=e.clipboardData)==null?void 0:r.getData(Ne.text))||"").trim()}}catch{return{type:"text",value:""}}},JW=async(e,t=!1)=>{const n=await t5e(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{const r=!t&&Q6e(n.value);if(r)return r}catch(r){console.error(r)}try{const r=JSON.parse(n.value),i=r.type===_s.excalidrawClipboardWithAPI;if(K6e(r))return{elements:r.elements,files:r.files,text:t?JSON.stringify(r.elements,null,2):void 0,programmaticAPI:i}}catch{}return{text:n.value}},n5e=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[Ne.png]:e})])}catch(t){if(rU(e))await navigator.clipboard.write([new window.ClipboardItem({[Ne.png]:await e})]);else throw t}},bd=async(e,t)=>{var n,r;if(XT)try{await navigator.clipboard.writeText(e||"");return}catch(i){console.error(i)}try{if(t){if((n=t.clipboardData)==null||n.setData(Ne.text,e||""),((r=t.clipboardData)==null?void 0:r.getData(Ne.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(i){console.error(i)}if(!r5e(e))throw new Error("Error copying to clipboard.")},r5e=e=>{e||(e=" ");const t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const r=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${r}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let i=!1;try{n.select(),n.setSelectionRange(0,n.value.length),i=document.execCommand("copy")}catch(o){console.error(o)}return n.remove(),i},A3=({elements:e,appState:t,files:n,maxWidthOrHeight:r,getDimensions:i,exportPadding:o,exportingFrame:s})=>{const{elements:a,appState:l}=eh({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:u}=l;return WW(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:o,viewBackgroundColor:u,exportingFrame:s},(d,f)=>{const g=document.createElement("canvas");if(r){typeof i=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");const b=Math.max(d,f),v=r<b?r/b:(t==null?void 0:t.exportScale)??1;return g.width=d*v,g.height=f*v,{canvas:g,scale:v}}const U=(i==null?void 0:i(d,f))||{width:d,height:f};return g.width=U.width,g.height=U.height,{canvas:g,scale:U.scale??1}})},i5e=async e=>{var i;let{mimeType:t=Ne.png,quality:n}=e;t===Ne.png&&typeof n=="number"&&console.warn(`"quality" will be ignored for "${Ne.png}" mimeType`),t==="image/jpg"&&(t=Ne.jpg),t===Ne.jpg&&!((i=e.appState)!=null&&i.exportBackground)&&(console.warn(`Defaulting "exportBackground" to "true" for "${Ne.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});const r=await A3(e);return n=n||(/image\/jpe?g/.test(t)?.92:.8),new Promise((o,s)=>{r.toBlob(async a=>{var l;if(!a)return s(new Error("couldn't export to blob"));a&&t===Ne.png&&((l=e.appState)!=null&&l.exportEmbedScene)&&(a=await jW({blob:a,metadata:h0(e.elements,e.appState,e.files||{},"local")})),o(a)},t,n)})},eG=async({elements:e,appState:t=ks(),files:n={},exportPadding:r,renderEmbeddables:i,exportingFrame:o,skipInliningFonts:s,reuseImages:a})=>{const{elements:l,appState:c}=eh({elements:e,appState:t},null,null),u={...c,exportPadding:r};return HT(l,u,n,{exportingFrame:o,renderEmbeddables:i,skipInliningFonts:s,reuseImages:a})},o5e=e=>e.type==="diamond"?[B(e.width/2,0),B(e.width,e.height/2),B(e.width/2,e.height),B(0,e.height/2)]:[B(0,0),B(0+e.width,0),B(0+e.width,e.height),B(0,e.height)],s5e=e=>et(e)||Rs(e)?e.points:o5e(e),SM=e=>{const t=e.reduce((n,[r,i])=>(n.minY=Math.min(n.minY,i),n.minX=Math.min(n.minX,r),n.maxX=Math.max(n.maxX,r),n.maxY=Math.max(n.maxY,i),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},tG=e=>{const t=s5e(e),{cx:n,cy:r}=SM(t),i=B(n,r),o=t.map(u=>le(u,i,e.angle)),{minX:s,minY:a,maxX:l,maxY:c}=SM(o);return[s+e.x,a+e.y,l+e.x,c+e.y]},CM=(e,t,n=!1)=>{const r=tG(e),i=t[0]<=r[0]&&t[2]>=r[2]&&t[1]<=r[1]&&t[3]>=r[3];return n?i?!0:r[0]<=t[0]&&r[2]>=t[2]&&r[1]<=t[1]&&r[3]>=t[3]:i},a5e=(e,t)=>{const n=tG(e);return(p5(n[0],wi(t[0],t[2]))||p5(t[0],wi(n[0],n[2])))&&(p5(n[1],wi(t[1],t[3]))||p5(t[1],wi(n[1],n[3])))},l5e=({elements:e,bounds:t,type:n,errorMargin:r=0})=>{var s;aV(t)&&(t=vc(t,He(e)));const i=[t[0]-r,t[1]-r,t[2]+r,t[3]+r],o=new Set;for(const a of e){if(o.has(a.id))continue;if(n==="overlap"?a5e(a,i):n==="inside"?CM(a,i):CM(a,i,!0)){if(o.add(a.id),a.boundElements)for(const c of a.boundElements)o.add(c.id);Ae(a)&&a.containerId&&o.add(a.containerId),st(a)&&(a.startBinding&&o.add(a.startBinding.elementId),a.endBinding&&o.add((s=a.endBinding)==null?void 0:s.elementId))}}return e.filter(a=>o.has(a.id))};function AM(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function c5e(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}const u5e=1e-6;function kM(e,t){const n=sn(e[1],e[0]),r=sn(t,e[0]),i=Ql(n,r);return Math.abs(i)<u5e}function BE(e,t){const n=sn(e[1],e[0]),r=sn(t,e[0]);return Ql(n,r)<0}function RM(e,t){return kM(e,t[0])||kM(e,t[1])||(BE(e,t[0])?!BE(e,t[1]):BE(e,t[1]))}function d5e(e,t){return c5e(AM(e),AM(t))&&RM(e,t)&&RM(t,e)}const nG=(e,t,n)=>{const r=He(e);for(const i of t)if(i.frameId){const o=n.get(i.id),s=n.get(i.frameId);if(o){const a=r.get(o);a&&fe(a,{frameId:s??i.frameId},!1)}}};function KT(e,t,n){const r=zM(t,n),i=zM(e,n);return r.some(s=>i.some(a=>d5e(s,a)))}const rG=(e,t,n)=>R3(px(e,t,n,!1)).filter(r=>!We(r)&&!r.frameId||r.frameId===t.id),YT=(e,t,n)=>px([t],e,n).some(r=>r.id===t.id),gU=(e,t,n)=>{const[r,i,o,s]=Ke(t,n),[a,l,c,u]=jt(e);return r<=a&&i<=l&&o>=c&&s>=u},ed=(e,t,n)=>gU([e],t,n)||KT(e,t,n)||YT(e,t,n),PM=(e,t,n)=>{const[r,i,o,s]=Ke(t,n);return Zz(B(r,i),B(e.x,e.y),B(o,s))},f5e=e=>{const t=new Map;for(const n of e){const r=We(n)?n.id:n.frameId;r&&!t.has(r)&&t.set(r,cl(e,r))}return t},cl=(e,t)=>{const n=[];for(const r of e.values())r.frameId===t&&n.push(r);return n},ZT=e=>e.filter(t=>We(t)),qT=e=>{const t=He(ZT(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},Sb=(e,t,n,r)=>{const i=cl(e,t.id),o=new Set(i),s=new Set([...rG(e,t,r),...i.filter(f=>YT(f,t,r))]),a=i.filter(f=>!s.has(f)),l=new Set(Array.from(s).flatMap(f=>f.groupIds));for(const f of a)if(!KT(f,t,r))f.groupIds.length===0&&o.delete(f);else if(f.groupIds.length>0)for(const g of f.groupIds)l.add(g);for(const f of a)if(f.groupIds.length>0){let g=!0;for(const U of f.groupIds)l.has(U)&&(g=!1);g&&o.delete(f)}const c=Array.from(s).filter(f=>f.groupIds.length===0);for(const f of c)o.add(f);const u=Array.from(s).filter(f=>f.groupIds.length>0),d=EV(u,n);for(const[f,g]of Object.entries(d))if(g){const U=Tn(e,f);if(gU(U,t,r))for(const b of U)o.add(b)}return[...o].filter(f=>!(Ae(f)&&f.containerId))},h5e=(e,t,n)=>g5e(R3(e,rG(e,t,n)),t,n),g5e=(e,t,n)=>{const r=[],i=new Map;for(const o of e){let s=!1;if(o.groupIds.length>0){if(o.groupIds.some(a=>i.get(a)))s=!0;else{const a=new Set(o.groupIds.flatMap(l=>Tn(n,l)));s=!gU(Array.from(a),t,n)}o.groupIds.forEach(a=>{i.set(a,s)})}s||r.push(o)}return r},wo=(e,t)=>e.frameId&&t.get(e.frameId)||null,p5e=(e,t)=>{const n=new Set,r=He(e);e=R3(e);for(const s of e)We(s)&&s.id!==t.id&&n.add(s.id);const i=new Set,o=[];for(const s of e)if(!(We(s)||s.frameId&&n.has(s.frameId)))if(s.groupIds.length){const a=s.groupIds.at(-1);if(!i.has(a)){i.add(a);const l=Tn(e,a);if(l.some(c=>ed(c,t,r)))for(const c of l)o.push(c)}}else ed(s,t,r)&&o.push(s);return o},Tm=(e,t,n,r)=>{const i=He(e),o=new Map;for(const c of e.values())c.frameId===n.id&&o.set(c.id,!0);const s=new Set(t.map(c=>c.id)),a=[],l=new Set;for(const c of t)We(c)&&c.id!==n.id&&l.add(c.id);for(const c of R3(e,t)){if(We(c)||c.frameId&&l.has(c.frameId)||c.frameId&&r.selectedElementIds[c.id]&&r.selectedElementIds[c.frameId])continue;o.has(c.id)||a.push(c);const u=rt(c,i);u&&!s.has(u.id)&&!o.has(u.id)&&a.push(u)}for(const c of a)fe(c,{frameId:n.id},!1);return e},k3=(e,t)=>{const n=new Map,r=new Map;for(const i of e)if(i.frameId){n.set(i.id,i);const o=r.get(i.frameId)||[];o.push(i);const s=rt(i,t);s&&(n.set(s.id,s),o.push(s)),r.set(i.frameId,o)}for(const[,i]of n)fe(i,{frameId:null},!1)},iG=(e,t)=>{const n=cl(e,t.id);return k3(n,He(e)),e},oG=(e,t,n,r)=>Tm(iG(e,n),t,n,r.state).slice(),Fg=(e,t,n)=>{const r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),i=new Set(r);if(t.editingGroupId)for(const a of r)a.groupIds.length===0?i.add(a):a.groupIds.flatMap(l=>Tn(e,l)).forEach(l=>i.add(l));const o=new Set,s=He(e);return i.forEach(a=>{a.frameId&&!We(a)&&!Yy(a,s,t)&&o.add(a)}),o.size>0&&k3(o,s),e},R3=(e,t)=>{const n=new Set,r=t||e;for(const s of r.values()){const a=s.groupIds[s.groupIds.length-1];a&&n.add(a)}const i=new Set;for(const s of n)Tn(e,s).some(a=>We(a))&&i.add(s);const o=[];for(const s of r.values())i.has(s.groupIds[s.groupIds.length-1])||o.push(s);return o},ww=(e,t,n)=>{const r=Ae(e)&&Zr(e,t)||e;return r.frameId&&n.selectedElementIds[r.id]&&n.selectedElementIds[r.frameId]?wo(r,t):n.selectedElementIds[r.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:wo(r,t)},Yy=(e,t,n,r)=>{var l;const i=(r==null?void 0:r.targetFrame)??ww(e,t,n);if(!i)return!1;const o=Ae(e)&&Zr(e,t)||e,s=c=>{r!=null&&r.checkedGroups&&o.groupIds.forEach(u=>{var d;(d=r.checkedGroups)==null||d.set(u,c)})};if(!n.selectedElementIds[o.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[o.id]&&n.selectedElementIds[i.id])return!0;if(o.groupIds.length===0)return ed(o,i,t);for(const c of o.groupIds)if((l=r==null?void 0:r.checkedGroups)!=null&&l.has(c))return r.checkedGroups.get(c);const a=new Set(o.groupIds.filter(c=>r!=null&&r.checkedGroups?!r.checkedGroups.has(c):!0).flatMap(c=>Tn(t,c)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){const c=new Set(ot(t,n));if(n.frameToHighlight!==null)return!0;c.forEach(d=>{a.delete(d)})}for(const c of a)if(We(c))return s(!1),!1;for(const c of a)if(ed(c,i,t))return s(!0),!0;return!1},MM=(e,t,n,r,i)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;const o=KT(e,t,r)||YT(e,t,r);if(o){for(const s of e.groupIds)i==null||i.set(s,!0);return!0}if(!o&&e.groupIds.length>0&&!gU([e],t,r)){let s=!1;if(n.selectedElementsAreBeingDragged)s=Yy(e,r,n,{targetFrame:t,checkedGroups:i});else{s=e.frameId===t.id;for(const a of e.groupIds)i==null||i.set(a,s)}for(const a of e.groupIds)i==null||i.set(a,s);return s}return!1},sG=e=>e.name===null?oV(e)?"Frame":"AI Frame":e.name,QT=(e,t)=>l5e({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),aG=e=>{const t=He(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},lG="invert(100%) hue-rotate(180deg) saturate(1.25)",m5e=ks(),cG=(e,t)=>dr(e)&&!t.imageCache.has(e.fileId),uG=(e,t,n)=>{var r;return n.theme===Ge.DARK&&dr(e)&&!cG(e,t)&&((r=t.imageCache.get(e.fileId))==null?void 0:r.mimeType)!==Ne.svg},P3=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},dG=(e,t,n,r,i=1)=>{let o=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*i;return(n.has(e.id)||r&&r.some(s=>s.id===e.id)||t&&n.has(t.id))&&(o*=zae/100),o},U5e=(e,t,n)=>{const o=P3(e),[s,a,l,c]=Ke(e,t),u=et(e)||Rs(e)?xi(s,l):e.width,d=et(e)||Rs(e)?xi(a,c):e.height;let f=u*window.devicePixelRatio+o*2,g=d*window.devicePixelRatio+o*2,U=n.value;return(f*U>32767||g*U>32767)&&(U=Math.min(32767/f,32767/g)),f*g*U*U>16777216&&(U=Math.sqrt(16777216/(f*g))),f=Math.floor(f*U),g=Math.floor(g*U),{width:f,height:g,scale:U}},fG=(e,t,n,r,i)=>{var _,E;const o=document.createElement("canvas"),s=o.getContext("2d"),a=P3(e),{width:l,height:c,scale:u}=U5e(e,t,n);if(!l||!c)return null;o.width=l,o.height=c;let d=-100,f=0;if(et(e)||Rs(e)){const[w,T]=Ke(e,t);d=e.x>w?xi(e.x,w)*window.devicePixelRatio*u:0,f=e.y>T?xi(e.y,T)*window.devicePixelRatio*u:0,s.translate(d,f)}s.save(),s.translate(a*u,a*u),s.scale(window.devicePixelRatio*u,window.devicePixelRatio*u);const g=Ud.canvas(o);uG(e,r,i)&&(s.filter=lG),Cb(e,g,s,r),s.restore();const U=rt(e,t),b=document.createElement("canvas"),v=b.getContext("2d");if(st(e)&&U){const[w,T,A,M]=Ke(e,t),S=Math.max(xi(w,A),xi(T,M));b.width=S*window.devicePixelRatio*u+a*u*10,b.height=S*window.devicePixelRatio*u+a*u*10,v.translate(b.width/2,b.height/2),v.rotate(e.angle),v.drawImage(o,-o.width/2,-o.height/2,o.width,o.height);const[,,,,x,C]=Ke(U,t);v.rotate(-e.angle);const R=(b.width-o.width)/2,O=(b.height-o.height)/2,F=b.width/2-(x-w)*window.devicePixelRatio*u-R-a*u,N=b.height/2-(C-T)*window.devicePixelRatio*u-O-a*u;v.translate(-F,-N),v.clearRect(-(U.width/2+vr)*window.devicePixelRatio*u,-(U.height/2+vr)*window.devicePixelRatio*u,(U.width+vr*2)*window.devicePixelRatio*u,(U.height+vr*2)*window.devicePixelRatio*u)}return{element:e,canvas:o,theme:i.theme,scale:u,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:f,boundTextElementVersion:((_=rt(e,t))==null?void 0:_.version)||null,containingFrameOpacity:((E=wo(e,t))==null?void 0:E.opacity)||100,boundTextCanvas:b,angle:e.angle,imageCrop:kt(e)?e.crop:null}},b5e=14,hG=document.createElement("img");hG.src=`data:${Ne.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;const gG=document.createElement("img");gG.src=`data:${Ne.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;const y5e=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);const n=Math.min(e.width,e.height),r=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?gG:hG,e.width/2-r/2,e.height/2-r/2,r,r)},Cb=(e,t,n,r,i)=>{var o;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(Sn.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",Sn.get(e).forEach(s=>{t.draw(s)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;const s=_5e(e),a=Sn.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(s),n.restore();break}case"image":{const s=dr(e)?(o=r.imageCache.get(e.fileId))==null?void 0:o.image:void 0;if(s!=null&&!(s instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,Fu(Math.min(e.width,e.height),e)),n.clip());const{x:a,y:l,width:c,height:u}=e.crop?e.crop:{x:0,y:0,width:s.naturalWidth,height:s.naturalHeight};n.drawImage(s,a,l,c,u,0,0,e.width,e.height)}else y5e(e,n);break}default:if(Ae(e)){const s=Qz(e.text),a=s&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",s?"rtl":"ltr"),n.save(),n.font=an(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;const l=e.text.replace(/\r\n?/g,`
`).split(`
`),c=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,u=iU(e.fontSize,e.lineHeight),d=YV(e.fontFamily,e.fontSize,u);for(let f=0;f<l.length;f++)n.fillText(l[f],c,f*u+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},Iw=new WeakMap,LM=(e,t,n,r)=>{var d;const i=n?r.zoom:m5e.zoom,o=Iw.get(e),s=o&&o.zoomValue!==i.value&&!(r!=null&&r.shouldCacheIgnoreZoom),a=rt(e,t),l=(a==null?void 0:a.version)||null,c=kt(e)?e.crop:null,u=((d=wo(e,t))==null?void 0:d.opacity)||100;if(!o||s||o.theme!==r.theme||o.boundTextElementVersion!==l||o.imageCrop!==c||o.containingFrameOpacity!==u||st(e)&&a&&e.angle!==o.angle){const f=fG(e,t,i,n,r);return f?(Iw.set(e,f),f):null}return o},$E=(e,t,n,r,i)=>{const o=e.element,s=P3(o),a=e.scale,[l,c,u,d]=Ke(o,i),f=((l+u)/2+r.scrollX)*window.devicePixelRatio,g=((c+d)/2+r.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);const U=rt(o,i);if(st(o)&&U){const b=(e.boundTextCanvas.width-e.canvas.width)/2,v=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(f,g),t.drawImage(e.boundTextCanvas,-(u-l)/2*window.devicePixelRatio-b/a-s,-(d-c)/2*window.devicePixelRatio-v/a-s,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(f,g),t.rotate(o.angle),"scale"in e.element&&!cG(o,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-f,-g),t.drawImage(e.canvas,(l+r.scrollX)*window.devicePixelRatio-s*e.scale/e.scale,(c+r.scrollY)*window.devicePixelRatio-s*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},v5e=(e,t,n,r)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";const i=.5/n.zoom.value;t.fillRect(i,i,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(i,i,e.width,e.height),t.restore()},Jd=(e,t,n,r,i,o,s)=>{var l;const a=((l=s.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!s.selectedElementIds[e.id]&&!s.hoveredElementIds[e.id];switch(i.globalAlpha=dG(e,wo(e,t),o.elementsPendingErasure,o.pendingFlowchartNodes,a?$$:1),e.type){case"magicframe":case"frame":{s.frameRendering.enabled&&s.frameRendering.outline&&(i.save(),i.translate(e.x+s.scrollX,e.y+s.scrollY),i.fillStyle="rgba(0, 0, 200, 0.04)",i.lineWidth=Fn.strokeWidth/s.zoom.value,i.strokeStyle=Fn.strokeColor,gb(e)&&(i.strokeStyle=s.theme===Ge.LIGHT?"#7affd7":"#1d8264"),i.roundRect?(i.beginPath(),i.roundRect(0,0,e.width,e.height,Fn.radius/s.zoom.value),i.stroke(),i.closePath()):i.strokeRect(0,0,e.width,e.height),i.restore());break}case"freedraw":{if(Sn.generateElementShape(e,null),o.isExporting){const[c,u,d,f]=Ke(e,t),g=(c+d)/2+s.scrollX,U=(u+f)/2+s.scrollY,b=(d-c)/2-(e.x-c),v=(f-u)/2-(e.y-u);i.save(),i.translate(g,U),i.rotate(e.angle),i.translate(-b,-v),Cb(e,r,i,o),i.restore()}else{const c=LM(e,n,o,s);if(!c)return;$E(c,i,o,s,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(Sn.generateElementShape(e,o),o.isExporting){const[c,u,d,f]=Ke(e,t),g=(c+d)/2+s.scrollX,U=(u+f)/2+s.scrollY;let b=(d-c)/2-(e.x-c),v=(f-u)/2-(e.y-u);if(Ae(e)){const E=Zr(e,t);if(st(E)){const w=Ce.getBoundTextElementPosition(E,e,t);b=(d-c)/2-(w.x-c),v=(f-u)/2-(w.y-u)}}i.save(),i.translate(g,U),uG(e,o,s)&&(i.filter="none");const _=rt(e,t);if(st(e)&&_){const E=document.createElement("canvas"),w=E.getContext("2d"),T=Math.max(xi(c,d),xi(u,f)),A=P3(e);E.width=T*s.exportScale+A*10*s.exportScale,E.height=T*s.exportScale+A*10*s.exportScale,w.translate(E.width/2,E.height/2),w.scale(s.exportScale,s.exportScale),b=e.width/2-(e.x-c),v=e.height/2-(e.y-u),w.rotate(e.angle);const M=Ud.canvas(E);w.translate(-b,-v),Cb(e,M,w,o),w.translate(b,v),w.rotate(-e.angle);const[,,,,S,x]=Ke(_,t),C=(c+d)/2-S,R=(u+f)/2-x;w.translate(-C,-R),w.clearRect(-_.width/2,-_.height/2,_.width,_.height),i.scale(1/s.exportScale,1/s.exportScale),i.drawImage(E,-E.width/2,-E.height/2,E.width,E.height)}else i.rotate(e.angle),e.type==="image"&&i.scale(e.scale[0],e.scale[1]),i.translate(-b,-v),Cb(e,r,i,o);i.restore()}else{const c=LM(e,n,o,s);if(!c)return;const u=i.imageSmoothingEnabled;if(!(s!=null&&s.shouldCacheIgnoreZoom)&&(!e.angle||mce(e.angle))&&(i.imageSmoothingEnabled=!1),e.id===s.croppingElementId&&kt(c.element)&&c.element.crop!==null){i.save(),i.globalAlpha=.1;const d=fG(Xme(c.element,t),n,s.zoom,o,s);d&&$E(d,i,o,s,n),i.restore()}$E(c,i,o,s,n),i.imageSmoothingEnabled=u}break}default:throw new Error(`Unimplemented type ${e.type}`)}i.globalAlpha=1},pG=new WeakMap([]);function E5e(e){const t=mG(e),n=new Path2D(t);return pG.set(e,n),n}function _5e(e){return pG.get(e)}function mG(e){const t=e.simulatePressure?e.points:e.points.length?e.points.map(([r,i],o)=>[r,i,e.pressures[o]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:r=>Math.sin(r*Math.PI/2),last:!!e.lastCommittedPoint};return I5e(_ue(t,n))}function DM(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}const w5e=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function I5e(e){if(!e.length)return"";const t=e.length-1;return e.reduce((n,r,i,o)=>(i===t?n.push(r,DM(r,o[0]),"L",o[0],"Z"):n.push(r,DM(r,o[i+1])),n),["M",e[0],"Q"]).join(" ").replace(w5e,"$1")}const Bg=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",Tw=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",NM=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",OM=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",xw=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",FM=e=>e==="arrow",Zy=e=>e==="arrow",T5e=e=>[8,8+e],UG=e=>[1.5,6+e];function x5e(e){const t=e.roughness,n=Math.max(e.width,e.height),r=Math.min(e.width,e.height);return r>=20&&n>=50||r>=15&&e.roundness&&xw(e.type)||et(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}const Mo=(e,t=!1)=>{const n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?T5e(e.strokeWidth):e.strokeStyle==="dotted"?UG(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:x5e(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<O$.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=sa(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return bc(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},BM=(e,t,n)=>hs(e)&&(t||co(e)&&(n==null?void 0:n.get(e.id))!==!0)&&sa(e.backgroundColor)&&sa(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:uu(e)?{...e,strokeColor:sa(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:sa(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,$M=(e,t,n,r,i,o,s)=>{const a=WM(e,t,n,r);if(a===null)return[];const l=(c,u)=>{if(c===null)return[];const[,,d,f,g,U]=c;return[i.line(d,f,g,U,u)]};switch(r){case"dot":case"circle":case"circle_outline":{const[c,u,d]=a;return delete o.strokeLineDash,[i.circle(c,u,d,{...o,fill:r==="circle_outline"?s:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,o.roughness||0)})]}case"triangle":case"triangle_outline":{const[c,u,d,f,g,U]=a;return delete o.strokeLineDash,[i.polygon([[c,u],[d,f],[g,U],[c,u]],{...o,fill:r==="triangle_outline"?s:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,o.roughness||0)})]}case"diamond":case"diamond_outline":{const[c,u,d,f,g,U,b,v]=a;return delete o.strokeLineDash,[i.polygon([[c,u],[d,f],[g,U],[b,v],[c,u]],{...o,fill:r==="diamond_outline"?s:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,o.roughness||0)})]}case"crowfoot_one":return l(a,o);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{const[c,u,d,f,g,U]=a;if(e.strokeStyle==="dotted"){const b=UG(e.strokeWidth-1);o.strokeLineDash=[b[0],b[1]-1]}else delete o.strokeLineDash;return o.roughness=Math.min(1,o.roughness||0),[i.line(d,f,c,u,o),i.line(g,U,c,u,o),...r==="crowfoot_one_or_many"?l(WM(e,t,n,"crowfoot_one"),o):[]]}}},S5e=(e,t,{isExporting:n,canvasBackgroundColor:r,embedsValidationStatus:i})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let o;if(e.roundness){const s=e.width,a=e.height,l=Fu(Math.min(s,a),e);o=t.path(`M ${l} 0 L ${s-l} 0 Q ${s} 0, ${s} ${l} L ${s} ${a-l} Q ${s} ${a}, ${s-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,Mo(BM(e,n,i),!0))}else o=t.rectangle(0,0,e.width,e.height,Mo(BM(e,n,i),!1));return o}case"diamond":{let o;const[s,a,l,c,u,d,f,g]=A5e(e);if(e.roundness){const U=Fu(Math.abs(s-f),e),b=Fu(Math.abs(c-a),e);o=t.path(`M ${s+U} ${a+b} L ${l-U} ${c-b}
            C ${l} ${c}, ${l} ${c}, ${l-U} ${c+b}
            L ${u+U} ${d-b}
            C ${u} ${d}, ${u} ${d}, ${u-U} ${d-b}
            L ${f+U} ${g+b}
            C ${f} ${g}, ${f} ${g}, ${f+U} ${g-b}
            L ${s-U} ${a+b}
            C ${s} ${a}, ${s} ${a}, ${s+U} ${a+b}`,Mo(e,!0))}else o=t.polygon([[s,a],[l,c],[u,d],[f,g]],Mo(e));return o}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,Mo(e));case"line":case"arrow":{let o;const s=Mo(e),a=e.points.length?e.points:[B(0,0)];if(De(e)?o=[t.path(C5e(a,16),Mo(e,!0))]:e.roundness?o=[t.curve(a,s)]:s.fill?o=[t.polygon(a,s)]:o=[t.linearPath(a,s)],e.type==="arrow"){const{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){const u=$M(e,o,"start",l,t,s,r);o.push(...u)}if(c!==null){const u=$M(e,o,"end",c,t,s,r);o.push(...u)}}return o}case"freedraw":{let o;if(E5e(e),bc(e.points)){const s=kpe(e.points,.75);o=t.curve(s,{...Mo(e),stroke:"none"})}else o=null;return o}case"frame":case"magicframe":case"text":case"image":return null;default:return qu(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},C5e=(e,t)=>{const n=[];for(let i=1;i<e.length-1;i+=1){const o=e[i-1],s=e[i+1],a=e[i],l=Kl(a,o),c=Kl(s,a),u=Math.min(t,Xn(e[i],s)/2,Xn(e[i],o)/2);l?o[0]<a[0]?n.push([e[i][0]-u,e[i][1]]):n.push([e[i][0]+u,e[i][1]]):o[1]<a[1]?n.push([e[i][0],e[i][1]-u]):n.push([e[i][0],e[i][1]+u]),n.push(e[i]),c?s[0]<a[0]?n.push([e[i][0]-u,e[i][1]]):n.push([e[i][0]+u,e[i][1]]):s[1]<a[1]?n.push([e[i][0],e[i][1]-u]):n.push([e[i][0],e[i][1]+u])}const r=[`M ${e[0][0]} ${e[0][1]}`];for(let i=0;i<n.length;i+=3)r.push(`L ${n[i][0]} ${n[i][1]}`),r.push(`Q ${n[i+1][0]} ${n[i+1][1]}, ${n[i+2][0]} ${n[i+2][1]}`);return r.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),r.join(" ")},J1=class J1{static getBounds(t,n){const r=J1.boundsCache.get(t);if(r!=null&&r.version&&r.version===t.version&&!Cn(t))return r.bounds;const i=J1.calculateBounds(t,n);return J1.boundsCache.set(t,{version:t.version,bounds:i}),i}static calculateBounds(t,n){let r;const[i,o,s,a,l,c]=Ke(t,n);if(Rs(t)){const[u,d,f,g]=JT(t.points.map(([U,b])=>le(B(U,b),B(l-t.x,c-t.y),t.angle)));return[u+t.x,d+t.y,f+t.x,g+t.y]}else if(et(t))r=D5e(t,l,c,n);else if(t.type==="diamond"){const[u,d]=le(B(l,o),B(l,c),t.angle),[f,g]=le(B(l,a),B(l,c),t.angle),[U,b]=le(B(i,c),B(l,c),t.angle),[v,_]=le(B(s,c),B(l,c),t.angle),E=Math.min(u,f,U,v),w=Math.min(d,g,b,_),T=Math.max(u,f,U,v),A=Math.max(d,g,b,_);r=[E,w,T,A]}else if(t.type==="ellipse"){const u=(s-i)/2,d=(a-o)/2,f=Math.cos(t.angle),g=Math.sin(t.angle),U=Math.hypot(u*f,d*g),b=Math.hypot(d*f,u*g);r=[l-U,c-b,l+U,c+b]}else{const[u,d]=le(B(i,o),B(l,c),t.angle),[f,g]=le(B(i,a),B(l,c),t.angle),[U,b]=le(B(s,a),B(l,c),t.angle),[v,_]=le(B(s,o),B(l,c),t.angle),E=Math.min(u,f,U,v),w=Math.min(d,g,b,_),T=Math.max(u,f,U,v),A=Math.max(d,g,b,_);r=[E,w,T,A]}return r}};H(J1,"boundsCache",new WeakMap);let Sw=J1;const Ke=(e,t,n=!1)=>{if(Rs(e))return R5e(e);if(et(e))return Ce.getElementAbsoluteCoords(e,t,n);if(Ae(e)){const r=t?Zr(e,t):null;if(st(r)){const{x:i,y:o}=Ce.getBoundTextElementPosition(r,e,t);return[i,o,i+e.width,o+e.height,i+e.width/2,o+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},zM=(e,t)=>{const[n,r,i,o,s,a]=Ke(e,t),l=B(s,a);if(et(e)||Rs(e)){const _=[];let E=0;for(;E<e.points.length-1;)_.push(un(le(B(e.points[E][0]+e.x,e.points[E][1]+e.y),l,e.angle),le(B(e.points[E+1][0]+e.x,e.points[E+1][1]+e.y),l,e.angle))),E++;return _}const[c,u,d,f,g,U,b,v]=[[n,r],[i,r],[n,o],[i,o],[s,r],[s,o],[n,a],[i,a]].map(_=>le(_,l,e.angle));return e.type==="diamond"?[un(g,b),un(g,v),un(U,b),un(U,v)]:e.type==="ellipse"?[un(g,b),un(g,v),un(U,b),un(U,v),un(g,b),un(g,v),un(U,b),un(U,v)]:[un(c,u),un(d,f),un(c,d),un(u,f),un(c,v),un(d,v),un(u,b),un(f,b)]},A5e=e=>{const t=Math.floor(e.width/2)+1,n=0,r=e.width,i=Math.floor(e.height/2)+1,o=t,s=e.height;return[t,n,r,i,o,s,0,i]},pU=e=>{for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},VM=(e,t,n,r,i)=>{const o=1-e;return Math.pow(o,3)*t+3*Math.pow(o,2)*e*n+3*o*Math.pow(e,2)*r+Math.pow(e,3)*i},HM=(e,t,n,r)=>{const i=t-e,o=n-t,s=r-n,a=3*i-6*o+3*s,l=6*o-6*i,c=3*i,u=l*l-4*a*c;if(!(u>=0))return!1;let f=null,g=null,U=1/0,b=1/0;return a===0?U=b=-c/l:(U=(-l+Math.sqrt(u))/(2*a),b=(-l-Math.sqrt(u))/(2*a)),U>=0&&U<=1&&(f=VM(U,e,t,n,r)),b>=0&&b<=1&&(g=VM(b,e,t,n,r)),[f,g]},k5e=(e,t,n,r)=>{const i=HM(e[0],t[0],n[0],r[0]),o=HM(e[1],t[1],n[1],r[1]);let s=Math.min(e[0],r[0]),a=Math.max(e[0],r[0]);if(i){const u=i.filter(d=>d!==null);s=Math.min(s,...u),a=Math.max(a,...u)}let l=Math.min(e[1],r[1]),c=Math.max(e[1],r[1]);if(o){const u=o.filter(d=>d!==null);l=Math.min(l,...u),c=Math.max(c,...u)}return[s,l,a,c]},M3=(e,t)=>{let n=B(0,0);const{minX:r,minY:i,maxX:o,maxY:s}=e.reduce((a,{op:l,data:c})=>{if(l==="move"){const u=QI(c);Yi(u!=null,"Op data is not a point"),n=u}else if(l==="bcurveTo"){const u=B(c[0],c[1]),d=B(c[2],c[3]),f=B(c[4],c[5]),g=t?t(u):u,U=t?t(d):d,b=t?t(f):f,v=t?t(n):n;n=f;const[_,E,w,T]=k5e(v,g,U,b);a.minX=Math.min(a.minX,_),a.minY=Math.min(a.minY,E),a.maxX=Math.max(a.maxX,w),a.maxY=Math.max(a.maxY,T)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r,i,o,s]},JT=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const[o,s]of e)t=Math.min(t,o),n=Math.min(n,s),r=Math.max(r,o),i=Math.max(i,s);return[t,n,r,i]},R5e=e=>{const[t,n,r,i]=JT(e.points),o=t+e.x,s=n+e.y,a=r+e.x,l=i+e.y;return[o,s,a,l,(o+a)/2,(s+l)/2]},P5e=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},M5e=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},WM=(e,t,n,r)=>{const i=pU(t[0]);if(i.length<1)return null;const o=n==="start"?1:i.length-1,s=i[o].data;Yi(s.length===6,"Op data length is not 6");const a=B(s[4],s[5]),l=B(s[2],s[3]),c=B(s[0],s[1]),u=i[o-1];let d=B(0,0);if(u.op==="move"){const K=QI(u.data);Yi(K!=null,"Op data is not a point"),d=K}else u.op==="bcurveTo"&&(d=B(u.data[4],u.data[5]));const f=(K,ne)=>Math.pow(1-K,3)*a[ne]+3*K*Math.pow(1-K,2)*l[ne]+3*Math.pow(K,2)*(1-K)*c[ne]+d[ne]*Math.pow(K,3),[g,U]=n==="start"?d:a,[b,v]=[f(.3,0),f(.3,1)],_=Math.hypot(g-b,U-v),E=(g-b)/_,w=(U-v)/_,T=P5e(r);let A=0;{const[K,ne]=n==="end"?e.points[e.points.length-1]:e.points[0],[ee,q]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];A=Math.hypot(K-ee,ne-q)}const S=Math.min(T,A*(r==="diamond"||r==="diamond_outline"?.25:.5)),x=g-E*S,C=U-w*S;if(r==="dot"||r==="circle"||r==="circle_outline"){const K=Math.hypot(C-U,x-g)+e.strokeWidth-2;return[g,U,K]}const R=M5e(r);if(r==="crowfoot_many"||r==="crowfoot_one_or_many"){const[K,ne]=le(B(g,U),B(x,C),xf(-R)),[ee,q]=le(B(g,U),B(x,C),xf(R));return[x,C,K,ne,ee,q]}const[O,F]=le(B(x,C),B(g,U),-R*Math.PI/180),[N,J]=le(B(x,C),B(g,U),xf(R));if(r==="diamond"||r==="diamond_outline"){let K,ne;if(n==="start"){const[ee,q]=e.points.length>1?e.points[1]:[0,0];[K,ne]=le(B(g+S*2,U),B(g,U),Math.atan2(q-U,ee-g))}else{const[ee,q]=e.points.length>1?e.points[e.points.length-2]:[0,0];[K,ne]=le(B(g-S*2,U),B(g,U),Math.atan2(U-q,g-ee))}return[g,U,O,F,K,ne,N,J]}return[g,U,O,F,N,J]},L5e=e=>{const t=Ud.generator(),n=Mo(e),r=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[r](e.points,n)},D5e=(e,t,n,r)=>{var d;const i=rt(e,r);if(e.points.length<2){const[f,g]=e.points[0],[U,b]=le(B(e.x+f,e.y+g),B(t,n),e.angle);let v=[U,b,U,b];if(i){const _=Ce.getMinMaxXYWithBoundText(e,r,[U,b,U,b],i);v=[_[0],_[1],_[2],_[3]]}return v}const s=((d=Sn.get(e))==null?void 0:d[0])??L5e(e),a=pU(s),c=M3(a,([f,g])=>le(B(e.x+f,e.y+g),B(t,n),e.angle));let u=[c[0],c[1],c[2],c[3]];if(i){const f=Ce.getMinMaxXYWithBoundText(e,r,u,i);u=[f[0],f[1],f[2],f[3]]}return u},vc=(e,t)=>Sw.getBounds(e,t),jt=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=-1/0,i=1/0,o=-1/0;const s=t||He(e);return e.forEach(a=>{const[l,c,u,d]=vc(a,s);n=Math.min(n,l),i=Math.min(i,c),r=Math.max(r,u),o=Math.max(o,d)}),[n,i,r,o]},ex=(e,t)=>{const[n,r,i,o]=jt(e);return[n+t.x,r+t.y,i+t.x,o+t.y]},zu=(e,t,n,r)=>{if(!(et(e)||Rs(e)))return[e.x,e.y,e.x+t,e.y+n];const i=Xy(0,t,Xy(1,n,e.points,r),r);let o;if(Rs(e))o=JT(i);else{const u=Ud.generator(),d=e.roundness?u.curve(i,Mo(e)):u.linearPath(i,Mo(e)),f=pU(d);o=M3(f)}const[s,a,l,c]=o;return[s+e.x,a+e.y,l+e.x,c+e.y]},GM=(e,t)=>{const n=Ud.generator(),r=e.roundness==null?n.linearPath(t,Mo(e)):n.curve(t,Mo(e)),i=pU(r),[o,s,a,l]=M3(i);return[o+e.x,s+e.y,a+e.x,l+e.y]},N5e=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=e[0];const i=He(e);return e.forEach(o=>{const[s,a,l,c]=vc(o,i),u=Xn(B((s+l)/2,(a+c)/2),B(t.x,t.y));u<n&&(n=u,r=o)}),vc(r,i)},fa=e=>{const[t,n,r,i]=jt(e);return{minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n,midX:(t+r)/2,midY:(n+i)/2}},bG=({scrollX:e,scrollY:t,width:n,height:r,zoom:i})=>[-e,-t,-e+n/i.value,-t+r/i.value],yG=e=>B(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),O5e=8,XM=99999,L3=e=>O5e/e,$i=class $i{};H($i,"referenceSnapPoints",null),H($i,"visibleGaps",null),H($i,"setReferenceSnapPoints",t=>{$i.referenceSnapPoints=t}),H($i,"getReferenceSnapPoints",()=>$i.referenceSnapPoints),H($i,"setVisibleGaps",t=>{$i.visibleGaps=t}),H($i,"getVisibleGaps",()=>$i.visibleGaps),H($i,"destroy",()=>{$i.referenceSnapPoints=null,$i.visibleGaps=null});let Js=$i;const w2=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,td=({event:e,app:t,selectedElements:n})=>e?t.state.objectsSnapModeEnabled&&!e[j.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[j.CTRL_OR_CMD]&&!w2(t):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,F5e=(e,t,n=.01)=>Math.abs(e-t)<=n,I2=(e,t,{omitCenter:n,boundingBoxCorners:r,dragOffset:i}={omitCenter:!1,boundingBoxCorners:!1})=>{let o=[];if(e.length===1){const s=e[0];let[a,l,c,u,d,f]=Ke(s,t);i&&(a+=i.x,c+=i.x,d+=i.x,l+=i.y,u+=i.y,f+=i.y);const g=(c-a)/2,U=(u-l)/2;if((s.type==="diamond"||s.type==="ellipse")&&!r){const b=le(B(a,l+U),B(d,f),s.angle),v=le(B(a+g,l),B(d,f),s.angle),_=le(B(c,l+U),B(d,f),s.angle),E=le(B(a+g,u),B(d,f),s.angle),w=B(d,f);o=n?[b,v,_,E]:[b,v,_,E,w]}else{const b=le(B(a,l),B(d,f),s.angle),v=le(B(c,l),B(d,f),s.angle),_=le(B(a,u),B(d,f),s.angle),E=le(B(c,u),B(d,f),s.angle),w=B(d,f);o=n?[b,v,_,E]:[b,v,_,E,w]}}else if(e.length>1){const[s,a,l,c]=ex(e,i??{x:0,y:0}),u=l-s,d=c-a,f=B(s,a),g=B(l,a),U=B(s,c),b=B(l,c),v=B(s+u/2,a+d/2);o=n?[f,g,U,b]:[f,g,U,b,v]}return o.map(s=>B(Bn(s[0]),Bn(s[1])))},vG=(e,t,n,r)=>{const i=t.filter(o=>We(o)).map(o=>o.id);return OG(e,t,n,r).filter(o=>!(o.frameId&&i.includes(o.frameId)))},B5e=(e,t,n,r)=>{const i=vG(e,t,n,r),o=d3(i,r).filter(d=>!(d.length===1&&Cn(d[0]))).map(d=>jt(d).map(f=>Bn(f))),s=o.sort((d,f)=>d[0]-f[0]),a=[];let l=0;e:for(let d=0;d<s.length;d++){const f=s[d];for(let g=d+1;g<s.length;g++){if(++l>XM)break e;const U=s[g],[,b,v,_]=f,[E,w,,T]=U;v<E&&Iy(wi(b,_),wi(w,T))&&a.push({startBounds:f,endBounds:U,startSide:[B(v,b),B(v,_)],endSide:[B(E,w),B(E,T)],length:E-v,overlap:Ty(wi(b,_),wi(w,T))})}}const c=o.sort((d,f)=>d[1]-f[1]),u=[];l=0;e:for(let d=0;d<c.length;d++){const f=c[d];for(let g=d+1;g<c.length;g++){if(++l>XM)break e;const U=c[g],[b,,v,_]=f,[E,w,T]=U;_<w&&Iy(wi(b,v),wi(E,T))&&u.push({startBounds:f,endBounds:U,startSide:[B(b,_),B(v,_)],endSide:[B(E,w),B(T,w)],length:w-_,overlap:Ty(wi(b,v),wi(E,T))})}}return{horizontalGaps:a,verticalGaps:u}},jM=(e,t,n,r,i,o,s)=>{if(!td({app:n,event:r,selectedElements:e}))return[];if(e.length===0)return[];const a=Js.getVisibleGaps();if(a){const{horizontalGaps:l,verticalGaps:c}=a,[u,d,f,g]=ex(e,t).map(v=>Bn(v)),U=(u+f)/2,b=(d+g)/2;for(const v of l){if(!Iy(wi(d,g),v.overlap))continue;const _=v.startSide[0][0]+v.length/2,E=Bn(_-U);if(v.length>f-u&&Math.abs(E)<=s.x){Math.abs(E)<s.x&&(i.length=0),s.x=Math.abs(E);const R={type:"gap",direction:"center_horizontal",gap:v,offset:E};i.push(R);continue}const[,,T]=v.endBounds,A=u-T,M=Bn(v.length-A);if(Math.abs(M)<=s.x){Math.abs(M)<s.x&&(i.length=0),s.x=Math.abs(M);const R={type:"gap",direction:"side_right",gap:v,offset:M};i.push(R);continue}const[S,,,]=v.startBounds,x=S-f,C=Bn(x-v.length);if(Math.abs(C)<=s.x){Math.abs(C)<s.x&&(i.length=0),s.x=Math.abs(C);const R={type:"gap",direction:"side_left",gap:v,offset:C};i.push(R);continue}}for(const v of c){if(!Iy(wi(u,f),v.overlap))continue;const _=v.startSide[0][1]+v.length/2,E=Bn(_-b);if(v.length>g-d&&Math.abs(E)<=s.y){Math.abs(E)<s.y&&(o.length=0),s.y=Math.abs(E);const R={type:"gap",direction:"center_vertical",gap:v,offset:E};o.push(R);continue}const[,T,,]=v.startBounds,A=T-g,M=Bn(A-v.length);if(Math.abs(M)<=s.y){Math.abs(M)<s.y&&(o.length=0),s.y=Math.abs(M);const R={type:"gap",direction:"side_top",gap:v,offset:M};o.push(R);continue}const[,,,S]=v.endBounds,x=Bn(d-S),C=v.length-x;if(Math.abs(C)<=s.y){Math.abs(C)<s.y&&(o.length=0),s.y=Math.abs(C);const R={type:"gap",direction:"side_bottom",gap:v,offset:C};o.push(R);continue}}}},$5e=(e,t,n,r)=>{const i=vG(e,t,n,r);return d3(i,r).filter(o=>!(o.length===1&&Cn(o[0]))).flatMap(o=>I2(o,r))},$g=(e,t,n,r,i,o,s)=>{if(!td({app:n,event:r,selectedElements:e})||e.length===0&&t.length===0)return[];const a=Js.getReferenceSnapPoints();if(a)for(const l of t)for(const c of a){const u=c[0]-l[0],d=c[1]-l[1];Math.abs(u)<=s.x&&(Math.abs(u)<s.x&&(i.length=0),i.push({type:"point",points:[l,c],offset:u}),s.x=Math.abs(u)),Math.abs(d)<=s.y&&(Math.abs(d)<s.y&&(o.length=0),o.push({type:"point",points:[l,c],offset:d}),s.y=Math.abs(d))}},z5e=(e,t,n,r,i)=>{var v,_;const o=n.state,s=ot(e,o);if(!td({app:n,event:r,selectedElements:s})||s.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=Bn(t.x),t.y=Bn(t.y);const a=[],l=[],c=L3(o.zoom.value),u={x:c,y:c},d=I2(s,i,{dragOffset:t});$g(s,d,n,r,a,l,u),jM(s,t,n,r,a,l,u);const f={x:((v=a[0])==null?void 0:v.offset)??0,y:((_=l[0])==null?void 0:_.offset)??0};u.x=0,u.y=0,a.length=0,l.length=0;const g={x:Bn(t.x+f.x),y:Bn(t.y+f.y)};$g(s,I2(s,i,{dragOffset:g}),n,r,a,l,u),jM(s,g,n,r,a,l,u);const U=tx(a,l),b=H5e(s,g,[...a,...l].filter(E=>E.type==="gap"));return{snapOffset:f,snapLines:[...U,...b]}},Bn=e=>Math.round(e*10**6)/10**6,KM=e=>{const t=new Map;for(const n of e){const r=n.join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},tx=(e,t)=>{const n={},r={};if(e.length>0){for(const i of e)if(i.type==="point"){const o=Bn(i.points[0][0]);n[o]||(n[o]=[]),n[o].push(...i.points.map(s=>B(Bn(s[0]),Bn(s[1]))))}}if(t.length>0){for(const i of t)if(i.type==="point"){const o=Bn(i.points[0][1]);r[o]||(r[o]=[]),r[o].push(...i.points.map(s=>B(Bn(s[0]),Bn(s[1]))))}}return Object.entries(n).map(([i,o])=>({type:"points",points:KM(o.map(s=>B(Number(i),s[1])).sort((s,a)=>s[1]-a[1]))})).concat(Object.entries(r).map(([i,o])=>({type:"points",points:KM(o.map(s=>B(s[0],Number(i))).sort((s,a)=>s[0]-a[0]))})))},V5e=e=>{const t=new Map;for(const n of e){const r=n.points.flat().map(i=>[Bn(i)]).join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},H5e=(e,t,n)=>{const[r,i,o,s]=ex(e,t),a=[];for(const l of n){const[c,u,d,f]=l.gap.startBounds,[g,U,b,v]=l.gap.endBounds,_=Ty(wi(i,s),l.gap.overlap),E=Ty(wi(r,o),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(_){const w=(_[0]+_[1])/2;a.push({type:"gap",direction:"horizontal",points:[B(l.gap.startSide[0][0],w),B(r,w)]},{type:"gap",direction:"horizontal",points:[B(o,w),B(l.gap.endSide[0][0],w)]})}break}case"center_vertical":{if(E){const w=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[B(w,l.gap.startSide[0][1]),B(w,i)]},{type:"gap",direction:"vertical",points:[B(w,s),B(w,l.gap.endSide[0][1])]})}break}case"side_right":{if(_){const w=(_[0]+_[1])/2;a.push({type:"gap",direction:"horizontal",points:[B(d,w),B(g,w)]},{type:"gap",direction:"horizontal",points:[B(b,w),B(r,w)]})}break}case"side_left":{if(_){const w=(_[0]+_[1])/2;a.push({type:"gap",direction:"horizontal",points:[B(o,w),B(c,w)]},{type:"gap",direction:"horizontal",points:[B(d,w),B(g,w)]})}break}case"side_top":{if(E){const w=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[B(w,s),B(w,u)]},{type:"gap",direction:"vertical",points:[B(w,f),B(w,U)]})}break}case"side_bottom":{if(E){const w=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[B(w,f),B(w,U)]},{type:"gap",direction:"vertical",points:[B(w,v),B(w,i)]})}break}}}return V5e(a.map(l=>({...l,points:l.points.map(c=>B(Bn(c[0]),Bn(c[1])))})))},YM=(e,t,n,r,i,o)=>{var M,S;if(!td({event:r,selectedElements:e,app:n})||e.length===0||e.length===1&&!F5e(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[s,a,l,c]=jt(t);o&&(o.includes("e")?l+=i.x:o.includes("w")&&(s+=i.x),o.includes("n")?a+=i.y:o.includes("s")&&(c+=i.y));const u=[];if(o)switch(o){case"e":{u.push(B(l,a),B(l,c));break}case"w":{u.push(B(s,a),B(s,c));break}case"n":{u.push(B(s,a),B(l,a));break}case"s":{u.push(B(s,c),B(l,c));break}case"ne":{u.push(B(l,a));break}case"nw":{u.push(B(s,a));break}case"se":{u.push(B(l,c));break}case"sw":{u.push(B(s,c));break}}const d=L3(n.state.zoom.value),f={x:d,y:d},g=[],U=[];$g(t,u,n,r,g,U,f);const b={x:((M=g[0])==null?void 0:M.offset)??0,y:((S=U[0])==null?void 0:S.offset)??0};f.x=0,f.y=0,g.length=0,U.length=0;const[v,_,E,w]=jt(e).map(x=>Bn(x)),T=[B(v,_),B(v,w),B(E,_),B(E,w)];$g(e,T,n,r,g,U,f);const A=tx(g,U);return{snapOffset:b,snapLines:A}},W5e=(e,t,n,r,i,o)=>{var U,b;if(!td({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};const s=[B(r.x+i.x,r.y+i.y)],a=L3(t.state.zoom.value),l={x:a,y:a},c=[],u=[];$g([e],s,t,n,c,u,l);const d={x:((U=c[0])==null?void 0:U.offset)??0,y:((b=u[0])==null?void 0:b.offset)??0};l.x=0,l.y=0,c.length=0,u.length=0;const f=I2([e],o,{boundingBoxCorners:!0,omitCenter:!0});$g([e],f,t,n,c,u,l);const g=tx(c,u);return{snapOffset:d,snapLines:g}},G5e=(e,t,n,r,i)=>{if(!td({event:r,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};const o=OG(e,[],t.state,i),s=L3(t.state.zoom.value),a={x:s,y:s},l=[],c=[];for(const u of o){const d=I2([u],i);for(const f of d){const g=f[0]-n.x;Math.abs(g)<=Math.abs(a.x)&&(Math.abs(g)<Math.abs(a.x)&&(c.length=0),c.push({type:"pointer",points:[f,B(f[0],n.y)],direction:"vertical"}),a.x=g);const U=f[1]-n.y;Math.abs(U)<=Math.abs(a.y)&&(Math.abs(U)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[f,B(n.x,f[1])],direction:"horizontal"}),a.y=U)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}},X5e=e=>e===kr.rectangle||e===kr.ellipse||e===kr.diamond||e===kr.frame||e===kr.magicframe||e===kr.image||e===kr.text,Ur=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t],Ol={version:null,points:[],zoom:null},Be=class Be{constructor(t){H(this,"elementId");H(this,"selectedPointsIndices");H(this,"pointerDownState");H(this,"isDragging");H(this,"lastUncommittedPoint");H(this,"pointerOffset");H(this,"startBindingElement");H(this,"endBindingElement");H(this,"hoverPointIndex");H(this,"segmentMidPointHoveredCoords");H(this,"elbowed");this.elementId=t.id,Cg(t.points[0],B(0,0))||console.error("Linear element is not normalized",Error().stack),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=De(t)&&t.elbowed}static getElement(t,n){const r=n.get(t);return r||null}static handleBoxSelection(t,n,r,i){if(!n.editingLinearElement||!n.selectionElement)return!1;const{editingLinearElement:o}=n,{selectedPointsIndices:s,elementId:a}=o,l=Be.getElement(a,i);if(!l)return!1;const[c,u,d,f]=Ke(n.selectionElement,i),U=Be.getPointsGlobalCoordinates(l,i).reduce((b,v,_)=>((v[0]>=c&&v[0]<=d&&v[1]>=u&&v[1]<=f||t.shiftKey&&(s!=null&&s.includes(_)))&&b.push(_),b),[]).filter(b=>!(De(l)&&b!==0&&b!==l.points.length-1));r({editingLinearElement:{...o,selectedPointsIndices:U.length?U:null}})}static handlePointDragging(t,n,r,i,o,s,a){var U;if(!s)return!1;const{elementId:l}=s,c=a.getNonDeletedElementsMap(),u=Be.getElement(l,c);if(!u||De(u)&&!s.pointerDownState.lastClickedIsEndPoint&&s.pointerDownState.lastClickedPoint!==0)return!1;const d=De(u)?(U=s.selectedPointsIndices)==null?void 0:U.reduce((b,v)=>v===0?[0,b[1]]:[b[0],u.points.length-1],[!1,!1]).filter(b=>typeof b=="number"):s.selectedPointsIndices,f=De(u)?s.pointerDownState.lastClickedPoint>0?u.points.length-1:0:s.pointerDownState.lastClickedPoint,g=u.points[f];if(d&&g){if(Um(t)&&d.length===1&&u.points.length>1){const v=d[0],_=u.points[v===0?1:v-1],[E,w]=Be._getShiftLockedDelta(u,c,_,B(r,i),t[j.CTRL_OR_CMD]?null:n.getEffectiveGridSize());Be.movePoints(u,[{index:v,point:B(E+_[0],w+_[1]),isDragging:v===f}])}else{const v=Be.createPointAt(u,c,r-s.pointerOffset.x,i-s.pointerOffset.y,t[j.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),_=v[0]-g[0],E=v[1]-g[1];Be.movePoints(u,d.map(w=>{const T=w===f?Be.createPointAt(u,c,r-s.pointerOffset.x,i-s.pointerOffset.y,t[j.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):B(u.points[w][0]+_,u.points[w][1]+E);return{index:w,point:T,isDragging:w===f}}))}if(rt(u,c)&&mU(u,c,!1),Za(u,!1)){const v=[];d[0]===0&&v.push(ms(Be.getPointGlobalCoordinates(u,u.points[0],c)));const E=d[d.length-1];E===u.points.length-1&&v.push(ms(Be.getPointGlobalCoordinates(u,u.points[E],c))),v.length&&o(u,v)}return!0}return!1}static handlePointerUp(t,n,r,i){var g;const o=i.getNonDeletedElementsMap(),s=i.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:c,pointerDownState:u}=n,d=Be.getElement(a,o);if(!d)return n;const f={};if(c&&l){for(const U of l)if(U===0||U===d.points.length-1){bc(d.points,r.zoom.value)&&Be.movePoints(d,[{index:U,point:U===0?d.points[d.points.length-1]:d.points[0]}]);const b=gf(r)?bs(ms(Be.getPointAtIndexGlobalCoordinates(d,U,o)),s,o,r.zoom,De(d),De(d)):null;f[U===0?"startBindingElement":"endBindingElement"]=b}}return{...n,...f,selectedPointsIndices:c||t.shiftKey?!c&&t.shiftKey&&((g=u.prevSelectedPointsIndices)!=null&&g.includes(u.lastClickedPoint))?l&&l.filter(U=>U!==u.lastClickedPoint):l:l!=null&&l.includes(u.lastClickedPoint)?[u.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,r,i,o){if(De(t))return i>=0&&i<t.points.length?Xn(n,r)*o.value<Be.POINT_HANDLE_SIZE/2:!1;let s=Xn(n,r);return t.points.length>2&&t.roundness&&(s=Zpe(t,r)),s*o.value<Be.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,r,i,o){let s=u2(n,r);if(t.points.length>2&&t.roundness){const a=dH(t,t.points[i]);if(a){const l=qpe(t,t.points[i],.5);s=Be.getPointGlobalCoordinates(t,fH(a[0],a[1],a[2],a[3],l),o)}}return s}static getSegmentMidPointIndex(t,n,r,i){const o=Be.getElement(t.elementId,i);if(!o)return-1;const s=Be.getEditorMidPoints(o,i,n);let a=0;for(;a<s.length;){if(Be.arePointsEqual(r,s[a]))return a+1;a++}return-1}static handlePointerDown(t,n,r,i,o,s){var x;const a=n.state,l=s.getNonDeletedElementsMap(),c=s.getNonDeletedElements(),u={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!o)return u;const{elementId:d}=o,f=Be.getElement(d,l);if(!f)return u;const g=Be.getSegmentMidpointHitCoords(o,i,a,l);let U=null;if(g)U=Be.getSegmentMidPointIndex(o,a,g,l);else if(t.altKey&&a.editingLinearElement)return o.lastUncommittedPoint==null&&(fe(f,{points:[...f.points,Be.createPointAt(f,l,i.x,i.y,t[j.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),u.didAddPoint=!0),r.shouldCaptureIncrement(),u.linearElementEditor={...o,pointerDownState:{prevSelectedPointsIndices:o.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:g,index:U,added:!1}},selectedPointsIndices:[f.points.length-1],lastUncommittedPoint:null,endBindingElement:bs(i,c,l,n.state.zoom,o.elbowed)},u.didAddPoint=!0,u;const b=Be.getPointIndexUnderCursor(f,l,a.zoom,i.x,i.y);if(b>=0||g)u.hitElement=f;else{const{startBindingElement:C,endBindingElement:R}=o;gf(a)&&Za(f)&&U3(f,C,R,l,s)}const[v,_,E,w]=Ke(f,l),T=(v+E)/2,A=(_+w)/2,M=b>-1&&le(B(f.x+f.points[b][0],f.y+f.points[b][1]),B(T,A),f.angle),S=b>-1||t.shiftKey?t.shiftKey||(x=o.selectedPointsIndices)!=null&&x.includes(b)?j5e([...o.selectedPointsIndices||[],b]):[b]:null;return u.linearElementEditor={...o,pointerDownState:{prevSelectedPointsIndices:o.selectedPointsIndices,lastClickedPoint:b,lastClickedIsEndPoint:b===f.points.length-1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:g,index:U,added:!1}},selectedPointsIndices:S,pointerOffset:M?{x:i.x-M[0],y:i.y-M[1]}:{x:0,y:0}},u}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:Cg(t,n)}static handlePointerMove(t,n,r,i,o){const s=i.state;if(!s.editingLinearElement)return null;const{elementId:a,lastUncommittedPoint:l}=s.editingLinearElement,c=Be.getElement(a,o);if(!c)return s.editingLinearElement;const{points:u}=c,d=u[u.length-1];if(!t.altKey)return d===l&&Be.deletePoints(c,[u.length-1]),{...s.editingLinearElement,lastUncommittedPoint:null};let f;if(Um(t)&&u.length>=2){const g=u[u.length-2],[U,b]=Be._getShiftLockedDelta(c,o,g,B(n,r),t[j.CTRL_OR_CMD]?null:i.getEffectiveGridSize());f=B(U+g[0],b+g[1])}else f=Be.createPointAt(c,o,n-s.editingLinearElement.pointerOffset.x,r-s.editingLinearElement.pointerOffset.y,t[j.CTRL_OR_CMD]||De(c)?null:i.getEffectiveGridSize());return d===l?Be.movePoints(c,[{index:c.points.length-1,point:f}]):Be.addPoints(c,[{point:f}]),{...s.editingLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(t,n,r){const[i,o,s,a]=Ke(t,r),l=(i+s)/2,c=(o+a)/2,{x:u,y:d}=t;return le(B(u+n[0],d+n[1]),B(l,c),t.angle)}static getPointsGlobalCoordinates(t,n){const[r,i,o,s]=Ke(t,n),a=(r+o)/2,l=(i+s)/2;return t.points.map(c=>{const{x:u,y:d}=t;return le(B(u+c[0],d+c[1]),B(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,r){const i=n<0?t.points.length+n:n,[o,s,a,l]=Ke(t,r),c=(o+a)/2,u=(s+l)/2,d=t.points[i],{x:f,y:g}=t;return le(d?B(f+d[0],g+d[1]):B(f,g),B(c,u),t.angle)}static pointFromAbsoluteCoords(t,n,r){if(De(t))return B(n[0]-t.x,n[1]-t.y);const[i,o,s,a]=Ke(t,r),l=(i+s)/2,c=(o+a)/2,[u,d]=le(B(n[0],n[1]),B(l,c),-t.angle);return B(u-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,r,i,o){const s=Be.getPointsGlobalCoordinates(t,n);let a=s.length;for(;--a>-1;){const l=s[a];if(Xn(B(i,o),B(l[0],l[1]))*r.value<Be.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,r,i,o){const s=Ur(r,i,o),[a,l,c,u]=Ke(t,n),d=(a+c)/2,f=(l+u)/2,[g,U]=le(B(s[0],s[1]),B(d,f),-t.angle);return B(g-t.x,U-t.y)}static getNormalizedPoints(t){const{points:n}=t,r=n[0][0],i=n[0][1];return{points:n.map(o=>B(o[0]-r,o[1]-i)),x:t.x+r,y:t.y+i}}static normalizePoints(t){fe(t,Be.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){Yi(t.editingLinearElement,"Not currently editing a linear element");const{selectedPointsIndices:r,elementId:i}=t.editingLinearElement,o=Be.getElement(i,n);Yi(o,"The linear element does not exist in the provided Scene"),Yi(r!=null,"There are no selected points to duplicate");const{points:s}=o,a=[];let l=!1,c=-1;const u=s.reduce((d,f,g)=>{if(++c,d.push(f),r.includes(g)){const b=s[g+1];b||(l=!0),d.push(b?B((f[0]+b[0])/2,(f[1]+b[1])/2):B(f[0],f[1])),a.push(c+1),++c}return d},[]);if(fe(o,{points:u}),l){const d=o.points[o.points.length-1];Be.movePoints(o,[{index:o.points.length-1,point:B(d[0]+30,d[1]+30)}])}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:a}}}static deletePoints(t,n){let r=0,i=0;if(n.includes(0)){const a=t.points.find((l,c)=>!n.includes(c));a&&(r=a[0],i=a[1])}const s=t.points.reduce((a,l,c)=>(n.includes(c)||a.push(a.length?B(l[0]-r,l[1]-i):B(0,0)),a),[]);Be._updatePoints(t,s,r,i)}static addPoints(t,n){const o=[...t.points,...n.map(s=>s.point)];Be._updatePoints(t,o,0,0)}static movePoints(t,n,r){const{points:i}=t;let o=0,s=0;const a=n.find(({index:c})=>c===0);a&&(o=a.point[0]+i[a.index][0],s=a.point[1]+i[a.index][1]);const l=i.map((c,u)=>{const d=n.find(f=>f.index===u);if(d){if(d.index===0)return c;const f=d.point[0]-i[d.index][0],g=d.point[1]-i[d.index][1];return B(c[0]+f-o,c[1]+g-s)}return o||s?B(c[0]-o,c[1]-s):c});Be._updatePoints(t,l,o,s,r,{isDragging:n.reduce((c,u)=>c||u.isDragging===!0,!1)})}static shouldAddMidpoint(t,n,r,i){const o=Be.getElement(t.elementId,i);if(o&&De(o)||!o)return!1;const{segmentMidpoint:s}=t.pointerDownState;if(s.added||s.value===null||s.index===null||t.pointerDownState.origin===null)return!1;const a=t.pointerDownState.origin,l=Xn(B(a.x,a.y),B(n.x,n.y));return!(!r.editingLinearElement&&l<Kd/r.zoom.value)}static addMidpoint(t,n,r,i,o){const s=Be.getElement(t.elementId,o);if(!s)return;const{segmentMidpoint:a}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},c=Be.createPointAt(s,o,n.x,n.y,i&&!De(s)?r.getEffectiveGridSize():null),u=[...s.points.slice(0,a.index),c,...s.points.slice(a.index)];return fe(s,{points:u}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:a.index},l.selectedPointsIndices=[a.index],l}static _updatePoints(t,n,r,i,o,s){if(De(t)){const a={};(o==null?void 0:o.startBinding)!==void 0&&(a.startBinding=o.startBinding!==null&&xy(o.startBinding)?o.startBinding:null),(o==null?void 0:o.endBinding)!==void 0&&(a.endBinding=o.endBinding!==null&&xy(o.endBinding)?o.endBinding:null),a.points=Array.from(n),a.points[0]=Ag(a.points[0],Gr(r,i)),a.points[a.points.length-1]=Ag(a.points[a.points.length-1],Gr(r,i)),fe(t,a,!0,{isDragging:s==null?void 0:s.isDragging})}else{const a=GM(t,n),l=GM(t,t.points),c=(a[0]+a[2])/2,u=(a[1]+a[3])/2,d=(l[0]+l[2])/2,f=(l[1]+l[3])/2,g=d-c,U=f-u,b=le(B(r,i),B(g,U),t.angle);fe(t,{...o,points:n,x:t.x+b[0],y:t.y+b[1]})}}static _getShiftLockedDelta(t,n,r,i,o){const s=Be.getPointGlobalCoordinates(t,r,n);if(De(t))return[i[0]-s[0],i[1]-s[1]];const[a,l]=Ur(i[0],i[1],o),{width:c,height:u}=Aw(s[0],s[1],a,l);return le(B(c,u),B(0,0),-t.angle)}static moveFixedSegment(t,n,r,i,o){const s=Be.getElement(t.elementId,o);if(!s||!De(s))return t;if(n&&n>0&&n<s.points.length){const a=Jl(jf(sn(s.points[n],s.points[n-1]))),l=(s.fixedSegments??[]).reduce((f,g)=>(f[g.index]=g,f),{});l[n]={index:n,start:B(a?s.points[n-1][0]:r-s.x,a?i-s.y:s.points[n-1][1]),end:B(a?s.points[n][0]:r-s.x,a?i-s.y:s.points[n][1])};const c=Object.values(l).sort((f,g)=>f.index-g.index),u=c.map(f=>f.index).reduce((f,g)=>g<n?f+1:f,0);fe(s,{fixedSegments:c});const d=B(s.x+(s.fixedSegments[u].start[0]+s.fixedSegments[u].end[0])/2,s.y+(s.fixedSegments[u].start[1]+s.fixedSegments[u].end[1])/2);return{...t,segmentMidPointHoveredCoords:d,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:s.fixedSegments[u].index,value:d}}}}return t}static deleteFixedSegment(t,n){var r;fe(t,{fixedSegments:(r=t.fixedSegments)==null?void 0:r.filter(i=>i.index!==n)}),fe(t,{},!0)}};H(Be,"POINT_HANDLE_SIZE",10),H(Be,"getEditorMidPoints",(t,n,r)=>{const i=rt(t,n);return!De(t)&&!r.editingLinearElement&&t.points.length>2&&!i?[]:(Ol.version===t.version&&Ol.zoom===r.zoom.value||Be.updateEditorMidPointsCache(t,n,r),Ol.points)}),H(Be,"updateEditorMidPointsCache",(t,n,r)=>{const i=Be.getPointsGlobalCoordinates(t,n);let o=0;const s=[];for(;o<i.length-1;){if(Be.isSegmentTooShort(t,t.points[o],t.points[o+1],o,r.zoom)){s.push(null),o++;continue}const a=Be.getSegmentMidPoint(t,i[o],i[o+1],o+1,n);s.push(a),o++}Ol.points=s,Ol.version=t.version,Ol.zoom=r.zoom.value}),H(Be,"getSegmentMidpointHitCoords",(t,n,r,i)=>{const{elementId:o}=t,s=Be.getElement(o,i);if(!s)return null;const a=Be.getPointIndexUnderCursor(s,i,r.zoom,n.x,n.y);if(!De(s)&&a>=0||Be.getPointsGlobalCoordinates(s,i).length>=3&&!r.editingLinearElement&&!De(s))return null;const c=(Be.POINT_HANDLE_SIZE+1)/r.zoom.value,u=t.segmentMidPointHoveredCoords;if(u&&Xn(B(u[0],u[1]),B(n.x,n.y))<=c)return u;let d=0;const f=Be.getEditorMidPoints(s,i,r);for(;d<f.length;){if(f[d]!==null&&Xn(f[d],B(n.x,n.y))<=c)return f[d];d++}return null}),H(Be,"getBoundTextElementPosition",(t,n,r)=>{const i=Be.getPointsGlobalCoordinates(t,r);i.length<2&&fe(n,{isDeleted:!0});let o=0,s=0;if(t.points.length%2===1){const a=Math.floor(t.points.length/2),l=Be.getPointGlobalCoordinates(t,t.points[a],r);o=l[0]-n.width/2,s=l[1]-n.height/2}else{const a=t.points.length/2-1;let l=Ol.points[a];t.points.length===2&&(l=u2(i[0],i[1])),(!l||Ol.version!==t.version)&&(l=Be.getSegmentMidPoint(t,i[a],i[a+1],a+1,r)),o=l[0]-n.width/2,s=l[1]-n.height/2}return{x:o,y:s}}),H(Be,"getMinMaxXYWithBoundText",(t,n,r,i)=>{let[o,s,a,l]=r;const c=(o+a)/2,u=(s+l)/2,{x:d,y:f}=Be.getBoundTextElementPosition(t,i,n),g=d+i.width,U=f+i.height,b=B(c,u),v=le(B(o,s),b,t.angle),_=le(B(a,s),b,t.angle),E=le(B(d,f),b,-t.angle),w=le(B(g,f),b,-t.angle),T=le(B(d,U),b,-t.angle),A=le(B(g,U),b,-t.angle);return v[0]<_[0]&&v[1]>=_[1]?(o=Math.min(o,T[0]),a=Math.max(a,Math.max(w[0],A[0])),s=Math.min(s,E[1]),l=Math.max(l,A[1])):v[0]>=_[0]&&v[1]>_[1]?(o=Math.min(o,A[0]),a=Math.max(a,Math.max(E[0],w[0])),s=Math.min(s,T[1]),l=Math.max(l,w[1])):v[0]>=_[0]?(o=Math.min(o,w[0]),a=Math.max(a,T[0]),s=Math.min(s,A[1]),l=Math.max(l,E[1])):v[1]<=_[1]&&(o=Math.min(o,Math.min(w[0],E[0])),a=Math.max(a,A[0]),s=Math.min(s,w[1]),l=Math.max(l,T[1])),[o,s,a,l,c,u]}),H(Be,"getElementAbsoluteCoords",(t,n,r=!1)=>{let i,o,s,a,l;if(t.points.length<2||!Sn.get(t)){const{minX:f,minY:g,maxX:U,maxY:b}=t.points.reduce((v,[_,E])=>(v.minY=Math.min(v.minY,E),v.minX=Math.min(v.minX,_),v.maxX=Math.max(v.maxX,_),v.maxY=Math.max(v.maxY,E),v),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});o=f+t.x,s=g+t.y,a=U+t.x,l=b+t.y}else{const f=Sn.generateElementShape(t,null),g=pU(f[0]),[U,b,v,_]=M3(g);o=U+t.x,s=b+t.y,a=v+t.x,l=_+t.y}const c=(o+a)/2,u=(s+l)/2;if(i=[o,s,a,l,c,u],!r)return i;const d=rt(t,n);return d&&(i=Be.getMinMaxXYWithBoundText(t,n,[o,s,a,l],d)),i});let Ce=Be;const j5e=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,r)=>n-r),t.length?t:null},zg={},qy=(e,t)=>{const n=zg[e]||(zg[e]={height:t});return n.height=t,n},EG=e=>{zg[e]&&delete zg[e]},K5e=e=>{var t;return((t=zg[e])==null?void 0:t.height)??null},Zi=(e,t,n,r=!0)=>{let i;const o={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:(t==null?void 0:t.angle)??e.angle};o.text=e.text,(t||!e.autoResize)&&(i=t?_c(t,e):e.width,o.text=mh(e.originalText,an(e),i));const s=ki(o.text,an(e),e.lineHeight);if(e.autoResize&&(o.width=s.width),o.height=s.height,t){const a=N3(t,e),l=_c(t,e);if(!st(t)&&s.height>a){const f=th(s.height,t.type);fe(t,{height:f},r),qy(t.id,f)}if(s.width>l){const f=th(s.width,t.type);fe(t,{width:f},r)}const c={...e,...o},{x:u,y:d}=D3(t,c,n);o.x=u,o.y=d}fe(e,o,r)},_G=(e,t,n)=>{const r=He(e);t.forEach(i=>{const o=n.get(i.id),s=Ec(i);if(s){const a=n.get(s);if(a){const l=r.get(o);l&&fe(l,{boundElements:(i.boundElements||[]).filter(u=>u.id!==a&&u.id!==s).concat({type:"text",id:a})});const c=r.get(a);c&&Ae(c)&&fe(c,{containerId:l?o:null})}}})},mU=(e,t,n,r=!1)=>{if(!Ec(e))return;EG(e.id);const o=rt(e,t);if(o&&o.text){if(!e)return;let s=o.text,a=o.height,l=o.width;const c=_c(e,o),u=N3(e,o);let d=e.height;if(r||n!=="n"&&n!=="s"){s&&(s=mh(o.originalText,an(o),c));const f=ki(s,an(o),o.lineHeight);a=f.height,l=f.width}if(a>u){d=th(a,e.type);const f=d-e.height,g=!st(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-f:e.y;fe(e,{height:d,y:g})}fe(o,{text:s,width:l,height:a}),st(e)||fe(o,D3(e,o,t))}},D3=(e,t,n)=>{if(st(e))return Ce.getBoundTextElementPosition(e,t,n);const r=Y5e(e),i=N3(e,t),o=_c(e,t);let s,a;return t.verticalAlign===Do.TOP?a=r.y:t.verticalAlign===Do.BOTTOM?a=r.y+(i-t.height):a=r.y+(i/2-t.height/2),t.textAlign===s2.LEFT?s=r.x:t.textAlign===s2.RIGHT?s=r.x+(o-t.width):s=r.x+(o/2-t.width/2),{x:s,y:a}},Ec=e=>{var t,n,r;return(t=e==null?void 0:e.boundElements)!=null&&t.length&&((r=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(i=>i.type==="text"))==null?void 0:r.id)||null},rt=(e,t)=>{if(!e)return null;const n=Ec(e);return n&&t.get(n)||null},Zr=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,zE=(e,t,n)=>{if(!st(e))return{x:e.x+e.width/2,y:e.y+e.height/2};const r=Ce.getPointsGlobalCoordinates(e,n);if(r.length%2===1){const s=Math.floor(e.points.length/2),a=Ce.getPointGlobalCoordinates(e,e.points[s],n);return{x:a[0],y:a[1]}}const i=e.points.length/2-1;let o=Ce.getEditorMidPoints(e,n,t)[i];return o||(o=Ce.getSegmentMidPoint(e,r[i],r[i+1],i+1,n)),{x:o[0],y:o[1]}},Y5e=e=>{let t=vr,n=vr;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},Z5e=(e,t)=>!t||st(t)?e.angle:t.angle,q5e=(e,t)=>e.some(n=>{if(Cn(n)){const r=Zr(n,t);return!st(r)}return!1}),Q5e=(e,t)=>e.some(n=>{if(Cn(n)){const r=Zr(n,t);return!st(r)}return Ae(n)}),J5e=new Set(["rectangle","ellipse","diamond","arrow"]),ebe=e=>J5e.has(e.type),th=(e,t)=>{e=Math.ceil(e);const n=vr*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},_c=(e,t)=>{const{width:n}=e;if(st(e)){const r=((t==null?void 0:t.fontSize)??Pc)*$ae;return Math.max(Bae*n,r)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-vr*2:e.type==="diamond"?Math.round(n/2)-vr*2:n-vr*2},N3=(e,t)=>{const{height:n}=e;return st(e)?n-vr*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-vr*2:e.type==="diamond"?Math.round(n/2)-vr*2:n-vr*2},wG=(e,t=`

`)=>e.reduce((r,i)=>(Ae(i)&&r.push(i.text),r),[]).join(t),nx=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:r,reconciliationContext:i})=>{const o=[],s=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(const[l,c]of a.entries()){const u=a[l-1],d=a[l+1];if(Cw(c,u,d)||o.push(`Fractional indices invariant has been compromised: "${s(e[l-1])}", "${s(e[l])}", "${s(e[l+1])}"`),n&&Ps(e[l])){const f=e[l],g=rt(f,He(e));g&&g.index<=f.index&&o.push(`Fractional indices invariant for bound elements has been compromised: "${s(g)}", "${s(f)}"`)}}if(o.length){const l=new qce,c=[];if(i&&(c.push("Additional reconciliation context:"),c.push(i.localElements.map(u=>s(u))),c.push(i.remoteElements.map(u=>s(u)))),r||console.error(o.join(`

`),l.stack,e.map(u=>s(u)),...c),t)throw l}},IG=e=>e.sort((t,n)=>ZM(t)&&ZM(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),ul=(e,t)=>{try{const n=tbe(e,t),r=TG(e,n),i=e.map(o=>r.has(o)?{...o,...r.get(o)}:o);nx(i,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(const[o,s]of r)fe(o,s,!1)}catch{wc(e)}return e},wc=e=>{const t=nbe(e),n=TG(e,t);for(const[r,i]of n)fe(r,i,!1);return e},tbe=(e,t)=>{const n=[];let r=0;for(;r<e.length;)if(t.has(e[r].id)){const i=[r-1,r];for(;++r<e.length&&t.has(e[r].id);)i.push(r);i.push(r),n.push(i)}else r++;return n},nbe=e=>{const t=[];let n,r,i=-1,o=0;const s=c=>{var f;const u=e[i]?e[i].index:void 0,d=(f=e[c-1])==null?void 0:f.index;return!u&&d||u&&d&&d>u?[d,c-1]:[u,i]},a=c=>{var f;const u=e[o]?e[o].index:void 0;if(u&&c<o)return[u,o];let d=o;for(;++d<e.length;){const g=(f=e[d])==null?void 0:f.index;if(!u&&g||u&&g&&g>u)return[g,d]}return[void 0,d]};let l=0;for(;l<e.length;){const c=e[l].index;if([n,i]=s(l),[r,o]=a(l),Cw(c,n,r))l++;else{const u=[i,l];for(;++l<e.length;){const d=e[l].index,[f,g]=s(l),[U,b]=a(l);if(Cw(d,f,U))break;[n,i]=[f,g],[r,o]=[U,b],u.push(l)}u.push(o),t.push(u)}}return t},Cw=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,TG=(e,t)=>{var r,i;const n=new Map;for(const o of t){const s=o.shift(),a=o.pop(),l=X_((r=e[s])==null?void 0:r.index,(i=e[a])==null?void 0:i.index,o.length);for(let c=0;c<o.length;c++){const u=e[o[c]];n.set(u,{index:l[c]})}}return n},ZM=e=>!!e.index,qM=e=>{const t=new Map,n=[];for(const r of e)r.isDeleted||(n.push(r),t.set(r.id,r));return{elementsMap:t,elements:n}},rbe=ql(e=>{window!=null&&window.DEBUG_FRACTIONAL_INDICES&&nx(e,{shouldThrow:P$.TEST==="production",includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),ibe=e=>{const t=["includeBoundTextElement","includeElementsInFrames"];let n="";for(const r of t)n+=`${r}:${e[r]?"1":"0"}`;return n},QM=e=>typeof e=="string",lf=class lf{constructor(){H(this,"callbacks",new Set);H(this,"nonDeletedElements",[]);H(this,"nonDeletedElementsMap",Ho(new Map));H(this,"elements",[]);H(this,"nonDeletedFramesLikes",[]);H(this,"frames",[]);H(this,"elementsMap",Ho(new Map));H(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map});H(this,"sceneNonce");H(this,"insertElement",t=>{const n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)});H(this,"insertElements",t=>{var r;if(!t.length)return;const n=(r=t[0])!=null&&r.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)});H(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null);H(this,"getElementsFromId",t=>{const n=this.getNonDeletedElementsMap(),r=n.get(t);return r?[r]:Tn(n,t)})}static mapElementToScene(t,n){QM(t)?this.sceneMapById.set(t,n):(this.sceneMapByElement.set(t,n),this.sceneMapById.set(t.id,n))}static getScene(t){return QM(t)?this.sceneMapById.get(t)||null:this.sceneMapByElement.get(t)||null}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){const n=ibe(t),r=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===r&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){const o=this.selectedElementsCache.cache.get(n);if(o)return o}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();const i=ot(r,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,i)),i}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){const n=this.getElement(t);return n&&Rw(n)?n:null}mapElements(t){let n=!1;const r=this.elements.map(i=>{const o=t(i);return o!==i&&(n=!0),o});return n&&this.replaceAllElements(r),n}replaceAllElements(t){const n=t instanceof Array?t:Array.from(t.values()),r=[];rbe(n),this.elements=wc(n),this.elementsMap.clear(),this.elements.forEach(o=>{We(o)&&r.push(o),this.elementsMap.set(o.id,o),lf.mapElementToScene(o,this)});const i=qM(this.elements);this.nonDeletedElements=i.elements,this.nonDeletedElementsMap=i.elementsMap,this.frames=r,this.nonDeletedFramesLikes=qM(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=al();for(const t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),lf.sceneMapById.forEach((t,n)=>{t===this&&lf.sceneMapById.delete(n)}),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const r=[...this.elements.slice(0,n),t,...this.elements.slice(n)];ul(r,He([t])),this.replaceAllElements(r)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const r=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];ul(r,He(t)),this.replaceAllElements(r)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}};H(lf,"sceneMapByElement",new WeakMap),H(lf,"sceneMapById",new Map);let ya=lf;class obe{constructor(t){H(this,"content",[]);this.scoreFunction=t}sinkDown(t){const n=this.content[t];for(;t>0;){const r=(t+1>>1)-1,i=this.content[r];if(this.scoreFunction(n)<this.scoreFunction(i))this.content[r]=n,this.content[t]=i,t=r;else break}}bubbleUp(t){const n=this.content.length,r=this.content[t],i=this.scoreFunction(r);for(;;){const o=t+1<<1,s=o-1;let a=null,l=0;if(s<n){const c=this.content[s];l=this.scoreFunction(c),l<i&&(a=s)}if(o<n){const c=this.content[o];this.scoreFunction(c)<(a===null?i:l)&&(a=o)}if(a!==null)this.content[t]=this.content[a],this.content[a]=r,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;const t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;const n=this.content.indexOf(t),r=this.content.pop();n<this.content.length&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}}const rx=1,Jt=40,sbe=(e,t)=>{const n=e.fixedSegments?e.fixedSegments.slice():null;if(n){const r=[];e.points.map(s=>B(e.x+s[0],e.y+s[1])).forEach((s,a,l)=>{if(a<2)return r.push(s);const c=h2(s,l[a-1]),u=h2(l[a-1],l[a-2]);if(Rn(c,u)){const d=(n==null?void 0:n.findIndex(g=>g.index===a-1))??-1,f=(n==null?void 0:n.findIndex(g=>g.index===a))??-1;f!==-1&&(n[f].start=B(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),r.splice(-1,1),n.forEach(g=>{g.index>a-1&&(g.index-=1)})}return r.push(s)});const i=[];r.forEach((s,a,l)=>{if(a<3)return i.push(s);if(Xn(l[a-2],l[a-1])<rx){const c=(n==null?void 0:n.findIndex(f=>f.index===a-2))??-1,u=(n==null?void 0:n.findIndex(f=>f.index===a-1))??-1;u!==-1&&n.splice(u,1),c!==-1&&n.splice(c,1),i.splice(-2,2),n.forEach(f=>{f.index>a-2&&(f.index-=2)});const d=Kl(s,l[a-1]);return i.push(B(d?s[0]:l[a-2][0],d?l[a-2][1]:s[1]))}i.push(s)});const o=n.filter(s=>s.index!==1&&s.index!==i.length-1);return o.length===0?nd(sx(ax(ox(e,ix(e,t,i.map(s=>B(s[0]-e.x,s[1]-e.y))))??[])),o,null,null):nd(i,o,e.startIsSpecial,e.endIsSpecial)}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},abe=(e,t,n)=>{var S,x;const r=t.map(C=>C.index),o=(((S=e.fixedSegments)==null?void 0:S.map(C=>C.index))??[]).findIndex(C=>!r.includes(C));if(o===-1||!((x=e.fixedSegments)!=null&&x[o]))return{points:e.points};const s=e.fixedSegments[o].index,a=e.fixedSegments[o-1],l=e.fixedSegments[o+1],c=e.x+(a?a.end[0]:0),u=e.y+(a?a.end[1]:0),{startHeading:d,endHeading:f,startGlobalPoint:g,endGlobalPoint:U,hoveredStartElement:b,hoveredEndElement:v,..._}=ix({x:c,y:u,startBinding:a?null:e.startBinding,endBinding:l?null:e.endBinding,startArrowhead:null,endArrowhead:null},n,[B(0,0),B(e.x+((l==null?void 0:l.start[0])??e.points[e.points.length-1][0])-c,e.y+((l==null?void 0:l.start[1])??e.points[e.points.length-1][1])-u)],{isDragging:!1}),{points:E}=nd(sx(ax(ox(e,{startHeading:d,endHeading:f,startGlobalPoint:g,endGlobalPoint:U,hoveredStartElement:b,hoveredEndElement:v,..._})??[])),t,null,null),w=[];if(a)for(let C=0;C<a.index;C++)w.push(B(e.x+e.points[C][0],e.y+e.points[C][1]));if(E.forEach(C=>{w.push(B(e.x+(a?a.end[0]:0)+C[0],e.y+(a?a.end[1]:0)+C[1]))}),l)for(let C=l.index;C<e.points.length;C++)w.push(B(e.x+e.points[C][0],e.y+e.points[C][1]));const T=((l==null?void 0:l.index)??e.points.length)-((a==null?void 0:a.index)??0)-1,A=t.map(C=>C.index>s?{...C,index:C.index-T+(E.length-1)}:C),M=w.flatMap((C,R)=>{const O=w[R-1],F=w[R+1];if(O&&F){const N=h2(C,O),J=h2(F,C);if(Rn(N,J))return A.forEach(K=>{K.index>R&&(K.index-=1)}),[];if(Rn(N,gH(J)))return A.forEach(K=>{K.index>R&&(K.index+=1)}),[C,C]}return[C]});return nd(M,A,!1,!1)},lbe=(e,t,n,r,i,o)=>{var A,M;const s=t.map((S,x)=>e.fixedSegments==null||e.fixedSegments[x]===void 0||e.fixedSegments[x].index!==S.index||(S.start[0]!==e.fixedSegments[x].start[0]&&S.end[0]!==e.fixedSegments[x].end[0])!=(S.start[1]!==e.fixedSegments[x].start[1]&&S.end[1]!==e.fixedSegments[x].end[1])?x:null).filter(S=>S!==null).shift();if(s==null)return{points:e.points};const a=((A=e.fixedSegments)==null?void 0:A.findIndex(S=>S.index===1))??-1,l=((M=e.fixedSegments)==null?void 0:M.findIndex(S=>S.index===e.points.length-1))??-1,c=Xn(t[s].start,t[s].end),u=c<Jt+5;if(a===-1&&t[s].index===1&&i){const S=Jl(n),C=(S?Rn(n,Vn):Rn(n,jr))?u?c/2:Jt:u?-c/2:-Jt;t[s].start=B(t[s].start[0]+(S?C:0),t[s].start[1]+(S?0:C))}if(l===-1&&t[s].index===e.points.length-1&&o){const S=Jl(r),C=(S?Rn(r,Vn):Rn(r,jr))?u?c/2:Jt:u?-c/2:-Jt;t[s].end=B(t[s].end[0]+(S?C:0),t[s].end[1]+(S?0:C))}const d=t.map(S=>({...S,start:B(e.x+S.start[0],e.y+S.start[1]),end:B(e.x+S.end[0],e.y+S.end[1])})),f=e.points.map((S,x)=>B(e.x+S[0],e.y+S[1])),g=d[s].index-1,U=d[s].index,b=d[s].start,v=d[s].end,_=f[g-1]&&!Cg(f[g],f[g-1])?Kl(f[g-1],f[g]):void 0,E=f[U+1]&&!Cg(f[U],f[U+1])?Kl(f[U+1],f[U]):void 0;if(_!==void 0){const S=_?1:0;f[g-1][S]=b[S]}if(f[g]=b,f[U]=v,E!==void 0){const S=E?1:0;f[U+1][S]=v[S]}const w=d.findIndex(S=>S.index===g);if(w!==-1){const S=Kl(d[w].end,d[w].start)?1:0;d[w].start[S]=b[S],d[w].end=b}const T=d.findIndex(S=>S.index===U+1);if(T!==-1){const S=Kl(d[T].end,d[T].start)?1:0;d[T].end[S]=v[S],d[T].start=v}if(a===-1&&g===0){const S=i?Jl(n):Kl(f[1],f[0]);f.unshift(B(S?b[0]:e.x+e.points[0][0],S?e.y+e.points[0][1]:b[1])),i&&f.unshift(B(e.x+e.points[0][0],e.y+e.points[0][1]));for(const x of d)x.index+=i?2:1}if(l===-1&&U===e.points.length-1){const S=Jl(r);f.push(B(S?v[0]:e.x+e.points[e.points.length-1][0],S?e.y+e.points[e.points.length-1][1]:v[1])),o&&f.push(B(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return nd(f,d.map(S=>({...S,start:B(S.start[0]-e.x,S.start[1]-e.y),end:B(S.end[0]-e.x,S.end[1]-e.y)})),!1,!1)},cbe=(e,t,n,r,i,o,s,a,l)=>{let c=e.startIsSpecial??null,u=e.endIsSpecial??null;const d=t.map((v,_)=>_===0||_===t.length-1?B(e.x+v[0],e.y+v[1]):B(e.x+e.points[_][0],e.y+e.points[_][1])),f=n.map(v=>({...v,start:B(e.x+(v.start[0]-t[0][0]),e.y+(v.start[1]-t[0][1])),end:B(e.x+(v.end[0]-t[0][0]),e.y+(v.end[1]-t[0][1]))})),g=[],U=2+(c?1:0),b=2+(u?1:0);for(;g.length+U<d.length-b;)g.push(d[g.length+U]);{const v=d[c?2:1],_=d[c?3:2],E=Jl(r),w=Jl(jf(sn(v,_)));if(a&&E===w){const T=E?Rn(r,Vn):Rn(r,jr);if(g.unshift(B(w?o[0]+(T?Jt:-Jt):_[0],w?_[1]:o[1]+(T?Jt:-Jt))),g.unshift(B(E?o[0]+(T?Jt:-Jt):o[0],E?o[1]:o[1]+(T?Jt:-Jt))),!c){c=!0;for(const A of f)A.index>1&&(A.index+=1)}}else if(g.unshift(B(w?o[0]:v[0],w?v[1]:o[1])),c){c=!1;for(const T of f)T.index>1&&(T.index-=1)}g.unshift(o)}{const v=d[d.length-(u?3:2)],_=d[d.length-(u?4:3)],E=Jl(i),w=Kl(_,v);if(l&&E===w){const T=E?Rn(i,Vn):Rn(i,jr);g.push(B(w?s[0]+(T?Jt:-Jt):_[0],w?_[1]:s[1]+(T?Jt:-Jt))),g.push(B(E?s[0]+(T?Jt:-Jt):s[0],E?s[1]:s[1]+(T?Jt:-Jt))),u||(u=!0)}else g.push(B(w?s[0]:v[0],w?v[1]:s[1])),u&&(u=!1)}return g.push(s),nd(g,f.map(({index:v})=>({index:v,start:g[v-1],end:g[v]})).map(v=>({...v,start:B(v.start[0]-o[0],v.start[1]-o[1]),end:B(v.end[0]-o[0],v.end[1]-o[1])})),c,u)},hn=1e6,xG=(e,t,n,r)=>{var g,U,b,v,_,E,w,T,A,M,S,x,C,R,O,F,N,J,K,ne,ee,q,Z,te,pe;if(e.points.length<2)return{points:n.points??e.points};if((e.x<-hn||e.x>hn||e.y<-hn||e.y>hn||e.x+(((b=(U=n==null?void 0:n.points)==null?void 0:U[((g=n==null?void 0:n.points)==null?void 0:g.length)-1])==null?void 0:b[0])??0)<-hn||e.x+(((E=(_=n==null?void 0:n.points)==null?void 0:_[((v=n==null?void 0:n.points)==null?void 0:v.length)-1])==null?void 0:E[0])??0)>hn||e.y+(((A=(T=n==null?void 0:n.points)==null?void 0:T[((w=n==null?void 0:n.points)==null?void 0:w.length)-1])==null?void 0:A[1])??0)<-hn||e.y+(((x=(S=n==null?void 0:n.points)==null?void 0:S[((M=n==null?void 0:n.points)==null?void 0:M.length)-1])==null?void 0:x[1])??0)>hn||e.x+(((O=(R=e==null?void 0:e.points)==null?void 0:R[((C=e==null?void 0:e.points)==null?void 0:C.length)-1])==null?void 0:O[0])??0)<-hn||e.x+(((J=(N=e==null?void 0:e.points)==null?void 0:N[((F=e==null?void 0:e.points)==null?void 0:F.length)-1])==null?void 0:J[0])??0)>hn||e.y+(((ee=(ne=e==null?void 0:e.points)==null?void 0:ne[((K=e==null?void 0:e.points)==null?void 0:K.length)-1])==null?void 0:ee[1])??0)<-hn||e.y+(((te=(Z=e==null?void 0:e.points)==null?void 0:Z[((q=e==null?void 0:e.points)==null?void 0:q.length)-1])==null?void 0:te[1])??0)>hn)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=dt(e.x,-hn,hn),e.y=dt(e.y,-hn,hn),n.points&&(n.points=n.points.map(([Ie,Se])=>B(dt(Ie,-hn,hn),dt(Se,-hn,hn)))),t.size===0&&n.points&&bbe(n.points))return nd(n.points.map(Ie=>B(e.x+Ie[0],e.y+Ie[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);const i=n.points?n.points&&n.points.length===2?e.points.map((Ie,Se)=>Se===0?n.points[0]:Se===e.points.length-1?n.points[1]:Ie):n.points.slice():e.points.slice(),{startHeading:o,endHeading:s,startGlobalPoint:a,endGlobalPoint:l,hoveredStartElement:c,hoveredEndElement:u,...d}=ix({x:e.x,y:e.y,startBinding:typeof n.startBinding<"u"?n.startBinding:e.startBinding,endBinding:typeof n.endBinding<"u"?n.endBinding:e.endBinding,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead},t,i,r),f=n.fixedSegments??e.fixedSegments??[];return!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?sbe(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding?{}:f.length===0?nd(sx(ax(ox(e,{startHeading:o,endHeading:s,startGlobalPoint:a,endGlobalPoint:l,hoveredStartElement:c,hoveredEndElement:u,...d})??[])),f,null,null):(((pe=e.fixedSegments)==null?void 0:pe.length)??0)>f.length?abe(e,f,t):n.points?n.points&&n.fixedSegments?n:cbe(e,i,f,o,s,a,l,c,u):lbe(e,f,o,s,c,u)},ix=(e,t,n,r)=>{var S,x;const i=Ag(n[0],Gr(e.x,e.y)),o=Ag(n[n.length-1],Gr(e.x,e.y)),s=e.startBinding&&eL(e.startBinding.elementId,t),a=e.endBinding&&eL(e.endBinding.elementId,t),[l,c]=r!=null&&r.isDragging?Ube(i,o,t,r==null?void 0:r.zoom):[s,a],u=tL((S=e.startBinding)==null?void 0:S.fixedPoint,i,o,t,s,l,r==null?void 0:r.isDragging),d=tL((x=e.endBinding)==null?void 0:x.fixedPoint,o,i,t,a,c,r==null?void 0:r.isDragging),f=rL(u,d,t,l,i),g=rL(d,u,t,c,o),U=[u[0]-2,u[1]-2,u[0]+2,u[1]+2],b=[d[0]-2,d[1]-2,d[0]+2,d[1]+2],v=l?ja(l,nu(f,e.startArrowhead?_n*6:_n*2,1)):U,_=c?ja(c,nu(g,e.endArrowhead?_n*6:_n*2,1)):b,E=Ng(u,c?ja(c,nu(g,Jt,Jt)):b)||Ng(d,l?ja(l,nu(f,Jt,Jt)):U),w=SG(E?[U,b]:[v,_]),T=fbe(E?U:v,E?b:_,w,E?nu(f,!l&&!c?0:Jt,0):nu(f,!l&&!c?0:Jt-(e.startArrowhead?_n*6:_n*2),Jt),E?nu(g,!l&&!c?0:Jt,0):nu(g,!l&&!c?0:Jt-(e.endArrowhead?_n*6:_n*2),Jt),E,l&&ja(l),c&&ja(c)),A=JM(T[0],f,u),M=JM(T[1],g,d);return{dynamicAABBs:T,startDonglePosition:A,startGlobalPoint:u,startHeading:f,endDonglePosition:M,endGlobalPoint:d,endHeading:g,commonBounds:w,hoveredStartElement:l,hoveredEndElement:c,boundsOverlap:E,startElementBounds:v,endElementBounds:_}},ox=(e,t)=>{const{dynamicAABBs:n,startDonglePosition:r,startGlobalPoint:i,startHeading:o,endDonglePosition:s,endGlobalPoint:a,endHeading:l,commonBounds:c,hoveredEndElement:u}=t,d=hbe(n,r||i,o,s||a,l,c),f=r&&T5(r,d),g=s&&T5(s,d),U=T5(a,d);U&&u&&(U.closed=!0);const b=T5(i,d);b&&e.startBinding&&(b.closed=!0);const v=f&&g&&(Ng(f.pos,n[1])||Ng(g.pos,n[0])),_=ube(f||b,g||U,d,o||Vn,l||Vn,v?[]:n);if(_){const E=_.map(w=>[w.pos[0],w.pos[1]]);return f&&E.unshift(i),g&&E.push(a),E}return null},nu=(e,t,n)=>{switch(e){case ho:return[t,n,n,n];case Vn:return[n,t,n,n];case jr:return[n,n,t,n]}return[n,n,n,t]},ube=(e,t,n,r,i,o)=>{const s=VE(e.pos,t.pos),a=new obe(l=>l.f);for(a.push(e);a.size()>0;){const l=a.pop();if(!l||l.closed)continue;if(l===t)return dbe(e,l);l.closed=!0;const c=pbe(l.addr,n);for(let u=0;u<4;u++){const d=c[u];if(!d||d.closed)continue;const f=Bl(d.pos,l.pos,.5);if(zce(...o.map(T=>Ng(f,T))))continue;const g=mbe(u),U=l.parent?jf(sn(l.pos,l.parent.pos)):r,b=gH(U);if(Rn(b,g)||iL(e.addr,d.addr)&&Rn(g,r)||iL(t.addr,d.addr)&&Rn(g,i))continue;const _=U!==g,E=l.g+VE(d.pos,l.pos)+(_?Math.pow(s,3):0),w=d.visited;if(!w||E<d.g){const T=gbe(d,t,g,i);d.visited=!0,d.parent=l,d.h=VE(t.pos,d.pos)+T*Math.pow(s,2),d.g=E,d.f=d.g+d.h,w?a.rescoreElement(d):a.push(d)}}}return null},dbe=(e,t)=>{let n=t;const r=[];for(;n.parent;)r.unshift(n),n=n.parent;return r.unshift(e),r},VE=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),fbe=(e,t,n,r,i,o,s,a)=>{const l=s??e,c=a??t,[u,d,f,g]=r??[0,0,0,0],[U,b,v,_]=i??[0,0,0,0],E=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-g):(l[0]+c[2])/2:e[0]>t[0]?e[0]-g:n[0]-g,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-u):(l[1]+c[3])/2:e[1]>t[1]?e[1]-u:n[1]-u,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+d):(l[2]+c[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+f):(l[3]+c[1])/2:e[3]<t[3]?e[3]+f:n[3]+f],w=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-_):(c[0]+l[2])/2:t[0]>e[0]?t[0]-_:n[0]-_,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-U):(c[1]+l[3])/2:t[1]>e[1]?t[1]-U:n[1]-U,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+b):(c[2]+l[0])/2:t[2]<e[2]?t[2]+b:n[2]+b,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+v):(c[3]+l[1])/2:t[3]<e[3]?t[3]+v:n[3]+v],T=SG([E,w]);if(!o&&E[2]-E[0]+w[2]-w[0]>T[2]-T[0]+1e-11&&E[3]-E[1]+w[3]-w[1]>T[3]-T[1]+1e-11){const[A,M]=[(w[0]+w[2])/2,(w[1]+w[3])/2];if(t[0]>e[2]&&e[1]>t[3]){const S=E[2]+(w[0]-E[2])/2,x=w[3]+(E[1]-w[3])/2;return Ql(Gr(e[2]-A,e[1]-M),Gr(e[0]-A,e[3]-M))>0?[[E[0],E[1],S,E[3]],[S,w[1],w[2],w[3]]]:[[E[0],x,E[2],E[3]],[w[0],w[1],w[2],x]]}else if(e[2]<t[0]&&e[3]<t[1]){const S=E[2]+(w[0]-E[2])/2,x=E[3]+(w[1]-E[3])/2;return Ql(Gr(e[0]-A,e[1]-M),Gr(e[2]-A,e[3]-M))>0?[[E[0],E[1],E[2],x],[w[0],x,w[2],w[3]]]:[[E[0],E[1],S,E[3]],[S,w[1],w[2],w[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){const S=w[2]+(E[0]-w[2])/2,x=E[3]+(w[1]-E[3])/2;return Ql(Gr(e[2]-A,e[1]-M),Gr(e[0]-A,e[3]-M))>0?[[S,E[1],E[2],E[3]],[w[0],w[1],S,w[3]]]:[[E[0],E[1],E[2],x],[w[0],x,w[2],w[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){const S=w[2]+(E[0]-w[2])/2,x=w[3]+(E[1]-w[3])/2;return Ql(Gr(e[0]-A,e[1]-M),Gr(e[2]-A,e[3]-M))>0?[[S,E[1],E[2],E[3]],[w[0],w[1],S,w[3]]]:[[E[0],x,E[2],E[3]],[w[0],w[1],w[2],x]]}}return[E,w]},hbe=(e,t,n,r,i,o)=>{const s=new Set,a=new Set;n===ji||n===Vn?a.add(t[1]):s.add(t[0]),i===ji||i===Vn?a.add(r[1]):s.add(r[0]),e.forEach(u=>{s.add(u[0]),s.add(u[2]),a.add(u[1]),a.add(u[3])}),s.add(o[0]),s.add(o[2]),a.add(o[1]),a.add(o[3]);const l=Array.from(a).sort((u,d)=>u-d),c=Array.from(s).sort((u,d)=>u-d);return{row:l.length,col:c.length,data:l.flatMap((u,d)=>c.map((f,g)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[g,d],pos:[f,u]})))}},JM=(e,t,n)=>{switch(t){case ho:return B(n[0],e[1]);case Vn:return B(e[2],n[1]);case jr:return B(n[0],e[3])}return B(e[0],n[1])},gbe=(e,t,n,r)=>{if(r===Vn)switch(n){case Vn:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case ho:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case jr:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case ji:return e.pos[1]===t.pos[1]?4:2}else if(r===ji)switch(n){case Vn:return e.pos[1]===t.pos[1]?4:2;case ho:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case jr:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case ji:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(r===ho)switch(n){case Vn:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case ho:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case jr:return e.pos[0]===t.pos[0]?4:2;case ji:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(r===jr)switch(n){case Vn:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case ho:return e.pos[0]===t.pos[0]?4:2;case jr:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case ji:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},pbe=([e,t],n)=>[Yp([e,t-1],n),Yp([e+1,t],n),Yp([e,t+1],n),Yp([e-1,t],n)],Yp=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,T5=(e,t)=>{for(let n=0;n<t.col;n++)for(let r=0;r<t.row;r++){const i=Yp([n,r],t);if(i&&e[0]===i.pos[0]&&e[1]===i.pos[1])return i}return null},SG=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],eL=(e,t)=>{const n=t.get(e);return n&&Ua(n)?n:null},nd=(e,t,n,r)=>{const i=e[0][0],o=e[0][1];let s=e.map(a=>Ag(a,el(sn(e[0]),-1)));return(i<-hn||i>hn||o<-hn||o>hn||i+s[s.length-1][0]<-hn||o+s[s.length-1][0]>hn||i+s[s.length-1][1]<-hn||o+s[s.length-1][1]>hn)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:i,y:o,points:s,...Og(s)}),s=s.map(([a,l])=>B(dt(a,-1e6,1e6),dt(l,-1e6,1e6))),{points:s,x:dt(i,-1e6,1e6),y:dt(o,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...Og(s),startIsSpecial:n,endIsSpecial:r}},sx=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,r)=>{if(r===0||r===e.length-1)return!0;const i=e[r+1],o=Math.abs(n[1]-i[1])<Math.abs(n[0]-i[0]);return t===o?(t=o,!1):(t=o,!0)})}return e},ax=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;const r=e[n-1];return Xn(r,t)>rx}):e,mbe=e=>{switch(e){case 0:return ho;case 1:return Vn;case 2:return jr}return ji},tL=(e,t,n,r,i,o,s)=>{if(s){if(o){const a=nL(t,n,o,r);return gme(o,a)}return t}if(i){const a=uw(e||[0,0],i);return Math.abs(cU(i,a,r)-_n)>.01?nL(t,n,i,r):a}return t},nL=(e,t,n,r)=>Dy(Wce(n)?hme(n,e):e,t,n,r),rL=(e,t,n,r,i)=>ume(e,t,r,r&&ja(r,Array(4).fill(cU(r,e,n))),n,i),Ube=(e,t,n,r)=>{const i=Ho(new Map([...n].filter(s=>!s[1].isDeleted))),o=Array.from(n.values());return[bs(ms(e),o,i,r,!0,!0),bs(ms(t),o,i,r,!0,!0)]},iL=(e,t)=>e[0]===t[0]&&e[1]===t[1],bbe=(e,t=rx)=>e.slice(1).map((n,r)=>Math.abs(n[0]-e[r][0])<t||Math.abs(n[1]-e[r][1])<t).every(Boolean),fe=(e,t,n=!0,r)=>{var u,d;let i=!1;const{points:o,fixedSegments:s,fileId:a,startBinding:l,endBinding:c}=t;if(De(e)&&(Object.keys(t).length===0||typeof o<"u"||typeof s<"u"||typeof l<"u"||typeof c<"u")){const f=Ho(((u=ya.getScene(e))==null?void 0:u.getNonDeletedElementsMap())??new Map);t={...t,angle:0,...xG({...e,x:t.x||e.x,y:t.y||e.y},f,{fixedSegments:s,points:o,startBinding:l,endBinding:c},{isDragging:r==null?void 0:r.isDragging})}}else typeof o<"u"&&(t={...Og(o),...t});for(const f in t){const g=t[f];if(typeof g<"u"){if(e[f]===g&&(typeof g!="object"||g===null||f==="groupIds"||f==="scale"))continue;if(f==="scale"){const U=e[f],b=g;if(U[0]===b[0]&&U[1]===b[1])continue}else if(f==="points"){const U=e[f],b=g;if(U.length===b.length){let v=!1,_=U.length;for(;--_;){const E=U[_],w=b[_];if(E[0]!==w[0]||E[1]!==w[1]){v=!0;break}}if(!v)continue}}e[f]=g,i=!0}}return i&&((typeof t.height<"u"||typeof t.width<"u"||typeof a<"u"||typeof o<"u")&&Sn.delete(e),e.version++,e.versionNonce=al(),e.updated=l0(),n&&((d=ya.getScene(e))==null||d.triggerUpdate())),e},Xe=(e,t,n=!1)=>{let r=!1;for(const i in t){const o=t[i];if(typeof o<"u"){if(e[i]===o&&(typeof o!="object"||o===null))continue;r=!0}}return!r&&!n?e:{...e,...t,updated:l0(),version:e.version+1,versionNonce:al()}},O3=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=al(),e.updated=l0(),e),nh=e=>et(e)||Rs(e)?e.points.length<2:e.width===0&&e.height===0,Qy=(e,t,n,r,i)=>{const[o,s,a,l]=vc(e,i),c=En({clientX:r.offsetLeft,clientY:r.offsetTop},r),u=En({clientX:r.offsetLeft+t,clientY:r.offsetTop+n},r);return c.x<=a&&c.y<=l&&u.x>=o&&u.y>=s},Ab=(e,t,n,r,i,o)=>{const[s,a,l,c]=jt(e,i),u=En({clientX:r.offsetLeft+((o==null?void 0:o.left)||0),clientY:r.offsetTop+((o==null?void 0:o.top)||0)},r),d=En({clientX:r.offsetLeft+t-((o==null?void 0:o.right)||0),clientY:r.offsetTop+n-((o==null?void 0:o.bottom)||0)},r);return s>=u.x&&a>=u.y&&l<=d.x&&c<=d.y},oL=(e,t,n)=>{const r=Math.abs(t),i=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){const o=Math.round(Math.atan(i/r)/Zu)*Zu;o===0?n=0:o===Math.PI/2?t=0:n=r*Math.tan(o)*Math.sign(n)||n}else e!=="selection"&&(n=r*Math.sign(n));return{width:t,height:n}},Aw=(e,t,n,r)=>{let i=n-e,o=r-t;const s=Math.round(Math.atan(o/i)/Zu)*Zu;if(s===0)o=0;else if(s===Math.PI/2)i=0;else{const a=Math.tan(s),l=-1,c=t-a*e,u=-1/a,d=-1,f=r-u*n,g=(l*f-d*c)/(a*d-u*l),U=(c*u-f*a)/(a*d-u*l);i=g-e,o=U-t}return{width:i,height:o}},CG=e=>{const t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){const n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){const n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},sL={mouse:8,pen:16,touch:28},ybe=16,AG={e:!0,s:!0,n:!0,w:!0},aL={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},HE={e:!0,s:!0,n:!0,w:!0},Fl=(e,t,n,r,i,o,s)=>{const[a,l]=le(B(e+n/2,t+r/2),B(i,o),s);return[a-n/2,l-r/2,n,r]},lx=e=>!(e.viewport.isMobile||e.isTouchScreen&&(hae||R$)),xm=e=>lx(e)?AG:{},cx=([e,t,n,r,i,o],s,a,l,c={},u=4,d=zf)=>{const f=sL[l],g=f/a.value,U=f/a.value,b=f/a.value,v=f/a.value,_=n-e,E=r-t,w=u/a.value,T=(f-d*2)/(2*a.value),A={nw:c.nw?void 0:Fl(e-w-b+T,t-w-v+T,g,U,i,o,s),ne:c.ne?void 0:Fl(n+w-T,t-w-v+T,g,U,i,o,s),sw:c.sw?void 0:Fl(e-w-b+T,r+w-T,g,U,i,o,s),se:c.se?void 0:Fl(n+w-T,r+w-T,g,U,i,o,s),rotation:c.rotation?void 0:Fl(e+_/2-g/2,t-w-v+T-ybe/a.value,g,U,i,o,s)},M=5*sL.mouse/a.value;return Math.abs(_)>M&&(c.n||(A.n=Fl(e+_/2-g/2,t-w-v+T,g,U,i,o,s)),c.s||(A.s=Fl(e+_/2-g/2,r+w-T,g,U,i,o,s))),Math.abs(E)>M&&(c.w||(A.w=Fl(e-w-b+T,t+E/2-U/2,g,U,i,o,s)),c.e||(A.e=Fl(n+w-T,t+E/2-U/2,g,U,i,o,s))),A},kG=(e,t,n,r="mouse",i=AG)=>{if(e.locked||De(e))return{};if(e.type==="freedraw"||et(e)){if(e.points.length===2){const[,s]=e.points;s[0]===0||s[1]===0?i=HE:s[0]>0&&s[1]<0?i=aL:s[0]>0&&s[1]>0?i=HE:s[0]<0&&s[1]>0?i=aL:s[0]<0&&s[1]<0&&(i=HE)}}else We(e)&&(i={...i,rotation:!0});const o=et(e)?zf+8:kt(e)?0:zf;return cx(Ke(e,n,!0),e.angle,t,r,i,o,kt(e)?0:void 0)},RG=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;const n=e[0];return De(n)?!1:et(n)?n.points.length>2:!0},kw=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],vbe=(e,t,n,r,i,o,s,a)=>{if(!n.selectedElementIds[e.id])return!1;const{rotation:l,...c}=kG(e,o,t,s,xm(a));if(l&&kw(l,r,i))return"rotation";const u=Object.keys(c).filter(d=>{const f=c[d];return f?kw(f,r,i):!1});if(u.length>0)return u[0];if(lx(a)){const[d,f,g,U,b,v]=Ke(e,t);if(!(et(e)&&e.points.length<=2)){const _=kt(e)?0:hy/o.value,E=hy/o.value,w=PG(B(d-_,f-_),B(g+_,U+_),B(b,v),e.angle);for(const[T,A]of Object.entries(w))if(eU(B(r,i),A,E))return T}}return!1},lL=(e,t,n,r,i,o,s,a)=>e.reduce((l,c)=>{if(l)return l;const u=vbe(c,s,t,n,r,i,o,a);return u?{element:c,transformHandleType:u}:null},null),cL=([e,t,n,r],i,o,s,a,l)=>{const c=cx([e,t,n,r,(e+n)/2,(t+r)/2],0,s,a,xm(l)),u=Object.keys(c).find(d=>{const f=c[d];return f&&kw(f,i,o)});if(u)return u;if(lx(l)){const d=(e+n)/2,f=(t+r)/2,g=hy/s.value,U=PG(B(e-g,t-g),B(n+g,r+g),B(d,f),0);for(const[b,v]of Object.entries(U))if(eU(B(i,o),v,g))return b}return!1},WE=["ns","nesw","ew","nwse"],Ebe=(e,t)=>{const n=WE.indexOf(e);if(n>=0){const r=Math.round(t/(Math.PI/4));e=WE[(n+r)%WE.length]}return e},uL=e=>{const{element:t,transformHandleType:n}=e,r=t&&Math.sign(t.height)*Math.sign(t.width)===-1;let i=null;switch(n){case"n":case"s":i="ns";break;case"w":case"e":i="ew";break;case"nw":case"se":r?i="nesw":i="nwse";break;case"ne":case"sw":r?i="nwse":i="nesw";break;case"rotation":return"grab"}return i&&t&&(i=Ebe(i,t.angle)),i?`${i}-resize`:""},PG=([e,t],[n,r],i,o)=>{const s=le(B(e,t),i,o),a=le(B(n,t),i,o),l=le(B(e,r),i,o),c=le(B(n,r),i,o);return{n:[s,a],e:[a,c],s:[c,l],w:[l,s]}},_be=(e,t,n,r,i,o,s,a,l,c,u,d)=>{if(n.length===1){const[f]=n;if(t==="rotation")De(f)||(wbe(f,r,i,l,c,o),_o(f,r));else{if(Ae(f)&&t)return Ibe(e,f,r,t,s,l,c),_o(f,r),!0;if(t){const g=n[0].id,U=r.get(g),b=e.get(g);if(U&&b){const{nextWidth:v,nextHeight:_}=kbe(U,b,r,e,t,l,c,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:s});T2(v,_,U,b,r,e,t,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:s})}}}return!0}else if(n.length>1){if(t==="rotation")return Tbe(e,n,r,i,l,c,o,u,d),!0;if(t){const{nextWidth:f,nextHeight:g,flipByX:U,flipByY:b,originalBoundingBox:v}=Rbe(n,e,r,t,l,c,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:s});return MG(n,r,t,i,e,{shouldResizeFromCenter:s,shouldMaintainAspectRatio:a,flipByX:U,flipByY:b,nextWidth:f,nextHeight:g,originalBoundingBox:v}),!0}}return!1},wbe=(e,t,n,r,i,o)=>{const[s,a,l,c]=Ke(e,t),u=(s+l)/2,d=(a+c)/2;let f;We(e)?f=0:(f=5*Math.PI/2+Math.atan2(i-d,r-u),o&&(f=f+Zu/2,f=f-f%Zu),f=Ey(f));const g=Ec(e);if(fe(e,{angle:f}),g){const U=n.getElement(g);U&&!st(e)&&fe(U,{angle:f})}},ux=(e,t,n,r)=>et(e)||Rs(e)?{points:Xy(0,t,Xy(1,n,e.points,r),r)}:{},dx=(e,t,n)=>{let r=e.width;if(Cn(e)){const s=Zr(e,t);s&&(r=_c(s,e))}const o=e.fontSize*(n/r);return o<zI?null:{size:o}},Ibe=(e,t,n,r,i,o,s)=>{const[a,l,c,u,d,f]=Ke(t,n),[g,U]=le(B(o,s),B(d,f),-t.angle);let b=0,v=0;r!=="e"&&r!=="w"&&(r.includes("e")&&(b=(g-a)/(c-a)),r.includes("w")&&(b=(c-g)/(c-a)),r.includes("n")&&(v=(u-U)/(u-l)),r.includes("s")&&(v=(U-l)/(u-l)));const _=Math.max(b,v);if(_>0){const E=t.width*_,w=t.height*_,T=dx(t,n,E);if(T===null)return;const A=[a,l],M=[c,u],S=[d,f];let x=B(a,l);if(["n","w","nw"].includes(r)&&(x=B(M[0]-Math.abs(E),M[1]-Math.abs(w))),r==="ne"){const K=[A[0],M[1]];x=B(K[0],K[1]-Math.abs(w))}if(r==="sw"){const K=[M[0],A[1]];x=B(K[0]-Math.abs(E),K[1])}["s","n"].includes(r)&&(x[0]=S[0]-E/2),["e","w"].includes(r)&&(x[1]=S[1]-w/2),i&&(x[0]=S[0]-Math.abs(E)/2,x[1]=S[1]-Math.abs(w)/2);const C=t.angle,R=le(x,B(d,f),C),O=B(x[0]+Math.abs(E)/2,x[1]+Math.abs(w)/2),F=le(O,B(d,f),C);x=le(R,F,-C);const[N,J]=x;fe(t,{fontSize:T.size,width:E,height:w,x:N,y:J})}if(r==="e"||r==="w"){const E=e.get(t.id),[w,T,A,M]=zu(E,E.width,E.height,!0),S=B(w,T),x=B(A,M),C=u2(S,x),R=le(B(o,s),C,-E.angle),[O,,F]=zu(t,t.width,t.height,!0),N=F-O,J=x[0]-S[0],K=tT(an({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight);let ne=J/N;r.includes("e")&&(ne=(R[0]-S[0])/N),r.includes("w")&&(ne=(x[0]-R[0])/N);const ee=t.width*ne<K?K:t.width*ne,q=mh(t.originalText,an(t),Math.abs(ee)),Z=ki(q,an(t),t.lineHeight),te=Z.height,[pe,Ie,Se,lt]=zu(E,ee,te,!0),at=Se-pe,gt=lt-Ie;let ht=[...S];["n","w","nw"].includes(r)&&(ht=[x[0]-Math.abs(at),S[1]]);const tn=E.angle,Kt=le(ht,C,tn),pt=B(ht[0]+Math.abs(at)/2,ht[1]+Math.abs(gt)/2),mt=le(pt,C,tn);ht=le(Kt,mt,-tn);const Ot={width:Math.abs(ee),height:Math.abs(Z.height),x:ht[0],y:ht[1],text:q,autoResize:!1};fe(t,Ot)}},Tbe=(e,t,n,r,i,o,s,a,l)=>{var u;let c=5*Math.PI/2+Math.atan2(o-l,i-a);s&&(c+=Zu/2,c-=c%Zu);for(const d of t)if(!We(d)){const[f,g,U,b]=Ke(d,n),v=(f+U)/2,_=(g+b)/2,E=((u=e.get(d.id))==null?void 0:u.angle)??d.angle,[w,T]=le(B(v,_),B(a,l),c+E-d.angle);De(d)?fe(d,{points:Rme(d,n)}):fe(d,{x:d.x+(w-v),y:d.y+(T-_),angle:Ey(c+E)},!1),_o(d,n,{simultaneouslyUpdated:t});const A=rt(d,n);A&&!st(d)&&fe(A,{x:A.x+(w-v),y:A.y+(T-_),angle:Ey(c+E)},!1)}r.triggerUpdate()},xbe=(e,t,n,r,i)=>{const[o,s,a,l]=t.length===1?Ke(t[0],n):jt(t),c=(o+a)/2,u=(s+l)/2,d=t.length===1?t[0].angle:0;switch([r,i]=le(B(r,i),B(c,u),-d),e){case"n":return le(B(r-(o+a)/2,i-s),B(0,0),d);case"s":return le(B(r-(o+a)/2,i-l),B(0,0),d);case"w":return le(B(r-o,i-(s+l)/2),B(0,0),d);case"e":return le(B(r-a,i-(s+l)/2),B(0,0),d);case"nw":return le(B(r-o,i-s),B(0,0),d);case"ne":return le(B(r-a,i-s),B(0,0),d);case"sw":return le(B(r-o,i-l),B(0,0),d);case"se":return le(B(r-a,i-l),B(0,0),d);default:return[0,0]}},Sbe=(e,t)=>{const[,[n,r]]=t.points;return e==="nw"&&(n<0||r<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||r>0)?"end":"origin"},Cbe=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},Abe=(e,t,n,r,i,o,s,a,l)=>{const c=Cbe(s,a,l),[u,d]=e;switch(c){case"top-left":return{x:u+(t-r)/2+(r-t)/2*Math.cos(o)+(n-i)/2*Math.sin(o),y:d+(n-i)/2+(r-t)/2*Math.sin(o)+(i-n)/2*Math.cos(o)};case"top-right":return{x:u+(t-r)/2*(Math.cos(o)+1)+(n-i)/2*Math.sin(o),y:d+(n-i)/2+(t-r)/2*Math.sin(o)+(i-n)/2*Math.cos(o)};case"bottom-left":return{x:u+(t-r)/2*(1-Math.cos(o))+(i-n)/2*Math.sin(o),y:d+(n-i)/2*(Math.cos(o)+1)+(r-t)/2*Math.sin(o)};case"bottom-right":return{x:u+(t-r)/2*(Math.cos(o)+1)+(i-n)/2*Math.sin(o),y:d+(n-i)/2*(Math.cos(o)+1)+(t-r)/2*Math.sin(o)};case"center":return{x:u-(r-t)/2,y:d-(i-n)/2};case"east-side":return Math.abs(d+(t-r)/2*Math.sin(o)+(n-i)/2)>1e6&&console.error("getResizedOrigin() new calculation creates extremely large (> 1e6) y value where the old calculation resulted in",{result:d+(i-n)/2+(t-r)/2*Math.sin(o)}),{x:u+(t-r)/2*(Math.cos(o)+1),y:d+(i-n)/2+(t-r)/2*Math.sin(o)};case"west-side":return{x:u+(t-r)/2*(1-Math.cos(o)),y:d+(r-t)/2*Math.sin(o)+(n-i)/2};case"north-side":return{x:u+(t-r)/2+(n-i)/2*Math.sin(o),y:d+(i-n)/2*(Math.cos(o)-1)};case"south-side":return{x:u+(t-r)/2+(i-n)/2*Math.sin(o),y:d+(n-i)/2*(Math.cos(o)+1)}}},T2=(e,t,n,r,i,o,s,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{let u={};const d=rt(n,i);if(d){const b=o.get(d.id);if(b&&(u={fontSize:b.fontSize}),l){const v={...n,width:e,height:t},_=dx(d,i,_c(v,d));if(_===null)return;u={fontSize:_.size}}else{const v=pV(an(d),d.lineHeight),_=mV(d.fontSize,d.lineHeight);e=Math.max(e,v),t=Math.max(t,_)}}const f=ux(r,e,t,!0);let g=B(r.x,r.y);if(et(r)){const[b,v]=vc(r,o);g=B(b,v)}const U=Abe(g,r.width,r.height,e,t,r.angle,s,l,c);if(et(r)&&f.points){const b=r.x-g[0],v=r.y-g[1];U.x+=b,U.y+=v;const _=f.points[0][0],E=f.points[0][1];U.x+=_,U.y+=E,f.points=f.points.map(w=>B(w[0]-_,w[1]-E))}if(e<0&&(U.x=U.x+e),t<0&&(U.y=U.y+t),"scale"in n&&"scale"in r&&fe(n,{scale:[(Math.sign(e)||r.scale[0])*r.scale[0],(Math.sign(t)||r.scale[1])*r.scale[1]]}),st(n)&&d&&l){const b=e/n.width*d.fontSize;if(b<zI)return;u.fontSize=b}if(e!==0&&t!==0&&Number.isFinite(U.x)&&Number.isFinite(U.y)){const b={...U,width:Math.abs(e),height:Math.abs(t),...f};fe(n,b,a),_o(n,i,{newSize:{width:e,height:t}}),d&&u!=null&&fe(d,{fontSize:u.fontSize}),mU(n,i,s,l)}},kbe=(e,t,n,r,i,o,s,{shouldMaintainAspectRatio:a=!1,shouldResizeFromCenter:l=!1}={})=>{const[c,u,d,f]=zu(t,t.width,t.height,!0),g=B(c,u),U=B(d,f),b=u2(g,U),v=le(B(o,s),b,-t.angle),[_,E,w,T]=zu(e,e.width,e.height,!0),A=w-_,M=T-E,S=U[0]-g[0],x=U[1]-g[1];let C=S/A,R=x/M;i.includes("e")&&(C=(v[0]-g[0])/A),i.includes("s")&&(R=(v[1]-g[1])/M),i.includes("w")&&(C=(U[0]-v[0])/A),i.includes("n")&&(R=(U[1]-v[1])/M);let O=e.width*C,F=e.height*R;if(l&&(O=2*O-t.width,F=2*F-t.height),a){const N=Math.abs(O)/t.width,J=Math.abs(F)/t.height;if(i.length===1&&(F*=N,O*=J),i.length===2){const K=Math.max(N,J);O=t.width*K*Math.sign(O),F=t.height*K*Math.sign(F)}}return{nextWidth:O,nextHeight:F}},Rbe=(e,t,n,r,i,o,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:a=!1}={})=>{const l=e.map(N=>t.get(N.id)),c=l.reduce((N,J)=>{if(!et(J))return N;const K=Ec(J);if(!K)return N;const ne=t.get(K)??null;return Cn(ne)?[...N,{...ne,...Ce.getBoundTextElementPosition(J,ne,n)}]:N},[]),u=fa(l.map(N=>N).concat(c)),{minX:d,minY:f,maxX:g,maxY:U,midX:b,midY:v}=u,_=g-d,E=U-f,w={ne:[d,U],se:[d,f],sw:[g,f],nw:[g,U],e:[d,f+E/2],w:[g,f+E/2],n:[d+_/2,U],s:[d+_/2,f]},[T,A]=a?[b,v]:w[r],M=a?2:1,S=Math.max(Math.abs(i-T)/_||0,Math.abs(o-A)/E||0)*M;let x=r.includes("e")||r.includes("w")?Math.abs(i-T)*M:_,C=r.includes("n")||r.includes("s")?Math.abs(o-A)*M:E;s&&(x=_*S*Math.sign(i-T),C=E*S*Math.sign(o-A));const R={ne:[i<T,o>A],se:[i<T,o<A],sw:[i>T,o<A],nw:[i>T,o>A],e:[i<T,!1],w:[i>T,!1],n:[!1,o>A],s:[!1,o<A]},[O,F]=R[r].map(N=>N);return{originalBoundingBox:u,nextWidth:x,nextHeight:C,flipByX:O,flipByY:F}},MG=(e,t,n,r,i,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:s=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:c,nextWidth:u,originalBoundingBox:d}={})=>{if(u===void 0&&c===void 0&&a===void 0&&l===void 0||c===0||u===0)return;i||(i=t);const f=e.reduce((M,S)=>{const x=i.get(S.id);return x&&M.push({orig:x,latest:S}),M},[]);let g;if(d)g=d;else{const M=f.reduce((S,{orig:x})=>{if(!et(x))return S;const C=Ec(x);if(!C)return S;const R=i.get(C)??null;return Cn(R)?[...S,{...R,...Ce.getBoundTextElementPosition(x,R,t)}]:S},[]);g=fa(f.map(({orig:S})=>S).concat(M))}const{minX:U,minY:b,maxX:v,maxY:_,midX:E,midY:w}=g,T=v-U,A=_-b;if(u===void 0&&c===void 0&&(u=T,c=A),o&&(u===void 0?u=c*(T/A):c===void 0?c=u*(A/T):Math.abs(u/c-T/A)>.001&&(u=c*(T/A))),u&&c){let M=n.includes("e")||n.includes("w")?Math.abs(u)/T:1,S=n.includes("n")||n.includes("s")?Math.abs(c)/A:1,x;n.length===1?x=n.includes("e")||n.includes("w")?M:S:x=Math.max(Math.abs(u)/T||0,Math.abs(c)/A||0);const C={ne:[U,_],se:[U,b],sw:[v,b],nw:[v,_],e:[U,b+A/2],w:[v,b+A/2],n:[U+T/2,_],s:[U+T/2,b]},[R,O]=s?[E,w]:C[n],F=o||f.some(ee=>ee.latest.angle!==0||Ae(ee.latest)||Pg(ee.latest));F&&(M=x,S=x);const[N,J]=[a?-1:1,l?-1:1],K=[];for(const{orig:ee,latest:q}of f){if(Ae(ee)&&Cn(ee))continue;const Z=ee.width*M,te=ee.height*S,pe=Ey(ee.angle*N*J),Ie=et(ee)||Rs(ee),Se=ee.x-R,lt=ee.y-O,at=a&&!Ie?Z:0,gt=l&&!Ie?te:0,ht=R+N*(Se*M+at),tn=O+J*(lt*S+gt),Kt=ux(ee,Z*N,te*J,!1),pt={x:ht,y:tn,width:Z,height:te,angle:pe,...Kt};if(De(ee)&&(ee.startBinding&&(pt.startBinding={...ee.startBinding,fixedPoint:[a?-ee.startBinding.fixedPoint[0]+1:ee.startBinding.fixedPoint[0],l?-ee.startBinding.fixedPoint[1]+1:ee.startBinding.fixedPoint[1]]}),ee.endBinding&&(pt.endBinding={...ee.endBinding,fixedPoint:[a?-ee.endBinding.fixedPoint[0]+1:ee.endBinding.fixedPoint[0],l?-ee.endBinding.fixedPoint[1]+1:ee.endBinding.fixedPoint[1]]}),ee.fixedSegments&&Kt.points&&(pt.fixedSegments=ee.fixedSegments.map(Ot=>({...Ot,start:Kt.points[Ot.index-1],end:Kt.points[Ot.index]})))),kt(ee)&&(pt.scale=[ee.scale[0]*N,ee.scale[1]*J]),Ae(ee)){const Ot=dx(ee,t,Z);if(!Ot)return;pt.fontSize=Ot.size}const mt=i.get(Ec(ee)??"");if(mt)if(F){const Ot=mt.fontSize*x;if(Ot<zI)return;pt.boundTextFontSize=Ot}else pt.boundTextFontSize=mt.fontSize;K.push({element:q,update:pt})}const ne=K.map(({element:ee})=>ee);for(const{element:ee,update:{boundTextFontSize:q,...Z}}of K){const{width:te,height:pe,angle:Ie}=Z;fe(ee,Z,!1,{isDragging:!0}),_o(ee,t,{simultaneouslyUpdated:ne,newSize:{width:te,height:pe}});const Se=rt(ee,t);Se&&q&&(fe(Se,{fontSize:q,angle:et(ee)?void 0:Ie},!1),mU(ee,t,n,!0))}r.triggerUpdate()}},Pbe=(e,t,n,r,i,o)=>{if(t.length===1&&De(t[0])&&(t[0].startBinding||t[0].endBinding))return;const s=t.filter(d=>{if(De(d)&&d.startBinding&&d.endBinding){const f=t.find(U=>{var b;return U.id===((b=d.startBinding)==null?void 0:b.elementId)}),g=t.find(U=>{var b;return U.id===((b=d.endBinding)==null?void 0:b.elementId)});return f&&g}return!0}),a=new Set(s),l=s.filter(d=>We(d)).map(d=>d.id);if(l.length>0)for(const d of r.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);const c=jt(Array.from(a).map(d=>e.originalElements.get(d.id)??d)),u=Mbe(c,n,i,o);a.forEach(d=>{if(dL(e,d,u),!st(d)){const f=rt(d,r.getNonDeletedElementsMap());f&&dL(e,f,u),_o(d,r.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(a)})}})},Mbe=(e,t,n,r)=>{const[i,o]=e;let s=i+t.x+n.x,a=o+t.y+n.y;if(n.x===0||n.y===0){const[l,c]=Ur(i+t.x,o+t.y,r);n.x===0&&(s=l),n.y===0&&(a=c)}return{x:s-i,y:a-o}},dL=(e,t,n)=>{const r=e.originalElements.get(t.id)??t,i=r.x+n.x,o=r.y+n.y;fe(t,{x:i,y:o})},Lbe=(e,t,n)=>{const[r,i]=jt(e);return[t-r,n-i]},fL=({newElement:e,elementType:t,originX:n,originY:r,x:i,y:o,width:s,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:u,widthAspectRatio:d=null,originOffset:f=null,informMutation:g=!0})=>{l&&e.type!=="selection"&&(d?a=s/d:(Math.abs(o-r)>Math.abs(i-n)?{width:s,height:a}=oL(t,a,i<n?-s:s):{width:s,height:a}=oL(t,s,o<r?-a:a),a<0&&(a=-a)));let U=i<n?n-s:n,b=o<r?r-a:r;c&&(s+=s,a+=a,U=n-s/2,b=r-a/2);let v=null;if(Ae(e)){a=e.height;const _=tT(an({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);s=Math.max(s,_),Math.abs(i-n)>Uae/u&&(v={autoResize:!1}),b=r,c&&(U=n-s/2)}if(s!==0&&a!==0){let _=null;kt(e)&&(_={initialWidth:s,initialHeight:a}),fe(e,{x:U+((f==null?void 0:f.x)??0),y:b+((f==null?void 0:f.y)??0),width:s,height:a,...v,..._},g)}},fx=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||ot(t,e).length))},Uu=e=>e.reduce((t,n)=>t+n.version,0),Dbe=e=>{let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e[n].versionNonce;return t>>>0},LG=e=>{let t=5381;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)+t+r}return t>>>0},Nbe=e=>e.filter(t=>!t.isDeleted&&!nh(t)),Un=e=>e.filter(t=>!t.isDeleted),Rw=e=>!e.isDeleted,hx=e=>Un(e).map(t=>eT(t.type)?{...t,lastCommittedPoint:null}:t),Obe=e=>hx(e),DG=e=>hx(e),NG=e=>hx(e),gx=e=>{const t=new Set;return e.forEach(n=>{We(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},px=(e,t,n,r=!0)=>{const[i,o,s,a]=Ke(t,n);let l=e.filter(c=>{let[u,d,f,g]=vc(c,n);const U=wo(c,n);if(U){const[b,v,_,E]=vc(U,n);u=Math.max(b,u),d=Math.max(v,d),f=Math.min(_,f),g=Math.min(E,g)}return c.locked===!1&&c.type!=="selection"&&!Cn(c)&&i<=u&&o<=d&&s>=f&&a>=g});return l=r?gx(l):l,l=l.filter(c=>{const u=wo(c,n);return u?ed(c,u,n):!0}),l},OG=(e,t,n,r)=>{const i=new Set(t.map(o=>o.id));return e.filter(o=>{const s=Qy(o,n.width,n.height,n,r);return!i.has(o.id)&&s})},_r=function(){let e=null,t=null,n=null;const r=(i,o)=>(n!=null&&i===e&&o.selectedElementIds===t||(n=i.some(s=>o.selectedElementIds[s.id]),e=i,t=o.selectedElementIds),n);return r.clearCache=()=>{e=null,t=null,n=null},r}(),Fbe=(e,t,n)=>{const r=Array.from(new Set(ot(e,t).map(i=>n(i))));return r.length===1?r[0]:null},ot=(e,t,n)=>{const r=new Set,i=[];for(const o of e.values()){if(t.selectedElementIds[o.id]){i.push(o),r.add(o.id);continue}if(n!=null&&n.includeBoundTextElement&&Cn(o)&&t.selectedElementIds[o==null?void 0:o.containerId]){i.push(o),r.add(o.id);continue}}if(n!=null&&n.includeElementsInFrames){const o=[];return i.forEach(s=>{We(s)&&cl(e,s.id).forEach(a=>!r.has(a.id)&&o.push(a)),o.push(s)}),o}return i},FG=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:ot(e,t,{includeBoundTextElement:!0}),Bt=(e,t)=>ai(t.selectedElementIds,e)?t.selectedElementIds:e,Bbe=(e,t)=>{const[n,r,i,o]=t,{x:s,y:a}=oa({sceneX:n,sceneY:r},e),{x:l,y:c}=oa({sceneX:i,sceneY:o},e);return l-s>e.width||c-a>e.height},BG=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:r})=>{let i=(t.width-((r==null?void 0:r.right)??0))/2/n.value-e.x;i+=((r==null?void 0:r.left)??0)/2/n.value;let o=(t.height-((r==null?void 0:r.bottom)??0))/2/n.value-e.y;return o+=((r==null?void 0:r.top)??0)/2/n.value,{scrollX:i,scrollY:o}},x2=(e,t)=>{if(e=Nbe(e),!e.length)return{scrollX:0,scrollY:0};let[n,r,i,o]=jt(e);Bbe(t,[n,r,i,o])&&([n,r,i,o]=N5e(e,En({clientX:t.scrollX,clientY:t.scrollY},t)));const s=(n+i)/2,a=(r+o)/2;return BG({scenePoint:{x:s,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},ec=e=>dt(rc(e,6),HI,WI),$be=e=>dt(Math.round(e),1,100),$G=e=>dt(Math.round(e),1,100),Ic=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:r=""})=>{const o=-(Ee.useRef(Date.now()).current%1600);return p("div",{className:`Spinner ${r}`,children:p("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${o}ms`:0},children:p("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},vt=Ee.forwardRef(({size:e="medium",visible:t=!0,className:n="",...r},i)=>{const{id:o}=bl(),s=Ee.useRef(null);Ee.useImperativeHandle(i,()=>s.current);const a=`ToolIcon_size_${e}`,[l,c]=D.useState(!1),u=D.useRef(!0),d=async g=>{var b;const U="onClick"in r&&((b=r.onClick)==null?void 0:b.call(r,g));if(rU(U))try{c(!0),await U}catch(v){if(v instanceof kg)console.warn(v);else throw v}finally{u.current&&c(!1)}};D.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const f=D.useRef(null);if(r.type==="button"||r.type==="icon"||r.type==="submit"){const g=r.type==="icon"?"button":r.type;return z("button",{className:Re("ToolIcon_type_button",a,n,t&&!r.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!r.hidden,"ToolIcon--selected":r.selected,"ToolIcon--plain":r.type==="icon"}),style:r.style,"data-testid":r["data-testid"],hidden:r.hidden,title:r.title,"aria-label":r["aria-label"],type:g,onClick:d,ref:s,disabled:l||r.isLoading||!!r.disabled,children:[(r.icon||r.label)&&z("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!r.disabled,children:[r.icon||r.label,r.keyBindingLabel&&p("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel}),r.isLoading&&p(Ic,{})]}),r.showAriaLabel&&z("div",{className:"ToolIcon__label",children:[r["aria-label"]," ",l&&p(Ic,{})]}),r.children]})}return z("label",{className:Re("ToolIcon",n),title:r.title,onPointerDown:g=>{var U;f.current=g.pointerType||null,(U=r.onPointerDown)==null||U.call(r,{pointerType:g.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{f.current=null})},children:[p("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:r.name,"aria-label":r["aria-label"],"aria-keyshortcuts":r["aria-keyshortcuts"],"data-testid":r["data-testid"],id:`${o}-${r.id}`,onChange:()=>{var g;(g=r.onChange)==null||g.call(r,{pointerType:f.current})},checked:r.checked,ref:s}),z("div",{className:"ToolIcon__icon",children:[r.icon,r.keyBindingLabel&&p("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel})]})]})});vt.displayName="ToolButton";const zbe=(e,t,n)=>{const r=new Set(ot(e.filter(u=>We(u)),t).map(u=>u.id)),i={},o=n.scene.getNonDeletedElementsMap(),s=new Set;for(const u of r){const d=cl(e,u);for(const f of d)if(!s.has(f.id)){if(Cn(f)){const g=Zr(f,o);g&&(i[g.id]=!0)}else i[f.id]=!0;s.add(f.id)}}let a=!0;const l=e.map(u=>{if(t.selectedElementIds[u.id]){const d=Cn(u)?Zr(u,o):null;return u.frameId&&r.has(u.frameId)?(a=!1,i[u.id]=!0,u):d!=null&&d.frameId&&r.has(d==null?void 0:d.frameId)?u:(u.boundElements&&u.boundElements.forEach(f=>{var U,b;const g=n.scene.getNonDeletedElementsMap().get(f.id);g&&De(g)&&(fe(g,{startBinding:u.id===((U=g.startBinding)==null?void 0:U.elementId)?null:g.startBinding,endBinding:u.id===((b=g.endBinding)==null?void 0:b.elementId)?null:g.endBinding}),fe(g,{points:g.points}))}),Xe(u,{isDeleted:!0}))}return u.frameId&&r.has(u.frameId)?(a=!1,Cn(u)||(i[u.id]=!0),Xe(u,{frameId:null})):Cn(u)&&t.selectedElementIds[u.containerId]?Xe(u,{isDeleted:!0}):u});let c=t.editingGroupId;if(a&&t.editingGroupId){const u=Tn(l,t.editingGroupId).filter(d=>!d.isDeleted);if(u.length>1)u[0]&&(i[u[0].id]=!0);else{c=null,u[0]&&(i[u[0].id]=!0);const d=u[0];if(d){const f=d.groupIds.findIndex(U=>U===t.editingGroupId),g=d.groupIds[f+1];if(g){const U=Tn(l,g).filter(b=>!b.isDeleted);U.length>1&&(c=g,U.forEach(b=>{i[b.id]=!0}))}}}}return{elements:l,appState:{...t,...Vi({selectedElementIds:i,editingGroupId:c},l,t,null)}}},hL=(e,t)=>{if(e.editingGroupId){const n=Tn(Un(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},zG=we({name:"deleteSelectedElements",label:"labels.delete",icon:Ju,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,r)=>{if(t.editingLinearElement){const{elementId:s,selectedPointsIndices:a,startBindingElement:l,endBindingElement:c}=t.editingLinearElement,u=r.scene.getNonDeletedElementsMap(),d=Ce.getElement(s,u);if(!d||a==null)return!1;if(d.points.length<2){const g=e.map(b=>b.id===d.id?Xe(b,{isDeleted:!0}):b),U=hL(t,g);return{elements:g,appState:{...U,editingLinearElement:null},storeAction:ae.CAPTURE}}const f={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:c};return Ce.deletePoints(d,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...f,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},storeAction:ae.CAPTURE}}let{elements:i,appState:o}=zbe(e,t,r);return EH(i,i.filter(s=>s.isDeleted)),o=hL(o,i),{elements:i,appState:{...o,activeTool:lr(t,{type:"selection"}),multiElement:null,activeEmbeddable:null},storeAction:_r(Un(e),t)?ae.CAPTURE:ae.NONE}},keyTest:(e,t,n)=>(e.key===j.BACKSPACE||e.key===j.DELETE)&&!e[j.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>p(vt,{type:"button",icon:Ju,title:L("labels.delete"),"aria-label":L("labels.delete"),onClick:()=>n(null),visible:_r(Un(e),t)})}),Pw=(e,t)=>e.frameId===t||e.id===t,VG=(e,t,n)=>{let r=[],i=[],o=null,s=-1;const a=He(n||ot(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++s<e.length;){const l=e[s];a.get(l.id)?(i.length&&(r=r.concat(i),i=[]),r.push(s),o=s+1):l.isDeleted&&o===s?(o=s+1,i.push(s)):i=[]}return r},Vbe=e=>{let t=0;return e.reduce((n,r,i)=>(i>0&&e[i-1]!==r-1&&(t=++t),(n[t]||(n[t]=[])).push(r),n),[])},gL=(e,t,n)=>{var r,i;if("containerId"in e&&e.containerId){const o=ya.getScene(e).getElement(e.containerId);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}else{const o=(i=(r=e.boundElements)==null?void 0:r.find(s=>s.type!=="arrow"))==null?void 0:i.id;if(o){const s=ya.getScene(e).getElement(o);if(s)return n==="left"?Math.min(t.indexOf(s),t.indexOf(e)):Math.max(t.indexOf(s),t.indexOf(e))}}},Hbe=(e,t)=>{let n=-1,r=-1;return e.forEach((i,o)=>{Pw(i,t)&&(n===-1&&(n=o),r=o)}),n===-1?[]:e.slice(n,r+1)},Wbe=(e,t,n,r,i)=>{const o=t[n],s=d=>d.isDeleted?!1:i?d.frameId===i:e.editingGroupId?d.groupIds.includes(e.editingGroupId):!0,a=r==="left"?of(t,d=>s(d),Math.max(0,n-1)):eV(t,d=>s(d),n+1),l=t[a];if(!l)return-1;if(e.editingGroupId){if((o==null?void 0:o.groupIds.join(""))===(l==null?void 0:l.groupIds.join("")))return gL(l,t,r)??a;if(!(l!=null&&l.groupIds.includes(e.editingGroupId)))return-1}if(!i&&(l.frameId||We(l))){const d=Hbe(t,l.frameId||l.id);return r==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1])}if(!l.groupIds.length)return gL(l,t,r)??a;const c=e.editingGroupId?l.groupIds[l.groupIds.indexOf(e.editingGroupId)-1]:l.groupIds[l.groupIds.length-1],u=Tn(t,c);return u.length?r==="left"?t.indexOf(u[0]):t.indexOf(u[u.length-1]):a},HG=(e,t)=>t.reduce((n,r)=>{const i=e[r];return n.set(i.id,i),n},new Map),WG=(e,t,n)=>{const r=VG(e,t),i=HG(e,r);let o=Vbe(r);n==="right"&&(o=o.reverse());const s=new Set(r.filter(a=>We(e[a])).map(a=>e[a].id));return o.forEach((a,l)=>{var E;const c=a[0],u=a[a.length-1],d=n==="left"?c:u,f=a.some(w=>{const T=e[w];return T.frameId&&s.has(T.frameId)})?null:(E=e[d])==null?void 0:E.frameId,g=Wbe(t,e,d,n,f);if(g===-1||d===g)return;const U=n==="left"?e.slice(0,g):e.slice(0,c),b=e.slice(c,u+1),v=n==="left"?e.slice(g,c):e.slice(u+1,g+1),_=n==="left"?e.slice(u+1):e.slice(g+1);e=n==="left"?[...U,...b,...v,..._]:[...U,...v,...b,..._]}),ul(e,i),e},GG=(e,t,n,r,i)=>{const o=VG(e,t,i),s=HG(e,o),a=[];let l,c;if(n==="left"){if(r)l=eV(e,U=>Pw(U,r));else if(t.editingGroupId){const U=Tn(e,t.editingGroupId);if(!U.length)return e;l=e.indexOf(U[0])}else l=0;c=o[o.length-1]}else{if(r)c=of(e,U=>Pw(U,r));else if(t.editingGroupId){const U=Tn(e,t.editingGroupId);if(!U.length)return e;c=e.indexOf(U[U.length-1])}else c=e.length-1;l=o[0]}l===-1&&(l=0);for(let U=l;U<c+1;U++)o.includes(U)||a.push(e[U]);const u=Array.from(s.values()),d=e.slice(0,l),f=e.slice(c+1),g=n==="left"?[...d,...u,...a,...f]:[...d,...a,...u,...f];return ul(g,s),g};function XG(e,t,n,r){const i=He(ot(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),o={regularElements:[],frameChildren:new Map},s=new Set;for(const c of e)i.has(c.id)&&We(c)&&s.add(c.id);for(const c of e)if(i.has(c.id))if(We(c)||c.frameId&&s.has(c.frameId))o.regularElements.push(c);else if(!c.frameId)o.regularElements.push(c);else{const u=o.frameChildren.get(c.frameId)||[];u.push(c),o.frameChildren.set(c.frameId,u)}let a=e;const l=Array.from(o.frameChildren.entries());for(const[c,u]of l)a=r(e,t,n,c,u);return r(a,t,n,null,o.regularElements)}const Gbe=(e,t)=>WG(e,t,"left"),Xbe=(e,t)=>WG(e,t,"right"),jbe=(e,t)=>XG(e,t,"left",GG),Kbe=(e,t)=>XG(e,t,"right",GG),Ybe=we({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:tP,trackEvent:{category:"element"},perform:(e,t)=>({elements:Gbe(e,t),appState:t,storeAction:ae.CAPTURE}),keyPriority:40,keyTest:e=>e[j.CTRL_OR_CMD]&&!e.shiftKey&&e.code===It.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>p("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${L("labels.sendBackward")} — ${de("CtrlOrCmd+[")}`,children:tP})}),Zbe=we({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:eP,trackEvent:{category:"element"},perform:(e,t)=>({elements:Xbe(e,t),appState:t,storeAction:ae.CAPTURE}),keyPriority:40,keyTest:e=>e[j.CTRL_OR_CMD]&&!e.shiftKey&&e.code===It.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>p("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${L("labels.bringForward")} — ${de("CtrlOrCmd+]")}`,children:eP})}),qbe=we({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:rP,trackEvent:{category:"element"},perform:(e,t)=>({elements:jbe(e,t),appState:t,storeAction:ae.CAPTURE}),keyTest:e=>sl?e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.BRACKET_LEFT:e[j.CTRL_OR_CMD]&&e.shiftKey&&e.code===It.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>p("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${L("labels.sendToBack")} — ${de(sl?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:rP})}),Qbe=we({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:nP,trackEvent:{category:"element"},perform:(e,t)=>({elements:Kbe(e,t),appState:t,storeAction:ae.CAPTURE}),keyTest:e=>sl?e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.BRACKET_RIGHT:e[j.CTRL_OR_CMD]&&e.shiftKey&&e.code===It.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>p("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${L("labels.bringToFront")} — ${de(sl?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:nP})}),Jbe=we({name:"selectAll",label:"labels.selectAll",icon:mfe,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,r)=>{if(t.editingLinearElement)return!1;const i=e.filter(o=>!o.isDeleted&&!(Ae(o)&&o.containerId)&&!o.locked).reduce((o,s)=>(o[s.id]=!0,o),{});return{appState:{...t,...Vi({editingGroupId:null,selectedElementIds:i},Un(e),t,r),selectedLinearElement:Object.keys(i).length===1&&et(e[0])?new Ce(e[0]):null},storeAction:ae.CAPTURE}},keyTest:e=>e[j.CTRL_OR_CMD]&&e.key===j.A}),eye=e=>{const t=e.slice(),n=new Set,r=o=>{var c,u,d;const s=(u=(c=o[0])==null?void 0:c.groupIds)==null?void 0:u.join(""),a=[o[0]],l=[];for(const f of o.slice(1))((d=f.groupIds)==null?void 0:d.join(""))===s?a.push(f):l.push(f);return l.length?[...a,...r(l)]:a},i=new Map;return t.forEach((o,s)=>{var a;if(!i.has(o.id))if((a=o.groupIds)!=null&&a.length){const l=o.groupIds[o.groupIds.length-1],c=t.slice(s).filter(u=>{var f;const d=(f=u==null?void 0:u.groupIds)==null?void 0:f.some(g=>g===l);return d&&i.set(u.id,!0),d});for(const u of r(c))n.add(u)}else n.add(o)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},tye=e=>{const t=Lce(e),n=e.slice(),r=new Set;return n.forEach((i,o)=>{var s,a;if(i)if((s=i.boundElements)!=null&&s.length)r.add(i),n[o]=null,i.boundElements.forEach(l=>{const c=t.get(l.id);c&&l.type==="text"&&(r.add(c[0]),n[c[1]]=null)});else if(i.type==="text"&&i.containerId){const l=t.get(i.containerId);(a=l==null?void 0:l[0].boundElements)!=null&&a.find(c=>c.id===i.id)||(r.add(i),n[o]=null)}else r.add(i),n[o]=null}),r.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...r]},nye=e=>tye(eye(e)),rye=we({name:"duplicateSelection",label:"labels.duplicateSelection",icon:Z_,trackEvent:{category:"element"},perform:(e,t,n,r)=>{if(t.editingLinearElement)try{const o=Ce.duplicateSelectedPoints(t,r.scene.getNonDeletedElementsMap());return{elements:e,appState:o,storeAction:ae.CAPTURE}}catch{return!1}const i=iye(e,t);if(r.props.onDuplicate&&i.elements){const o=r.props.onDuplicate(i.elements,e);o&&(i.elements=o)}return{...i,storeAction:ae.CAPTURE}},keyTest:e=>e[j.CTRL_OR_CMD]&&e.key===j.D,PanelComponent:({elements:e,appState:t,updateData:n})=>p(vt,{type:"button",icon:Z_,title:`${L("labels.duplicateSelection")} — ${de("CtrlOrCmd+D")}`,"aria-label":L("labels.duplicateSelection"),onClick:()=>n(null),visible:_r(Un(e),t)})}),iye=(e,t)=>{const n=new Map,r=[],i=[],o=new Map,s=new Map,a=He(e),l=b=>{const _=$R(b).reduce((E,w)=>{if(u.has(w.id))return E;u.set(w.id,!0);const T=JV(t.editingGroupId,n,w,{x:w.x+gy/2,y:w.y+gy/2});return u.set(T.id,!0),s.set(T.id,T),o.set(w.id,T.id),i.push(w),r.push(T),E.push(T),E},[]);return Array.isArray(b)?_:_[0]||null};e=nye(e);const c=He(ot(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),u=new Map,d=e.slice(),f=(b,v)=>{Yi(b!==-1,"targetIndex === -1 "),!(!Array.isArray(v)&&!v)&&d.splice(b+1,0,...$R(v))},g=new Set(e.filter(b=>c.has(b.id)&&We(b)).map(b=>b.id));for(const b of e){if(u.has(b.id)||!c.has(b.id))continue;const v=vV(t,b);if(v){const _=Tn(e,v).flatMap(w=>We(w)?[...cl(e,w.id),w]:[w]),E=of(d,w=>{var T;return(T=w.groupIds)==null?void 0:T.includes(v)});f(E,l(_));continue}if(!(b.frameId&&g.has(b.frameId))){if(We(b)){const _=b.id,E=cl(e,_),w=of(d,T=>T.frameId===_||T.id===_);f(w,l([...E,b]));continue}if(Ps(b)){const _=rt(b,a),E=of(d,w=>w.id===b.id||"containerId"in w&&w.containerId===b.id);_?f(E,l([b,_])):f(E,l(b));continue}if(Cn(b)){const _=Zr(b,a),E=of(d,w=>w.id===b.id||w.id===(_==null?void 0:_.id));_?f(E,l([_,b])):f(E,l(b));continue}f(of(d,_=>_.id===b.id),l(b))}}_G(d,i,o),vH(d,i,o),nG(d,i,o);const U=gx(r);return{elements:d,appState:{...t,...Vi({editingGroupId:t.editingGroupId,selectedElementIds:U.reduce((b,v)=>(Cn(v)||(b[v.id]=!0),b),{})},Un(d),t,null)}}},jG=D.forwardRef((e,t)=>{const{title:n,className:r,testId:i,active:o,standalone:s,icon:a,onClick:l}=e;return p("button",{type:"button",ref:t,title:n,"data-testid":i,className:Re(r,{standalone:s,active:o}),onClick:l,children:a},n)}),Ul=e=>p("div",{className:"buttonList",children:e.options.map(t=>e.type==="button"?p(jG,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):z("label",{className:Re({active:e.value===t.value}),title:t.text,children:[p("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))}),oye=({onChange:e,type:t,activeColor:n,topPicks:r})=>{let i;return t==="elementStroke"&&(i=x$),t==="elementBackground"&&(i=S$),t==="canvasBackground"&&(i=C$),r&&(i=r),i?p("div",{className:"color-picker__top-picks",children:i.map(o=>p("button",{className:Re("color-picker__button",{active:o===n,"is-transparent":o==="transparent"||!o}),style:{"--swatch-color":o},type:"button",title:o,onClick:()=>e(o),"data-testid":`color-top-pick-${o}`,children:p("div",{className:"color-picker__button-outline"})},o))}):(console.error("Invalid type for TopPicks"),null)},KG=()=>p("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),F3=({palette:e,color:t})=>{for(const[n,r]of Object.entries(e))if(Array.isArray(r)){const i=r.indexOf(t);if(i>-1)return{colorName:n,shade:i}}else if(r===t)return{colorName:n,shade:null};return null},Mw=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),YG=({color:e,palette:t})=>!Object.values(t).flat().includes(e),sye=(e,t,n)=>{const r={elementBackground:"backgroundColor",elementStroke:"strokeColor"},i=e.filter(s=>{if(s.isDeleted)return!1;const a=s[r[t]];return YG({color:a,palette:n})}),o=new Map;return i.forEach(s=>{const a=s[r[t]];o.has(a)?o.set(a,o.get(a)+1):o.set(a,1)}),[...o.entries()].sort((s,a)=>a[1]-s[1]).map(s=>s[0]).slice(0,oae)},g0=Pn(null),pL=(e,t,n)=>(e*299+t*587+n*114)/1e3>=160?"black":"white",aye=(e,t)=>{if(t){const o=new Option().style;if(o.color=e,o.color){const s=o.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),a=parseInt(s[0]),l=parseInt(s[1]),c=parseInt(s[2]);return pL(a,l,c)}}if(e==="transparent")return"black";const n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return pL(n,r,i)},mx=({color:e,keyLabel:t,isCustomColor:n=!1,isShade:r=!1})=>z("div",{className:"color-picker__button__hotkey-label",style:{color:aye(e,n)},children:[r&&"⇧",t]}),lye=({hex:e,onChange:t,palette:n})=>{const r=F3({color:e||"transparent",palette:n}),[i,o]=Yn(g0),s=D.useRef(null);if(D.useEffect(()=>{s.current&&i==="shades"&&s.current.focus()},[r,i]),r){const{colorName:a,shade:l}=r,c=n[a];if(Array.isArray(c))return p("div",{className:"color-picker-content--default shades",children:c.map((u,d)=>z("button",{ref:d===l&&i==="shades"?s:void 0,tabIndex:-1,type:"button",className:Re("color-picker__button color-picker__button--large",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:u?{"--swatch-color":u}:void 0,onClick:()=>{t(u),o("shades")},children:[p("div",{className:"color-picker__button-outline"}),p(mx,{color:u,keyLabel:d+1,isShade:!0})]},d))})}return z("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[p("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),p("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:L("colorPicker.noShades")})]})},cye=({palette:e,color:t,onChange:n,label:r,activeShade:i})=>{const o=F3({color:t||"transparent",palette:e}),[s,a]=Yn(g0),l=D.useRef(null);return D.useEffect(()=>{l.current&&s==="baseColors"&&l.current.focus()},[o==null?void 0:o.colorName,s]),p("div",{className:"color-picker-content--default",children:Object.entries(e).map(([c,u],d)=>{const f=(Array.isArray(u)?u[i]:u)||"transparent",g=Mw[d],U=L(`colors.${c.replace(/\d+/,"")}`,null,"");return z("button",{ref:(o==null?void 0:o.colorName)===c?l:void 0,tabIndex:-1,type:"button",className:Re("color-picker__button color-picker__button--large",{active:(o==null?void 0:o.colorName)===c,"is-transparent":f==="transparent"||!f}),onClick:()=>{n(f),a("baseColors")},title:`${U}${f.startsWith("#")?` ${f}`:""} — ${g}`,"aria-label":`${U} — ${g}`,style:f?{"--swatch-color":f}:void 0,"data-testid":`color-${c}`,children:[p("div",{className:"color-picker__button-outline"}),p(mx,{color:f,keyLabel:g})]},c)})})},uye=({colors:e,color:t,onChange:n,label:r})=>{const[i,o]=Yn(g0),s=D.useRef(null);return D.useEffect(()=>{s.current&&s.current.focus()},[t,i]),p("div",{className:"color-picker-content--default",children:e.map((a,l)=>z("button",{ref:t===a?s:void 0,tabIndex:-1,type:"button",className:Re("color-picker__button color-picker__button--large",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),o("custom")},title:a,"aria-label":r,style:{"--swatch-color":a},children:[p("div",{className:"color-picker__button-outline"}),p(mx,{color:a,keyLabel:l+1,isCustomColor:!0})]},l))})},GE=(e,t,n)=>{const r=Math.ceil(n/E1);switch(t=t??-1,e){case"ArrowLeft":{const i=t-1;return i<0?n-1:i}case"ArrowRight":return(t+1)%n;case"ArrowDown":{const i=t+E1;return i>=n?t%E1:i}case"ArrowUp":{const i=t-E1,o=i<0?E1*r+i:i;return o>=n?void 0:o}}},dye=({e,colorObj:t,onChange:n,palette:r,customColors:i,setActiveColorPickerSection:o,activeShade:s})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){const a=Number(e.code.slice(-1))-1;return n(r[t.colorName][a]),o("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&i[Number(e.key)-1])return n(i[Number(e.key)-1]),o("custom"),!0;if(Mw.includes(e.key)){const a=Mw.indexOf(e.key),l=Object.keys(r)[a],c=r[l],u=Array.isArray(c)?c[s]:c;return n(u),o("baseColors"),!0}return!1},fye=({event:e,activeColorPickerSection:t,palette:n,color:r,onChange:i,customColors:o,setActiveColorPickerSection:s,updateData:a,activeShade:l,onEyeDropperToggle:c,onEscape:u})=>{if(e[j.CTRL_OR_CMD])return!1;if(e.key===j.ESCAPE)return u(e),!0;if(e.key===j.ALT)return c(!0),!0;if(e.key===j.I)return c(),!0;const d=F3({color:r,palette:n});if(e.key===j.TAB){const f={custom:!!o.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},g=Object.entries(f).reduce((E,[w,T])=>(T&&E.push(w),E),[]),U=g.indexOf(t),b=e.shiftKey?-1:1,v=U+b>g.length-1?0:U+b<0?g.length-1:U+b,_=g[v];return _&&s(_),_==="custom"?i(o[0]):_==="baseColors"&&(Object.entries(n).find(([w,T])=>Array.isArray(T)?T.includes(r):T===r?w:null)||i(ft.black)),e.preventDefault(),e.stopPropagation(),!0}if(dye({e,colorObj:d,onChange:i,palette:n,customColors:o,setActiveColorPickerSection:s,activeShade:l}))return!0;if(t==="shades"&&d){const{shade:f}=d,g=GE(e.key,f,E1);if(g!==void 0)return i(n[d.colorName][g]),!0}if(t==="baseColors"&&d){const{colorName:f}=d,g=Object.keys(n),U=g.indexOf(f),b=GE(e.key,U,g.length);if(b!==void 0){const v=g[b],_=n[v];return i(Array.isArray(_)?_[l]:_),!0}}if(t==="custom"){const f=o.indexOf(r),g=GE(e.key,f,o.length);if(g!==void 0){const U=o[g];return i(U),!0}}return!1},kb=({children:e})=>p("div",{className:"color-picker__heading",children:e}),hye=({color:e,onChange:t,label:n,type:r,elements:i,palette:o,updateData:s,children:a,onEyeDropperToggle:l,onEscape:c})=>{const[u]=Ee.useState(()=>r==="canvasBackground"?[]:sye(i,r,o)),[d,f]=Yn(g0),g=F3({color:e,palette:o});D.useEffect(()=>{if(!d){const _=YG({color:e,palette:o}),E=_&&!u.includes(e);f(E?"hex":_?"custom":(g==null?void 0:g.shade)!=null?"shades":"baseColors")}},[d,e,o,f,g,u]);const[U,b]=D.useState((g==null?void 0:g.shade)??(r==="elementBackground"?Vp:zp));D.useEffect(()=>{(g==null?void 0:g.shade)!=null&&b(g.shade);const _=E=>{E.key===j.ALT&&l(!1)};return document.addEventListener(ge.KEYUP,_,{capture:!0}),()=>{document.removeEventListener(ge.KEYUP,_,{capture:!0})}},[g,l]);const v=Ee.useRef(null);return p("div",{role:"dialog","aria-modal":"true","aria-label":L("labels.colorPicker"),children:z("div",{ref:v,onKeyDown:_=>{fye({event:_,activeColorPickerSection:d,palette:o,color:e,onChange:t,onEyeDropperToggle:l,customColors:u,setActiveColorPickerSection:f,updateData:s,activeShade:U,onEscape:c})&&(_.preventDefault(),_.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!u.length&&z("div",{children:[p(kb,{children:L("colorPicker.mostUsedCustomColors")}),p(uye,{colors:u,color:e,label:L("colorPicker.mostUsedCustomColors"),onChange:t})]}),z("div",{children:[p(kb,{children:L("colorPicker.colors")}),p(cye,{color:e,label:n,palette:o,onChange:t,activeShade:U})]}),z("div",{children:[p(kb,{children:L("colorPicker.shades")}),p(lye,{hex:e,onChange:t,palette:o})]}),a]})})};function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bn.apply(null,arguments)}function Ri(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function gye(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ZG(...e){return t=>e.forEach(n=>gye(n,t))}function dl(...e){return D.useCallback(ZG(...e),e)}function UU(e,t=[]){let n=[];function r(o,s){const a=D.createContext(s),l=n.length;n=[...n,s];function c(d){const{scope:f,children:g,...U}=d,b=(f==null?void 0:f[e][l])||a,v=D.useMemo(()=>U,Object.values(U));return D.createElement(b.Provider,{value:v},g)}function u(d,f){const g=(f==null?void 0:f[e][l])||a,U=D.useContext(g);if(U)return U;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const i=()=>{const o=n.map(s=>D.createContext(s));return function(a){const l=(a==null?void 0:a[e])||o;return D.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,pye(i,...t)]}function pye(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}const S2=D.forwardRef((e,t)=>{const{children:n,...r}=e,i=D.Children.toArray(n),o=i.find(Uye);if(o){const s=o.props.children,a=i.map(l=>l===o?D.Children.count(s)>1?D.Children.only(null):D.isValidElement(s)?s.props.children:null:l);return D.createElement(Lw,bn({},r,{ref:t}),D.isValidElement(s)?D.cloneElement(s,void 0,a):null)}return D.createElement(Lw,bn({},r,{ref:t}),n)});S2.displayName="Slot";const Lw=D.forwardRef((e,t)=>{const{children:n,...r}=e;return D.isValidElement(n)?D.cloneElement(n,{...bye(r,n.props),ref:ZG(t,n.ref)}):D.Children.count(n)>1?D.Children.only(null):null});Lw.displayName="SlotClone";const mye=({children:e})=>D.createElement(D.Fragment,null,e);function Uye(e){return D.isValidElement(e)&&e.type===mye}function bye(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}const yye=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],Io=yye.reduce((e,t)=>{const n=D.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?S2:t;return D.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),D.createElement(a,bn({},s,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function vye(e,t){e&&Pr.flushSync(()=>e.dispatchEvent(t))}function Tc(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function Eye(e,t=globalThis==null?void 0:globalThis.document){const n=Tc(e);D.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const Dw="dismissableLayer.update",_ye="dismissableLayer.pointerDownOutside",wye="dismissableLayer.focusOutside";let mL;const Iye=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tye=D.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...c}=e,u=D.useContext(Iye),[d,f]=D.useState(null),g=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,U]=D.useState({}),b=dl(t,x=>f(x)),v=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(_),w=d?v.indexOf(d):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,A=w>=E,M=xye(x=>{const C=x.target,R=[...u.branches].some(O=>O.contains(C));!A||R||(o==null||o(x),a==null||a(x),x.defaultPrevented||l==null||l())},g),S=Sye(x=>{const C=x.target;[...u.branches].some(O=>O.contains(C))||(s==null||s(x),a==null||a(x),x.defaultPrevented||l==null||l())},g);return Eye(x=>{w===u.layers.size-1&&(i==null||i(x),!x.defaultPrevented&&l&&(x.preventDefault(),l()))},g),D.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(mL=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),UL(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=mL)}},[d,g,r,u]),D.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),UL())},[d,u]),D.useEffect(()=>{const x=()=>U({});return document.addEventListener(Dw,x),()=>document.removeEventListener(Dw,x)},[]),D.createElement(Io.div,bn({},c,{ref:b,style:{pointerEvents:T?A?"auto":"none":void 0,...e.style},onFocusCapture:Ri(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Ri(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ri(e.onPointerDownCapture,M.onPointerDownCapture)}))});function xye(e,t=globalThis==null?void 0:globalThis.document){const n=Tc(e),r=D.useRef(!1),i=D.useRef(()=>{});return D.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let c=function(){qG(_ye,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Sye(e,t=globalThis==null?void 0:globalThis.document){const n=Tc(e),r=D.useRef(!1);return D.useEffect(()=>{const i=o=>{o.target&&!r.current&&qG(wye,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function UL(){const e=new CustomEvent(Dw);document.dispatchEvent(e)}function qG(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?vye(i,o):i.dispatchEvent(o)}let XE=0;function Cye(){D.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:bL()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:bL()),XE++,()=>{XE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),XE--}},[])}function bL(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const jE="focusScope.autoFocusOnMount",KE="focusScope.autoFocusOnUnmount",yL={bubbles:!1,cancelable:!0},Aye=D.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,l]=D.useState(null),c=Tc(i),u=Tc(o),d=D.useRef(null),f=dl(t,b=>l(b)),g=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(r){let b=function(_){if(g.paused||!a)return;const E=_.target;a.contains(E)?d.current=E:ef(d.current,{select:!0})},v=function(_){g.paused||!a||a.contains(_.relatedTarget)||ef(d.current,{select:!0})};return document.addEventListener("focusin",b),document.addEventListener("focusout",v),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",v)}}},[r,a,g.paused]),D.useEffect(()=>{if(a){EL.add(g);const b=document.activeElement;if(!a.contains(b)){const _=new CustomEvent(jE,yL);a.addEventListener(jE,c),a.dispatchEvent(_),_.defaultPrevented||(kye(Dye(QG(a)),{select:!0}),document.activeElement===b&&ef(a))}return()=>{a.removeEventListener(jE,c),setTimeout(()=>{const _=new CustomEvent(KE,yL);a.addEventListener(KE,u),a.dispatchEvent(_),_.defaultPrevented||ef(b??document.body,{select:!0}),a.removeEventListener(KE,u),EL.remove(g)},0)}}},[a,c,u,g]);const U=D.useCallback(b=>{if(!n&&!r||g.paused)return;const v=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,_=document.activeElement;if(v&&_){const E=b.currentTarget,[w,T]=Rye(E);w&&T?!b.shiftKey&&_===T?(b.preventDefault(),n&&ef(w,{select:!0})):b.shiftKey&&_===w&&(b.preventDefault(),n&&ef(T,{select:!0})):_===E&&b.preventDefault()}},[n,r,g.paused]);return D.createElement(Io.div,bn({tabIndex:-1},s,{ref:f,onKeyDown:U}))});function kye(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ef(r,{select:t}),document.activeElement!==n)return}function Rye(e){const t=QG(e),n=vL(t,e),r=vL(t.reverse(),e);return[n,r]}function QG(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vL(e,t){for(const n of e)if(!Pye(n,{upTo:t}))return n}function Pye(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Mye(e){return e instanceof HTMLInputElement&&"select"in e}function ef(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Mye(e)&&t&&e.select()}}const EL=Lye();function Lye(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=_L(e,t),e.unshift(t)},remove(t){var n;e=_L(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function _L(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Dye(e){return e.filter(t=>t.tagName!=="A")}const Tu=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},Nye=kie.useId||(()=>{});let Oye=0;function Ux(e){const[t,n]=D.useState(Nye());return Tu(()=>{e||n(r=>r??String(Oye++))},[e]),e||(t?`radix-${t}`:"")}function wh(e){return e.split("-")[0]}function bU(e){return e.split("-")[1]}function p0(e){return["top","bottom"].includes(wh(e))?"x":"y"}function bx(e){return e==="y"?"height":"width"}function wL(e,t,n){let{reference:r,floating:i}=e;const o=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,a=p0(t),l=bx(a),c=r[l]/2-i[l]/2,u=a==="x";let d;switch(wh(t)){case"top":d={x:o,y:r.y-i.height};break;case"bottom":d={x:o,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:s};break;case"left":d={x:r.x-i.width,y:s};break;default:d={x:r.x,y:r.y}}switch(bU(t)){case"start":d[a]-=c*(n&&u?-1:1);break;case"end":d[a]+=c*(n&&u?-1:1)}return d}const Fye=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:u}=wL(l,r,a),d=r,f={},g=0;for(let U=0;U<o.length;U++){const{name:b,fn:v}=o[U],{x:_,y:E,data:w,reset:T}=await v({x:c,y:u,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:l,platform:s,elements:{reference:e,floating:t}});c=_??c,u=E??u,f={...f,[b]:{...f[b],...w}},T&&g<=50&&(g++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(l=T.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:c,y:u}=wL(l,d,a)),U=-1)}return{x:c,y:u,placement:d,strategy:i,middlewareData:f}};function JG(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Jy(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function C2(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:g=0}=t,U=JG(g),b=a[f?d==="floating"?"reference":"floating":d],v=Jy(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=Jy(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:d==="floating"?{...s.floating,x:r,y:i}:s.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),strategy:l}):s[d]);return{top:v.top-_.top+U.top,bottom:_.bottom-v.bottom+U.bottom,left:v.left-_.left+U.left,right:_.right-v.right+U.right}}const Bye=Math.min,tf=Math.max;function Nw(e,t,n){return tf(e,Bye(t,n))}const IL=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e??{},{x:i,y:o,placement:s,rects:a,platform:l}=t;if(n==null)return{};const c=JG(r),u={x:i,y:o},d=p0(s),f=bU(s),g=bx(d),U=await l.getDimensions(n),b=d==="y"?"top":"left",v=d==="y"?"bottom":"right",_=a.reference[g]+a.reference[d]-u[d]-a.floating[g],E=u[d]-a.reference[d],w=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let T=w?d==="y"?w.clientHeight||0:w.clientWidth||0:0;T===0&&(T=a.floating[g]);const A=_/2-E/2,M=c[b],S=T-U[g]-c[v],x=T/2-U[g]/2+A,C=Nw(M,x,S),R=(f==="start"?c[b]:c[v])>0&&x!==C&&a.reference[g]<=a.floating[g];return{[d]:u[d]-(R?x<M?M-x:S-x:0),data:{[d]:C,centerOffset:x-C}}}}),$ye={left:"right",right:"left",bottom:"top",top:"bottom"};function e8(e){return e.replace(/left|right|bottom|top/g,t=>$ye[t])}function zye(e,t,n){n===void 0&&(n=!1);const r=bU(e),i=p0(e),o=bx(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=e8(s)),{main:s,cross:e8(s)}}const Vye={start:"end",end:"start"};function TL(e){return e.replace(/start|end/g,t=>Vye[t])}const eX=["top","right","bottom","left"];eX.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const Hye=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:a,elements:l}=t,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",flipAlignment:g=!0,...U}=e,b=wh(r),v=d||(b===s||!g?[e8(s)]:function(x){const C=e8(x);return[TL(x),C,TL(C)]}(s)),_=[s,...v],E=await C2(t,U),w=[];let T=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&w.push(E[b]),u){const{main:x,cross:C}=zye(r,o,await(a.isRTL==null?void 0:a.isRTL(l.floating)));w.push(E[x],E[C])}if(T=[...T,{placement:r,overflows:w}],!w.every(x=>x<=0)){var A,M;const x=((A=(M=i.flip)==null?void 0:M.index)!=null?A:0)+1,C=_[x];if(C)return{data:{index:x,overflows:T},reset:{placement:C}};let R="bottom";switch(f){case"bestFit":{var S;const O=(S=T.map(F=>[F,F.overflows.filter(N=>N>0).reduce((N,J)=>N+J,0)]).sort((F,N)=>F[1]-N[1])[0])==null?void 0:S[0].placement;O&&(R=O);break}case"initialPlacement":R=s}if(r!==R)return{reset:{placement:R}}}return{}}}};function xL(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function SL(e){return eX.some(t=>e[t]>=0)}const Wye=function(e){let{strategy:t="referenceHidden",...n}=e===void 0?{}:e;return{name:"hide",async fn(r){const{rects:i}=r;switch(t){case"referenceHidden":{const o=xL(await C2(r,{...n,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:SL(o)}}}case"escaped":{const o=xL(await C2(r,{...n,altBoundary:!0}),i.floating);return{data:{escapedOffsets:o,escaped:SL(o)}}}default:return{}}}}},Gye=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(o,s){const{placement:a,platform:l,elements:c}=o,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),d=wh(a),f=bU(a),g=p0(a)==="x",U=["left","top"].includes(d)?-1:1,b=u&&g?-1:1,v=typeof s=="function"?s(o):s;let{mainAxis:_,crossAxis:E,alignmentAxis:w}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return f&&typeof w=="number"&&(E=f==="end"?-1*w:w),g?{x:E*b,y:_*U}:{x:_*U,y:E*b}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function tX(e){return e==="x"?"y":"x"}const Xye=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:v=>{let{x:_,y:E}=v;return{x:_,y:E}}},...l}=e,c={x:n,y:r},u=await C2(t,l),d=p0(wh(i)),f=tX(d);let g=c[d],U=c[f];if(o){const v=d==="y"?"bottom":"right";g=Nw(g+u[d==="y"?"top":"left"],g,g-u[v])}if(s){const v=f==="y"?"bottom":"right";U=Nw(U+u[f==="y"?"top":"left"],U,U-u[v])}const b=a.fn({...t,[d]:g,[f]:U});return{...b,data:{x:b.x-n,y:b.y-r}}}}},jye=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=e,u={x:n,y:r},d=p0(i),f=tX(d);let g=u[d],U=u[f];const b=typeof a=="function"?a({...o,placement:i}):a,v=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const A=d==="y"?"height":"width",M=o.reference[d]-o.floating[A]+v.mainAxis,S=o.reference[d]+o.reference[A]-v.mainAxis;g<M?g=M:g>S&&(g=S)}if(c){var _,E,w,T;const A=d==="y"?"width":"height",M=["top","left"].includes(wh(i)),S=o.reference[f]-o.floating[A]+(M&&(_=(E=s.offset)==null?void 0:E[f])!=null?_:0)+(M?0:v.crossAxis),x=o.reference[f]+o.reference[A]+(M?0:(w=(T=s.offset)==null?void 0:T[f])!=null?w:0)-(M?v.crossAxis:0);U<S?U=S:U>x&&(U=x)}return{[d]:g,[f]:U}}}},Kye=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:s,...a}=e,l=await C2(t,a),c=wh(n),u=bU(n);let d,f;c==="top"||c==="bottom"?(d=c,f=u===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(f=c,d=u==="end"?"top":"bottom");const g=tf(l.left,0),U=tf(l.right,0),b=tf(l.top,0),v=tf(l.bottom,0),_={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(b!==0||v!==0?b+v:tf(l.top,l.bottom)):l[d]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(g!==0||U!==0?g+U:tf(l.left,l.right)):l[f])},E=await i.getDimensions(o.floating);s==null||s({...t,..._});const w=await i.getDimensions(o.floating);return E.width!==w.width||E.height!==w.height?{reset:{rects:!0}}:{}}}};function nX(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Lc(e){if(e==null)return window;if(!nX(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function yU(e){return Lc(e).getComputedStyle(e)}function oc(e){return nX(e)?"":e?(e.nodeName||"").toLowerCase():""}function rX(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function fl(e){return e instanceof Lc(e).HTMLElement}function rd(e){return e instanceof Lc(e).Element}function yx(e){return typeof ShadowRoot>"u"?!1:e instanceof Lc(e).ShadowRoot||e instanceof ShadowRoot}function B3(e){const{overflow:t,overflowX:n,overflowY:r}=yU(e);return/auto|scroll|overlay|hidden/.test(t+r+n)}function Yye(e){return["table","td","th"].includes(oc(e))}function CL(e){const t=/firefox/i.test(rX()),n=yU(e);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"}function iX(){return!/^((?!chrome|android).)*safari/i.test(rX())}const AL=Math.min,Sm=Math.max,t8=Math.round;function sc(e,t,n){var r,i,o,s;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let l=1,c=1;t&&fl(e)&&(l=e.offsetWidth>0&&t8(a.width)/e.offsetWidth||1,c=e.offsetHeight>0&&t8(a.height)/e.offsetHeight||1);const u=rd(e)?Lc(e):window,d=!iX()&&n,f=(a.left+(d&&(r=(i=u.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/l,g=(a.top+(d&&(o=(s=u.visualViewport)==null?void 0:s.offsetTop)!=null?o:0))/c,U=a.width/l,b=a.height/c;return{width:U,height:b,top:g,right:f+U,bottom:g+b,left:f,x:f,y:g}}function Vu(e){return(t=e,(t instanceof Lc(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function $3(e){return rd(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function oX(e){return sc(Vu(e)).left+$3(e).scrollLeft}function Zye(e,t,n){const r=fl(t),i=Vu(t),o=sc(e,r&&function(l){const c=sc(l);return t8(c.width)!==l.offsetWidth||t8(c.height)!==l.offsetHeight}(t),n==="fixed");let s={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((oc(t)!=="body"||B3(i))&&(s=$3(t)),fl(t)){const l=sc(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else i&&(a.x=oX(i));return{x:o.left+s.scrollLeft-a.x,y:o.top+s.scrollTop-a.y,width:o.width,height:o.height}}function sX(e){return oc(e)==="html"?e:e.assignedSlot||e.parentNode||(yx(e)?e.host:null)||Vu(e)}function kL(e){return fl(e)&&getComputedStyle(e).position!=="fixed"?e.offsetParent:null}function Ow(e){const t=Lc(e);let n=kL(e);for(;n&&Yye(n)&&getComputedStyle(n).position==="static";)n=kL(n);return n&&(oc(n)==="html"||oc(n)==="body"&&getComputedStyle(n).position==="static"&&!CL(n))?t:n||function(r){let i=sX(r);for(yx(i)&&(i=i.host);fl(i)&&!["html","body"].includes(oc(i));){if(CL(i))return i;i=i.parentNode}return null}(e)||t}function RL(e){if(fl(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=sc(e);return{width:t.width,height:t.height}}function aX(e){const t=sX(e);return["html","body","#document"].includes(oc(t))?e.ownerDocument.body:fl(t)&&B3(t)?t:aX(t)}function n8(e,t){var n;t===void 0&&(t=[]);const r=aX(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=Lc(r),s=i?[o].concat(o.visualViewport||[],B3(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(n8(s))}function PL(e,t,n){return t==="viewport"?Jy(function(r,i){const o=Lc(r),s=Vu(r),a=o.visualViewport;let l=s.clientWidth,c=s.clientHeight,u=0,d=0;if(a){l=a.width,c=a.height;const f=iX();(f||!f&&i==="fixed")&&(u=a.offsetLeft,d=a.offsetTop)}return{width:l,height:c,x:u,y:d}}(e,n)):rd(t)?function(r,i){const o=sc(r,!1,i==="fixed"),s=o.top+r.clientTop,a=o.left+r.clientLeft;return{top:s,left:a,x:a,y:s,right:a+r.clientWidth,bottom:s+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,n):Jy(function(r){var i;const o=Vu(r),s=$3(r),a=(i=r.ownerDocument)==null?void 0:i.body,l=Sm(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=Sm(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let u=-s.scrollLeft+oX(r);const d=-s.scrollTop;return yU(a||o).direction==="rtl"&&(u+=Sm(o.clientWidth,a?a.clientWidth:0)-l),{width:l,height:c,x:u,y:d}}(Vu(e)))}function qye(e){const t=n8(e),n=["absolute","fixed"].includes(yU(e).position)&&fl(e)?Ow(e):e;return rd(n)?t.filter(r=>rd(r)&&function(i,o){const s=o.getRootNode==null?void 0:o.getRootNode();if(i.contains(o))return!0;if(s&&yx(s)){let a=o;do{if(a&&i===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(r,n)&&oc(r)!=="body"):[]}const Qye={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?qye(t):[].concat(n),r],s=o[0],a=o.reduce((l,c)=>{const u=PL(t,c,i);return l.top=Sm(u.top,l.top),l.right=AL(u.right,l.right),l.bottom=AL(u.bottom,l.bottom),l.left=Sm(u.left,l.left),l},PL(t,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=fl(n),o=Vu(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((oc(n)!=="body"||B3(o))&&(s=$3(n)),fl(n))){const l=sc(n,!0);a.x=l.x+n.clientLeft,a.y=l.y+n.clientTop}return{...t,x:t.x-s.scrollLeft+a.x,y:t.y-s.scrollTop+a.y}},isElement:rd,getDimensions:RL,getOffsetParent:Ow,getDocumentElement:Vu,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:Zye(t,Ow(n),r),floating:{...RL(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>yU(e).direction==="rtl"};function Jye(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:a=!1}=r,l=i&&!a,c=o&&!a,u=l||c?[...rd(e)?n8(e):[],...n8(t)]:[];u.forEach(U=>{l&&U.addEventListener("scroll",n,{passive:!0}),c&&U.addEventListener("resize",n)});let d,f=null;if(s){let U=!0;f=new ResizeObserver(()=>{U||n(),U=!1}),rd(e)&&!a&&f.observe(e),f.observe(t)}let g=a?sc(e):null;return a&&function U(){const b=sc(e);!g||b.x===g.x&&b.y===g.y&&b.width===g.width&&b.height===g.height||n(),g=b,d=requestAnimationFrame(U)}(),n(),()=>{var U;u.forEach(b=>{l&&b.removeEventListener("scroll",n),c&&b.removeEventListener("resize",n)}),(U=f)==null||U.disconnect(),f=null,a&&cancelAnimationFrame(d)}}const e8e=(e,t,n)=>Fye(e,t,{platform:Qye,...n});var Fw=typeof document<"u"?D.useLayoutEffect:D.useEffect;function Bw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Bw(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Bw(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function t8e(e){const t=D.useRef(e);return Fw(()=>{t.current=e}),t}function n8e(e){let{middleware:t,placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=e===void 0?{}:e;const o=D.useRef(null),s=D.useRef(null),a=t8e(i),l=D.useRef(null),[c,u]=D.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[d,f]=D.useState(t);Bw(d==null?void 0:d.map(w=>{let{options:T}=w;return T}),t==null?void 0:t.map(w=>{let{options:T}=w;return T}))||f(t);const g=D.useCallback(()=>{!o.current||!s.current||e8e(o.current,s.current,{middleware:d,placement:n,strategy:r}).then(w=>{U.current&&Pr.flushSync(()=>{u(w)})})},[d,n,r]);Fw(()=>{U.current&&g()},[g]);const U=D.useRef(!1);Fw(()=>(U.current=!0,()=>{U.current=!1}),[]);const b=D.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),o.current&&s.current)if(a.current){const w=a.current(o.current,s.current,g);l.current=w}else g()},[g,a]),v=D.useCallback(w=>{o.current=w,b()},[b]),_=D.useCallback(w=>{s.current=w,b()},[b]),E=D.useMemo(()=>({reference:o,floating:s}),[]);return D.useMemo(()=>({...c,update:g,refs:E,reference:v,floating:_}),[c,g,E,v,_])}const r8e=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?IL({element:t.current,padding:n}).fn(i):{}:t?IL({element:t,padding:n}).fn(i):{}}}},i8e=D.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return D.createElement(Io.svg,bn({},o,{ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:D.createElement("polygon",{points:"0,0 30,0 15,10"}))}),o8e=i8e;function s8e(e){const[t,n]=D.useState(void 0);return Tu(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const lX="Popper",[vx,cX]=UU(lX),[a8e,uX]=vx(lX),l8e=e=>{const{__scopePopper:t,children:n}=e,[r,i]=D.useState(null);return D.createElement(a8e,{scope:t,anchor:r,onAnchorChange:i},n)},c8e="PopperAnchor",u8e=D.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=uX(c8e,n),s=D.useRef(null),a=dl(t,s);return D.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:D.createElement(Io.div,bn({},i,{ref:a}))}),r8="PopperContent",[d8e,f8e]=vx(r8),[h8e,g8e]=vx(r8,{hasParent:!1,positionUpdateFns:new Set}),p8e=D.forwardRef((e,t)=>{var n,r,i,o,s,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:g="center",alignOffset:U=0,arrowPadding:b=0,collisionBoundary:v=[],collisionPadding:_=0,sticky:E="partial",hideWhenDetached:w=!1,avoidCollisions:T=!0,onPlaced:A,...M}=e,S=uX(r8,u),[x,C]=D.useState(null),R=dl(t,no=>C(no)),[O,F]=D.useState(null),N=s8e(O),J=(n=N==null?void 0:N.width)!==null&&n!==void 0?n:0,K=(r=N==null?void 0:N.height)!==null&&r!==void 0?r:0,ne=d+(g!=="center"?"-"+g:""),ee=typeof _=="number"?_:{top:0,right:0,bottom:0,left:0,..._},q=Array.isArray(v)?v:[v],Z=q.length>0,te={padding:ee,boundary:q.filter(v8e),altBoundary:Z},{reference:pe,floating:Ie,strategy:Se,x:lt,y:at,placement:gt,middlewareData:ht,update:tn}=n8e({strategy:"fixed",placement:ne,whileElementsMounted:Jye,middleware:[E8e(),Gye({mainAxis:f+K,alignmentAxis:U}),T?Xye({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?jye():void 0,...te}):void 0,O?r8e({element:O,padding:b}):void 0,T?Hye({...te}):void 0,Kye({...te,apply:({elements:no,availableWidth:Ta,availableHeight:yd})=>{no.floating.style.setProperty("--radix-popper-available-width",`${Ta}px`),no.floating.style.setProperty("--radix-popper-available-height",`${yd}px`)}}),_8e({arrowWidth:J,arrowHeight:K}),w?Wye({strategy:"referenceHidden"}):void 0].filter(y8e)});Tu(()=>{pe(S.anchor)},[pe,S.anchor]);const Kt=lt!==null&&at!==null,[pt,mt]=dX(gt),Ot=Tc(A);Tu(()=>{Kt&&(Ot==null||Ot())},[Kt,Ot]);const Ia=(i=ht.arrow)===null||i===void 0?void 0:i.x,gr=(o=ht.arrow)===null||o===void 0?void 0:o.y,fi=((s=ht.arrow)===null||s===void 0?void 0:s.centerOffset)!==0,[Yo,qn]=D.useState();Tu(()=>{x&&qn(window.getComputedStyle(x).zIndex)},[x]);const{hasParent:Ph,positionUpdateFns:Ds}=g8e(r8,u),Li=!Ph;D.useLayoutEffect(()=>{if(!Li)return Ds.add(tn),()=>{Ds.delete(tn)}},[Li,Ds,tn]),Tu(()=>{Li&&Kt&&Array.from(Ds).reverse().forEach(no=>requestAnimationFrame(no))},[Li,Kt,Ds]);const Jr={"data-side":pt,"data-align":mt,...M,ref:R,style:{...M.style,animation:Kt?void 0:"none",opacity:(a=ht.hide)!==null&&a!==void 0&&a.referenceHidden?0:void 0}};return D.createElement("div",{ref:Ie,"data-radix-popper-content-wrapper":"",style:{position:Se,left:0,top:0,transform:Kt?`translate3d(${Math.round(lt)}px, ${Math.round(at)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Yo,"--radix-popper-transform-origin":[(l=ht.transformOrigin)===null||l===void 0?void 0:l.x,(c=ht.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},D.createElement(d8e,{scope:u,placedSide:pt,onArrowChange:F,arrowX:Ia,arrowY:gr,shouldHideArrow:fi},Li?D.createElement(h8e,{scope:u,hasParent:!0,positionUpdateFns:Ds},D.createElement(Io.div,Jr)):D.createElement(Io.div,Jr)))}),m8e="PopperArrow",U8e={top:"bottom",right:"left",bottom:"top",left:"right"},b8e=D.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,o=f8e(m8e,r),s=U8e[o.placedSide];return D.createElement("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0}},D.createElement(o8e,bn({},i,{ref:n,style:{...i.style,display:"block"}})))});function y8e(e){return e!==void 0}function v8e(e){return e!==null}const E8e=()=>({name:"anchorCssProperties",fn(e){const{rects:t,elements:n}=e,{width:r,height:i}=t.reference;return n.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),n.floating.style.setProperty("--radix-popper-anchor-height",`${i}px`),{}}}),_8e=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,o,s;const{placement:a,rects:l,middlewareData:c}=t,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=d?0:e.arrowWidth,g=d?0:e.arrowHeight,[U,b]=dX(a),v={start:"0%",center:"50%",end:"100%"}[b],_=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,E=((o=(s=c.arrow)===null||s===void 0?void 0:s.y)!==null&&o!==void 0?o:0)+g/2;let w="",T="";return U==="bottom"?(w=d?v:`${_}px`,T=`${-g}px`):U==="top"?(w=d?v:`${_}px`,T=`${l.floating.height+g}px`):U==="right"?(w=`${-g}px`,T=d?v:`${E}px`):U==="left"&&(w=`${l.floating.width+g}px`,T=d?v:`${E}px`),{data:{x:w,y:T}}}});function dX(e){const[t,n="center"]=e.split("-");return[t,n]}const w8e=l8e,I8e=u8e,T8e=p8e,x8e=b8e,S8e=D.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=e;return r?$se.createPortal(D.createElement(Io.div,bn({},i,{ref:t})),r):null});function C8e(e,t){return D.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const z3=e=>{const{present:t,children:n}=e,r=A8e(t),i=typeof n=="function"?n({present:r.isPresent}):D.Children.only(n),o=dl(r.ref,i.ref);return typeof n=="function"||r.isPresent?D.cloneElement(i,{ref:o}):null};z3.displayName="Presence";function A8e(e){const[t,n]=D.useState(),r=D.useRef({}),i=D.useRef(e),o=D.useRef("none"),s=e?"mounted":"unmounted",[a,l]=C8e(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const c=x5(r.current);o.current=a==="mounted"?c:"none"},[a]),Tu(()=>{const c=r.current,u=i.current;if(u!==e){const f=o.current,g=x5(c);e?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Tu(()=>{if(t){const c=d=>{const g=x5(r.current).includes(d.animationName);d.target===t&&g&&Pr.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===t&&(o.current=x5(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",c),t.addEventListener("animationend",c),()=>{t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",c),t.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function x5(e){return(e==null?void 0:e.animationName)||"none"}function Ex({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=k8e({defaultProp:t,onChange:n}),o=e!==void 0,s=o?e:r,a=Tc(n),l=D.useCallback(c=>{if(o){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else i(c)},[o,e,i,a]);return[s,l]}function k8e({defaultProp:e,onChange:t}){const n=D.useState(e),[r]=n,i=D.useRef(r),o=Tc(t);return D.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var R8e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},p1=new WeakMap,S5=new WeakMap,C5={},YE=0,fX=function(e){return e&&(e.host||fX(e.parentNode))},P8e=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=fX(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},M8e=function(e,t,n,r){var i=P8e(t,Array.isArray(e)?e:[e]);C5[n]||(C5[n]=new WeakMap);var o=C5[n],s=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var g=f.getAttribute(r),U=g!==null&&g!=="false",b=(p1.get(f)||0)+1,v=(o.get(f)||0)+1;p1.set(f,b),o.set(f,v),s.push(f),b===1&&U&&S5.set(f,!0),v===1&&f.setAttribute(n,"true"),U||f.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",f,_)}})};return u(t),a.clear(),YE++,function(){s.forEach(function(d){var f=p1.get(d)-1,g=o.get(d)-1;p1.set(d,f),o.set(d,g),f||(S5.has(d)||d.removeAttribute(r),S5.delete(d)),g||d.removeAttribute(n)}),YE--,YE||(p1=new WeakMap,p1=new WeakMap,S5=new WeakMap,C5={})}},L8e=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=R8e(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),M8e(r,i,n,"aria-hidden")):function(){return null}},Ja=function(){return Ja=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ja.apply(this,arguments)};function hX(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function D8e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Rb="right-scroll-bar-position",Pb="width-before-scroll-bar",N8e="with-scroll-bars-hidden",O8e="--removed-body-scroll-bar-size";function ZE(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function F8e(e,t){var n=D.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var B8e=typeof window<"u"?D.useLayoutEffect:D.useEffect,ML=new WeakMap;function $8e(e,t){var n=F8e(null,function(r){return e.forEach(function(i){return ZE(i,r)})});return B8e(function(){var r=ML.get(n);if(r){var i=new Set(r),o=new Set(e),s=n.current;i.forEach(function(a){o.has(a)||ZE(a,null)}),o.forEach(function(a){i.has(a)||ZE(a,s)})}ML.set(n,e)},[e]),n}function z8e(e){return e}function V8e(e,t){t===void 0&&(t=z8e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var s=t(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function H8e(e){e===void 0&&(e={});var t=V8e(null);return t.options=Ja({async:!0,ssr:!1},e),t}var gX=function(e){var t=e.sideCar,n=hX(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return D.createElement(r,Ja({},n))};gX.isSideCarExport=!0;function W8e(e,t){return e.useMedium(t),gX}var pX=H8e(),qE=function(){},V3=D.forwardRef(function(e,t){var n=D.useRef(null),r=D.useState({onScrollCapture:qE,onWheelCapture:qE,onTouchMoveCapture:qE}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,g=e.noIsolation,U=e.inert,b=e.allowPinchZoom,v=e.as,_=v===void 0?"div":v,E=hX(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,T=$8e([n,t]),A=Ja(Ja({},E),i);return D.createElement(D.Fragment,null,u&&D.createElement(w,{sideCar:pX,removeScrollBar:c,shards:d,noIsolation:g,inert:U,setCallbacks:o,allowPinchZoom:!!b,lockRef:n}),s?D.cloneElement(D.Children.only(a),Ja(Ja({},A),{ref:T})):D.createElement(_,Ja({},A,{className:l,ref:T}),a))});V3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};V3.classNames={fullWidth:Pb,zeroRight:Rb};var G8e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function X8e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=G8e();return t&&e.setAttribute("nonce",t),e}function j8e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function K8e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Y8e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=X8e())&&(j8e(t,n),K8e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Z8e=function(){var e=Y8e();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},mX=function(){var e=Z8e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},q8e={left:0,top:0,right:0,gap:0},QE=function(e){return parseInt(e||"",10)||0},Q8e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[QE(n),QE(r),QE(i)]},J8e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return q8e;var t=Q8e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},e3e=mX(),dg="data-scroll-locked",t3e=function(e,t,n,r){var i=e.left,o=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(N8e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(dg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rb,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Pb,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Rb," .").concat(Rb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Pb," .").concat(Pb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dg,`] {
    `).concat(O8e,": ").concat(a,`px;
  }
`)},LL=function(){var e=parseInt(document.body.getAttribute(dg)||"0",10);return isFinite(e)?e:0},n3e=function(){D.useEffect(function(){return document.body.setAttribute(dg,(LL()+1).toString()),function(){var e=LL()-1;e<=0?document.body.removeAttribute(dg):document.body.setAttribute(dg,e.toString())}},[])},r3e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;n3e();var o=D.useMemo(function(){return J8e(i)},[i]);return D.createElement(e3e,{styles:t3e(o,!t,i,n?"":"!important")})},$w=!1;if(typeof window<"u")try{var A5=Object.defineProperty({},"passive",{get:function(){return $w=!0,!0}});window.addEventListener("test",A5,A5),window.removeEventListener("test",A5,A5)}catch{$w=!1}var m1=$w?{passive:!1}:!1,i3e=function(e){return e.tagName==="TEXTAREA"},UX=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!i3e(e)&&n[t]==="visible")},o3e=function(e){return UX(e,"overflowY")},s3e=function(e){return UX(e,"overflowX")},DL=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=bX(e,n);if(r){var i=yX(e,n),o=i[1],s=i[2];if(o>s)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},a3e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},l3e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},bX=function(e,t){return e==="v"?o3e(t):s3e(t)},yX=function(e,t){return e==="v"?a3e(t):l3e(t)},c3e=function(e,t){return e==="h"&&t==="rtl"?-1:1},u3e=function(e,t,n,r,i){var o=c3e(e,window.getComputedStyle(t).direction),s=o*r,a=n.target,l=t.contains(a),c=!1,u=s>0,d=0,f=0;do{var g=yX(e,a),U=g[0],b=g[1],v=g[2],_=b-v-o*U;(U||_)&&bX(e,a)&&(d+=_,f+=U),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(d===0||!i)||!u&&(f===0||!i))&&(c=!0),c},k5=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},NL=function(e){return[e.deltaX,e.deltaY]},OL=function(e){return e&&"current"in e?e.current:e},d3e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},f3e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},h3e=0,U1=[];function g3e(e){var t=D.useRef([]),n=D.useRef([0,0]),r=D.useRef(),i=D.useState(h3e++)[0],o=D.useState(function(){return mX()})[0],s=D.useRef(e);D.useEffect(function(){s.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var b=D8e([e.lockRef.current],(e.shards||[]).map(OL),!0).filter(Boolean);return b.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),b.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=D.useCallback(function(b,v){if("touches"in b&&b.touches.length===2)return!s.current.allowPinchZoom;var _=k5(b),E=n.current,w="deltaX"in b?b.deltaX:E[0]-_[0],T="deltaY"in b?b.deltaY:E[1]-_[1],A,M=b.target,S=Math.abs(w)>Math.abs(T)?"h":"v";if("touches"in b&&S==="h"&&M.type==="range")return!1;var x=DL(S,M);if(!x)return!0;if(x?A=S:(A=S==="v"?"h":"v",x=DL(S,M)),!x)return!1;if(!r.current&&"changedTouches"in b&&(w||T)&&(r.current=A),!A)return!0;var C=r.current||A;return u3e(C,v,b,C==="h"?w:T,!0)},[]),l=D.useCallback(function(b){var v=b;if(!(!U1.length||U1[U1.length-1]!==o)){var _="deltaY"in v?NL(v):k5(v),E=t.current.filter(function(A){return A.name===v.type&&A.target===v.target&&d3e(A.delta,_)})[0];if(E&&E.should){v.cancelable&&v.preventDefault();return}if(!E){var w=(s.current.shards||[]).map(OL).filter(Boolean).filter(function(A){return A.contains(v.target)}),T=w.length>0?a(v,w[0]):!s.current.noIsolation;T&&v.cancelable&&v.preventDefault()}}},[]),c=D.useCallback(function(b,v,_,E){var w={name:b,delta:v,target:_,should:E};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(T){return T!==w})},1)},[]),u=D.useCallback(function(b){n.current=k5(b),r.current=void 0},[]),d=D.useCallback(function(b){c(b.type,NL(b),b.target,a(b,e.lockRef.current))},[]),f=D.useCallback(function(b){c(b.type,k5(b),b.target,a(b,e.lockRef.current))},[]);D.useEffect(function(){return U1.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,m1),document.addEventListener("touchmove",l,m1),document.addEventListener("touchstart",u,m1),function(){U1=U1.filter(function(b){return b!==o}),document.removeEventListener("wheel",l,m1),document.removeEventListener("touchmove",l,m1),document.removeEventListener("touchstart",u,m1)}},[]);var g=e.removeScrollBar,U=e.inert;return D.createElement(D.Fragment,null,U?D.createElement(o,{styles:f3e(i)}):null,g?D.createElement(r3e,{gapMode:"margin"}):null)}const p3e=W8e(pX,g3e);var vX=D.forwardRef(function(e,t){return D.createElement(V3,Ja({},e,{ref:t,sideCar:p3e}))});vX.classNames=V3.classNames;const EX="Popover",[_X,ALe]=UU(EX,[cX]),H3=cX(),[m3e,m0]=_X(EX),U3e=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!1}=e,a=H3(t),l=D.useRef(null),[c,u]=D.useState(!1),[d=!1,f]=Ex({prop:r,defaultProp:i,onChange:o});return D.createElement(w8e,a,D.createElement(m3e,{scope:t,contentId:Ux(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:D.useCallback(()=>f(g=>!g),[f]),hasCustomAnchor:c,onCustomAnchorAdd:D.useCallback(()=>u(!0),[]),onCustomAnchorRemove:D.useCallback(()=>u(!1),[]),modal:s},n))},b3e="PopoverTrigger",y3e=D.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=m0(b3e,n),o=H3(n),s=dl(t,i.triggerRef),a=D.createElement(Io.button,bn({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":TX(i.open)},r,{ref:s,onClick:Ri(e.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:D.createElement(I8e,bn({asChild:!0},o),a)}),wX="PopoverPortal",[v3e,E3e]=_X(wX,{forceMount:void 0}),_3e=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,o=m0(wX,t);return D.createElement(v3e,{scope:t,forceMount:n},D.createElement(z3,{present:n||o.open},D.createElement(S8e,{asChild:!0,container:i},r)))},A2="PopoverContent",w3e=D.forwardRef((e,t)=>{const n=E3e(A2,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,o=m0(A2,e.__scopePopover);return D.createElement(z3,{present:r||o.open},o.modal?D.createElement(I3e,bn({},i,{ref:t})):D.createElement(T3e,bn({},i,{ref:t})))}),I3e=D.forwardRef((e,t)=>{const n=m0(A2,e.__scopePopover),r=D.useRef(null),i=dl(t,r),o=D.useRef(!1);return D.useEffect(()=>{const s=r.current;if(s)return L8e(s)},[]),D.createElement(vX,{as:S2,allowPinchZoom:!0},D.createElement(IX,bn({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ri(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),o.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:Ri(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ri(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})))}),T3e=D.forwardRef((e,t)=>{const n=m0(A2,e.__scopePopover),r=D.useRef(!1);return D.createElement(IX,bn({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,i),!i.defaultPrevented){var s;r.current||(s=n.triggerRef.current)===null||s===void 0||s.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var o,s;(o=e.onInteractOutside)===null||o===void 0||o.call(e,i),i.defaultPrevented||(r.current=!0);const a=i.target;((s=n.triggerRef.current)===null||s===void 0?void 0:s.contains(a))&&i.preventDefault()}}))}),IX=D.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=m0(A2,n),g=H3(n);return Cye(),D.createElement(Aye,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},D.createElement(Tye,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1)},D.createElement(T8e,bn({"data-state":TX(f.open),role:"dialog",id:f.contentId},g,d,{ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)"}}))))}),x3e=D.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=H3(n);return D.createElement(x8e,bn({},i,r,{ref:t}))});function TX(e){return e?"open":"closed"}const W3=U3e,G3=y3e,S3e=_3e,_x=w3e,xX=x3e,SX=Ee.createContext(null),Qr=()=>Ee.useContext(SX),CX=e=>{const[t,n]=D.useState(null),r=Or(),{theme:i}=Qr(),{container:o}=bl();return D.useLayoutEffect(()=>{var s;t&&(t.className="",t.classList.add("excalidraw",...((s=e==null?void 0:e.className)==null?void 0:s.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",r.editor.isMobile),t.classList.toggle("theme--dark",i===Ge.DARK))},[t,i,r.editor.isMobile,e==null?void 0:e.className]),D.useLayoutEffect(()=>{const s=e!=null&&e.parentSelector?o==null?void 0:o.querySelector(e.parentSelector):document.body;if(!s)return;const a=document.createElement("div");return s.appendChild(a),n(a),()=>{s.removeChild(a)}},[o,e==null?void 0:e.parentSelector]),t};function wx(e,t,n){D.useEffect(()=>{function r(i){const o=i;if(!e.current)return;const s=n==null?void 0:n(o,e.current);if(s===!0)return;if(s===!1)return t(o);e.current.contains(o.target)||!document.documentElement.contains(o.target)||o.target.closest("[data-radix-portal]")||o.target===document.documentElement&&document.body.style.pointerEvents==="none"||o.target.closest("[data-prevent-outside-click]")||t(o)}return document.addEventListener(ge.POINTER_DOWN,r),document.addEventListener(ge.TOUCH_START,r),()=>{document.removeEventListener(ge.POINTER_DOWN,r),document.removeEventListener(ge.TOUCH_START,r)}},[e,t,n])}const X3=e=>{const t=D.useRef(e);return Object.assign(t.current,e),t.current},j3=Pn(null),C3e=({onCancel:e,onChange:t,onSelect:n,colorPickerType:r})=>{const i=CX({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),o=Qr(),s=tv(),a=wa(),l=ot(s,o),c=X3({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:u}=bl();D.useEffect(()=>{const f=d.current;if(!f||!a.canvas||!i)return;let g=!1;const U=a.canvas.getContext("2d"),b=({clientX:M,clientY:S})=>{const x=U.getImageData((M-o.offsetLeft)*window.devicePixelRatio,(S-o.offsetTop)*window.devicePixelRatio,1,1).data;return uae(x[0],x[1],x[2])},v=({clientX:M,clientY:S,altKey:x})=>{f.style.top=`${S+20}px`,f.style.left=`${M+20}px`;const C=b({clientX:M,clientY:S});g&&c.onChange(r,C,c.selectedElements,{altKey:x}),f.style.background=C},_=()=>{c.onCancel()},E=(M,S)=>{c.onSelect(M,S)},w=M=>{g=!0,M.stopImmediatePropagation()},T=M=>{g=!1,u==null||u.focus(),M.stopImmediatePropagation(),M.preventDefault(),E(b(M),M)},A=M=>{M.key===j.ESCAPE&&(M.preventDefault(),M.stopImmediatePropagation(),_())};return i.tabIndex=-1,i.focus(),v({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),i.addEventListener(ge.KEYDOWN,A),i.addEventListener(ge.POINTER_DOWN,w),i.addEventListener(ge.POINTER_UP,T),window.addEventListener("pointermove",v,{passive:!0}),window.addEventListener(ge.BLUR,_),()=>{g=!1,i.removeEventListener(ge.KEYDOWN,A),i.removeEventListener(ge.POINTER_DOWN,w),i.removeEventListener(ge.POINTER_UP,T),window.removeEventListener("pointermove",v),window.removeEventListener(ge.BLUR,_)}},[c,a.canvas,i,r,u,o.offsetLeft,o.offsetTop]);const d=D.useRef(null);return wx(d,()=>{e()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),i?Pr.createPortal(p("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),i):null},A3e=({color:e,onChange:t,label:n,colorPickerType:r})=>{const i=Or(),[o,s]=D.useState(e),[a,l]=Yn(g0);D.useEffect(()=>{s(e)},[e]);const c=D.useCallback(U=>{const b=U.toLowerCase(),v=k3e(b);v&&t(v),s(b)},[t]),u=D.useRef(null),d=D.useRef(null);D.useEffect(()=>{u.current&&u.current.focus()},[a]);const[f,g]=Yn(j3);return D.useEffect(()=>()=>{g(null)},[g]),z("div",{className:"color-picker__input-label",children:[p("div",{className:"color-picker__input-hash",children:"#"}),p("input",{ref:a==="hex"?u:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:U=>{c(U.target.value)},value:(o||"").replace(/^#/,""),onBlur:()=>{s(e)},tabIndex:-1,onFocus:()=>l("hex"),onKeyDown:U=>{var b;U.key!==j.TAB&&(U.key===j.ESCAPE&&((b=d.current)==null||b.focus()),U.stopPropagation())}}),!i.editor.isMobile&&z(ke,{children:[p("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),p("div",{ref:d,className:Re("excalidraw-eye-dropper-trigger",{selected:f}),onClick:()=>g(U=>U?null:{keepOpenOnAlt:!1,onSelect:b=>t(b),colorPickerType:r}),title:`${L("labels.eyeDropper")} — ${j.I.toLocaleUpperCase()} or ${de("Alt")} `,children:afe})]})]})},ha=Ee.forwardRef(({children:e,padding:t,className:n,style:r},i)=>p("div",{className:Re("Island",n),style:{"--padding":t,...r},ref:i,children:e})),AX=Ee.forwardRef(({className:e,container:t,children:n,style:r,onClose:i,onKeyDown:o,onFocusOutside:s,onPointerLeave:a,onPointerDownOutside:l},c)=>{const u=Or();return p(S3e,{container:t,children:z(_x,{ref:c,className:Re("focus-visible-none",e),"data-prevent-outside-click":!0,side:u.editor.isMobile&&!u.viewport.isLandscape?"bottom":"right",align:u.editor.isMobile&&!u.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:o,onFocusOutside:s,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!xce(document.activeElement)&&t.focus(),i()},children:[p(ha,{padding:3,style:r,children:n}),p(xX,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),FL=e=>{const t=new Option().style;return t.color=e,!!t.color},k3e=e=>sa(e)?e:FL(`#${e}`)?`#${e}`:FL(e)?e:null,R3e=({type:e,color:t,onChange:n,label:r,elements:i,palette:o=ft,updateData:s})=>{const{container:a}=bl(),[,l]=Yn(g0),[c,u]=Yn(j3),d=z("div",{children:[p(kb,{children:L("colorPicker.hexCode")}),p(A3e,{color:t,label:r,onChange:U=>{n(U)},colorPickerType:e})]}),f=D.useRef(null),g=()=>{var U,b;(b=(U=f.current)==null?void 0:U.querySelector(".color-picker-content"))==null||b.focus()};return p(AX,{container:a,style:{maxWidth:"13rem"},onFocusOutside:U=>{g(),U.preventDefault()},onPointerDownOutside:U=>{c&&U.preventDefault()},onClose:()=>{s({openPopup:null}),l(null)},children:o?p(hye,{palette:o,color:t,onChange:U=>{n(U)},onEyeDropperToggle:U=>{u(b=>U?(b=b||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},b.keepOpenOnAlt=!0,b):U===!1||b?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:U=>{c?u(null):s({openPopup:null})},label:r,type:e,elements:i,updateData:s,children:d}):d})},P3e=({label:e,color:t,type:n})=>p(G3,{type:"button",className:Re("color-picker__button active-color properties-trigger",{"is-transparent":t==="transparent"||!t}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:L(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:p("div",{className:"color-picker__button-outline"})}),Ix=({type:e,color:t,onChange:n,label:r,elements:i,palette:o=ft,topPicks:s,updateData:a,appState:l})=>p("div",{children:z("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[p(oye,{activeColor:t,onChange:n,type:e,topPicks:s}),p(KG,{}),z(W3,{open:l.openPopup===e,onOpenChange:c=>{a({openPopup:c?e:null})},children:[p(P3e,{color:t,label:r,type:e}),l.openPopup===e&&p(R3e,{type:e,color:t,onChange:n,label:r,elements:i,palette:o,updateData:a})]})]})}),K3=({icon:e})=>p("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),zw=({label:e,open:t,openTrigger:n,children:r,className:i})=>z(ke,{children:[z("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:i,onClick:n,children:[e,p(K3,{icon:t?kfe:jV})]}),t&&p("div",{style:{display:"flex",flexDirection:"column"},children:r})]}),M3e=Pn(!1);function L3e({options:e,value:t,label:n,onChange:r,onClose:i,numberOfOptionsToAlwaysShow:o=e.length}){const s=Or(),a=g=>{const U=e.find(b=>b.keyBinding===g.key.toLowerCase());if(!(g.metaKey||g.altKey||g.ctrlKey)&&U)r(U.value),g.preventDefault();else if(g.key===j.TAB){const b=e.findIndex(_=>_.value===t),v=g.shiftKey?(e.length+b-1)%e.length:(b+1)%e.length;r(e[v].value)}else if(Wp(g.key)){const b=l2().rtl,v=e.findIndex(_=>_.value===t);if(v!==-1){const _=e.length;let E=v;switch(g.key){case(b?j.ARROW_LEFT:j.ARROW_RIGHT):E=(v+1)%_;break;case(b?j.ARROW_RIGHT:j.ARROW_LEFT):E=(_+v-1)%_;break;case j.ARROW_DOWN:{E=(v+(o??1))%_;break}case j.ARROW_UP:{E=(_+v-(o??1))%_;break}}r(e[E].value)}g.preventDefault()}else(g.key===j.ESCAPE||g.key===j.ENTER)&&(g.preventDefault(),i());g.nativeEvent.stopImmediatePropagation(),g.stopPropagation()},[l,c]=Yn(M3e),u=Ee.useMemo(()=>e.slice(0,o),[e,o]),d=Ee.useMemo(()=>e.slice(o),[e,o]);D.useEffect(()=>{u.some(g=>g.value===t)||c(!0)},[t,u,c]);const f=g=>p("div",{className:"picker-content",children:g.map((U,b)=>z("button",{type:"button",className:Re("picker-option",{active:t===U.value}),onClick:v=>{r(U.value)},title:`${U.text} ${U.keyBinding&&`— ${U.keyBinding.toUpperCase()}`}`,"aria-label":U.text||"none","aria-keyshortcuts":U.keyBinding||void 0,ref:v=>{t===U.value&&setTimeout(()=>{v==null||v.focus()},0)},children:[U.icon,U.keyBinding&&p("span",{className:"picker-keybinding",children:U.keyBinding})]},U.text))});return p(_x,{side:s.editor.isMobile&&!s.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:z("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[f(u),d.length>0&&p(zw,{label:L("labels.more_options"),open:l,openTrigger:()=>{c(g=>!g)},className:"picker-collapsible",children:f(d)})]})})}function BL({value:e,label:t,options:n,onChange:r,group:i="",numberOfOptionsToAlwaysShow:o}){var c;const[s,a]=Ee.useState(!1),l=Ee.useRef(null);return p("div",{children:z(W3,{open:s,onOpenChange:u=>a(u),children:[p(G3,{name:i,type:"button","aria-label":t,onClick:()=>a(!s),ref:l,className:s?"active":"",children:(c=n.find(u=>u.value===e))==null?void 0:c.icon}),s&&p(L3e,{options:n,value:e,label:t,onChange:r,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:o})]})})}const kX=Ee.forwardRef(({className:e,placeholder:t,onChange:n},r)=>z("div",{className:Re("QuickSearch__wrapper",e),children:[Wf,p("input",{ref:r,className:"QuickSearch__input",type:"text",placeholder:t,onChange:i=>n(i.target.value.trim().toLowerCase())})]})),RX=({className:e,placeholder:t,children:n})=>{const r=!D.Children.count(n);return p("div",{className:Re("ScrollableList__wrapper",e),role:"menu",children:r?p("div",{className:"empty",children:t}):n})},i8=({children:e,className:t="",style:n,title:r})=>z("div",{className:`dropdown-menu-group ${t}`,style:n,children:[r&&p("p",{className:"dropdown-menu-group-title",children:r}),e]});i8.displayName="DropdownMenuGroup";const PX=Ee.createContext({}),MX=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),LX=(e,t)=>{const n=D.useContext(PX);return c3(e,r=>{var o;const i=new CustomEvent(ge.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||(o=n.onSelect)==null||o.call(n,i)})},DX=({textStyle:e,icon:t,shortcut:n,children:r})=>{const i=Or();return z(ke,{children:[t&&p("div",{className:"dropdown-menu-item__icon",children:t}),p("div",{style:e,className:"dropdown-menu-item__text",children:r}),n&&!i.editor.isMobile&&p("div",{className:"dropdown-menu-item__shortcut",children:n})]})},To=({icon:e,value:t,order:n,children:r,shortcut:i,className:o,hovered:s,selected:a,textStyle:l,onSelect:c,onClick:u,...d})=>{const f=LX(u,c),g=D.useRef(null);return D.useEffect(()=>{var U,b;s&&(n===0?(U=g.current)==null||U.scrollIntoView({block:"end"}):(b=g.current)==null||b.scrollIntoView({block:"nearest"}))},[s,n]),p("button",{...d,ref:g,value:t,onClick:f,className:MX(o,a,s),title:d.title??d["aria-label"],children:p(DX,{textStyle:l,icon:e,shortcut:i,children:r})})};To.displayName="DropdownMenuItem";const Zp={GREEN:"green",RED:"red",BLUE:"blue"},Tx=({type:e=Zp.BLUE,children:t})=>{const{theme:n}=IU(),r={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===Ge.LIGHT?"1.5px solid white":"none"};switch(e){case Zp.GREEN:Object.assign(r,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case Zp.RED:Object.assign(r,{backgroundColor:"pink",color:"darkred"});break;case Zp.BLUE:default:Object.assign(r,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return p("div",{className:"DropDownMenuItemBadge",style:r,children:t})};Tx.displayName="DropdownMenuItemBadge";To.Badge=Tx;const D3e=({event:e,inputRef:t,hoveredFont:n,filteredFonts:r,onClose:i,onSelect:o,onHover:s})=>{var a,l,c;if(!e[j.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===j.F)return(a=t.current)==null||a.focus(),!0;if(e.key===j.ESCAPE)return i(),!0;if(e.key===j.ENTER)return n!=null&&n.value&&o(n.value),!0;if(e.key===j.ARROW_DOWN)return n!=null&&n.next?s(n.next.value):(l=r[0])!=null&&l.value&&s(r[0].value),!0;if(e.key===j.ARROW_UP)return n!=null&&n.prev?s(n.prev.value):(c=r[r.length-1])!=null&&c.value&&s(r[r.length-1].value),!0},N3e=Ee.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:r,onLeave:i,onOpen:o,onClose:s})=>{const{container:a}=bl(),{fonts:l}=wa(),{showDeprecatedFonts:c}=wU(),[u,d]=D.useState(""),f=D.useRef(null),g=D.useMemo(()=>Array.from(ca.registered.entries()).filter(([x,{metadata:C}])=>!C.serverSide&&!C.fallback).map(([x,{metadata:C,fontFaces:R}])=>{var F,N;const O={value:x,icon:C.icon??Cy,text:((N=(F=R[0])==null?void 0:F.fontFace)==null?void 0:N.family)??"Unknown"};return C.deprecated&&Object.assign(O,{deprecated:C.deprecated,badge:{type:Zp.RED,placeholder:L("fontList.badge.old")}}),O}).sort((x,C)=>x.text.toLowerCase()>C.text.toLowerCase()?1:-1),[]),U=D.useMemo(()=>new Set(l.getSceneFamilies()),[e]),b=D.useMemo(()=>g.filter(x=>U.has(x.value)),[g,U]),v=D.useMemo(()=>g.filter(x=>!U.has(x.value)&&(c||!x.deprecated)),[g,U,c]),_=D.useMemo(()=>Dce([...b,...v].filter(x=>{var C;return(C=x.text)==null?void 0:C.toLowerCase().includes(u)})),[b,v,u]),E=D.useMemo(()=>{var C;let x;return t?x=_.find(R=>R.value===t):e&&(x=_.find(R=>R.value===e)),!x&&u&&((C=_[0])!=null&&C.value?r(_[0].value):i()),x},[t,e,u,_,r,i]),w=D.useCallback(x=>{D3e({event:x,inputRef:f,hoveredFont:E,filteredFonts:_,onSelect:n,onHover:r,onClose:s})&&(x.preventDefault(),x.stopPropagation())},[E,_,n,r,s]);D.useEffect(()=>(o(),()=>{s()}),[]);const T=D.useMemo(()=>_.filter(x=>U.has(x.value)),[_,U]),A=D.useMemo(()=>_.filter(x=>!U.has(x.value)),[_,U]),M=(x,C)=>z(To,{icon:x.icon,value:x.value,order:C,textStyle:{fontFamily:tU({fontFamily:x.value})},hovered:x.value===(E==null?void 0:E.value),selected:x.value===e,tabIndex:x.value===e?0:-1,onClick:R=>{n(Number(R.currentTarget.value))},onMouseMove:()=>{(E==null?void 0:E.value)!==x.value&&r(x.value)},children:[x.text,x.badge&&p(Tx,{type:x.badge.type,children:x.badge.placeholder})]},x.value),S=[];return T.length&&S.push(p(i8,{title:L("fontList.sceneFonts"),children:T.map(M)},"group_1")),A.length&&S.push(p(i8,{title:L("fontList.availableFonts"),children:A.map((x,C)=>M(x,C+T.length))},"group_2")),z(AX,{className:"properties-content",container:a,style:{width:"15rem"},onClose:s,onPointerLeave:i,onKeyDown:w,children:[p(kX,{ref:f,placeholder:L("quickSearch.placeholder"),onChange:mc(d,20)}),p(RX,{className:"dropdown-menu fonts manual-hover",placeholder:L("fontList.empty"),children:S.length?S:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),O3e=({selectedFontFamily:e})=>{const t=D.useMemo(()=>!!(e&&!B3e(e)),[e]);return p(G3,{asChild:!0,children:p("div",{children:p(jG,{standalone:!0,icon:AV,title:L("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},NX=[{value:On.Excalifont,icon:f2,text:L("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:On.Nunito,icon:Cy,text:L("labels.normal"),testId:"font-family-normal"},{value:On["Comic Shanns"],icon:ew,text:L("labels.code"),testId:"font-family-code"}],F3e=new Set(NX.map(e=>e.value)),B3e=e=>e?F3e.has(e):!1,$3e=Ee.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:r,onHover:i,onLeave:o,onPopupChange:s})=>{const a=D.useMemo(()=>NX,[]),l=D.useCallback(c=>{c&&r(c)},[r]);return z("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[p(Ul,{type:"button",options:a,value:t,onClick:l}),p(KG,{}),z(W3,{open:e,onOpenChange:s,children:[p(O3e,{selectedFontFamily:t}),e&&p(N3e,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:i,onLeave:o,onOpen:()=>s(!0),onClose:()=>s(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),z3e=({updateData:e,appState:t,elements:n,testId:r})=>{const i=Ee.useRef(null),o=Ee.useRef(null),s=Qi(n,t,a=>a.opacity,!0,t.currentItemOpacity);return D.useEffect(()=>{if(i.current&&o.current){const a=i.current,l=o.current,c=a.offsetWidth,u=15,d=s/100*(c-u)+u/2;l.style.left=`${d}px`,a.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${s}%, var(--button-bg) ${s}%, var(--button-bg) 100%)`}},[s]),z("label",{className:"control-label",children:[L("labels.opacity"),z("div",{className:"range-wrapper",children:[p("input",{ref:i,type:"range",min:"0",max:"100",step:"10",onChange:a=>{e(+a.target.value)},value:s,className:"range-input","data-testid":r}),p("div",{className:"value-bubble",ref:o,children:s!==0?s:null}),p("div",{className:"zero-label",children:"0"})]})]})},OX=.1,qi=(e,t,n,r=!1)=>{const i=He(ot(e,t,{includeBoundTextElement:r}));return e.map(o=>{var s;return i.get(o.id)||o.id===((s=t.editingTextElement)==null?void 0:s.id)?n(o):o})},Qi=function(e,t,n,r,i){const o=t.editingTextElement,s=Un(e);let a=null;return o&&(a=n(o)),a||(_r(s,t)?a=Fbe(r===!0?s:s.filter(c=>r(c)),t,n)??(typeof i=="function"?i(!0):i):a=typeof i=="function"?i(!1):i),a},V3e=(e,t)=>Cn(t)||!t.autoResize?t:fe(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2},!1),xx=(e,t,n,r,i)=>{const o=new Set,s=qi(e,t,l=>{if(Ae(l)){const c=r(l);o.add(c);let u=Xe(l,{fontSize:c});return Zi(u,n.scene.getContainerElement(l),n.scene.getNonDeletedElementsMap()),u=V3e(l,u),u}return l},!0),a=He(s);return ot(e,t,{includeBoundTextElement:!0}).forEach(l=>{Ae(l)&&_o(l,a)}),{elements:s,appState:{...t,currentItemFontSize:o.size===1?[...o][0]:i??t.currentItemFontSize},storeAction:ae.CAPTURE}};we({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:qi(e,t,r=>Tw(r.type)?Xe(r,{strokeColor:n.currentItemStrokeColor}):r,!0)},appState:{...t,...n},storeAction:n.currentItemStrokeColor?ae.CAPTURE:ae.NONE}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>z(ke,{children:[p("h3",{"aria-hidden":"true",children:L("labels.stroke")}),p(Ix,{topPicks:x$,palette:aae,type:"elementStroke",label:L("labels.stroke"),color:Qi(e,t,i=>i.strokeColor,!0,t.currentItemStrokeColor),onChange:i=>n({currentItemStrokeColor:i}),elements:e,appState:t,updateData:n})]})});we({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:qi(e,t,r=>Xe(r,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},storeAction:n.currentItemBackgroundColor?ae.CAPTURE:ae.NONE}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>z(ke,{children:[p("h3",{"aria-hidden":"true",children:L("labels.background")}),p(Ix,{topPicks:S$,palette:lae,type:"elementBackground",label:L("labels.background"),color:Qi(e,t,i=>i.backgroundColor,!0,t.currentItemBackgroundColor),onChange:i=>n({currentItemBackgroundColor:i}),elements:e,appState:t,updateData:n})]})});we({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,r)=>(Dt("element","changeFillStyle",`${n} (${r.device.editor.isMobile?"mobile":"desktop"})`),{elements:qi(e,t,i=>Xe(i,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const r=ot(e,t),i=r.length>0&&r.every(o=>o.fillStyle==="zigzag");return z("fieldset",{children:[p("legend",{children:L("labels.fill")}),p(Ul,{type:"button",options:[{value:"hachure",text:`${L(i?"labels.zigzag":"labels.hachure")} (${de("Alt-Click")})`,icon:i?yde:vde,active:i?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:L("labels.crossHatch"),icon:Ede,testId:"fill-cross-hatch"},{value:"solid",text:L("labels.solid"),icon:_de,testId:"fill-solid"}],value:Qi(e,t,o=>o.fillStyle,o=>o.hasOwnProperty("fillStyle"),o=>o?null:t.currentItemFillStyle),onClick:(o,s)=>{const a=s.altKey&&o==="hachure"&&r.every(l=>l.fillStyle==="hachure")?"zigzag":o;n(a)}})]})}});we({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:qi(e,t,r=>Xe(r,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n})=>z("fieldset",{children:[p("legend",{children:L("labels.strokeWidth")}),p(Ul,{group:"stroke-width",options:[{value:sE.thin,text:L("labels.thin"),icon:NV,testId:"strokeWidth-thin"},{value:sE.bold,text:L("labels.bold"),icon:wde,testId:"strokeWidth-bold"},{value:sE.extraBold,text:L("labels.extraBold"),icon:Ide,testId:"strokeWidth-extraBold"}],value:Qi(e,t,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:t.currentItemStrokeWidth),onChange:r=>n(r)})]})});we({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:qi(e,t,r=>Xe(r,{seed:al(),roughness:n})),appState:{...t,currentItemRoughness:n},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n})=>z("fieldset",{children:[p("legend",{children:L("labels.sloppiness")}),p(Ul,{group:"sloppiness",options:[{value:0,text:L("labels.architect"),icon:Sde},{value:1,text:L("labels.artist"),icon:Cde},{value:2,text:L("labels.cartoonist"),icon:Ade}],value:Qi(e,t,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:t.currentItemRoughness),onChange:r=>n(r)})]})});we({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:qi(e,t,r=>Xe(r,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n})=>z("fieldset",{children:[p("legend",{children:L("labels.strokeStyle")}),p(Ul,{group:"strokeStyle",options:[{value:"solid",text:L("labels.strokeStyle_solid"),icon:NV},{value:"dashed",text:L("labels.strokeStyle_dashed"),icon:Tde},{value:"dotted",text:L("labels.strokeStyle_dotted"),icon:xde}],value:Qi(e,t,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:t.currentItemStrokeStyle),onChange:r=>n(r)})]})});we({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:qi(e,t,r=>Xe(r,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n})=>p(z3e,{updateData:n,elements:e,appState:t,testId:"opacity"})});we({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,r)=>xx(e,t,r,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>z("fieldset",{children:[p("legend",{children:L("labels.fontSize")}),p(Ul,{group:"font-size",options:[{value:16,text:L("labels.small"),icon:Hde,testId:"fontSize-small"},{value:20,text:L("labels.medium"),icon:Wde,testId:"fontSize-medium"},{value:28,text:L("labels.large"),icon:Gde,testId:"fontSize-large"},{value:36,text:L("labels.veryLarge"),icon:Xde,testId:"fontSize-veryLarge"}],value:Qi(e,t,i=>{if(Ae(i))return i.fontSize;const o=rt(i,r.scene.getNonDeletedElementsMap());return o?o.fontSize:null},i=>Ae(i)||rt(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:t.currentItemFontSize||Pc),onChange:i=>n(i)})]})});const $L=we({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:g3,trackEvent:!1,perform:(e,t,n,r)=>xx(e,t,r,i=>Math.round(1/(1+OX)*i.fontSize)),keyTest:e=>e[j.CTRL_OR_CMD]&&e.shiftKey&&(e.key===j.CHEVRON_LEFT||e.key===j.COMMA)}),zL=we({name:"increaseFontSize",label:"labels.increaseFontSize",icon:g3,trackEvent:!1,perform:(e,t,n,r)=>xx(e,t,r,i=>Math.round(i.fontSize*(1+OX))),keyTest:e=>e[j.CTRL_OR_CMD]&&e.shiftKey&&(e.key===j.CHEVRON_RIGHT||e.key===j.PERIOD)});we({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,r)=>{var U;const{cachedElements:i,resetAll:o,resetContainers:s,...a}=n;if(o)return{elements:qi(e,t,v=>{const _=i==null?void 0:i.get(v.id);return _?Xe(v,{..._}):v},!0),appState:{...t,...a},storeAction:ae.UPDATE};const{currentItemFontFamily:l,currentHoveredFontFamily:c}=n;let u=ae.NONE,d,f=!1;if(l)d=l,u=ae.CAPTURE;else if(c){d=c,u=ae.NONE;const b=ot(e,t,{includeBoundTextElement:!0}).filter(v=>Ae(v));if(b.length>200)f=!0;else{let v=0,_=0;for(;v<b.length&&_<5e3;){const E=b[v];_+=(E==null?void 0:E.originalText.length)||0,v++}_>5e3&&(f=!0)}}const g={appState:{...t,...a},storeAction:u};if(d&&!f){const b=new Map;let v=new Set,_=!1;const E=Array.from(ca.loadedFontsCache.values()),w=(U=Object.entries(On).find(([M,S])=>S===d))==null?void 0:U[0];c&&w&&E.some(M=>M.startsWith(w))&&(_=!0),Object.assign(g,{elements:qi(e,t,M=>{if(Ae(M)&&(M.fontFamily!==d||l)){const S=Xe(M,{fontFamily:d,lineHeight:Gf(d)}),x=(i==null?void 0:i.get(M.containerId||""))||{},C=r.scene.getContainerElement(M);return s&&C&&x&&fe(C,{...x},!1),_||(v=new Set([...v,...Array.from(S.originalText)])),b.set(S,C),S}return M},!0)});const T=`10px ${tU({fontFamily:d})}`,A=Array.from(v.values()).join();if(_||window.document.fonts.check(T,A))for(const[M,S]of b)Zi(M,S,r.scene.getNonDeletedElementsMap(),!1);else window.document.fonts.load(T,A).then(M=>{for(const[S,x]of b){const C=r.scene.getElement(S.id),R=x?r.scene.getElement(x.id):null;C&&Zi(C,R,r.scene.getNonDeletedElementsMap(),!1)}r.fonts.onLoaded(M)})}return g},PanelComponent:({elements:e,appState:t,app:n,updateData:r})=>{const i=D.useRef(new Map),o=D.useRef(null),[s,a]=D.useState({}),l=D.useRef(!0),c=D.useMemo(()=>{var d;const u=(f,g)=>Qi(f,t,U=>{if(Ae(U))return U.fontFamily;const b=rt(U,g);return b?b.fontFamily:null},U=>Ae(U)||rt(U,g)!==null,U=>U?null:t.currentItemFontFamily||md);return s.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?u(Array.from(((d=i.current)==null?void 0:d.values())??[]),i.current):!s.openPopup&&t.openPopup!=="fontFamily"?u(e,n.scene.getNonDeletedElementsMap()):o.current},[s.openPopup,t,e,n.scene]);return D.useEffect(()=>{o.current=c},[c]),D.useEffect(()=>{Object.keys(s).length&&(r(s),a({}))},[s]),D.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),z("fieldset",{children:[p("legend",{children:L("labels.fontFamily")}),p($3e,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:c,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:u=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:u}),i.current.clear()},onHover:u=>{a({currentHoveredFontFamily:u,cachedElements:new Map(i.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0})},onPopupChange:u=>{if(u){i.current.clear();const{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){const f=n.scene.getElement(d.id);i.current.set(d.id,Xe(f||d,{},!0))}else{const f=ot(e,t,{includeBoundTextElement:!0});for(const g of f)i.current.set(g.id,Xe(g,{},!0))}a({openPopup:"fontFamily"})}else{const d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0};l.current?r({...s,...d}):a(d),i.current.clear()}}})]})}});we({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,r)=>({elements:qi(e,t,i=>{if(Ae(i)){const o=Xe(i,{textAlign:n});return Zi(o,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),o}return i},!0),appState:{...t,currentItemTextAlign:n},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>{const i=r.scene.getNonDeletedElementsMap();return z("fieldset",{children:[p("legend",{children:L("labels.textAlign")}),p(Ul,{group:"text-align",options:[{value:"left",text:L("labels.left"),icon:Kde,testId:"align-left"},{value:"center",text:L("labels.center"),icon:Yde,testId:"align-horizontal-center"},{value:"right",text:L("labels.right"),icon:Zde,testId:"align-right"}],value:Qi(e,t,o=>{if(Ae(o))return o.textAlign;const s=rt(o,i);return s?s.textAlign:null},o=>Ae(o)||rt(o,i)!==null,o=>o?null:t.currentItemTextAlign),onChange:o=>n(o)})]})}});we({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:qi(e,t,i=>{if(Ae(i)){const o=Xe(i,{verticalAlign:n});return Zi(o,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),o}return i},!0),appState:{...t},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p("fieldset",{children:p(Ul,{group:"text-align",options:[{value:Do.TOP,text:L("labels.alignTop"),icon:p(qde,{theme:t.theme}),testId:"align-top"},{value:Do.MIDDLE,text:L("labels.centerVertically"),icon:p(Jde,{theme:t.theme}),testId:"align-middle"},{value:Do.BOTTOM,text:L("labels.alignBottom"),icon:p(Qde,{theme:t.theme}),testId:"align-bottom"}],value:Qi(e,t,i=>{if(Ae(i)&&i.containerId)return i.verticalAlign;const o=rt(i,r.scene.getNonDeletedElementsMap());return o?o.verticalAlign:null},i=>Ae(i)||rt(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:Do.MIDDLE),onChange:i=>n(i)})})});we({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:qi(e,t,r=>De(r)?r:Xe(r,{roundness:n==="round"?{type:c0(r.type)?Er.ADAPTIVE_RADIUS:Er.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=FG(Un(e),t).some(o=>{var s;return((s=o.roundness)==null?void 0:s.type)===Er.LEGACY});return z("fieldset",{children:[p("legend",{children:L("labels.edges")}),p(Ul,{group:"edges",options:[{value:"sharp",text:L("labels.sharp"),icon:kde},{value:"round",text:L("labels.round"),icon:Rde}],value:Qi(e,t,o=>i?null:o.roundness?"round":"sharp",o=>!st(o)&&o.hasOwnProperty("roundness"),o=>o?null:t.currentItemRoundness),onChange:o=>n(o)})]})}});const VL=e=>[{value:null,text:L("labels.arrowhead_none"),keyBinding:"q",icon:Pde},{value:"arrow",text:L("labels.arrowhead_arrow"),keyBinding:"w",icon:p(J_,{flip:e})},{value:"triangle",text:L("labels.arrowhead_triangle"),icon:p(Nde,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:L("labels.arrowhead_triangle_outline"),icon:p(Ode,{flip:e}),keyBinding:"r"},{value:"circle",text:L("labels.arrowhead_circle"),keyBinding:"a",icon:p(Mde,{flip:e})},{value:"circle_outline",text:L("labels.arrowhead_circle_outline"),keyBinding:"s",icon:p(Lde,{flip:e})},{value:"diamond",text:L("labels.arrowhead_diamond"),icon:p(Fde,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:L("labels.arrowhead_diamond_outline"),icon:p(Bde,{flip:e}),keyBinding:"f"},{value:"bar",text:L("labels.arrowhead_bar"),keyBinding:"z",icon:p(Dde,{flip:e})},{value:"crowfoot_one",text:L("labels.arrowhead_crowfoot_one"),icon:p(zde,{flip:e}),keyBinding:"c"},{value:"crowfoot_many",text:L("labels.arrowhead_crowfoot_many"),icon:p($de,{flip:e}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:L("labels.arrowhead_crowfoot_one_or_many"),icon:p(Vde,{flip:e}),keyBinding:"v"}];we({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:qi(e,t,r=>{if(et(r)){const{position:i,type:o}=n;if(i==="start")return Xe(r,{startArrowhead:o});if(i==="end")return Xe(r,{endArrowhead:o})}return r}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const r=l2().rtl;return z("fieldset",{children:[p("legend",{children:L("labels.arrowheads")}),z("div",{className:"iconSelectList buttonList",children:[p(BL,{label:"arrowhead_start",options:VL(!r),value:Qi(e,t,i=>et(i)&&Zy(i.type)?i.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:i=>n({position:"start",type:i}),numberOfOptionsToAlwaysShow:4}),p(BL,{label:"arrowhead_end",group:"arrowheads",options:VL(!!r),value:Qi(e,t,i=>et(i)&&Zy(i.type)?i.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:i=>n({position:"end",type:i}),numberOfOptionsToAlwaysShow:4})]})]})}});we({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,r)=>{var a;const i=qi(e,t,l=>{if(!st(l))return l;const c=Xe(l,{roundness:n===Vr.round?{type:Er.PROPORTIONAL_RADIUS}:null,elbowed:n===Vr.elbow,points:n===Vr.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(De(c)){const u=r.scene.getNonDeletedElementsMap();r.dismissLinearEditor();const d=Ce.getPointAtIndexGlobalCoordinates(c,0,u),f=Ce.getPointAtIndexGlobalCoordinates(c,-1,u),g=!c.startBinding&&bs(ms(d),e,u,t.zoom,!1,!0),U=!c.endBinding&&bs(ms(f),e,u,t.zoom,!1,!0),b=g||c.startBinding&&u.get(c.startBinding.elementId),v=U||c.endBinding&&u.get(c.endBinding.elementId),_=g?Dy(d,f,g,u):d,E=U?Dy(f,d,U,u):f;g&&ll(c,g,"start",u),U&&ll(c,U,"end",u),fe(c,{points:[_,E].map(w=>B(w[0]-c.x,w[1]-c.y)),...b&&c.startBinding?{startBinding:{...c.startBinding,...Ny(c,b,"start",u)}}:{},...v&&c.endBinding?{endBinding:{...c.endBinding,...Ny(c,v,"end",u)}}:{}}),Ce.updateEditorMidPointsCache(c,u,r.state)}return c}),o={...t,currentItemArrowType:n},s=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(s){const l=i.find(c=>c.id===s);l&&(o.selectedLinearElement=new Ce(l))}return{elements:i,appState:o,storeAction:ae.CAPTURE}},PanelComponent:({elements:e,appState:t,updateData:n})=>z("fieldset",{children:[p("legend",{children:L("labels.arrowtypes")}),p(Ul,{group:"arrowtypes",options:[{value:Vr.sharp,text:L("labels.arrowtype_sharp"),icon:Sfe,testId:"sharp-arrow"},{value:Vr.round,text:L("labels.arrowtype_round"),icon:Afe,testId:"round-arrow"},{value:Vr.elbow,text:L("labels.arrowtype_elbowed"),icon:Cfe,testId:"elbow-arrow"}],value:Qi(e,t,r=>st(r)?r.elbowed?Vr.elbow:r.roundness?Vr.round:Vr.sharp:null,r=>st(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})]})});const Uf=({viewportX:e,viewportY:t,nextZoom:n},r)=>{const i=e-r.offsetLeft,o=t-r.offsetTop,s=r.zoom.value,a=r.scrollX+(i-i/s),l=r.scrollY+(o-o/s),c=-(i-i/n),u=-(o-o/n);return{scrollX:a+c,scrollY:l+u,zoom:{value:n}}},Cm=()=>{const e=document.querySelector(".excalidraw-tooltip");if(e)return e;const t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},FX=(e,t,n="bottom")=>{const r=e.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=5;let a=t.left+t.width/2-r.width/2;a<0?a=s:a+r.width>=i&&(a=i-r.width-s);let l;n==="bottom"?(l=t.top+t.height+s,l+r.height>=o&&(l=t.top-r.height-s)):(l=t.top-r.height-s,l<0&&(l=t.top+t.height+s)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},H3e=(e,t,n,r)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=r?"50ch":"10ch",t.style.maxWidth=r?"50ch":"15ch",t.textContent=n;const i=e.getBoundingClientRect();FX(t,i)},xc=({children:e,label:t,long:n=!1,style:r,disabled:i})=>(D.useEffect(()=>()=>Cm().classList.remove("excalidraw-tooltip--visible"),[]),i?null:p("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:o=>H3e(o.currentTarget,Cm(),t,n),onPointerLeave:()=>Cm().classList.remove("excalidraw-tooltip--visible"),style:r,children:e}));we({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},storeAction:n.viewBackgroundColor?ae.CAPTURE:ae.NONE}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>p(Ix,{palette:null,topPicks:C$,label:L("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:i=>n({viewBackgroundColor:i}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});const Am=we({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:Ju,trackEvent:{category:"canvas"},predicate:(e,t,n,r)=>{var i;return!!r.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((i=t.openDialog)==null?void 0:i.name)!=="elementLinkSelector"},perform:(e,t,n,r)=>(r.imageCache.clear(),{elements:e.map(i=>Xe(i,{isDeleted:!0})),appState:{...ks(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},storeAction:ae.CAPTURE})}),HL=we({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:YR,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Uf({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ec(t.zoom.value+t3)},t),userToFollow:null},storeAction:ae.NONE}),PanelComponent:({updateData:e,appState:t})=>p(vt,{type:"button",className:"zoom-in-button zoom-button",icon:YR,title:`${L("buttons.zoomIn")} — ${de("CtrlOrCmd++")}`,"aria-label":L("buttons.zoomIn"),disabled:t.zoom.value>=WI,onClick:()=>{e(null)}}),keyTest:e=>(e.code===It.EQUAL||e.code===It.NUM_ADD)&&(e[j.CTRL_OR_CMD]||e.shiftKey)}),WL=we({name:"zoomOut",label:"buttons.zoomOut",icon:ZR,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Uf({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ec(t.zoom.value-t3)},t),userToFollow:null},storeAction:ae.NONE}),PanelComponent:({updateData:e,appState:t})=>p(vt,{type:"button",className:"zoom-out-button zoom-button",icon:ZR,title:`${L("buttons.zoomOut")} — ${de("CtrlOrCmd+-")}`,"aria-label":L("buttons.zoomOut"),disabled:t.zoom.value<=HI,onClick:()=>{e(null)}}),keyTest:e=>(e.code===It.MINUS||e.code===It.NUM_SUBTRACT)&&(e[j.CTRL_OR_CMD]||e.shiftKey)}),GL=we({name:"resetZoom",label:"buttons.resetZoom",icon:nde,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Uf({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:ec(1)},t),userToFollow:null},storeAction:ae.NONE}),PanelComponent:({updateData:e,appState:t})=>p(xc,{label:L("buttons.resetZoom"),style:{height:"100%"},children:z(vt,{type:"button",className:"reset-zoom-button zoom-button",title:L("buttons.resetZoom"),"aria-label":L("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===It.ZERO||e.code===It.NUM_ZERO)&&(e[j.CTRL_OR_CMD]||e.shiftKey)}),W3e=(e,t,n=1)=>{const[r,i,o,s]=e,a=o-r,l=t.width/a,c=s-i,u=t.height/c,f=Math.min(l,u)*dt(n,.1,1);return Math.min(f,1)},BX=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:r=!1,viewportZoomFactor:i=1,minZoom:o=-1/0,maxZoom:s=1/0})=>{i=dt(i,HI,WI);const[a,l,c,u]=e,d=(a+c)/2,f=(l+u)/2,g=(n==null?void 0:n.left)??0,U=(n==null?void 0:n.top)??0,b=(n==null?void 0:n.right)??0,v=(n==null?void 0:n.bottom)??0,_=t.width-g-b,E=t.height-U-v;let w;if(r){const M=c-a,S=u-l;w=Math.min(_/M,E/S)*i}else w=W3e(e,{width:_,height:E},i);const T=ec(dt(pce(w,t3,"floor"),o,s)),A=BG({scenePoint:{x:d,y:f},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:T}});return{appState:{...t,scrollX:A.scrollX,scrollY:A.scrollY,zoom:{value:T}},storeAction:ae.NONE}},Y3=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:o,maxZoom:s})=>{const a=jt(Un(t));return BX({canvasOffsets:e,bounds:a,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:o,maxZoom:s})};we({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:pT,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t);return Y3({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===It.TWO&&e.shiftKey&&!e.altKey&&!e[j.CTRL_OR_CMD]});we({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:pT,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t);return Y3({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===It.THREE&&e.shiftKey&&!e.altKey&&!e[j.CTRL_OR_CMD]});we({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:pT,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>Y3({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()}),keyTest:e=>e.code===It.ONE&&e.shiftKey&&!e.altKey&&!e[j.CTRL_OR_CMD]});const o8=we({name:"toggleTheme",label:(e,t)=>t.theme===Ge.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===Ge.LIGHT?q_:Q_,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===Ge.LIGHT?Ge.DARK:Ge.LIGHT)},storeAction:ae.NONE}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===It.D,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.toggleTheme});we({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return Ha(t)?n=lr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=lr(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},storeAction:ae.CAPTURE}},keyTest:e=>e.key===j.E});const G3e=we({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:FV,viewMode:!1,perform:(e,t,n,r)=>{let i;return xg(t)?i=lr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(i=lr(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),on(r.interactiveCanvas,Qt.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:i},storeAction:ae.CAPTURE}},keyTest:e=>!e.altKey&&!e[j.CTRL_OR_CMD]&&e.key===j.H}),Xs=we({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,r)=>{var f;const{interactiveCanvas:i,focusContainer:o,scene:s}=r,a=s.getNonDeletedElementsMap();if(t.editingLinearElement){const{elementId:g,startBindingElement:U,endBindingElement:b}=t.editingLinearElement,v=Ce.getElement(g,a);if(v)return Za(v)&&U3(v,U,b,a,s),{elements:v.points.length<2||nh(v)?e.filter(_=>_.id!==v.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},storeAction:ae.CAPTURE}}let l=e;const c=t.pendingImageElementId&&s.getElement(t.pendingImageElementId);c&&fe(c,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&o();const u=t.multiElement?t.multiElement:((f=t.newElement)==null?void 0:f.type)==="freedraw"?t.newElement:null;if(u){if(u.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){const{points:U,lastCommittedPoint:b}=u;(!b||U[U.length-1]!==b)&&fe(u,{points:u.points.slice(0,-1)})}nh(u)&&(l=l.filter(U=>U.id!==u.id));const g=bc(u.points,t.zoom.value);if((u.type==="line"||u.type==="freedraw")&&g){const U=u.points,b=U[0];fe(u,{points:U.map((v,_)=>_===U.length-1?B(b[0],b[1]):v)})}if(Za(u)&&!g&&u.points.length>1){const[U,b]=Ce.getPointAtIndexGlobalCoordinates(u,-1,He(e));lw(u,t,{x:U,y:b},a,e)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!u)&&Ks(i);let d;return t.activeTool.type==="eraser"?d=lr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=lr(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&u?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:u&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[u.id]:!0}:t.selectedElementIds,selectedLinearElement:u&&et(u)?new Ce(u):t.selectedLinearElement,pendingImageElementId:null},storeAction:ae.CAPTURE}},keyTest:(e,t)=>e.key===j.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===j.ESCAPE||e.key===j.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>p(vt,{type:"button",icon:ude,title:L("buttons.done"),"aria-label":L("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),X3e=e=>{const{id:t}=bl(),[n,r]=D.useState(e.value),i=s=>{e.ignoreFocus||Mce(s.target);const a=s.target.value;a!==e.value&&e.onChange(a)},o=s=>{if(s.key===j.ENTER){if(s.preventDefault(),s.nativeEvent.isComposing||s.keyCode===229)return;s.currentTarget.blur()}};return z("div",{className:"ProjectName",children:[p("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),p("input",{type:"text",className:"TextInput",onBlur:i,onKeyDown:o,id:`${t}-filename`,value:n,onChange:s=>r(s.target.value)})]})},j3e=e=>{const t=e.title||(e.value===Ge.DARK?L("buttons.lightMode"):L("buttons.darkMode"));return p(vt,{type:"icon",icon:e.value===Ge.LIGHT?XL.MOON:XL.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===Ge.DARK?Ge.LIGHT:Ge.DARK),"data-testid":"toggle-dark-mode"})},XL={SUN:p("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:p("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:p("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:p("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},Z3=(e,{selectedElementIds:t},n)=>{e=Un(e);const r=n&&_r(e,{selectedElementIds:t});let i=null,o=r?ot(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return r&&(o.length===1&&We(o[0])?(i=o[0],o=QT(e,i)):o.length>1&&(o=ot(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:i,exportedElements:ic(o)}},q3=async(e,t,n,r,{exportBackground:i,exportPadding:o=s0,viewBackgroundColor:s,name:a=n.name||B$,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(L("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){const d=HT(t,{exportBackground:i,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:s,exportPadding:o,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},r,{exportingFrame:c});if(e==="svg")return zy(d.then(f=>new Blob([f.outerHTML],{type:Ne.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[Tg.svg],fileHandle:l});if(e==="clipboard-svg"){const f=await d.then(g=>g.outerHTML);try{await bd(f)}catch{throw new Error(L("errors.copyToSystemClipboardFailed"))}return}}const u=WW(t,n,r,{exportBackground:i,viewBackgroundColor:s,exportPadding:o,exportingFrame:c});if(e==="png"){let d=E2(u);return n.exportEmbedScene&&(d=d.then(f=>Le(()=>Promise.resolve().then(()=>KW),void 0).then(({encodePngMetadata:g})=>g({blob:f,metadata:h0(t,n,r,"local")})))),zy(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[Tg.png],fileHandle:l})}else if(e==="clipboard")try{const d=E2(u);await n5e(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(L("canvasError.canvasTooBig")):i2&&d.name==="TypeError"?new Error(`${L("alerts.couldNotCopyToClipboard")}

${L("hints.firefox_clipboard_write")}`):new Error(L("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},K3e=async(e,t,n,r)=>{const{exportBackground:i,viewBackgroundColor:o,fileHandle:s}=t,a=IW(s);if(!s||!t6e(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};const{exportedElements:l,exportingFrame:c}=Z3(e,t,!1);return await q3(a,l,t,n,{exportBackground:i,viewBackgroundColor:o,name:r,fileHandle:s,exportingFrame:c}),{fileHandle:s}},Sx=({children:e,checked:t,onChange:n,className:r})=>z("div",{className:Re("Checkbox",r,{"is-checked":t}),onClick:i=>{n(!t,i),i.currentTarget.querySelector(".Checkbox-box").focus()},children:[p("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:ode}),p("div",{className:"Checkbox-label",children:e})]}),Y3e=we({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},storeAction:ae.NONE}),PanelComponent:({appState:e,updateData:t,appProps:n,data:r,app:i})=>p(X3e,{label:L("labels.fileTitle"),value:i.getName(),onChange:o=>t(o),ignoreFocus:(r==null?void 0:r.ignoreFocus)??!1})}),Z3e=we({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},storeAction:ae.NONE}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const r=Un(e),o=_r(r,t)?ot(r,t):r;return p(ke,{children:XI.map(s=>{const[a,l]=E6e(o,s0,s),c=`${L("imageExportDialog.label.scale")} ${s}x (${a}x${l})`;return p(vt,{size:"small",type:"radio",icon:`${s}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:s===t.exportScale,onChange:()=>n(s)},s)})})}}),q3e=we({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},storeAction:ae.NONE}),PanelComponent:({appState:e,updateData:t})=>p(Sx,{checked:e.exportBackground,onChange:n=>t(n),children:L("imageExportDialog.label.withBackground")})}),$X=we({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},storeAction:ae.NONE}),PanelComponent:({appState:e,updateData:t})=>z(Sx,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[L("imageExportDialog.label.embedScene"),p(xc,{label:L("imageExportDialog.tooltip.embedScene"),long:!0,children:p("div",{className:"excalidraw-tooltip-icon",children:dde})})]})}),jL=we({name:"saveToActiveFile",label:"buttons.save",icon:h3,trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{const i=!!t.fileHandle;try{const{fileHandle:o}=BT(t.fileHandle)?await K3e(e,t,r.files,r.getName()):await CW(e,t,r.files,r.getName());return{storeAction:ae.NONE,appState:{...t,fileHandle:o,toast:i?{message:o!=null&&o.name?L("toast.fileSavedToFilename").replace("{filename}",`"${o.name}"`):L("toast.fileSaved")}:null}}}catch(o){return(o==null?void 0:o.name)!=="AbortError"?console.error(o):console.warn(o),{storeAction:ae.NONE}}},keyTest:e=>e.key===j.S&&e[j.CTRL_OR_CMD]&&!e.shiftKey}),zX=we({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:h3,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,r)=>{try{const{fileHandle:i}=await CW(e,{...t,fileHandle:null},r.files,r.getName());return{storeAction:ae.NONE,appState:{...t,openDialog:null,fileHandle:i,toast:{message:L("toast.fileSaved")}}}}catch(i){return(i==null?void 0:i.name)!=="AbortError"?console.error(i):console.warn(i),{storeAction:ae.NONE}}},keyTest:e=>e.key===j.S&&e.shiftKey&&e[j.CTRL_OR_CMD],PanelComponent:({updateData:e})=>p(vt,{type:"button",icon:ade,title:L("buttons.saveAs"),"aria-label":L("buttons.saveAs"),showAriaLabel:Or().editor.isMobile,hidden:!vh,onClick:()=>e(null),"data-testid":"save-as-button"})}),Vw=we({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{try{const{elements:i,appState:o,files:s}=await d6e(t,e);return{elements:i,appState:o,files:s,storeAction:ae.CAPTURE}}catch(i){return(i==null?void 0:i.name)==="AbortError"?(console.warn(i),!1):{elements:e,appState:{...t,errorMessage:i.message},files:r.files,storeAction:ae.NONE}}},keyTest:e=>e[j.CTRL_OR_CMD]&&e.key===j.O}),Q3e=we({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},storeAction:ae.NONE}),PanelComponent:({appState:e,updateData:t})=>p("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:p(j3e,{value:e.exportWithDarkMode?Ge.DARK:Ge.LIGHT,onChange:n=>{t(n===Ge.DARK)},title:L("imageExportDialog.label.darkMode")})})});let VX="{}";const J3e=we({name:"copyStyles",label:"labels.copyStyles",icon:WV,trackEvent:{category:"element"},perform:(e,t,n,r)=>{const i=[],o=e.find(s=>t.selectedElementIds[s.id]);if(i.push(o),o&&Ps(o)){const s=rt(o,r.scene.getNonDeletedElementsMap());i.push(s)}return o&&(VX=JSON.stringify(i)),{appState:{...t,toast:{message:L("toast.copyStyles")}},storeAction:ae.NONE}},keyTest:e=>e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.C}),eve=we({name:"pasteStyles",label:"labels.pasteStyles",icon:WV,trackEvent:{category:"element"},perform:(e,t,n,r)=>{const i=JSON.parse(VX),o=i[0],s=i[1];if(!aV(o))return{elements:e,storeAction:ae.NONE};const a=ot(e,t,{includeBoundTextElement:!0}),l=a.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let u=o;if(Ae(c)&&c.containerId&&(u=s),!u)return c;let d=Xe(c,{backgroundColor:u==null?void 0:u.backgroundColor,strokeWidth:u==null?void 0:u.strokeWidth,strokeColor:u==null?void 0:u.strokeColor,strokeStyle:u==null?void 0:u.strokeStyle,fillStyle:u==null?void 0:u.fillStyle,opacity:u==null?void 0:u.opacity,roughness:u==null?void 0:u.roughness,roundness:u.roundness?Xce(u.roundness.type,c)?u.roundness:jce(c):null});if(Ae(d)){const f=u.fontSize||Pc,g=u.fontFamily||md;d=Xe(d,{fontSize:f,fontFamily:g,textAlign:u.textAlign||Z2,lineHeight:u.lineHeight||Gf(g)});let U=null;d.containerId&&(U=a.find(b=>Ae(d)&&b.id===d.containerId)||null),Zi(d,U,r.scene.getNonDeletedElementsMap())}return d.type==="arrow"&&st(u)&&(d=Xe(d,{startArrowhead:u.startArrowhead,endArrowhead:u.endArrowhead})),We(c)&&(d=Xe(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),storeAction:ae.CAPTURE}},keyTest:e=>e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.V});we({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},storeAction:ae.NONE}),PanelComponent:({appState:e,updateData:t})=>p(vt,{type:"button",icon:kV,"aria-label":L("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});we({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},storeAction:ae.NONE}),PanelComponent:({elements:e,appState:t,updateData:n})=>p(vt,{visible:fx(t,Un(e)),type:"button",icon:lde,"aria-label":L("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});const Cx=we({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:ide,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:r})=>{var i,o;return((i=t.openDialog)==null?void 0:i.name)==="help"&&r(),{appState:{...t,openDialog:((o=t.openDialog)==null?void 0:o.name)==="help"?null:{name:"help"}},storeAction:ae.NONE}},keyTest:e=>e.key===j.QUESTION_MARK}),tve=e=>{if(e.length>=2){const t=e[0].groupIds;for(const n of t)if(e.reduce((r,i)=>r&&d2(i,n),!0))return!0}return!1},KL=(e,t,n)=>{const r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return r.length>=2&&!tve(r)&&!aG(r)},nve=we({name:"group",label:"labels.group",icon:e=>p(uP,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{const i=qT(r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(i.length<2)return{appState:t,elements:e,storeAction:ae.NONE};const o=kf(t);if(o.length===1){const v=o[0],_=new Set(Tn(e,v).map(T=>T.id)),E=new Set(i.map(T=>T.id));if(new Set([...Array.from(_),...Array.from(E)]).size===_.size)return{appState:t,elements:e,storeAction:ae.NONE}}let s=[...e];new Set(i.map(v=>v.frameId)).size>1&&f5e(i).forEach((_,E)=>{k3(_,r.scene.getNonDeletedElementsMap())});const l=Ms(),c=He(i);s=s.map(v=>c.get(v.id)?Xe(v,{groupIds:xue(v.groupIds,l,t.editingGroupId)}):v);const u=Tn(s,l),d=u[u.length-1],f=s.lastIndexOf(d),g=s.slice(f+1),U=s.slice(0,f).filter(v=>!d2(v,l)),b=ul([...U,...u,...g],He(u));return{appState:{...t,...bV(l,{...t,selectedGroupIds:{}},Un(s))},elements:b,storeAction:ae.CAPTURE}},predicate:(e,t,n,r)=>KL(e,t,r),keyTest:e=>!e.shiftKey&&e[j.CTRL_OR_CMD]&&e.key===j.G,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!KL(e,t,r),type:"button",icon:p(uP,{theme:t.theme}),onClick:()=>n(null),title:`${L("labels.group")} — ${de("CtrlOrCmd+G")}`,"aria-label":L("labels.group"),visible:_r(Un(e),t)})}),rve=we({name:"ungroup",label:"labels.ungroup",icon:e=>p(dP,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{const i=kf(t),o=He(e);if(i.length===0)return{appState:t,elements:e,storeAction:ae.NONE};let s=[...e];const a=[];s=s.map(f=>{Cn(f)&&a.push(f.id);const g=Sue(f.groupIds,t.selectedGroupIds);return g.length===f.groupIds.length?f:Xe(f,{groupIds:g})});const l=Vi(t,Un(s),t,null),c=r.scene.getSelectedElements(t),u=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return ZT(e).filter(f=>u.has(f.id)).forEach(f=>{f&&(s=oG(s,Sb(s,f,t,o),f,r))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((f,[g,U])=>(U&&!a.includes(g)&&(f[g]=!0),f),{}),{appState:{...t,...l},elements:s,storeAction:ae.CAPTURE}},keyTest:e=>e.shiftKey&&e[j.CTRL_OR_CMD]&&e.key===j.G.toUpperCase(),predicate:(e,t)=>kf(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>p(vt,{type:"button",hidden:kf(t).length===0,icon:p(dP,{theme:t.theme}),onClick:()=>n(null),title:`${L("labels.ungroup")} — ${de("CtrlOrCmd+Shift+G")}`,"aria-label":L("labels.ungroup"),visible:_r(Un(e),t)})}),HX=(e,t,n,r,i,o,s)=>{e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill(),s&&(e.strokeStyle=s),e.stroke()};var bf=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(bf||{});function ive(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r}return t}const Q3=(e,t)=>`hsl(${Math.abs(ive((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,ove=e=>{var n;const t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},sve=({context:e,renderConfig:t,appState:n,normalizedWidth:r,normalizedHeight:i})=>{for(const[o,s]of t.remotePointerViewportCoords){let{x:a,y:l}=s;const c=n.collaborators.get(o);a-=n.offsetLeft,l-=n.offsetTop;const u=11,d=14,f=a<0||a>r-u||l<0||l>i-d;a=Math.max(a,0),a=Math.min(a,r-u),l=Math.max(l,0),l=Math.min(l,i-d);const g=Q3(o,c);e.save(),e.strokeStyle=g,e.fillStyle=g;const U=t.remotePointerUserStates.get(o),b=f||U===bf.IDLE||U===bf.AWAY;b&&(e.globalAlpha=.3),t.remotePointerButton.get(o)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=g,e.stroke(),e.closePath());const v=n.theme===Ge.DARK?"#2f6330":Iae,_=c==null?void 0:c.isSpeaking;_&&(e.fillStyle=v,e.strokeStyle=v,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=u5,e.strokeStyle=u5,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=g,e.strokeStyle=g,e.lineWidth=2,e.lineJoin="round",e.beginPath(),b?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());const E=t.remotePointerUsernames.get(o)||"";if(!f&&E){e.font="600 12px sans-serif";const w=(_?a+0:a)+u/2,T=(_?l+0:l)+d+2,A=5,M=3,S=e.measureText(E),x=S.actualBoundingBoxDescent+S.actualBoundingBoxAscent,C=Math.max(x,12),R=w-1,O=T-1,F=S.width+2+A*2+2,N=C+2+M*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(R,O,F,N,8),e.fillStyle=g,e.fill(),e.strokeStyle=u5,e.stroke(),_&&(e.beginPath(),e.roundRect(R-2,O-2,F+4,N+4,8),e.strokeStyle=v,e.stroke())):HX(e,R,O,F,N,8,u5),e.fillStyle=wae,e.fillText(E,w+A+1,T+M+S.actualBoundingBoxAscent+Math.floor((C-x)/2)+2),_){e.fillStyle=v;const J=8,K=8,ne=5;e.fillRect(R+F+K,O+(N/2-J/2),2,J),e.fillRect(R+F+K+ne,O+(N/2-J*2/2),2,J*2),e.fillRect(R+F+K+ne*2,O+(N/2-J/2),2,J)}}e.restore(),e.closePath()}},YL=({color:e,onClick:t,name:n,src:r,className:i})=>{const o=ove(n),[s,a]=D.useState(!1),l=!s&&r,c=l?void 0:{background:e};return p("div",{className:Re("Avatar",i),style:c,onClick:t,children:l?p("img",{className:"Avatar-img",src:r,alt:o,referrerPolicy:"no-referrer",onError:()=>a(!0)}):o})};we({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var r;return!n.socketId||((r=t.userToFollow)==null?void 0:r.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},storeAction:ae.NONE}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},storeAction:ae.NONE}},PanelComponent:({updateData:e,data:t,appState:n})=>{const{socketId:r,collaborator:i,withName:o,isBeingFollowed:s}=t,a=Q3(r,i),l=Re({"is-followed":s,"is-current-user":i.isCurrentUser===!0,"is-speaking":i.isSpeaking,"is-in-call":i.isInCall,"is-muted":i.isMuted}),c=i.isInCall?i.isSpeaking?z("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:L("userList.hint.isSpeaking"),children:[p("div",{}),p("div",{}),p("div",{})]}):i.isMuted?p("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:L("userList.hint.micMuted"),children:pfe}):p("div",{title:L("userList.hint.inCall"),children:gfe}):null;return o?z("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(i),children:[p(YL,{color:a,onClick:()=>{},name:i.username||"",src:i.avatarUrl,className:l}),p("div",{className:"UserList__collaborator-name",children:i.username}),z("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[s&&p("div",{className:"UserList__collaborator-status-icon-is-followed",title:L("userList.hint.followStatus"),children:gT}),c]})]}):z("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[p(YL,{color:a,onClick:()=>{e(i)},name:i.username||"",src:i.avatarUrl,className:l}),c&&p("div",{className:"UserList__collaborator-status-icon",children:c})]})}});const ave=we({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(const o of F$)if(i.some(s=>s.type===o))return{storeAction:ae.NONE,appState:{...t,errorMessage:L(`errors.libraryElementTypeError.${o}`)}};return r.library.getLatestLibrary().then(o=>r.library.setLibrary([{id:Ms(),status:"unpublished",elements:i.map(bh),created:Date.now()},...o])).then(()=>({storeAction:ae.NONE,appState:{...t,toast:{message:L("toast.addedToLibrary")}}})).catch(o=>({storeAction:ae.NONE,appState:{...t,errorMessage:o.message}}))},label:"labels.addToLibrary"}),lve=(e,t,n,r)=>{const i=d3(e,t),o=fa(e);return i.flatMap(s=>{const a=cve(s,o,n);return s.map(l=>{const c=fe(l,{x:l.x+a.x,y:l.y+a.y});return _o(l,r.getNonDeletedElementsMap(),{simultaneouslyUpdated:s}),c})})},cve=(e,t,{axis:n,position:r})=>{const i=fa(e),[o,s]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return r==="start"?{...a,[n]:t[o]-i[o]}:r==="end"?{...a,[n]:t[s]-i[s]}:{...a,[n]:(t[o]+t[s])/2-(i[o]+i[s])/2}},Go=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>We(r))},U0=(e,t,n,r)=>{const i=n.scene.getSelectedElements(t),o=He(e),s=lve(i,o,r,n.scene),a=He(s);return Fg(e.map(l=>a.get(l.id)||l),t,n)};we({name:"alignTop",label:"labels.alignTop",icon:iP,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Go(t,r),perform:(e,t,n,r)=>({appState:t,elements:U0(e,t,r,{position:"start",axis:"y"}),storeAction:ae.CAPTURE}),keyTest:e=>e[j.CTRL_OR_CMD]&&e.shiftKey&&e.key===j.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!Go(t,r),type:"button",icon:iP,onClick:()=>n(null),title:`${L("labels.alignTop")} — ${de("CtrlOrCmd+Shift+Up")}`,"aria-label":L("labels.alignTop"),visible:_r(Un(e),t)})});we({name:"alignBottom",label:"labels.alignBottom",icon:oP,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Go(t,r),perform:(e,t,n,r)=>({appState:t,elements:U0(e,t,r,{position:"end",axis:"y"}),storeAction:ae.CAPTURE}),keyTest:e=>e[j.CTRL_OR_CMD]&&e.shiftKey&&e.key===j.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!Go(t,r),type:"button",icon:oP,onClick:()=>n(null),title:`${L("labels.alignBottom")} — ${de("CtrlOrCmd+Shift+Down")}`,"aria-label":L("labels.alignBottom"),visible:_r(Un(e),t)})});we({name:"alignLeft",label:"labels.alignLeft",icon:sP,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Go(t,r),perform:(e,t,n,r)=>({appState:t,elements:U0(e,t,r,{position:"start",axis:"x"}),storeAction:ae.CAPTURE}),keyTest:e=>e[j.CTRL_OR_CMD]&&e.shiftKey&&e.key===j.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!Go(t,r),type:"button",icon:sP,onClick:()=>n(null),title:`${L("labels.alignLeft")} — ${de("CtrlOrCmd+Shift+Left")}`,"aria-label":L("labels.alignLeft"),visible:_r(Un(e),t)})});we({name:"alignRight",label:"labels.alignRight",icon:aP,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Go(t,r),perform:(e,t,n,r)=>({appState:t,elements:U0(e,t,r,{position:"end",axis:"x"}),storeAction:ae.CAPTURE}),keyTest:e=>e[j.CTRL_OR_CMD]&&e.shiftKey&&e.key===j.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!Go(t,r),type:"button",icon:aP,onClick:()=>n(null),title:`${L("labels.alignRight")} — ${de("CtrlOrCmd+Shift+Right")}`,"aria-label":L("labels.alignRight"),visible:_r(Un(e),t)})});we({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:lP,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Go(t,r),perform:(e,t,n,r)=>({appState:t,elements:U0(e,t,r,{position:"center",axis:"y"}),storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!Go(t,r),type:"button",icon:lP,onClick:()=>n(null),title:L("labels.centerVertically"),"aria-label":L("labels.centerVertically"),visible:_r(Un(e),t)})});we({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:cP,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Go(t,r),perform:(e,t,n,r)=>({appState:t,elements:U0(e,t,r,{position:"center",axis:"x"}),storeAction:ae.CAPTURE}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!Go(t,r),type:"button",icon:cP,onClick:()=>n(null),title:L("labels.centerHorizontally"),"aria-label":L("labels.centerHorizontally"),visible:_r(Un(e),t)})});const uve=(e,t,n)=>{const[r,i,o,s]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=fa(e),l=d3(e,t).map(f=>[f,fa(f)]).sort((f,g)=>f[1][i]-g[1][i]);let c=0;for(const f of l)c+=f[1][s];const u=(a[s]-c)/(l.length-1);if(u<0){const f=l.findIndex(v=>v[1][r]===a[r]),g=l.findIndex(v=>v[1][o]===a[o]),U=(l[g][1][i]-l[f][1][i])/(l.length-1);let b=l[f][1][i];return l.flatMap(([v,_],E)=>{const w={x:0,y:0};return E!==f&&E!==g&&(b+=U,w[n.axis]=b-_[i]),v.map(T=>Xe(T,{x:T.x+w.x,y:T.y+w.y}))})}let d=a[r];return l.flatMap(([f,g])=>{const U={x:0,y:0};return U[n.axis]=d-g[r],d+=u,d+=g[s],f.map(b=>Xe(b,{x:b.x+U.x,y:b.y+U.y}))})},WX=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>We(r))},GX=(e,t,n,r)=>{const i=n.scene.getSelectedElements(t),o=uve(i,n.scene.getNonDeletedElementsMap(),r),s=He(o);return Fg(e.map(a=>s.get(a.id)||a),t,n)};we({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:GX(e,t,r,{space:"between",axis:"x"}),storeAction:ae.CAPTURE}),keyTest:e=>!e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.H,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!WX(t,r),type:"button",icon:mde,onClick:()=>n(null),title:`${L("labels.distributeHorizontally")} — ${de("Alt+H")}`,"aria-label":L("labels.distributeHorizontally"),visible:_r(Un(e),t)})});we({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:GX(e,t,r,{space:"between",axis:"y"}),storeAction:ae.CAPTURE}),keyTest:e=>!e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.V,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>p(vt,{hidden:!WX(t,r),type:"button",icon:Ude,onClick:()=>n(null),title:`${L("labels.distributeVertically")} — ${de("Alt+V")}`,"aria-label":L("labels.distributeVertically"),visible:_r(Un(e),t)})});const dve=we({name:"flipHorizontal",label:"labels.flipHorizontal",icon:yfe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:Fg(XX(e,r.scene.getNonDeletedElementsMap(),t,"horizontal",r),t,r),appState:t,storeAction:ae.CAPTURE}),keyTest:e=>e.shiftKey&&e.code===It.H}),fve=we({name:"flipVertical",label:"labels.flipVertical",icon:bfe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:Fg(XX(e,r.scene.getNonDeletedElementsMap(),t,"vertical",r),t,r),appState:t,storeAction:ae.CAPTURE}),keyTest:e=>e.shiftKey&&e.code===It.V&&!e[j.CTRL_OR_CMD]}),XX=(e,t,n,r,i)=>{const o=ot(Un(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),s=hve(o,t,n,r,i),a=He(s);return e.map(l=>a.get(l.id)||l)},hve=(e,t,n,r,i)=>{if(e.every(g=>st(g)&&(g.startBinding||g.endBinding)))return e.map(g=>{const U=g;return Xe(U,{startArrowhead:U.endArrowhead,endArrowhead:U.startArrowhead})});const{midX:o,midY:s}=fa(e);MG(e,t,"nw",i.scene,new Map(Array.from(t.values()).map(g=>[g.id,bh(g)])),{flipByX:r==="horizontal",flipByY:r==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),Ly(e.filter(et),t,i.scene.getNonDeletedElements(),i.scene,gf(n),[],n.zoom);const{elbowArrows:a,otherElements:l}=e.reduce((g,U)=>De(U)?{...g,elbowArrows:g.elbowArrows.concat(U)}:{...g,otherElements:g.otherElements.concat(U)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:u}=fa(e),[d,f]=[o-c,s-u];return l.forEach(g=>fe(g,{x:g.x+d,y:g.y+f})),a.forEach(g=>fe(g,{x:g.x+d,y:g.y+f})),e},Mb=we({name:"copy",label:"labels.copy",icon:Z_,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{const i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await q6e(i,r.files,n)}catch(o){return{storeAction:ae.NONE,appState:{...t,errorMessage:o.message}}}return{storeAction:ae.NONE}},keyTest:void 0}),ZL=we({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i;try{i=await e5e()}catch(o){return o.name==="AbortError"||o.name==="NotAllowedError"?!1:(console.error(`actionPaste ${o.name}: ${o.message}`),i2?{storeAction:ae.NONE,appState:{...t,errorMessage:L("hints.firefox_clipboard_write")}}:{storeAction:ae.NONE,appState:{...t,errorMessage:L("errors.asyncPasteFailedOnRead")}})}try{r.pasteFromClipboard(Y6e({types:i}))}catch(o){return console.error(o),{storeAction:ae.NONE,appState:{...t,errorMessage:L("errors.asyncPasteFailedOnParse")}}}return{storeAction:ae.NONE}},keyTest:void 0}),qL=we({name:"cut",label:"labels.cut",icon:tfe,trackEvent:{category:"element"},perform:(e,t,n,r)=>(Mb.perform(e,t,n,r),zG.perform(e,t,null,r)),keyTest:e=>e[j.CTRL_OR_CMD]&&e.key===j.X}),QL=we({name:"copyAsSvg",label:"labels.copyAsSvg",icon:vfe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{storeAction:ae.NONE};const{exportedElements:i,exportingFrame:o}=Z3(e,t,!0);try{await q3("clipboard-svg",i,t,r.files,{...t,exportingFrame:o,name:r.getName()});const s=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:L("toast.copyToClipboardAsSvg",{exportSelection:s.length?L("toast.selection"):L("toast.canvas"),exportColorScheme:t.exportWithDarkMode?L("buttons.darkMode"):L("buttons.lightMode")})}},storeAction:ae.NONE}}catch(s){return console.error(s),{appState:{errorMessage:s.message},storeAction:ae.NONE}}},predicate:e=>XT&&e.length>0,keywords:["svg","clipboard","copy"]}),JL=we({name:"copyAsPng",label:"labels.copyAsPng",icon:Efe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{storeAction:ae.NONE};const i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:o,exportingFrame:s}=Z3(e,t,!0);try{return await q3("clipboard",o,t,r.files,{...t,exportingFrame:s,name:r.getName()}),{appState:{...t,toast:{message:L("toast.copyToClipboardAsPng",{exportSelection:i.length?L("toast.selection"):L("toast.canvas"),exportColorScheme:t.exportWithDarkMode?L("buttons.darkMode"):L("buttons.lightMode")})}},storeAction:ae.NONE}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},storeAction:ae.NONE}}},predicate:e=>jT&&e.length>0,keyTest:e=>e.code===It.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),eD=we({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{bd(wG(i))}catch{throw new Error(L("errors.copyToSystemClipboardFailed"))}return{storeAction:ae.NONE}},predicate:(e,t,n,r)=>XT&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(Ae),keywords:["text","clipboard","copy"]}),tD=we({name:"gridMode",icon:Tfe,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},storeAction:ae.NONE}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[j.CTRL_OR_CMD]&&e.code===It.QUOTE}),Hw=we({name:"zenMode",label:"buttons.zenMode",icon:wfe,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},storeAction:ae.NONE}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.Z}),gve=we({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:_fe,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},storeAction:ae.NONE}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.S}),Ww=we({name:"stats",label:"stats.fullTitle",icon:Ufe,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},storeAction:ae.NONE}},checked:e=>e.stats.open,keyTest:e=>!e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.SLASH}),pve=we({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>r.scene.getSelectedElements(t).some(o=>Ps(o)),perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t),o=r.scene.getNonDeletedElementsMap();return i.forEach(s=>{var l;const a=rt(s,o);if(a){const{width:c,height:u}=ki(a.originalText,an(a),a.lineHeight),d=K5e(s.id);EG(s.id);const{x:f,y:g}=D3(s,a,o);fe(a,{containerId:null,width:c,height:u,text:a.originalText,x:f,y:g}),fe(s,{boundElements:(l=s.boundElements)==null?void 0:l.filter(U=>U.id!==a.id),height:d||s.height})}}),{elements:e,appState:t,storeAction:ae.CAPTURE}}}),mve=we({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t);if(i.length===2){const o=Ae(i[0])||Ae(i[1]);let s;if(Af(i[0])?s=i[0]:Af(i[1])&&(s=i[1]),o&&s&&rt(s,r.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t);let o,s;Ae(i[0])&&Af(i[1])?(o=i[0],s=i[1]):(o=i[1],s=i[0]),fe(o,{containerId:s.id,verticalAlign:Do.MIDDLE,textAlign:s2.CENTER,autoResize:!0}),fe(s,{boundElements:(s.boundElements||[]).concat({type:"text",id:o.id})});const a=s.height;return Zi(o,s,r.scene.getNonDeletedElementsMap()),qy(s.id,a),{elements:Uve(e,s,o),appState:{...t,selectedElementIds:{[s.id]:!0}},storeAction:ae.CAPTURE}}}),Uve=(e,t,n)=>{const r=e.slice(),i=r.findIndex(s=>s.id===n.id);r.splice(i,1);const o=r.findIndex(s=>s.id===t.id);return r.splice(o+1,0,n),ul(r,He([t,n])),r},bve=(e,t,n)=>{const r=e.slice(),i=r.findIndex(s=>s.id===t.id);r.splice(i,1);const o=r.findIndex(s=>s.id===n.id);return r.splice(o,0,t),ul(r,He([t,n])),r},yve=we({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t),o=i.every(s=>Ae(s));return i.length>0&&o},perform:(e,t,n,r)=>{var a;const i=r.scene.getSelectedElements(t);let o=e.slice();const s={};for(const l of i)if(Ae(l)){const c=Uc({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:c0("rectangle")?Er.ADAPTIVE_RADIUS:Er.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-vr,y:l.y-vr,width:th(l.width,"rectangle"),height:th(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){const u=l.boundElements.filter(f=>f.type==="arrow").map(f=>f.id);o.filter(f=>u.includes(f.id)).forEach(f=>{let g=f.startBinding,U=f.endBinding;(g==null?void 0:g.elementId)===l.id&&(g={...g,elementId:c.id}),(U==null?void 0:U.elementId)===l.id&&(U={...U,elementId:c.id}),(g||U)&&fe(f,{startBinding:g,endBinding:U},!1)})}fe(l,{containerId:c.id,verticalAlign:Do.MIDDLE,boundElements:null,textAlign:s2.CENTER,autoResize:!0},!1),Zi(l,c,r.scene.getNonDeletedElementsMap()),o=bve([...o,c],c,l),s[c.id]=!0}return{elements:o,appState:{...t,selectedElementIds:s},storeAction:ae.CAPTURE}}}),Ax=380,vve=42,Gw=5,jX=85,Eve=500;let Xw=!1;const R5=new Map,_ve=({element:e,elementsMap:t,setAppState:n,onLinkOpen:r,setToast:i,updateEmbedValidationStatus:o})=>{const s=IU(),a=wU(),l=Or(),c=e.link||"",[u,d]=D.useState(c),f=D.useRef(null),g=s.showHyperlinkPopup==="editor",U=D.useCallback(()=>{var T;if(!f.current)return;const w=zo(f.current.value)||null;if(!e.link&&w&&Dt("hyperlink","create"),co(e)){if(((T=s.activeEmbeddable)==null?void 0:T.element)===e&&n({activeEmbeddable:null}),!w){fe(e,{link:null}),o(e,!1);return}if(!bb(w,a.validateEmbeddable))w&&i({message:L("toast.unableToEmbed"),closable:!0}),e.link&&R5.set(e.id,e.link),fe(e,{link:w}),o(e,!1);else{const{width:A,height:M}=e,S=Z1(w);(S==null?void 0:S.error)instanceof URIError&&i({message:L("toast.unrecognizedLinkFormat"),closable:!0});const x=S?S.intrinsicSize.w/S.intrinsicSize.h:1,C=R5.get(e.id)!==e.link;fe(e,{...C?{width:(S==null?void 0:S.type)==="video"?A>M?A:M*x:A,height:(S==null?void 0:S.type)==="video"&&A>M?A/x:M}:{},link:w}),o(e,!0),R5.has(e.id)&&R5.delete(e.id)}}else fe(e,{link:w})},[e,i,a.validateEmbeddable,s.activeEmbeddable,n,o]);D.useLayoutEffect(()=>()=>{U()},[U]),D.useEffect(()=>{g&&(f!=null&&f.current)&&!(l.viewport.isMobile||l.isTouchScreen)&&f.current.select()},[g,l.viewport.isMobile,l.isTouchScreen]),D.useEffect(()=>{let w=null;const T=A=>{if(g)return;w&&clearTimeout(w),Tve(e,t,s,B(A.clientX,A.clientY))&&(w=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},Eve))};return window.addEventListener(ge.POINTER_MOVE,T,!1),()=>{window.removeEventListener(ge.POINTER_MOVE,T,!1),w&&clearTimeout(w)}},[s,e,g,n,t]);const b=D.useCallback(()=>{Dt("hyperlink","delete"),fe(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e]),v=()=>{Dt("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x:_,y:E}=KX(e,s,t);return s.contextMenu||s.selectedElementsAreBeingDragged||s.resizingElement||s.isRotating||s.openMenu||s.viewModeEnabled?null:z("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${E}px`,left:`${_}px`,width:Ax,padding:Gw},children:[g?p("input",{className:Re("excalidraw-hyperlinkContainer-input"),placeholder:L("labels.link.hint"),ref:f,value:u,onChange:w=>d(w.target.value),autoFocus:!0,onKeyDown:w=>{w.stopPropagation(),w[j.CTRL_OR_CMD]&&w.key===j.K&&w.preventDefault(),(w.key===j.ENTER||w.key===j.ESCAPE)&&(U(),n({showHyperlinkPopup:"info"}))}}):e.link?p("a",{href:zo(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:IV(e.link)?"_self":"_blank",onClick:w=>{if(e.link&&r){const T=nV(ge.EXCALIDRAW_LINK,w.nativeEvent);r({...e,link:zo(e.link)},T),T.defaultPrevented&&w.preventDefault()}},rel:"noopener noreferrer",children:e.link}):p("div",{className:"excalidraw-hyperlinkContainer-link",children:L("labels.link.empty")}),z("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!g&&p(vt,{type:"button",title:L("buttons.edit"),"aria-label":L("buttons.edit"),label:L("buttons.edit"),onClick:v,className:"excalidraw-hyperlinkContainer--edit",icon:f2}),p(vt,{type:"button",title:L("labels.linkToElement"),"aria-label":L("labels.linkToElement"),label:L("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:KV}),c&&!co(e)&&p(vt,{type:"button",title:L("buttons.remove"),"aria-label":L("buttons.remove"),label:L("buttons.remove"),onClick:b,className:"excalidraw-hyperlinkContainer--remove",icon:Ju})]})]})},KX=(e,t,n)=>{const[r,i]=Ke(e,n),{x:o,y:s}=oa({sceneX:r+e.width/2,sceneY:i},t),a=o-t.offsetLeft-Ax/2,l=s-t.offsetTop-jX;return{x:a,y:l}},nD=(e,t)=>{var i;const n=ot(e,t);return co(n[0])?"labels.link.editEmbed":(i=n[0])!=null&&i.link?"labels.link.edit":"labels.link.create"};let km=null;const wve=(e,t,n)=>{km&&clearTimeout(km),km=window.setTimeout(()=>Ive(e,t,n),Pae)},Ive=(e,t,n)=>{if(!e.link)return;const r=Cm();r.classList.add("excalidraw-tooltip--visible"),r.style.maxWidth="20rem",r.textContent=ug(e.link)?L("labels.link.goToElement"):e.link;const[i,o,s,a]=Ke(e,n),[l,c,u,d]=VT([i,o,s,a],e.angle,t),f=oa({sceneX:l,sceneY:c},t);FX(r,{left:f.x,top:f.y,width:u,height:d},"top"),Dt("hyperlink","tooltip","link-icon"),Xw=!0},rD=()=>{km&&clearTimeout(km),Xw&&(Xw=!1,Cm().classList.remove("excalidraw-tooltip--visible"))},Tve=(e,t,n,[r,i])=>{const{x:o,y:s}=En({clientX:r,clientY:i},n),a=15/n.zoom.value;if(_T(o,s,e,t))return!1;const[l,c,u]=Ke(e,t);if(o>=l&&o<=u&&s>=c-jX&&s<=c)return!1;const{x:d,y:f}=KX(e,n,t);return!(r>=d-a&&r<=d+Ax+Gw*2+a&&i>=f-a&&i<=f+a+Gw*2+vve)},YX=we({name:"hyperlink",label:(e,t)=>nD(e,t),icon:Sy,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},storeAction:ae.CAPTURE},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[j.CTRL_OR_CMD]&&e.key===j.K,predicate:(e,t)=>ot(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{const r=ot(e,t);return p(vt,{type:"button",icon:Sy,"aria-label":L(nD(e,t)),title:`${co(e[0])?L("labels.link.labelEmbed"):L("labels.link.label")} - ${de("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:r.length===1&&!!r[0].link})}}),JE=e=>e.every(t=>!t.locked),xve=we({name:"toggleElementLock",label:(e,t,n)=>{const r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return r.length===1&&!We(r[0])?r[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":JE(r)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{const n=ot(t,e);return JE(n)?lT:f3},trackEvent:{category:"element"},predicate:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t);return i.length>0&&!i.some(o=>o.locked&&o.frameId)},perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!i.length)return!1;const o=JE(i),s=He(i);return{elements:e.map(a=>s.has(a.id)?Xe(a,{locked:o}):a),appState:{...t,selectedLinearElement:o?null:t.selectedLinearElement},storeAction:ae.CAPTURE}},keyTest:(e,t,n,r)=>e.key.toLocaleLowerCase()===j.L&&e[j.CTRL_OR_CMD]&&e.shiftKey&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),Sve=we({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:f3,predicate:(e,t)=>ot(e,t).length===0&&e.some(r=>r.locked),perform:(e,t)=>{const n=e.filter(r=>r.locked);return{elements:e.map(r=>r.locked?Xe(r,{locked:!1}):r),appState:{...t,selectedElementIds:Object.fromEntries(n.map(r=>[r.id,!0]))},storeAction:ae.CAPTURE}},label:"labels.elementLock.unlockAll"}),rh=({type:e="button",onSelect:t,selected:n,children:r,className:i="",...o})=>p("button",{onClick:c3(o.onClick,s=>{t()}),type:e,className:Re("excalidraw-button",i,{selected:n}),...o,children:r}),Vg=D.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:r,readonly:i,selectOnRender:o,onKeyDown:s,isRedacted:a=!1,icon:l,className:c,...u},d)=>{const f=D.useRef(null);D.useImperativeHandle(d,()=>f.current),D.useLayoutEffect(()=>{var b,v;o&&((b=f.current)==null||b.focus(),(v=f.current)==null||v.select())},[o]);const[g,U]=D.useState(!1);return z("div",{className:Re("ExcTextField",c,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var b;(b=f.current)==null||b.focus()},children:[l,t&&p("div",{className:"ExcTextField__label",children:t}),z("div",{className:Re("ExcTextField__input",{"ExcTextField__input--readonly":i}),children:[p("input",{className:Re({"is-redacted":"value"in u&&u.value&&a&&!g}),readOnly:i,value:"value"in u?u.value:void 0,defaultValue:"defaultValue"in u?u.defaultValue:void 0,placeholder:r,ref:f,onChange:b=>e==null?void 0:e(b.target.value),onKeyDown:s}),a&&p(rh,{onSelect:()=>U(!g),style:{border:0,userSelect:"none"},children:g?ufe:gT})]})]})}),Cve={toggleTheme:[de("Shift+Alt+D")],saveScene:[de("CtrlOrCmd+S")],loadScene:[de("CtrlOrCmd+O")],clearCanvas:[de("CtrlOrCmd+Delete")],imageExport:[de("CtrlOrCmd+Shift+E")],commandPalette:[de("CtrlOrCmd+/"),de("CtrlOrCmd+Shift+P")],cut:[de("CtrlOrCmd+X")],copy:[de("CtrlOrCmd+C")],paste:[de("CtrlOrCmd+V")],copyStyles:[de("CtrlOrCmd+Alt+C")],pasteStyles:[de("CtrlOrCmd+Alt+V")],selectAll:[de("CtrlOrCmd+A")],deleteSelectedElements:[de("Delete")],duplicateSelection:[de("CtrlOrCmd+D"),de(`Alt+${L("helpDialog.drag")}`)],sendBackward:[de("CtrlOrCmd+[")],bringForward:[de("CtrlOrCmd+]")],sendToBack:[de(sl?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[de(sl?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[de("Shift+Alt+C")],group:[de("CtrlOrCmd+G")],ungroup:[de("CtrlOrCmd+Shift+G")],gridMode:[de("CtrlOrCmd+'")],zenMode:[de("Alt+Z")],objectsSnapMode:[de("Alt+S")],stats:[de("Alt+/")],addToLibrary:[],flipHorizontal:[de("Shift+H")],flipVertical:[de("Shift+V")],viewMode:[de("Alt+R")],hyperlink:[de("CtrlOrCmd+K")],toggleElementLock:[de("CtrlOrCmd+Shift+L")],resetZoom:[de("CtrlOrCmd+0")],zoomOut:[de("CtrlOrCmd+-")],zoomIn:[de("CtrlOrCmd++")],zoomToFitSelection:[de("Shift+3")],zoomToFit:[de("Shift+1")],zoomToFitSelectionInViewport:[de("Shift+2")],toggleEraserTool:[de("E")],toggleHandTool:[de("H")],setFrameAsActiveTool:[de("F")],saveFileToDisk:[de("CtrlOrCmd+S")],saveToActiveFile:[de("CtrlOrCmd+S")],toggleShortcuts:[de("?")],searchMenu:[de("CtrlOrCmd+F")],wrapSelectionInFrame:[]},Ai=(e,t=0)=>{const n=Cve[e];return n&&n.length>0?n[t]||n[0]:""};var ZX={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,i){return i.filter(function(o){return n.test(r,o)})},n.test=function(r,i){return n.match(r,i)!==null},n.match=function(r,i,o){o=o||{};var s=0,a=[],l=i.length,c=0,u=0,d=o.pre||"",f=o.post||"",g=o.caseSensitive&&i||i.toLowerCase(),U;r=o.caseSensitive&&r||r.toLowerCase();for(var b=0;b<l;b++)U=i[b],g[b]===r[s]?(U=d+U+f,s+=1,u+=1+u):u=0,c+=u,a[a.length]=U;return s===r.length?(c=g===r?1/0:c,{rendered:a.join(""),score:c}):null},n.filter=function(r,i,o){return!i||i.length===0?[]:typeof r!="string"?i:(o=o||{},i.reduce(function(s,a,l,c){var u=a;o.extract&&(u=o.extract(a));var d=n.match(r,u,o);return d!=null&&(s[s.length]={string:d.rendered,score:d.score,index:l,original:a}),s},[]).sort(function(s,a){var l=a.score-s.score;return l||s.index-a.index}))}})()})(ZX);var Ave=ZX.exports;const kve=fd(Ave),Rve="\\u0300-\\u036f",Pve="\\ufe20-\\ufe2f",Mve="\\u20d0-\\u20ff",Lve=Rve+Pve+Mve,Dve=`[${Lve}]`,Nve=RegExp(Dve,"g"),Ove=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fve={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"E",æ:"e",Þ:"T",þ:"t",ß:"s",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"I",ĳ:"i",Œ:"E",œ:"e",ŉ:"n",ſ:"s"},iD=e=>e.replace(Ove,t=>Fve[t]||t).replace(Nve,""),Bve=D.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>p("div",{className:Re("Stack Stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...o},ref:s,children:e})),$ve=D.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>p("div",{className:Re("Stack Stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...o},ref:s,children:e})),ys={Row:Bve,Col:$ve},qX=({className:e="",children:t,onToggle:n,title:r,...i})=>{const o=Or(),s=Re(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":o.editor.isMobile}).trim();return p("button",{"data-prevent-outside-click":!0,className:s,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:r,...i,children:t})};qX.displayName="DropdownMenuTrigger";const QX=()=>p("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}});QX.displayName="DropdownMenuSeparator";const JX=({children:e,onClickOutside:t,className:n="",onSelect:r,style:i})=>{const o=Or(),s=D.useRef(null),a=X3({onClickOutside:t});wx(s,()=>{var c;(c=a.onClickOutside)==null||c.call(a)}),D.useEffect(()=>{const c=d=>{var f;d.key===j.ESCAPE&&(d.stopImmediatePropagation(),(f=a.onClickOutside)==null||f.call(a))},u={capture:!0};return document.addEventListener(ge.KEYDOWN,c,u),()=>{document.removeEventListener(ge.KEYDOWN,c,u)}},[a]);const l=Re(`dropdown-menu ${n}`,{"dropdown-menu--mobile":o.editor.isMobile}).trim();return p(PX.Provider,{value:{onSelect:r},children:p("div",{ref:s,className:l,style:i,"data-testid":"dropdown-menu",children:o.editor.isMobile?p(ys.Col,{className:"dropdown-menu-container",children:e}):p(ha,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};JX.displayName="DropdownMenuContent";const Rm=({icon:e,shortcut:t,href:n,children:r,onSelect:i,className:o="",selected:s,rel:a="noreferrer",...l})=>{const c=LX(l.onClick,i);return p("a",{...l,href:n,target:"_blank",rel:"noreferrer",className:MX(o,s),title:l.title??l["aria-label"],onClick:c,children:p(DX,{icon:e,shortcut:t,children:r})})};Rm.displayName="DropdownMenuItemLink";const zve=({children:e,className:t="",selected:n,...r})=>p("div",{...r,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),Vve=e=>{const t=Ee.Children.toArray(e).find(n=>Ee.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger");return t||null},Hve=e=>{const t=Ee.Children.toArray(e).find(n=>Ee.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent");return t||null},Rt=({children:e,open:t})=>{const n=Vve(e),r=Hve(e);return z(ke,{children:[n,t&&r]})};Rt.Trigger=qX;Rt.Content=JX;Rt.Item=To;Rt.ItemLink=Rm;Rt.ItemCustom=zve;Rt.Group=i8;Rt.Separator=QX;Rt.displayName="DropdownMenu";var Wve={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const oD=e=>{let t;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const g=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(U=>U(t,g))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Wve?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,i,l);return l},Gve=e=>e?oD(e):oD;var ej={exports:{}},tj={},nj={exports:{}},rj={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg=D;function Xve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jve=typeof Object.is=="function"?Object.is:Xve,Kve=Hg.useState,Yve=Hg.useEffect,Zve=Hg.useLayoutEffect,qve=Hg.useDebugValue;function Qve(e,t){var n=t(),r=Kve({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Zve(function(){i.value=n,i.getSnapshot=t,e4(i)&&o({inst:i})},[e,n,t]),Yve(function(){return e4(i)&&o({inst:i}),e(function(){e4(i)&&o({inst:i})})},[e]),qve(n),n}function e4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jve(e,n)}catch{return!0}}function Jve(e,t){return t()}var e7e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jve:Qve;rj.useSyncExternalStore=Hg.useSyncExternalStore!==void 0?Hg.useSyncExternalStore:e7e;nj.exports=rj;var t7e=nj.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J3=D,n7e=t7e;function r7e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var i7e=typeof Object.is=="function"?Object.is:r7e,o7e=n7e.useSyncExternalStore,s7e=J3.useRef,a7e=J3.useEffect,l7e=J3.useMemo,c7e=J3.useDebugValue;tj.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=s7e(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=l7e(function(){function l(g){if(!c){if(c=!0,u=g,g=r(g),i!==void 0&&s.hasValue){var U=s.value;if(i(U,g))return d=U}return d=g}if(U=d,i7e(u,g))return U;var b=r(g);return i!==void 0&&i(U,b)?U:(u=g,d=b)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var a=o7e(e,o[0],o[1]);return a7e(function(){s.hasValue=!0,s.value=a},[a]),c7e(a),a};ej.exports=tj;var u7e=ej.exports;const d7e=fd(u7e);var ij={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:f7e}=Ee,{useSyncExternalStoreWithSelector:h7e}=d7e;let sD=!1;const g7e=e=>e;function p7e(e,t=g7e,n){(ij?"production":void 0)!=="production"&&n&&!sD&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),sD=!0);const r=h7e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return f7e(r),r}const aD=e=>{(ij?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Gve(e):e,n=(r,i)=>p7e(t,r,i);return Object.assign(n,t),n},m7e=e=>e?aD(e):aD;var lD,cD;const uD=typeof window<"u"&&((lD=window.document)!=null&&lD.createElement||((cD=window.navigator)==null?void 0:cD.product)==="ReactNative")?Ee.useLayoutEffect:Ee.useEffect;function Oa(){const e=m7e(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(i=>i.set),r=e(i=>i.version);return uD(()=>{n(i=>({version:i.version+1}))},[]),uD(()=>(n(({current:i})=>({current:[...i,t]})),()=>n(({current:i})=>({current:i.filter(o=>o!==t)}))),[t,r]),null},Out:()=>{const t=e(n=>n.current);return Ee.createElement(Ee.Fragment,null,t)}}}const oj=Ee.createContext(null),to=()=>Ee.useContext(oj),U7e=Pz(),b7e=()=>Ee.useMemo(()=>({MainMenuTunnel:Oa(),WelcomeScreenMenuHintTunnel:Oa(),WelcomeScreenToolbarHintTunnel:Oa(),WelcomeScreenHelpHintTunnel:Oa(),WelcomeScreenCenterTunnel:Oa(),FooterCenterTunnel:Oa(),DefaultSidebarTriggerTunnel:Oa(),DefaultSidebarTabTriggersTunnel:Oa(),OverwriteConfirmDialogTunnel:Oa(),TTDDialogTriggerTunnel:Oa(),tunnelsJotai:U7e}),[]),sj=(e,t)=>{var r;let n=((r=t[0])==null?void 0:r.type)||null;for(const i of t)if(i.type!==n){n=null;break}return Tw(e.activeTool.type)&&e.activeTool.type!=="image"&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(i=>Tw(i.type))},aj=(e,t)=>Bg(e.activeTool.type)||t.some(n=>Bg(n.type)),lj=({appState:e,elementsMap:t,renderAction:n,app:r})=>{const i=FG(t,e);let o=!1;i.length===2&&(Ps(i[0])||Ps(i[1]))&&(o=!0);const s=!!(e.editingTextElement||e.newElement),a=Or(),l=document.documentElement.getAttribute("dir")==="rtl",c=Bg(e.activeTool.type)&&!sa(e.currentItemBackgroundColor)||i.some(U=>Bg(U.type)&&!sa(U.backgroundColor)),u=i.length===1||o,d=!e.editingLinearElement&&i.length===1&&et(i[0])&&!De(i[0]),f=!e.croppingElementId&&i.length===1&&kt(i[0]),g=!o&&Go(e,r);return z("div",{className:"panelColumn",children:[p("div",{children:sj(e,i)&&n("changeStrokeColor")}),aj(e,i)&&p("div",{children:n("changeBackgroundColor")}),c&&n("changeFillStyle"),(NM(e.activeTool.type)||i.some(U=>NM(U.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||i.some(U=>U.type==="freedraw"))&&n("changeStrokeShape"),(OM(e.activeTool.type)||i.some(U=>OM(U.type)))&&z(ke,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(xw(e.activeTool.type)||i.some(U=>xw(U.type)))&&p(ke,{children:n("changeRoundness")}),(FM(e.activeTool.type)||i.some(U=>FM(U.type)))&&p(ke,{children:n("changeArrowType")}),(e.activeTool.type==="text"||i.some(Ae))&&z(ke,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||Q5e(i,t))&&n("changeTextAlign")]}),q5e(i,t)&&n("changeVerticalAlign"),(Zy(e.activeTool.type)||i.some(U=>Zy(U.type)))&&p(ke,{children:n("changeArrowhead")}),n("changeOpacity"),z("fieldset",{children:[p("legend",{children:L("labels.layers")}),z("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),g&&!o&&z("fieldset",{children:[p("legend",{children:L("labels.align")}),z("div",{className:"buttonList",children:[l?z(ke,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):z(ke,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),i.length>2&&n("distributeHorizontally"),p("div",{style:{flexBasis:"100%",height:0}}),z("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),i.length>2&&n("distributeVertically")]})]})]}),!s&&i.length>0&&z("fieldset",{children:[p("legend",{children:L("labels.actions")}),z("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),u&&n("hyperlink"),f&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},cj=({activeTool:e,appState:t,app:n,UIOptions:r})=>{const[i,o]=D.useState(!1),s=e.type==="frame",a=e.type==="laser",l=e.type==="embeddable",{TTDDialogTriggerTunnel:c}=to();return z(ke,{children:[wT.map(({value:u,icon:d,key:f,numericKey:g,fillable:U},b)=>{var w;if(((w=r.tools)==null?void 0:w[u])===!1)return null;const v=L(`toolBar.${u}`),_=f&&mm(typeof f=="string"?f:f[0]),E=_?`${_} ${L("helpDialog.or")} ${g}`:`${g}`;return p(vt,{className:Re("Shape",{fillable:U}),type:"radio",icon:d,checked:e.type===u,name:"editor-current-shape",title:`${mm(v)} — ${E}`,keyBindingLabel:g||_,"aria-label":mm(v),"aria-keyshortcuts":E,"data-testid":`toolbar-${u}`,onPointerDown:({pointerType:T})=>{!t.penDetected&&T==="pen"&&n.togglePenMode(!0)},onChange:({pointerType:T})=>{t.activeTool.type!==u&&Dt("toolbar",u,"ui"),u==="image"?n.setActiveTool({type:u,insertOnCanvasDirectly:T!=="mouse"}):n.setActiveTool({type:u})}},u)}),p("div",{className:"App-toolbar__divider"}),z(Rt,{open:i,children:[z(Rt.Trigger,{className:Re("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":s||l||a&&!n.props.isCollaborating}),onToggle:()=>o(!i),title:L("toolBar.extraTools"),children:[lfe,n.props.aiEnabled!==!1&&p("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:8,fontFamily:"Cascadia, monospace",position:"absolute",background:"var(--color-promo)",color:"var(--color-surface-lowest)",bottom:3,right:4},children:"AI"})]}),z(Rt.Content,{onClickOutside:()=>o(!1),onSelect:()=>o(!1),className:"App-toolbar__extra-tools-dropdown",children:[p(Rt.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:BV,shortcut:j.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:s,children:L("toolBar.frame")}),p(Rt.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:rde,"data-testid":"toolbar-embeddable",selected:l,children:L("toolBar.embeddable")}),p(Rt.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:zV,"data-testid":"toolbar-laser",selected:a,shortcut:j.K.toLocaleUpperCase(),children:L("toolBar.laser")}),p("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&p(c.Out,{}),p(Rt.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:$V,"data-testid":"toolbar-embeddable",children:L("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&p(ke,{children:z(Rt.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:VV,"data-testid":"toolbar-magicframe",children:[L("toolBar.magicframe"),p(Rt.Item.Badge,{children:"AI"})]})})]})]})]})},y7e=({renderAction:e,zoom:t})=>p(ys.Col,{gap:1,className:Ig.ZOOM_ACTIONS,children:z(ys.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),v7e=({renderAction:e,className:t})=>z("div",{className:`undo-redo-buttons ${t}`,children:[p("div",{className:"undo-button-container",children:p(xc,{label:L("buttons.undo"),children:e("undo")})}),p("div",{className:"redo-button-container",children:z(xc,{label:L("buttons.redo"),children:[" ",e("redo")]})})]}),E7e=({actionManager:e,showExitZenModeBtn:t})=>p("button",{type:"button",className:Re("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(Hw),children:L("buttons.exitZenMode")}),_7e=({renderAction:e,className:t})=>p("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),dD=e=>{const t=D.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},Wg=({label:e,onClick:t,className:n,children:r,actionType:i,type:o="button",isLoading:s,...a})=>{const l=i?`Dialog__action-button--${i}`:"";return z("button",{className:Re("Dialog__action-button",l,n),type:o,"aria-label":e,onClick:t,...a,children:[r&&p("div",{style:s?{visibility:"hidden"}:{},children:r}),p("div",{style:s?{visibility:"hidden"}:{},children:e}),s&&p("div",{style:{position:"absolute",inset:0},children:p(Ic,{})})]})},uj=Pn(new Map),fD=async e=>await eG({elements:e,appState:{exportBackground:!1,viewBackgroundColor:ft.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),w7e=(e,t,n)=>{const[r,i]=D.useState();return D.useEffect(()=>{if(t)if(e){const o=n.get(e);o?i(o):(async()=>{var a;const s=await fD(t);(a=s.querySelector(".style-fonts"))==null||a.remove(),s&&(n.set(e,s),i(s))})()}else(async()=>{const o=await fD(t);i(o)})()},[e,t,n,i]),r},dj=()=>{const[e]=Yn(uj);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:r=>{r.forEach(i=>e.delete(i))},svgCache:e}};class I7e{constructor(){H(this,"jobs",[]);H(this,"running",!1)}tick(){if(this.running)return;const t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(Qu(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){const r=l3();return this.jobs.push({jobFactory:t,promise:r,args:n}),this.tick(),r}}const T7e=["excalidraw.com","raw.githubusercontent.com/excalidraw/excalidraw-libraries"],fj=new Wa,k2=Pn({status:"loaded",isInitialized:!1,libraryItems:[]}),Ap=e=>ic(e),x7e=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((r,i)=>r.id===t.elements[i].id&&r.versionNonce===t.elements[i].versionNonce)),S7e=(e,t)=>{const n=[];for(const r of t)x7e(e,r)&&n.push(r);return[...n,...e]},hj=(e,t)=>{const n=He(t),r={deletedItems:new Map,addedItems:new Map};for(const o of e)n.has(o.id)||r.deletedItems.set(o.id,o);const i=He(e);for(const o of t)i.has(o.id)||r.addedItems.set(o.id,o);return r};class C7e{constructor(t){H(this,"currLibraryItems",[]);H(this,"prevLibraryItems",Ap(this.currLibraryItems));H(this,"app");H(this,"updateQueue",[]);H(this,"getLastUpdateTask",()=>this.updateQueue[this.updateQueue.length-1]);H(this,"notifyListeners",()=>{var t,n;if(this.updateQueue.length>0)ia.set(k2,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{ia.set(k2,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{const r=this.prevLibraryItems;this.prevLibraryItems=Ap(this.currLibraryItems);const i=Ap(this.currLibraryItems);(n=(t=this.app.props).onLibraryChange)==null||n.call(t,i),fj.trigger(hj(r,i),i)}catch(r){console.error(r)}}});H(this,"destroy",()=>{this.updateQueue=[],this.currLibraryItems=[],ia.set(uj,new Map)});H(this,"resetLibrary",()=>this.setLibrary([]));H(this,"getLatestLibrary",()=>new Promise(async t=>{try{const n=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?t(this.getLatestLibrary()):t(Ap(n))}catch{return t(this.currLibraryItems)}}));H(this,"updateLibrary",async({libraryItems:t,prompt:n=!1,merge:r=!1,openLibraryMenu:i=!1,defaultStatus:o="unpublished"})=>(i&&this.app.setState({openSidebar:{name:ws.name,tab:py}}),this.setLibrary(()=>new Promise(async(s,a)=>{try{const l=await(typeof t=="function"&&!(t instanceof Blob)?t(this.currLibraryItems):t);let c;l instanceof Blob?c=await n6e(l,o):c=I3(l,o),!n||window.confirm(L("alerts.confirmAddLibrary",{numShapes:c.length}))?(n&&this.app.focusContainer(),s(r?S7e(this.currLibraryItems,c):c)):a(new kg)}catch(l){a(l)}}))));H(this,"setLibrary",t=>{const n=new Promise(async(r,i)=>{try{await this.getLastUpdateTask(),typeof t=="function"&&(t=t(this.currLibraryItems)),this.currLibraryItems=Ap(await t),r(this.currLibraryItems)}catch(o){i(o)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==n),this.notifyListeners()});return this.updateQueue.push(n),this.notifyListeners(),n});this.app=t}}const gj=e=>{const n=Math.ceil(Math.sqrt(e.length)),r=[],i=g=>e.slice(g*n,g*n+n).reduce((b,v)=>{const{height:_}=fa(v.elements);return Math.max(b,_)},0),o=g=>{let U=0,b=0,v=0;for(const _ of e){if(U%n===0&&(b=0),b===g){const{width:E}=fa(_.elements);v=Math.max(v,E)}U++,b++}return v};let s=0,a=0,l=0,c=0,u=0,d=0,f=0;for(const g of e){u&&u%n===0&&(a+=l+50,s=0,d=0,f++),d===0&&(l=i(f)),c=o(d);const{minX:U,minY:b,width:v,height:_}=fa(g.elements),E=(c-v)/2,w=(l-_)/2;r.push(...g.elements.map(T=>({...T,x:T.x+s+E-U,y:T.y+a+w-b}))),s+=c+50,u++,d++}return r},A7e=(e,t=T7e)=>{if(typeof t=="function"?t(e):t.some(n=>{const r=new URL(`https://${n.replace(/^https?:\/\//,"")}`),{hostname:i,pathname:o}=new URL(e);return new RegExp(`(^|\\.)${r.hostname}$`).test(i)&&new RegExp(`^${r.pathname.replace(/\/+$/,"")}(/+|$)`).test(o)}))return!0;throw new Error(`Invalid or disallowed library URL: "${e}"`)},jw=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get(k_.addLibrary)||new URLSearchParams(window.location.search).get(A_.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},fu=class fu{constructor(t){H(this,"adapter");this.adapter=t}static async getLibraryItems(t,n,r=!0){const i=()=>new Promise(async(o,s)=>{try{const a=await t.load({source:n});o(I3((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){s(a)}});return r?fu.queue.push(i):i()}getLibraryItems(t){return fu.getLibraryItems(this.adapter,t,!1)}};H(fu,"queue",new I7e),H(fu,"run",async(t,n)=>{const r=new fu(t);return fu.queue.push(()=>n(r))});let fg=fu,Pm=0,s8=0;const Kw=e=>LG(e.map(t=>`${t.id}:${Dbe(t.elements)}`).sort().join()),hD=async(e,t)=>{try{return s8++,await fg.run(e,async n=>{const r=He(await n.getLibraryItems("save"));for(const[a]of t.deletedItems)r.delete(a);const i=[];for(const[a,l]of t.addedItems)r.has(a)?r.set(a,l):i.push(l);const o=i.concat(Array.from(r.values())),s=Kw(o);return s!==Pm&&await e.save({libraryItems:o}),Pm=s,o})}finally{s8--}},k7e=e=>{const{excalidrawAPI:t}=e,n=D.useRef(e);n.current=e;const r=D.useRef(!1);D.useEffect(()=>{if(!t)return;r.current=!1;const i=async({libraryUrl:a,idToken:l})=>{const c=new Promise(async(d,f)=>{try{a=decodeURIComponent(a),a=sT(a),A7e(a,n.current.validateLibraryUrl);const U=await(await fetch(a)).blob();d(U)}catch(g){f(g)}}),u=l!==t.id;await(u&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:u,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw t.updateScene({appState:{errorMessage:d.message}}),d}finally{if(window.location.hash.includes(k_.addLibrary)){const d=new URLSearchParams(window.location.hash.slice(1));d.delete(k_.addLibrary),window.history.replaceState({},nc,`#${d.toString()}`)}else if(window.location.search.includes(A_.addLibrary)){const d=new URLSearchParams(window.location.search);d.delete(A_.addLibrary),window.history.replaceState({},nc,`?${d.toString()}`)}}},o=a=>{a.preventDefault();const l=jw();l&&(a.stopImmediatePropagation(),window.history.replaceState({},"",a.oldURL),i(l))},s=jw();if(s&&i(s),"getInitialLibraryItems"in n.current&&n.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{t.updateLibrary({libraryItems:a,merge:!0})}).catch(a=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a==null?void 0:a.message}`)})),"adapter"in n.current&&n.current.adapter){const a=n.current.adapter,l=n.current.migrationAdapter,c=l3();l?c.resolve(Qu(l.load).then(async u=>{let d=null;try{if(!u)return fg.getLibraryItems(a,"load");d=I3(u.libraryItems||[],"published");const f=await hD(a,hj([],d));try{await l.clear()}catch(g){console.error(`couldn't delete legacy library data: ${g.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(u=>(console.error(`error during library migration: ${u.message}`),fg.getLibraryItems(a,"load")))):c.resolve(Qu(fg.getLibraryItems,a,"load")),t.updateLibrary({libraryItems:c.then(u=>{const d=u||[];return Pm=Kw(d),d}),merge:!0}).finally(()=>{r.current=!0})}return window.addEventListener(ge.HASHCHANGE,o),()=>{window.removeEventListener(ge.HASHCHANGE,o)}},[t]),D.useEffect(()=>{const i=fj.on(async(s,a)=>{const l=r.current,c="adapter"in n.current&&n.current.adapter||null;try{c&&Pm!==Kw(a)&&await hD(c,s)}catch(u){console.error(`couldn't persist library update: ${u.message}`,s),l&&n.current.excalidrawAPI&&n.current.excalidrawAPI.updateScene({appState:{errorMessage:L("errors.saveLibraryError")}})}}),o=s=>{s8&&JI(s)};return window.addEventListener(ge.BEFORE_UNLOAD,o),()=>{window.removeEventListener(ge.BEFORE_UNLOAD,o),i(),Pm=0,s8=0}},[])},R7e=({theme:e,id:t,libraryReturnUrl:n})=>{const r=n||window.location.origin+window.location.pathname;return p("a",{className:"library-menu-browse-button",href:`https://libraries.excalidraw.com?target=${window.name||"_blank"}&referrer=${r}&useHash=true&token=${t}&theme=${e}&version=${n3.excalidrawLibrary}`,target:"_excalidraw_libraries",children:L("labels.libraries")})},pj=({libraryReturnUrl:e,theme:t,id:n,style:r,children:i,className:o})=>z("div",{className:Re("library-menu-control-buttons",o),style:r,children:[p(R7e,{id:n,libraryReturnUrl:e,theme:t}),i]}),P7e=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,M7e=/{{([\w-]+)}}/,L7e=/<([\w-]+)>/,D7e=/<\/([\w-]+)>/,N7e=(e,t)=>{const n=[{name:"",children:[]}];return e.split(P7e).filter(Boolean).forEach(r=>{const i=r.match(L7e),o=r.match(D7e),s=r.match(M7e);if(i!==null){const a=i[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(o!==null)if(o[1]===n[n.length-1].name){const l=n.pop(),c=Ee.createElement(Ee.Fragment,{},...l.children),u=t[l.name];typeof u=="function"&&n[n.length-1].children.push(u(c))}else console.warn(`Trans: unexpected end tag ${r} for interpolating ${e}`);else if(s!==null){const a=s[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(r)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},Uo=({i18nKey:e,children:t,...n})=>{const{t:r}=Zn();return Ee.createElement(Ee.Fragment,{},...N7e(r(e),n))};class Mf{static has(t){try{return!!window.localStorage.getItem(t)}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),!1}}static get(t){try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),null}}}H(Mf,"set",(t,n)=>{try{return window.localStorage.setItem(t,JSON.stringify(n)),!0}catch(r){return console.warn(`localStorage.setItem error: ${r.message}`),!1}}),H(Mf,"delete",t=>{try{window.localStorage.removeItem(t)}catch(n){console.warn(`localStorage.removeItem error: ${n.message}`)}});const O7e=async e=>{const r=Math.round(8),i=Math.max(Math.round(128/64),2),o=Cce(e,6),s=document.createElement("canvas");s.width=o[0].length*128+(o[0].length+1)*(r*2)-r*2,s.height=o.length*128+(o.length+1)*(r*2)-r*2;const a=s.getContext("2d");a.fillStyle=Kr.white,a.fillRect(0,0,s.width,s.height);for(const[l,c]of e.entries()){const u=await A3({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=u,g=Math.floor(l/6)*(128+r*2),U=l%6*(128+r*2);a.drawImage(u,U+(128-d)/2+r,g+(128-f)/2+r),a.lineWidth=i,a.strokeStyle=Kr.gray[4],a.strokeRect(U+r/2,g+r/2,128+r,128+r)}return await _w(new File([await E2(s)],"preview",{type:Ne.png}),{outputType:Ne.jpg,maxWidthOrHeight:5e3})},F7e=({libItem:e,appState:t,index:n,onChange:r,onRemove:i})=>{const o=D.useRef(null),s=D.useRef(null);return D.useEffect(()=>{const a=o.current;a&&(async()=>{const l=await eG({elements:e.elements,appState:{...t,viewBackgroundColor:Kr.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),z("div",{className:"single-library-item",children:[e.status==="published"&&p("span",{className:"single-library-item-status",children:L("labels.statusPublished")}),p("div",{ref:o,className:"single-library-item__svg"}),p(vt,{"aria-label":L("buttons.remove"),type:"button",icon:Uh,className:"single-library-item--remove",onClick:i.bind(null,e.id),title:L("buttons.remove")}),z("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[z("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[z("div",{style:{padding:"0.5em 0"},children:[p("span",{style:{fontWeight:500,color:Kr.gray[6]},children:L("publishDialog.itemName")}),p("span",{"aria-hidden":"true",className:"required",children:"*"})]}),p("input",{type:"text",ref:s,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{r(a.target.value,n)}})]}),p("span",{className:"error",children:e.error})]})]})},B7e=({onClose:e,libraryItems:t,appState:n,onSuccess:r,onError:i,updateItemsInStorage:o,onRemove:s})=>{const[a,l]=D.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,u]=D.useState(!1);D.useEffect(()=>{const w=Mf.get(hm.PUBLISH_LIBRARY);w&&l(w)},[]);const[d,f]=D.useState(t.slice());D.useEffect(()=>{f(t.slice())},[t]);const g=w=>{l({...a,[w.target.name]:w.target.value})},U=async w=>{w.preventDefault(),u(!0);const T=[];let A=!1;if(d.forEach(O=>{let F="";O.name||(F=L("publishDialog.errors.required"),A=!0),T.push({...O,error:F})}),A){f(T),u(!1);return}const M=await O7e(d),S={type:_s.excalidrawLibrary,version:n3.excalidrawLibrary,source:VI,libraryItems:d},x=JSON.stringify(S,null,2),C=new Blob([x],{type:"application/json"}),R=new FormData;R.append("excalidrawLib",C),R.append("previewImage",M),R.append("previewImageType",M.type),R.append("title",a.name),R.append("authorName",a.authorName),R.append("githubHandle",a.githubHandle),R.append("name",a.name),R.append("description",a.description),R.append("twitterHandle",a.twitterHandle),R.append("website",a.website),fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit",{method:"post",body:R}).then(O=>O.ok?O.json().then(({url:F})=>{Mf.delete(hm.PUBLISH_LIBRARY),r({url:F,authorName:a.authorName,items:d})}):O.json().catch(()=>{throw new Error(O.statusText||"something went wrong")}).then(F=>{throw new Error(F.message||O.statusText||"something went wrong")}),O=>{console.error(O),i(O),u(!1)}).catch(O=>{console.error(O),i(O),u(!1)})},b=()=>{const w=[];return d.forEach((T,A)=>{w.push(p("div",{className:"single-library-item-wrapper",children:p(F7e,{libItem:T,appState:n,index:A,onChange:(M,S)=>{const x=d.slice();x[S].name=M,f(x)},onRemove:s})},A))}),p("div",{className:"selected-library-items",children:w})},v=D.useCallback(()=>{o(d),Mf.set(hm.PUBLISH_LIBRARY,a),e()},[d,e,o,a]),_=!!t.length,E=t.some(w=>w.status==="published");return p(Ko,{onCloseRequest:v,title:L("publishDialog.title"),className:"publish-library",children:_?z("form",{onSubmit:U,children:[p("div",{className:"publish-library-note",children:p(Uo,{i18nKey:"publishDialog.noteDescription",link:w=>p("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:w})})}),p("span",{className:"publish-library-note",children:p(Uo,{i18nKey:"publishDialog.noteGuidelines",link:w=>p("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:w})})}),p("div",{className:"publish-library-note",children:L("publishDialog.noteItems")}),E&&p("span",{className:"publish-library-note publish-library-warning",children:L("publishDialog.republishWarning")}),b(),z("div",{className:"publish-library__fields",children:[z("label",{children:[z("div",{children:[p("span",{children:L("publishDialog.libraryName")}),p("span",{"aria-hidden":"true",className:"required",children:"*"})]}),p("input",{type:"text",name:"name",required:!0,value:a.name,onChange:g,placeholder:L("publishDialog.placeholder.libraryName")})]}),z("label",{style:{alignItems:"flex-start"},children:[z("div",{children:[p("span",{children:L("publishDialog.libraryDesc")}),p("span",{"aria-hidden":"true",className:"required",children:"*"})]}),p("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:g,placeholder:L("publishDialog.placeholder.libraryDesc")})]}),z("label",{children:[z("div",{children:[p("span",{children:L("publishDialog.authorName")}),p("span",{"aria-hidden":"true",className:"required",children:"*"})]}),p("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:g,placeholder:L("publishDialog.placeholder.authorName")})]}),z("label",{children:[p("span",{children:L("publishDialog.githubUsername")}),p("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:g,placeholder:L("publishDialog.placeholder.githubHandle")})]}),z("label",{children:[p("span",{children:L("publishDialog.twitterUsername")}),p("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:g,placeholder:L("publishDialog.placeholder.twitterHandle")})]}),z("label",{children:[p("span",{children:L("publishDialog.website")}),p("input",{type:"text",name:"website",pattern:"https?://.+",title:L("publishDialog.errors.website"),value:a.website,onChange:g,placeholder:L("publishDialog.placeholder.website")})]}),p("span",{className:"publish-library-note",children:p(Uo,{i18nKey:"publishDialog.noteLicense",link:w=>p("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:w})})})]}),z("div",{className:"publish-library__buttons",children:[p(Wg,{label:L("buttons.cancel"),onClick:v,"data-testid":"cancel-clear-canvas-button"}),p(Wg,{type:"submit",label:L("buttons.submit"),actionType:"primary",isLoading:c})]})]}):p("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:L("publishDialog.atleastOneLibItem")})})},$7e=(e,t)=>e.filter(n=>t.includes(n.id)),z7e=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:r,resetLibrary:i,onSelectItems:o,appState:s,className:a})=>{const[l]=Yn(k2),[c,u]=Yn(kx),d=()=>{const R=t.length?L("alerts.removeItemsFromsLibrary",{count:t.length}):L("alerts.resetLibrary"),O=t.length?L("confirmDialog.removeItemsFromLib"):L("confirmDialog.resetLibrary");return p(mj,{onConfirm:()=>{t.length?r():i(),g(!1)},onCancel:()=>{g(!1)},title:O,children:p("p",{children:R})})},[f,g]=D.useState(!1),U=!!t.length,b=U?l.libraryItems.filter(R=>t.includes(R.id)):l.libraryItems,v=L(U?"buttons.remove":"buttons.resetLibrary"),[_,E]=D.useState(!1),[w,T]=D.useState(null),A=D.useCallback(()=>z(Ko,{onCloseRequest:()=>T(null),title:L("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[p("p",{children:p(Uo,{i18nKey:"publishSuccessDialog.content",authorName:w.authorName,link:R=>p("a",{href:w==null?void 0:w.url,target:"_blank",rel:"noopener noreferrer",children:R})})}),p(vt,{type:"button",title:L("buttons.close"),"aria-label":L("buttons.close"),label:L("buttons.close"),onClick:()=>T(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[T,w]),M=(R,O)=>{E(!1),T({url:R.url,authorName:R.authorName});const F=O.slice();F.forEach(N=>{t.includes(N.id)&&(N.status="published")}),n.setLibrary(F)},S=async()=>{try{await n.updateLibrary({libraryItems:kT({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(R){if((R==null?void 0:R.name)==="AbortError"){console.warn(R);return}e({errorMessage:L("errors.importLibraryError")})}},x=async()=>{const R=U?b:await n.getLatestLibrary();h6e(R).catch(Jz).catch(O=>{e({errorMessage:O.message})})},C=()=>z(Rt,{open:c,children:[p(Rt.Trigger,{onToggle:()=>u(!c),children:Vue}),z(Rt.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!U&&p(Rt.Item,{onSelect:S,icon:dT,"data-testid":"lib-dropdown--load",children:L("buttons.load")}),!!b.length&&p(Rt.Item,{onSelect:x,icon:h3,"data-testid":"lib-dropdown--export",children:L("buttons.export")}),!!b.length&&p(Rt.Item,{onSelect:()=>g(!0),icon:Ju,children:v}),U&&p(Rt.Item,{icon:efe,onSelect:()=>E(!0),"data-testid":"lib-dropdown--remove",children:L("buttons.publishLibrary")})]})]});return z("div",{className:Re("library-menu-dropdown-container",a),children:[C(),t.length>0&&p("div",{className:"library-actions-counter",children:t.length}),f&&d(),_&&p(B7e,{onClose:()=>E(!1),libraryItems:$7e(l.libraryItems,t),appState:s,onSuccess:R=>M(R,l.libraryItems),onError:R=>window.alert(R),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:R=>o(t.filter(O=>O!==R))}),w&&A()]})},gD=({selectedItems:e,onSelectItems:t,className:n})=>{const{library:r}=wa(),{clearLibraryCache:i,deleteItemsFromLibraryCache:o}=dj(),s=Qr(),a=Ir(),[l]=Yn(k2),c=async d=>{const f=d.filter(g=>!e.includes(g.id));r.setLibrary(f).catch(()=>{a({errorMessage:L("alerts.errorRemovingFromLibrary")})}),o(e),t([])};return p(z7e,{appState:s,setAppState:a,selectedItems:e,onSelectItems:t,library:r,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{r.resetLibrary(),i()},className:n})},V7e=D.memo(({id:e,elements:t,isPending:n,onClick:r,selected:i,onToggle:o,onDrag:s,svgCache:a})=>{const l=D.useRef(null),c=w7e(e,t,a);D.useEffect(()=>{const U=l.current;if(U)return c&&(U.innerHTML=c.outerHTML),()=>{U.innerHTML=""}},[c]);const[u,d]=D.useState(!1),f=Or().editor.isMobile,g=n&&p("div",{className:"library-unit__adder",children:zue});return z("div",{className:Re("library-unit",{"library-unit__active":t,"library-unit--hover":t&&u,"library-unit--selected":i,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[p("div",{className:Re("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?U=>{e&&U.shiftKey?o(e,U):r(e)}:void 0,onDragStart:U=>{if(!e){U.preventDefault();return}d(!1),s(e,U)}}),g,e&&t&&(u||f||i)&&p(Sx,{checked:i,onChange:(U,b)=>o(e,b),className:"library-unit__checkbox"})]})}),H7e=()=>p("div",{className:"library-unit library-unit--skeleton"});function W7e(){return[!1,D.useCallback(t=>t(),[])]}const G7e=Ee.useTransition||W7e,pD=({children:e})=>p("div",{className:"library-menu-items-container__grid",children:e}),t4=D.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:r,onClick:i,svgCache:o,itemsRenderedPerBatch:s})=>{const[,a]=G7e(),[l,c]=D.useState(0);return D.useEffect(()=>{l<e.length&&a(()=>{c(l+s)})},[l,e.length,a,s]),p(ke,{children:e.map((u,d)=>d<l?p(V7e,{elements:u==null?void 0:u.elements,isPending:!(u!=null&&u.id)&&!!(u!=null&&u.elements),onClick:i,svgCache:o,id:u==null?void 0:u.id,selected:r(u.id),onToggle:t,onDrag:n},(u==null?void 0:u.id)??d):p(H7e,{},d))})}),X7e=Pn(0),j7e=e=>{const[t,n]=Yn(X7e);return D.useEffect(()=>{const{current:r}=e;if(!r)return;const i=ql(()=>{const{scrollTop:o}=r;n(o)},200);return r.addEventListener("scroll",i),()=>{i.cancel(),r.removeEventListener("scroll",i)}},[e,n]),t},K7e=17,Y7e=64;function Z7e({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:r,pendingElements:i,theme:o,id:s,libraryReturnUrl:a,onSelectItems:l,selectedItems:c}){const u=D.useRef(null),d=j7e(u);D.useEffect(()=>{var R;d>0&&((R=u.current)==null||R.scrollTo(0,d))},[]);const{svgCache:f}=dj(),g=D.useMemo(()=>t.filter(R=>R.status!=="published"),[t]),U=D.useMemo(()=>t.filter(R=>R.status==="published"),[t]),b=!t.length&&!i.length,v=!i.length&&!g.length&&!U.length,[_,E]=D.useState(null),w=D.useCallback((R,O)=>{const F=!c.includes(R),N=[...g,...U];if(F){if(O.shiftKey&&_){const J=N.findIndex(q=>q.id===_),K=N.findIndex(q=>q.id===R);if(J===-1||K===-1){l([...c,R]);return}const ne=He(c),ee=N.reduce((q,Z,te)=>((te>=J&&te<=K||ne.has(Z.id))&&q.push(Z.id),q),[]);l(ee)}else l([...c,R]);E(R)}else E(null),l(c.filter(J=>J!==R))},[_,l,U,c,g]),T=D.useCallback(R=>{let O;return c.includes(R)?O=t.filter(F=>c.includes(F.id)):O=t.filter(F=>F.id===R),O.map(F=>({...F,elements:eH(F.elements,{randomizeSeed:!0})}))},[t,c]),A=D.useCallback((R,O)=>{O.dataTransfer.setData(Ne.excalidrawlib,kW(T(R)))},[T]),M=D.useCallback(R=>R?c.includes(R):!1,[c]),S=D.useCallback(()=>{n(i)},[i,n]),x=D.useCallback(R=>{R&&r(T(R))},[T,r]),C=f.size>=t.length?Y7e:K7e;return z("div",{className:"library-menu-items-container",style:i.length||g.length||U.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!v&&p(gD,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),z(ys.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:U.length>0?1:"0 1 auto",marginBottom:0},ref:u,children:[z(ke,{children:[!v&&p("div",{className:"library-menu-items-container__header",children:L("labels.personalLib")}),e&&p("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:p(Ic,{})}),!i.length&&!g.length?z("div",{className:"library-menu-items__no-items",children:[p("div",{className:"library-menu-items__no-items__label",children:L("library.noItems")}),p("div",{className:"library-menu-items__no-items__hint",children:U.length>0?L("library.hint_emptyPrivateLibrary"):L("library.hint_emptyLibrary")})]}):z(pD,{children:[i.length>0&&p(t4,{itemsRenderedPerBatch:C,items:[{id:null,elements:i}],onItemSelectToggle:w,onItemDrag:A,onClick:S,isItemSelected:M,svgCache:f}),p(t4,{itemsRenderedPerBatch:C,items:g,onItemSelectToggle:w,onItemDrag:A,onClick:x,isItemSelected:M,svgCache:f})]})]}),z(ke,{children:[(U.length>0||i.length>0||g.length>0)&&p("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:L("labels.excalidrawLib")}),U.length>0?p(pD,{children:p(t4,{itemsRenderedPerBatch:C,items:U,onItemSelectToggle:w,onItemDrag:A,onClick:x,isItemSelected:M,svgCache:f})}):g.length>0?p("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:L("library.noItems")}):null]}),b&&p(pj,{style:{padding:"16px 0",width:"100%"},id:s,libraryReturnUrl:a,theme:o,children:p(gD,{selectedItems:c,onSelectItems:l})})]})]})}const kx=Pn(!1),mD=({children:e})=>p("div",{className:"layer-ui__library",children:e}),q7e=D.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:r,libraryReturnUrl:i,library:o,id:s,theme:a,selectedItems:l,onSelectItems:c})=>{const[u]=Yn(k2),d=D.useCallback(U=>{(async(v,_)=>{Dt("element","addToLibrary","ui");for(const w of F$)if(v.some(T=>T.type===w))return r({errorMessage:L(`errors.libraryElementTypeError.${w}`)});const E=[{status:"unpublished",elements:v,id:Ms(),created:Date.now()},..._];n(),o.setLibrary(E).catch(()=>{r({errorMessage:L("alerts.errorAddingToLibrary")})})})(U,u.libraryItems)},[n,o,r,u.libraryItems]),f=D.useMemo(()=>u.libraryItems,[u]);if(u.status==="loading"&&!u.isInitialized)return p(mD,{children:p("div",{className:"layer-ui__library-message",children:z("div",{children:[p(Ic,{size:"2em"}),p("span",{children:L("labels.libraryLoadingMessage")})]})})});const g=u.libraryItems.length>0||t.length>0;return z(mD,{children:[p(Z7e,{isLoading:u.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:s,libraryReturnUrl:i,theme:a,onSelectItems:c,selectedItems:l}),g&&p(pj,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:s,libraryReturnUrl:i,theme:a})]})}),n4=(e,t)=>({elements:e,pending:ot(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),Q7e=(e,t)=>{const n=tv(),[r,i]=D.useState(()=>n4(n,e.selectedElementIds)),o=D.useRef(new Map);return D.useEffect(()=>{for(const s of r.pending)o.current.set(s.id,s.version)},[r.pending]),D.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&i(s=>{var l;if(!ai(s.selectedElementIds,e.selectedElementIds))return o.current.clear(),n4(n,e.selectedElementIds);const a=t.scene.getNonDeletedElementsMap();for(const c of Object.keys(e.selectedElementIds)){const u=(l=a.get(c))==null?void 0:l.version;if(u&&u!==o.current.get(c))return n4(n,e.selectedElementIds)}return s})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),r.pending},J7e=D.memo(()=>{const e=wa(),{onInsertElements:t}=e,n=wU(),r=Qr(),i=Ir(),[o,s]=D.useState([]),a=D.useMemo(()=>e.library,[e.library]),l=Q7e(r,e),c=D.useCallback(d=>{t(gj(d))},[t]),u=D.useCallback(()=>{i({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[i]);return p(q7e,{pendingElements:l,onInsertLibraryItems:c,onAddToLibrary:u,setAppState:i,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:r.theme,selectedItems:o,onSelectItems:s})}),mj=e=>{const{onConfirm:t,onCancel:n,children:r,confirmText:i=L("buttons.confirm"),cancelText:o=L("buttons.cancel"),className:s="",...a}=e,l=Ir(),c=i3(kx),{container:u}=bl();return z(Ko,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${s}`,children:[r,z("div",{className:"confirm-dialog-buttons",children:[p(Wg,{label:o,onClick:()=>{l({openMenu:null}),c(!1),Pr.flushSync(()=>{n()}),u==null||u.focus()}}),p(Wg,{label:i,onClick:()=>{l({openMenu:null}),c(!1),Pr.flushSync(()=>{t()}),u==null||u.focus()},actionType:"danger"})]})]})},ev=Pn(null),eEe=()=>{const[e,t]=Yn(ev),n=xo();return e&&e==="clearCanvas"?p(mj,{onConfirm:()=>{n.executeAction(Am),t(null)},onCancel:()=>t(null),title:L("clearCanvasDialog.title"),children:z("p",{className:"clear-canvas__content",children:[" ",L("alerts.clearReset")]})}):null},tEe={...o8,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(o8,"commandPalette")}},nEe=Object.freeze(Object.defineProperty({__proto__:null,toggleTheme:tEe},Symbol.toStringTag,{value:"Module"})),Uj=we({name:"copyElementLink",label:"labels.copyElementLink",icon:sU,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{const i=ot(e,t);try{if(window.location){const o=FW(i,t);return o?(await bd(r.props.generateLinkForSelection?r.props.generateLinkForSelection(o.id,o.type):OW(o.id,o.type)),{appState:{toast:{message:L("toast.elementLinkCopied"),closable:!0}},storeAction:ae.NONE}):{appState:t,elements:e,app:r,storeAction:ae.NONE}}}catch(o){console.error(o)}return{appState:t,elements:e,app:r,storeAction:ae.NONE}},predicate:(e,t)=>jy(ot(e,t))}),rEe=we({name:"linkToElement",label:"labels.linkToElement",icon:KV,perform:(e,t,n,r)=>{const i=ot(e,t);return i.length!==1||!jy(i)?{elements:e,appState:t,app:r,storeAction:ae.NONE}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:ot(e,t)[0].id}},storeAction:ae.CAPTURE}},predicate:(e,t,n,r)=>{var o;const i=ot(e,t);return((o=t.openDialog)==null?void 0:o.name)!=="elementLinkSelector"&&i.length===1&&jy(i)},trackEvent:!1}),iEe=Pn(null),$t={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},oEe=e=>{switch(e){case $t.app:return 1;case $t.export:return 2;case $t.editor:return 3;case $t.tools:return 4;case $t.elements:return 5;case $t.links:return 6;default:return 10}},Lb=({shortcut:e,className:t,children:n})=>{const r=e.replace("++","+$").split("+");return z("div",{className:Re("shortcut",t),children:[r.map((i,o)=>p("div",{className:"shortcut-wrapper",children:p("div",{className:"shortcut-key",children:i==="$"?"+":i})},i)),p("div",{className:"shortcut-desc",children:n})]})},bj=e=>!e.altKey&&e[j.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===j.P||e.key===j.SLASH),UD=Object.assign(e=>{var r;const t=Qr(),n=Ir();return D.useEffect(()=>{const i=o=>{bj(o)&&(o.preventDefault(),o.stopPropagation(),n(s=>{var l;const a=((l=s.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&Dt("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener(ge.KEYDOWN,i,{capture:!0}),()=>window.removeEventListener(ge.KEYDOWN,i,{capture:!0})},[n]),((r=t.openDialog)==null?void 0:r.name)!=="commandPalette"?null:p(sEe,{...e})},{defaultItems:nEe});function sEe({customCommandPaletteItems:e}){const t=wa(),n=Qr(),r=Ir(),i=wU(),o=xo(),[s,a]=Yn(iEe),[l,c]=D.useState(null),u=D.useRef(null),d=X3({uiAppState:n,customCommandPaletteItems:e,appProps:i});D.useEffect(()=>{const{uiAppState:M,customCommandPaletteItems:S,appProps:x}=d,C=N=>{let J="";return N.label&&(typeof N.label=="function"?J=L(N.label(t.scene.getNonDeletedElements(),M,t)):J=L(N.label)),J},R=N=>typeof N.icon=="function"?N.icon(M,t.scene.getNonDeletedElements()):N.icon;let O=[];const F=(N,J,K)=>{const ne={label:C(N),icon:R(N),category:J,shortcut:Ai(N.name),keywords:N.keywords,predicate:N.predicate,viewMode:N.viewMode,perform:()=>{o.executeAction(N,"commandPalette")}};return K?K(ne,N):ne};if(M&&t.scene&&o){const N=[o.actions.group,o.actions.ungroup,o.actions.cut,o.actions.copy,o.actions.deleteSelectedElements,o.actions.wrapSelectionInFrame,o.actions.copyStyles,o.actions.pasteStyles,o.actions.bringToFront,o.actions.bringForward,o.actions.sendBackward,o.actions.sendToBack,o.actions.alignTop,o.actions.alignBottom,o.actions.alignLeft,o.actions.alignRight,o.actions.alignVerticallyCentered,o.actions.alignHorizontallyCentered,o.actions.duplicateSelection,o.actions.flipHorizontal,o.actions.flipVertical,o.actions.zoomToFitSelection,o.actions.zoomToFitSelectionInViewport,o.actions.increaseFontSize,o.actions.decreaseFontSize,o.actions.toggleLinearEditor,o.actions.cropEditor,YX,Uj,rEe].map(Z=>F(Z,$t.elements,(te,pe)=>({...te,predicate:pe.predicate?pe.predicate:(Ie,Se,lt,at)=>ot(Ie,Se).length>0}))),J=[o.actions.toggleHandTool,o.actions.setFrameAsActiveTool].map(Z=>F(Z,$t.tools)),K=[o.actions.undo,o.actions.redo,o.actions.zoomIn,o.actions.zoomOut,o.actions.resetZoom,o.actions.zoomToFit,o.actions.zenMode,o.actions.viewMode,o.actions.gridMode,o.actions.objectsSnapMode,o.actions.toggleShortcuts,o.actions.selectAll,o.actions.toggleElementLock,o.actions.unlockAllElements,o.actions.stats].map(Z=>F(Z,$t.editor)),ne=[o.actions.saveToActiveFile,o.actions.saveFileToDisk,o.actions.copyAsPng,o.actions.copyAsSvg].map(Z=>F(Z,$t.export));O=[...N,...K,{label:C(Am),icon:R(Am),shortcut:Ai(Am.name),category:$t.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{ia.set(ev,"clearCanvas")}},{label:L("buttons.exportImage"),category:$t.export,icon:MV,shortcut:Ai("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{r({openDialog:{name:"imageExport"}})}},...ne];const ee=[{label:L("toolBar.library"),category:$t.app,icon:aT,viewMode:!1,perform:()=>{M.openSidebar?r({openSidebar:null}):r({openSidebar:{name:ws.name,tab:ws.defaultTab}})}},{label:L("search.title"),category:$t.app,icon:Wf,viewMode:!0,perform:()=>{o.executeAction(yj)}},{label:L("labels.changeStroke"),keywords:["color","outline"],category:$t.elements,icon:mE,viewMode:!1,predicate:(Z,te)=>{const pe=ot(Z,te);return pe.length>0&&sj(te,pe)},perform:()=>{r(Z=>({openMenu:Z.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:L("labels.changeBackground"),keywords:["color","fill"],icon:mE,category:$t.elements,viewMode:!1,predicate:(Z,te)=>{const pe=ot(Z,te);return pe.length>0&&aj(te,pe)},perform:()=>{r(Z=>({openMenu:Z.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:L("labels.canvasBackground"),keywords:["color"],icon:mE,category:$t.editor,viewMode:!1,perform:()=>{r(Z=>({openMenu:Z.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...wT.reduce((Z,te)=>{var tn;const{value:pe,icon:Ie,key:Se,numericKey:lt}=te;if(((tn=x.UIOptions.tools)==null?void 0:tn[pe])===!1)return Z;const gt=Se&&mm(typeof Se=="string"?Se:Se[0])||lt,ht={label:L(`toolBar.${pe}`),category:$t.tools,shortcut:gt,icon:Ie,keywords:["toolbar"],viewMode:!1,perform:({event:Kt})=>{pe==="image"?t.setActiveTool({type:pe,insertOnCanvasDirectly:Kt.type===ge.KEYDOWN}):t.setActiveTool({type:pe})}};return Z.push(ht),Z},[]),...J,{label:L("toolBar.lock"),category:$t.tools,icon:M.activeTool.locked?lT:f3,shortcut:j.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${L("labels.textToDiagram")}...`,category:$t.tools,icon:ffe,viewMode:!1,predicate:x.aiEnabled,perform:()=>{r(Z=>({...Z,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${L("toolBar.mermaidToExcalidraw")}...`,category:$t.tools,icon:$V,viewMode:!1,predicate:x.aiEnabled,perform:()=>{r(Z=>({...Z,openDialog:{name:"ttd",tab:"mermaid"}}))}}],q=[...O,...ee,...S||[]].map(Z=>{var te;return{...Z,icon:Z.icon||HV,order:Z.order??oEe(Z.category),haystack:`${iD(Z.label.toLocaleLowerCase())} ${((te=Z.keywords)==null?void 0:te.join(" "))||""}`}});c(q),a(q.find(Z=>Z.label===(s==null?void 0:s.label))??null)}},[d,t,o,c,s==null?void 0:s.label,a,r]);const[f,g]=D.useState(""),[U,b]=D.useState(null),[v,_]=D.useState({}),E=M=>{r({openDialog:null},M),g("")},w=(M,S)=>{var x;((x=n.openDialog)==null?void 0:x.name)==="commandPalette"&&(S.stopPropagation(),S.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),E(()=>{M.perform({actionManager:o,event:S}),a(M),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},T=dD(M=>M.viewMode===!1&&n.viewModeEnabled?!1:typeof M.predicate=="function"?M.predicate(t.scene.getNonDeletedElements(),n,i,t):M.predicate===void 0||M.predicate),A=dD(M=>{var R;const S=rf(M.target)||bj(M)||M.key===j.ESCAPE;if(S&&M.key!==j.ARROW_UP&&M.key!==j.ARROW_DOWN&&M.key!==j.ENTER)return;const x=Object.values(v).flat(),C=s&&!f&&T(s);if(M.key===j.ARROW_UP){M.preventDefault();const O=x.findIndex(J=>J.label===(U==null?void 0:U.label));if(C){if(O===0){b(s);return}if(U===s){const J=x[x.length-1];J&&b(J);return}}let F;O===-1?F=x.length-1:F=O===0?x.length-1:(O-1)%x.length;const N=x[F];N&&b(N);return}if(M.key===j.ARROW_DOWN){M.preventDefault();const O=x.findIndex(J=>J.label===(U==null?void 0:U.label));if(C){if(!U||O===x.length-1){b(s);return}if(U===s){const J=x[0];J&&b(J);return}}const F=(O+1)%x.length,N=x[F];N&&b(N);return}if(M.key===j.ENTER&&U&&setTimeout(()=>{w(U,M)}),!S){if(M.stopPropagation(),/^[a-zA-Z0-9]$/.test(M.key)){(R=u==null?void 0:u.current)==null||R.focus();return}M.preventDefault()}});return D.useEffect(()=>(window.addEventListener(ge.KEYDOWN,A,{capture:!0}),()=>window.removeEventListener(ge.KEYDOWN,A,{capture:!0})),[A]),D.useEffect(()=>{if(!l)return;const M=R=>{const O={};for(const F of R)O[F.category]?O[F.category].push(F):O[F.category]=[F];return O};let S=l.filter(T).sort((R,O)=>R.order-O.order);const x=!f&&s&&T(s);if(!f){_(M(x?S.filter(R=>R.label!==(s==null?void 0:s.label)):S)),b(x?s:S[0]||null);return}const C=iD(f.toLocaleLowerCase().replace(/[<>_| -]/g,""));S=kve.filter(C,S,{extract:R=>R.haystack}).sort((R,O)=>O.score-R.score).map(R=>R.original),_(M(S)),b(S[0]??null)},[f,l,T,s]),z(Ko,{onCloseRequest:()=>E(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[p(Vg,{value:f,placeholder:L("commandPalette.search.placeholder"),onChange:M=>{g(M)},selectOnRender:!0,ref:u}),!t.device.viewport.isMobile&&z("div",{className:"shortcuts-wrapper",children:[p(Lb,{shortcut:"↑↓",children:L("commandPalette.shortcuts.select")}),p(Lb,{shortcut:"↵",children:L("commandPalette.shortcuts.confirm")}),p(Lb,{shortcut:de("Esc"),children:L("commandPalette.shortcuts.close")})]}),z("div",{className:"commands",children:[s&&!f&&z("div",{className:"command-category",children:[z("div",{className:"command-category-title",children:[L("commandPalette.recents"),p("div",{className:"icon",style:{marginLeft:"6px"},children:hfe})]}),p(bD,{command:s,isSelected:s.label===(U==null?void 0:U.label),onClick:M=>w(s,M),disabled:!T(s),onMouseMove:()=>b(s),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(v).length>0?Object.keys(v).map((M,S)=>z("div",{className:"command-category",children:[p("div",{className:"command-category-title",children:M}),v[M].map(x=>p(bD,{command:x,isSelected:x.label===(U==null?void 0:U.label),onClick:C=>w(x,C),onMouseMove:()=>b(x),showShortcut:!t.device.viewport.isMobile,appState:n},x.label))]},M)):l?z("div",{className:"no-match",children:[p("div",{className:"icon",children:Wf})," ",L("commandPalette.search.noMatch")]}):null]})]})}const bD=({command:e,isSelected:t,disabled:n,onMouseMove:r,onClick:i,showShortcut:o,appState:s})=>{const a=()=>{};return z("div",{className:Re("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var c;t&&!n&&((c=l==null?void 0:l.scrollIntoView)==null||c.call(l,{block:"nearest"}))},onClick:n?a:i,onMouseMove:n?a:r,title:n?L("commandPalette.itemNotAvailable"):"",children:[z("div",{className:"name",children:[e.icon&&p(K3,{icon:typeof e.icon=="function"?e.icon(s):e.icon}),e.label]}),o&&e.shortcut&&p(Lb,{shortcut:e.shortcut})]})},aEe=we({name:"toggleLinearEditor",category:$t.elements,label:(e,t,n)=>{const r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0];return(r==null?void 0:r.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&i.length===1&&et(i[0])&&!De(i[0]))},perform(e,t,n,r){var s;const i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],o=((s=t.editingLinearElement)==null?void 0:s.elementId)===i.id?null:new Ce(i);return{appState:{...t,editingLinearElement:o},storeAction:ae.CAPTURE}},PanelComponent:({appState:e,updateData:t,app:n})=>{const r=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],i=L(r.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return p(vt,{type:"button",icon:xfe,title:i,"aria-label":i,onClick:()=>t(null)})}}),yj=we({name:"searchMenu",icon:Wf,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,r){var i,o;if(((i=t.openSidebar)==null?void 0:i.name)===ws.name&&t.openSidebar.tab===Tf){const s=(o=r.excalidrawContainerValue.container)==null?void 0:o.querySelector(`.${Ig.SEARCH_MENU_INPUT_WRAPPER} input`);return s!=null&&s.matches(":focus")?{appState:{...t,openSidebar:null},storeAction:ae.NONE}:(s==null||s.focus(),s==null||s.select(),!1)}return{appState:{...t,openSidebar:{name:ws.name,tab:Tf},openDialog:null},storeAction:ae.NONE}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[j.CTRL_OR_CMD]&&e.key===j.F}),lEe=we({name:"cropEditor",label:"helpDialog.cropStart",icon:hP,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,r){const i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:i.id},storeAction:ae.CAPTURE}},predicate:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t);return!!(!t.croppingElementId&&i.length===1&&kt(i[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{const r=L("helpDialog.cropStart");return p(vt,{type:"button",icon:hP,title:r,"aria-label":r,onClick:()=>t(null)})}});class a8{constructor(t=!0,n=!0){this.isUndoStackEmpty=t,this.isRedoStackEmpty=n}}class yf{constructor(){H(this,"onHistoryChangedEmitter",new Wa);H(this,"undoStack",[]);H(this,"redoStack",[])}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t,n){const r=Mm.create(n,t);r.isEmpty()||(this.undoStack.push(r.inverse()),r.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new a8(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,n,r){return this.perform(t,n,r,()=>yf.pop(this.undoStack),i=>yf.push(this.redoStack,i,t))}redo(t,n,r){return this.perform(t,n,r,()=>yf.pop(this.redoStack),i=>yf.push(this.undoStack,i,t))}perform(t,n,r,i,o){try{let s=i();if(s===null)return;let a=t,l=n,c=!1;for(;s;){try{[a,l,c]=s.applyTo(a,l,r)}finally{o(s)}if(c)break;s=i()}return[a,l]}finally{this.onHistoryChangedEmitter.trigger(new a8(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;const n=t.pop();return n!==void 0?n:null}static push(t,n,r){const i=n.inverse().applyLatestChanges(r);return t.push(i)}}class Mm{constructor(t,n){this.appStateChange=t,this.elementsChange=n}static create(t,n){return new Mm(t,n)}inverse(){return new Mm(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(t,n,r){const[i,o]=this.elementsChange.applyTo(t,r.elements),[s,a]=this.appStateChange.applyTo(n,i);return[i,s,o||a]}applyLatestChanges(t){const n=this.elementsChange.applyLatestChanges(t);return Mm.create(this.appStateChange,n)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}}const vj=(e,t)=>{const[n,r]=D.useState(t);return D.useEffect(()=>{const i=e.on(o=>{r(o)});return()=>{i()}},[e]),n},Ej=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){const r=n();if(!r)return{storeAction:ae.NONE};const[i,o]=r,s=Array.from(i.values());return{appState:o,elements:s,storeAction:ae.UPDATE}}return{storeAction:ae.NONE}},cEe=(e,t)=>({name:"undo",label:"buttons.undo",icon:QR,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,o)=>Ej(o,r,()=>e.undo(He(n),r,t.snapshot)),keyTest:n=>n[j.CTRL_OR_CMD]&&sw(n,j.Z)&&!n.shiftKey,PanelComponent:({updateData:n,data:r})=>{const{isUndoStackEmpty:i}=vj(e.onHistoryChangedEmitter,new a8(e.isUndoStackEmpty,e.isRedoStackEmpty));return p(vt,{type:"button",icon:QR,"aria-label":L("buttons.undo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-undo"})}}),uEe=(e,t)=>({name:"redo",label:"buttons.redo",icon:JR,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,o)=>Ej(o,r,()=>e.redo(He(n),r,t.snapshot)),keyTest:n=>n[j.CTRL_OR_CMD]&&n.shiftKey&&sw(n,j.Z)||k$&&n.ctrlKey&&!n.shiftKey&&sw(n,j.Y),PanelComponent:({updateData:n,data:r})=>{const{isRedoStackEmpty:i}=vj(e.onHistoryChangedEmitter,new a8(e.isUndoStackEmpty,e.isRedoStackEmpty));return p(vt,{type:"button",icon:JR,"aria-label":L("buttons.redo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-redo"})}}),r4=(e,t,n,r,i,o)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,r,o))&&Dt(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${i.device.editor.isMobile?"mobile":"desktop"})`)}catch(s){console.error("error while logging action:",s)}};class dEe{constructor(t,n,r,i){H(this,"actions",{});H(this,"updater");H(this,"getAppState");H(this,"getElementsIncludingDeleted");H(this,"app");H(this,"renderAction",(t,n)=>{const r=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in r)||r[t])){const i=this.actions[t],o=i.PanelComponent;o.displayName="PanelComponent";const s=this.getElementsIncludingDeleted(),a=this.getAppState(),l=c=>{r4(i,"ui",a,s,this.app,c),this.updater(i.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return p(o,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:n})}return null});H(this,"isActionEnabled",t=>{const n=this.getElementsIncludingDeleted(),r=this.getAppState();return!t.predicate||t.predicate(n,r,this.app.props,this.app)});this.updater=o=>{if(rU(o))o.then(s=>t(s));else return t(o)},this.getAppState=n,this.getElementsIncludingDeleted=r,this.app=i}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(n=>this.registerAction(n))}handleKeyDown(t){const n=this.app.props.UIOptions.canvasActions,r=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in n?n[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(r.length!==1)return r.length>1&&console.warn("Canceling as multiple actions match this shortcut",r),!1;const i=r[0];if(this.getAppState().viewModeEnabled&&i.viewMode!==!0)return!1;const o=this.getElementsIncludingDeleted(),s=this.getAppState(),a=null;return r4(i,"keyboard",s,o,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(r[0].perform(o,s,a,this.app)),!0}executeAction(t,n="api",r=null){const i=this.getElementsIncludingDeleted(),o=this.getAppState();r4(t,n,o,i,this.app,r),this.updater(t.perform(i,o,r,this.app))}}const yD=e=>{const t=Array.from(e.values());return{x:ED(t,n=>n.x)/t.length,y:ED(t,n=>n.y)/t.length}},vD=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),ED=(e,t)=>e.reduce((n,r)=>n+t(r),0),fEe=({children:e,left:t,top:n,onCloseRequest:r,fitInViewport:i=!1,offsetLeft:o=0,offsetTop:s=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{const c=D.useRef(null);D.useEffect(()=>{const d=c.current;if(!d)return;d.contains(document.activeElement)||d.focus();const f=g=>{var U,b,v;if(g.key===j.TAB){const _=G_(d),{activeElement:E}=document,w=_.findIndex(T=>T===E);E===d?(g.shiftKey?(U=_[_.length-1])==null||U.focus():_[0].focus(),g.preventDefault(),g.stopImmediatePropagation()):w===0&&g.shiftKey?((b=_[_.length-1])==null||b.focus(),g.preventDefault(),g.stopImmediatePropagation()):w===_.length-1&&!g.shiftKey&&((v=_[0])==null||v.focus(),g.preventDefault(),g.stopImmediatePropagation())}};return d.addEventListener("keydown",f),()=>d.removeEventListener("keydown",f)},[]);const u=D.useRef(null);return D.useLayoutEffect(()=>{var d,f;if(i&&c.current&&n!=null&&t!=null){const g=c.current,{width:U,height:b}=g.getBoundingClientRect();if(((d=u.current)==null?void 0:d.top)===n&&((f=u.current)==null?void 0:f.left)===t)return;u.current={top:n,left:t},U>=a?(g.style.width=`${a}px`,g.style.left="0px",g.style.overflowX="scroll"):t+U-o>a?g.style.left=`${a-U-10}px`:g.style.left=`${t}px`,b>=l?(g.style.height=`${l-20}px`,g.style.top="10px",g.style.overflowY="scroll"):n+b-s>l?g.style.top=`${l-b}px`:g.style.top=`${n}px`}},[n,t,i,a,l,o,s]),D.useEffect(()=>{if(r){const d=f=>{var g;(g=c.current)!=null&&g.contains(f.target)||Pr.unstable_batchedUpdates(()=>r(f))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[r]),p("div",{className:"popover",ref:c,tabIndex:-1,children:e})},Ar="separator",hEe=Ee.memo(({actionManager:e,items:t,top:n,left:r,onClose:i})=>{const o=IU(),s=tv(),a=t.reduce((l,c)=>(c&&(c===Ar||!c.predicate||c.predicate(s,o,e.app.props,e.app))&&l.push(c),l),[]);return p(fEe,{onCloseRequest:()=>{i()},top:n,left:r,fitInViewport:!0,offsetLeft:o.offsetLeft,offsetTop:o.offsetTop,viewportWidth:o.width,viewportHeight:o.height,children:p("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,c)=>{var f;if(l===Ar)return!a[c-1]||a[c-1]===Ar?null:p("hr",{className:"context-menu-item-separator"},c);const u=l.name;let d="";return l.label&&(typeof l.label=="function"?d=L(l.label(s,o,e.app)):d=L(l.label)),p("li",{"data-testid":u,onClick:()=>{i(()=>{e.executeAction(l,"contextMenu")})},children:z("button",{type:"button",className:Re("context-menu-item",{dangerous:u==="deleteSelectedElements",checkmark:(f=l.checked)==null?void 0:f.call(l,o)}),children:[p("div",{className:"context-menu-item__label",children:d}),p("kbd",{className:"context-menu-item__shortcut",children:u?Ai(u):""})]})},c)})})})}),_j=function({onChange:e,value:t,choices:n,name:r}){return p("div",{className:"RadioGroup",children:n.map(i=>z("div",{className:Re("RadioGroup__choice",{active:i.value===t}),title:i.ariaLabel,children:[p("input",{name:r,type:"radio",checked:i.value===t,onChange:()=>e(i.value),"aria-label":i.ariaLabel}),i.label]},String(i.value)))})},P5=({title:e,name:t,checked:n,onChange:r,disabled:i=!1})=>p("div",{className:Re("Switch",{toggled:n,disabled:i}),children:p("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:i,onChange:()=>r(!n),onKeyDown:o=>{o.key===" "&&r(!n)}})}),ga=D.forwardRef(({children:e,icon:t,onClick:n,label:r,variant:i="filled",color:o="primary",size:s="medium",fullWidth:a,className:l,status:c},u)=>{const[d,f]=D.useState(!1),g=async b=>{const v=n==null?void 0:n(b);if(rU(v)){const _=window.setTimeout(()=>{f(!0)},50);try{await v}catch(E){if(E instanceof kg)console.warn(E);else throw E}finally{clearTimeout(_),f(!1)}}},U=d?"loading":c;return o=U==="success"?"success":o,p("button",{className:Re("ExcButton",`ExcButton--color-${o}`,`ExcButton--variant-${i}`,`ExcButton--size-${s}`,`ExcButton--status-${U}`,{"ExcButton--fullWidth":a},l),onClick:g,type:"button","aria-label":r,ref:u,disabled:U==="loading"||U==="success",children:z("div",{className:"ExcButton__contents",children:[U==="loading"?p(Ic,{className:"ExcButton__statusIcon"}):U==="success"&&p("div",{className:"ExcButton__statusIcon",children:ofe}),t&&p("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),i!=="icon"&&(e??r)]})})}),gEe=2e3,Rx=()=>{const[e,t]=D.useState(null),n=D.useRef(0),r=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},gEe)},i=D.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:i,onCopy:r}},pEe="filter"in document.createElement("canvas").getContext("2d"),mEe=()=>z("div",{children:[p("h3",{children:L("canvasError.cannotShowPreview")}),p("p",{children:p("span",{children:L("canvasError.canvasTooBig")})}),z("em",{children:["(",L("canvasError.canvasTooBigTip"),")"]})]}),UEe=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:r,onExportImage:i,name:o})=>{const s=_r(t,e),[a,l]=D.useState(o),[c,u]=D.useState(s),[d,f]=D.useState(e.exportBackground),[g,U]=D.useState(e.exportWithDarkMode),[b,v]=D.useState(e.exportEmbedScene),[_,E]=D.useState(e.exportScale),w=D.useRef(null),[T,A]=D.useState(null),{onCopy:M,copyStatus:S,resetCopyStatus:x}=Rx();D.useEffect(()=>{x()},[a,d,g,_,b,x]);const{exportedElements:C,exportingFrame:R}=Z3(t,e,c);return D.useEffect(()=>{const O=w.current;if(!O)return;const F=O.offsetWidth,N=O.offsetHeight;F&&A3({elements:C,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:g,exportScale:_,exportEmbedScene:b},files:n,exportPadding:s0,maxWidthOrHeight:Math.max(F,N),exportingFrame:R}).then(J=>(A(null),E2(J).then(()=>{O.replaceChildren(J)}).catch(K=>{throw K.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(L("canvasError.canvasTooBig")):K}))).catch(J=>{console.error(J),A(J)})},[e,n,C,R,a,d,g,_,b]),z("div",{className:"ImageExportModal",children:[p("h3",{children:L("imageExportDialog.header")}),z("div",{className:"ImageExportModal__preview",children:[p("div",{className:"ImageExportModal__preview__canvas",ref:w,children:T&&p(mEe,{})}),p("div",{className:"ImageExportModal__preview__filename",children:!vh&&p("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:O=>{l(O.target.value),r.executeAction(Y3e,"ui",O.target.value)}})})]}),z("div",{className:"ImageExportModal__settings",children:[p("h3",{children:L("imageExportDialog.header")}),s&&p(kp,{label:L("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:p(P5,{name:"exportOnlySelected",checked:c,onChange:O=>{u(O)}})}),p(kp,{label:L("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:p(P5,{name:"exportBackgroundSwitch",checked:d,onChange:O=>{f(O),r.executeAction(q3e,"ui",O)}})}),pEe&&p(kp,{label:L("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:p(P5,{name:"exportDarkModeSwitch",checked:g,onChange:O=>{U(O),r.executeAction(Q3e,"ui",O)}})}),p(kp,{label:L("imageExportDialog.label.embedScene"),tooltip:L("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:p(P5,{name:"exportEmbedSwitch",checked:b,onChange:O=>{v(O),r.executeAction($X,"ui",O)}})}),p(kp,{label:L("imageExportDialog.label.scale"),name:"exportScale",children:p(_j,{name:"exportScale",value:_,onChange:O=>{E(O),r.executeAction(Z3e,"ui",O)},choices:XI.map(O=>({value:O,label:`${O}×`}))})}),z("div",{className:"ImageExportModal__settings__buttons",children:[p(ga,{className:"ImageExportModal__settings__buttons__button",label:L("imageExportDialog.title.exportToPng"),onClick:()=>i(iE.png,C,{exportingFrame:R}),icon:fP,children:L("imageExportDialog.button.exportToPng")}),p(ga,{className:"ImageExportModal__settings__buttons__button",label:L("imageExportDialog.title.exportToSvg"),onClick:()=>i(iE.svg,C,{exportingFrame:R}),icon:fP,children:L("imageExportDialog.button.exportToSvg")}),(jT||i2)&&p(ga,{className:"ImageExportModal__settings__buttons__button",label:L("imageExportDialog.title.copyPngToClipboard"),status:S,onClick:async()=>{await i(iE.clipboard,C,{exportingFrame:R}),M()},icon:sU,children:L("imageExportDialog.button.copyPngToClipboard")})]})]})]})},kp=({label:e,children:t,tooltip:n,name:r})=>z("div",{className:"ImageExportModal__settings__setting",title:e,children:[z("label",{htmlFor:r,className:"ImageExportModal__settings__setting__label",children:[e,n&&p(xc,{label:n,long:!0,children:nfe})]}),p("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),bEe=({elements:e,appState:t,files:n,actionManager:r,onExportImage:i,onCloseRequest:o,name:s})=>{const[{appStateSnapshot:a,elementsSnapshot:l}]=D.useState(()=>({appStateSnapshot:ic(t),elementsSnapshot:ic(e)}));return p(Ko,{onCloseRequest:o,size:"wide",title:!1,children:p(UEe,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:r,onExportImage:i,name:s})})},wj=({children:e,side:t,className:n})=>p("div",{className:Re("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),hg=100,vf=100,_D=e=>{switch(e){case j.ARROW_UP:return"up";case j.ARROW_DOWN:return"down";case j.ARROW_RIGHT:return"right";case j.ARROW_LEFT:return"left";default:return"right"}},Ij=(e,t,n,r)=>{const i=[...n.values()].reduce((o,s)=>{var l;let a;if(De(s)&&(a=s[e==="predecessors"?"startBinding":"endBinding"])&&((l=s[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){const c=n.get(a.elementId);if(!c)return o;Yi(Ua(c),"not an ExcalidrawBindableElement");const u=e==="predecessors"?s.points[s.points.length-1]:[0,0],d=IT(t,ja(t),[u[0]+s.x,u[1]+s.y]);o.push({relative:c,heading:d})}return o},[]);switch(r){case"up":return i.filter(o=>Rn(o.heading,ho)).map(o=>o.relative);case"down":return i.filter(o=>Rn(o.heading,jr)).map(o=>o.relative);case"right":return i.filter(o=>Rn(o.heading,Vn)).map(o=>o.relative);case"left":return i.filter(o=>Rn(o.heading,ji)).map(o=>o.relative)}},Yw=(e,t,n)=>Ij("successors",e,t,n),Zw=(e,t,n)=>Ij("predecessors",e,t,n),yEe=(e,t,n)=>{const r=vf+e.width;if(n==="up"||n==="down"){const a=hg+e.height,l=e.x,c=e.x+e.width;if(t.every(u=>u.x+u.width<l||u.x>c))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){const a=e.y,l=e.y+e.height;if(t.every(c=>c.y+c.height<a||c.y>l))return{x:(vf+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){const a=hg+e.height,l=(t.length===0,a),c=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="up"?{x:c,y:l*-1}:{x:c,y:l}}const i=hg+e.height,o=(t.length===0,vf+e.width),s=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="left"?{x:o*-1,y:s}:{x:o,y:s}},vEe=(e,t,n,r)=>{const i=Yw(e,t,r),o=Zw(e,t,r),s=yEe(e,[...i,...o],r),a=Uc({type:e.type,x:e.x+s.x,y:e.y+s.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Yi(u3(a),"not an ExcalidrawFlowchartNodeElement");const l=Tj(e,a,t,r,n);return{nextNode:a,bindingArrow:l}},EEe=(e,t,n,r,i)=>{const o=[];for(let s=0;s<i;s++){let a,l;if(r==="left"||r==="right"){const d=hg*(i-1)+i*e.height,f=e.y+e.height/2-d/2;let g=vf+e.width;r==="left"&&(g*=-1),a=e.x+g;const U=(hg+e.height)*s;l=f+U}else{const d=vf*(i-1)+i*e.width,f=e.x+e.width/2-d/2;let g=hg+e.height;r==="up"&&(g*=-1),l=e.y+g;const U=(vf+e.width)*s;a=f+U}const c=Uc({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Yi(u3(c),"not an ExcalidrawFlowchartNodeElement");const u=Tj(e,c,t,r,n);o.push(c),o.push(u)}return o},Tj=(e,t,n,r,i)=>{let o,s;switch(r){case"up":{o=e.x+e.width/2,s=e.y-6;break}case"down":{o=e.x+e.width/2,s=e.y+e.height+6;break}case"right":{o=e.x+e.width+6,s=e.y+e.height/2;break}case"left":{o=e.x-6,s=e.y+e.height/2;break}}let l,c;switch(r){case"up":{l=t.x+t.width/2-o,c=t.y+t.height-s+6;break}case"down":{l=t.x+t.width/2-o,c=t.y-s-6;break}case"right":{l=t.x-o-6,c=t.y-s+t.height/2;break}case"left":{l=t.x+t.width-o+6,c=t.y-s+t.height/2;break}}const u=yT({type:"arrow",x:o,y:s,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[B(0,0),B(l,c)],elbowed:!0});ll(u,e,"start",n),ll(u,t,"end",n);const d=new Map;d.set(e.id,e),d.set(t.id,t),d.set(u.id,u),Ce.movePoints(u,[{index:1,point:u.points[1]}]);const f=xG(u,Ho(new Map([...n.entries(),[e.id,e],[t.id,t],[u.id,u]])),{points:u.points});return{...u,...f}};class _Ee{constructor(){H(this,"isExploring",!1);H(this,"sameLevelNodes",[]);H(this,"sameLevelIndex",0);H(this,"direction",null);H(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(t,n,r){if(!Ua(t))return null;if(r!==this.direction&&this.clear(),this.visitedNodes.has(t.id)||this.visitedNodes.add(t.id),this.isExploring&&r===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;const i=[...Yw(t,n,r),...Zw(t,n,r)];if(i.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=i,this.direction=r,this.visitedNodes.add(i[0].id),i[0].id;if(r===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(t.id);const s=["up","right","down","left"].filter(a=>a!==r).map(a=>[...Yw(t,n,a),...Zw(t,n,a)]).flat().filter(a=>!this.visitedNodes.has(a.id));for(const a of s)if(!this.visitedNodes.has(a.id))return this.visitedNodes.add(a.id),this.isExploring=!0,this.direction=r,a.id}return null}}class wEe{constructor(){H(this,"isCreatingChart",!1);H(this,"numberOfNodes",0);H(this,"direction","right");H(this,"pendingNodes",null)}createNodes(t,n,r,i){if(i!==this.direction){const{nextNode:o,bindingArrow:s}=vEe(t,n,r,i);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=i,this.pendingNodes=[o,s]}else{this.numberOfNodes+=1;const o=EEe(t,n,r,i,this.numberOfNodes);this.isCreatingChart=!0,this.direction=i,this.pendingNodes=o}if(t.frameId){const o=n.get(t.frameId);Yi(o&&oV(o),"not an ExcalidrawFrameElement"),o&&this.pendingNodes.every(s=>gU([s],o,n)||ed(s,o,n))&&(this.pendingNodes=this.pendingNodes.map(s=>fe(s,{frameId:t.frameId},!1)))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}}const IEe=(e,t)=>{var n,r;for(const[,i]of t)if(i.type==="arrow"&&(((n=i.startBinding)==null?void 0:n.elementId)===e.id||((r=i.endBinding)==null?void 0:r.elementId)===e.id))return!0;return!1},TEe=({appState:e,isMobile:t,device:n,app:r})=>{var u,d;const{activeTool:i,isResizing:o,isRotating:s,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((u=e.openSidebar)==null?void 0:u.name)===ws.name&&e.openSidebar.tab===Tf&&((d=e.searchMatches)!=null&&d.length))return L("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(Ha(e))return L("hints.eraserRevert");if(i.type==="arrow"||i.type==="line")return l?L("hints.linearElementMulti"):i.type==="arrow"?L("hints.arrowTool",{arrowShortcut:de("A")}):L("hints.linearElement");if(i.type==="freedraw")return L("hints.freeDraw");if(i.type==="text")return L("hints.text");if(i.type==="embeddable")return L("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return L("hints.placeImage");const c=r.scene.getSelectedElements(e);if(o&&a==="mouse"&&c.length===1){const f=c[0];return et(f)&&f.points.length===2?L("hints.lockAngle"):kt(f)?L("hints.resizeImage"):L("hints.resize")}if(s&&a==="mouse")return L("hints.rotate");if(c.length===1&&Ae(c[0]))return L("hints.text_selected");if(e.editingTextElement)return L("hints.text_editing");if(e.croppingElementId)return L("hints.leaveCropEditor");if(c.length===1&&kt(c[0]))return L("hints.enterCropEditor");if(i.type==="selection"){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!e.editingLinearElement)return L("hints.deepBoxSelect");if(w2(r)&&e.selectedElementsAreBeingDragged)return L("hints.disableSnapping");if(!c.length&&!t)return L("hints.canvasPanning");if(c.length===1){if(et(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?L("hints.lineEditor_pointSelected"):L("hints.lineEditor_nothingSelected"):L("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&Af(c[0]))return u3(c[0])?IEe(c[0],r.scene.getNonDeletedElementsMap())?[L("hints.bindTextToElement"),L("hints.createFlowchart")]:[L("hints.bindTextToElement"),L("hints.createFlowchart")]:L("hints.bindTextToElement")}}return null},xj=({appState:e,isMobile:t,device:n,app:r})=>{const i=TEe({appState:e,isMobile:t,device:n,app:r});if(!i)return null;const o=Array.isArray(i)?i.map(s=>de(s).replace(/\. ?$/,"")).join(". "):de(i);return p("div",{className:"HintViewer",children:p("span",{children:o})})},Sj=({delay:e,theme:t})=>{const[n,r]=D.useState(!!e);return D.useEffect(()=>{if(!e)return;const i=setTimeout(()=>{r(!1)},e);return()=>clearTimeout(i)},[e]),n?null:z("div",{className:Re("LoadingMessage",{"LoadingMessage--dark":t===Ge.DARK}),children:[p("div",{children:p(Ic,{})}),p("div",{className:"LoadingMessage-text",children:L("labels.loadingScene")})]})},xEe="medium",wD={CHECKED:lT,UNCHECKED:f3},Cj=e=>z("label",{className:Re("ToolIcon ToolIcon__lock",`ToolIcon_size_${xEe}`,{"is-mobile":e.isMobile}),title:`${e.title} — Q`,children:[p("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),p("div",{className:"ToolIcon__icon",children:e.checked?wD.CHECKED:wD.UNCHECKED})]}),R2=({heading:e,children:t,...n})=>{const{id:r}=bl(),i=p("h2",{className:"visually-hidden",id:`${r}-${e}-title`,children:L(`headings.${e}`)});return p("section",{...n,"aria-labelledby":`${r}-${e}-title`,children:typeof t=="function"?t(i):z(ke,{children:[i,t]})})},Ga=4,xu=6,SEe="rgba(0,0,0,0.3)",CEe=(e,t,n,r)=>{if(!e.length)return{horizontal:null,vertical:null};const[i,o,s,a]=jt(e),l=t/r.zoom.value,c=n/r.zoom.value,u=t-l,d=n-c,f={top:parseInt(m5("sat"))||0,bottom:parseInt(m5("sab"))||0,left:parseInt(m5("sal"))||0,right:parseInt(m5("sar"))||0},g=l2().rtl,U=-r.scrollX+u/2+f.left,b=-r.scrollY+d/2+f.top,v=U+l-f.right,_=b+c-f.bottom,E=Math.min(i,U),w=Math.min(o,b),T=Math.max(s,v),A=Math.max(a,_);return{horizontal:U===E&&v===T?null:{x:Math.max(f.left,Ga)+(U-E)/(T-E)*t,y:n-xu-Math.max(Ga,f.bottom),width:(v-U)/(T-E)*t-Math.max(Ga*2,f.left+f.right),height:xu},vertical:b===w&&_===A?null:{x:g?Math.max(f.left,Ga):t-xu-Math.max(f.right,Ga),y:(b-w)/(A-w)*n+Math.max(f.top,Ga),width:xu,height:(_-b)/(A-w)*n-Math.max(Ga*2,f.top+f.bottom)}}},ID=(e,t,n)=>{const[r,i]=[e.horizontal,e.vertical].map(s=>s!=null&&s.x<=t&&t<=s.x+s.width&&s.y<=n&&n<=s.y+s.height);return{isOverEither:r||i,isOverHorizontal:r,isOverVertical:i}},AEe="medium",Aj=e=>e.penDetected?z("label",{className:Re("ToolIcon ToolIcon__penMode",`ToolIcon_size_${AEe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[p("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),p("div",{className:"ToolIcon__icon",children:Jue})]}):null,kj=e=>p(vt,{className:Re("Shape",{fillable:!1}),type:"radio",icon:FV,name:"editor-current-shape",checked:e.checked,title:`${e.title} — H`,keyBindingLabel:e.isMobile?void 0:j.H.toLocaleUpperCase(),"aria-label":`${e.title} — H`,"aria-keyshortcuts":j.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),kEe=({appState:e,elements:t,actionManager:n,setAppState:r,onLockToggle:i,onHandToolToggle:o,onPenModeToggle:s,renderTopRightUI:a,renderCustomStats:l,renderSidebars:c,device:u,renderWelcomeScreen:d,UIOptions:f,app:g})=>{var w,T;const{WelcomeScreenCenterTunnel:U,MainMenuTunnel:b,DefaultSidebarTriggerTunnel:v}=to(),_=()=>z(wj,{side:"top",className:"App-top-bar",children:[d&&p(U.Out,{}),p(R2,{heading:"shapes",children:A=>{var M;return p(ys.Col,{gap:4,align:"center",children:z(ys.Row,{gap:1,className:"App-toolbar-container",children:[z(ha,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[A,p(ys.Row,{gap:1,children:p(cj,{appState:e,activeTool:e.activeTool,UIOptions:f,app:g})})]}),a&&a(!0,e),z("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((M=e.openDialog)==null?void 0:M.name)!=="elementLinkSelector"&&p(v.Out,{}),p(Aj,{checked:e.penMode,onChange:()=>s(null),title:L("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),p(Cj,{checked:e.activeTool.locked,onChange:i,title:L("toolBar.lock"),isMobile:!0}),p(kj,{checked:xg(e),onChange:()=>o(),title:L("toolBar.hand"),isMobile:!0})]})]})})}}),p(xj,{appState:e,isMobile:!0,device:u,app:g})]}),E=()=>{var A;return e.viewModeEnabled||((A=e.openDialog)==null?void 0:A.name)==="elementLinkSelector"?p("div",{className:"App-toolbar-content",children:p(b.Out,{})}):z("div",{className:"App-toolbar-content",children:[p(b.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),z("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return z(ke,{children:[c(),!e.viewModeEnabled&&((w=e.openDialog)==null?void 0:w.name)!=="elementLinkSelector"&&_(),p("div",{className:"App-bottom-bar",style:{marginBottom:xu+Ga*2,marginLeft:xu+Ga*2,marginRight:xu+Ga*2},children:z(ha,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((T=e.openDialog)==null?void 0:T.name)!=="elementLinkSelector"&&fx(e,t)?p(R2,{className:"App-mobile-menu",heading:"selectedShapeActions",children:p(lj,{appState:e,elementsMap:g.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:g})}):null,z("footer",{className:"App-toolbar",children:[E(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&p("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(A=>({...x2(t,A)}))},children:L("buttons.scrollBackToContent")})]})]})})]})},TD=e=>{const t=D.useRef(null),[n,r]=D.useState(null);return D.useLayoutEffect(()=>{if(!e.spreadsheet)return;const i=j6e(e.chartType,e.spreadsheet,0,0);r(i);let o;const s=t.current;return(async()=>{var a;o=await HT(i,{exportBackground:!1,viewBackgroundColor:Kr.white},null,{skipInliningFonts:!0}),(a=o.querySelector(".style-fonts"))==null||a.remove(),s.replaceChildren(),s.appendChild(o),e.selected&&s.parentNode.focus()})(),()=>{s.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),p("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:p("div",{ref:t})})},REe=({setAppState:e,appState:t,onClose:n})=>{const{onInsertElements:r}=wa(),i=Ee.useCallback(()=>{n&&n()},[n]),o=(s,a)=>{r(a),Dt("paste","chart",s),e({currentChartType:s,pasteDialog:{shown:!1,data:null}})};return p(Ko,{size:"small",onCloseRequest:i,title:L("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:z("div",{className:"container",children:[p(TD,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:o}),p(TD,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:o})]})})},PEe=()=>z("div",{className:"HelpDialog__header",children:[z("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[p("div",{className:"HelpDialog__link-icon",children:qR}),L("helpDialog.documentation")]}),z("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener noreferrer",children:[p("div",{className:"HelpDialog__link-icon",children:qR}),L("helpDialog.blog")]}),z("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[p("div",{className:"HelpDialog__link-icon",children:uT}),L("helpDialog.github")]}),z("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[p("div",{className:"HelpDialog__link-icon",children:XV}),"YouTube"]})]}),MEe=e=>z(ke,{children:[p("h3",{children:e.title}),p("div",{className:"HelpDialog__islands-container",children:e.children})]}),i4=e=>z("div",{className:`HelpDialog__island ${e.className}`,children:[p("h4",{className:"HelpDialog__island-title",children:e.caption}),p("div",{className:"HelpDialog__island-content",children:e.children})]});function*LEe(e,t){let n=!0;for(const r of e)n||(yield t),n=!1,yield r}const DEe=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),Pe=({label:e,shortcuts:t,isOr:n=!0})=>{const r=t.map(i=>(i.endsWith("++")?[...i.slice(0,-2).split("+"),"+"]:i.split("+")).map(s=>p(NEe,{children:DEe(s)},s)));return z("div",{className:"HelpDialog__shortcut",children:[p("div",{children:e}),p("div",{className:"HelpDialog__key-container",children:[...LEe(r,n?L("helpDialog.or"):null)]})]})},NEe=e=>p("kbd",{className:"HelpDialog__key",...e}),OEe=({onClose:e})=>{const t=Ee.useCallback(()=>{e&&e()},[e]);return p(ke,{children:z(Ko,{onCloseRequest:t,title:L("helpDialog.title"),className:"HelpDialog",children:[p(PEe,{}),z(MEe,{title:L("helpDialog.shortcuts"),children:[z(i4,{className:"HelpDialog__island--tools",caption:L("helpDialog.tools"),children:[p(Pe,{label:L("toolBar.hand"),shortcuts:[j.H]}),p(Pe,{label:L("toolBar.selection"),shortcuts:[j.V,j[1]]}),p(Pe,{label:L("toolBar.rectangle"),shortcuts:[j.R,j[2]]}),p(Pe,{label:L("toolBar.diamond"),shortcuts:[j.D,j[3]]}),p(Pe,{label:L("toolBar.ellipse"),shortcuts:[j.O,j[4]]}),p(Pe,{label:L("toolBar.arrow"),shortcuts:[j.A,j[5]]}),p(Pe,{label:L("toolBar.line"),shortcuts:[j.L,j[6]]}),p(Pe,{label:L("toolBar.freedraw"),shortcuts:[j.P,j[7]]}),p(Pe,{label:L("toolBar.text"),shortcuts:[j.T,j[8]]}),p(Pe,{label:L("toolBar.image"),shortcuts:[j[9]]}),p(Pe,{label:L("toolBar.eraser"),shortcuts:[j.E,j[0]]}),p(Pe,{label:L("toolBar.frame"),shortcuts:[j.F]}),p(Pe,{label:L("toolBar.laser"),shortcuts:[j.K]}),p(Pe,{label:L("labels.eyeDropper"),shortcuts:[j.I,"Shift+S","Shift+G"]}),p(Pe,{label:L("helpDialog.editLineArrowPoints"),shortcuts:[de("CtrlOrCmd+Enter")]}),p(Pe,{label:L("helpDialog.editText"),shortcuts:[de("Enter")]}),p(Pe,{label:L("helpDialog.textNewLine"),shortcuts:[de("Enter"),de("Shift+Enter")]}),p(Pe,{label:L("helpDialog.textFinish"),shortcuts:[de("Esc"),de("CtrlOrCmd+Enter")]}),p(Pe,{label:L("helpDialog.curvedArrow"),shortcuts:["A",L("helpDialog.click"),L("helpDialog.click"),L("helpDialog.click")],isOr:!1}),p(Pe,{label:L("helpDialog.curvedLine"),shortcuts:["L",L("helpDialog.click"),L("helpDialog.click"),L("helpDialog.click")],isOr:!1}),p(Pe,{label:L("helpDialog.cropStart"),shortcuts:[L("helpDialog.doubleClick"),de("Enter")],isOr:!0}),p(Pe,{label:L("helpDialog.cropFinish"),shortcuts:[de("Enter"),de("Escape")],isOr:!0}),p(Pe,{label:L("toolBar.lock"),shortcuts:[j.Q]}),p(Pe,{label:L("helpDialog.preventBinding"),shortcuts:[de("CtrlOrCmd")]}),p(Pe,{label:L("toolBar.link"),shortcuts:[de("CtrlOrCmd+K")]})]}),z(i4,{className:"HelpDialog__island--view",caption:L("helpDialog.view"),children:[p(Pe,{label:L("buttons.zoomIn"),shortcuts:[de("CtrlOrCmd++")]}),p(Pe,{label:L("buttons.zoomOut"),shortcuts:[de("CtrlOrCmd+-")]}),p(Pe,{label:L("buttons.resetZoom"),shortcuts:[de("CtrlOrCmd+0")]}),p(Pe,{label:L("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),p(Pe,{label:L("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),p(Pe,{label:L("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),p(Pe,{label:L("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),p(Pe,{label:L("buttons.zenMode"),shortcuts:[de("Alt+Z")]}),p(Pe,{label:L("buttons.objectsSnapMode"),shortcuts:[de("Alt+S")]}),p(Pe,{label:L("labels.toggleGrid"),shortcuts:[de("CtrlOrCmd+'")]}),p(Pe,{label:L("labels.viewMode"),shortcuts:[de("Alt+R")]}),p(Pe,{label:L("labels.toggleTheme"),shortcuts:[de("Alt+Shift+D")]}),p(Pe,{label:L("stats.fullTitle"),shortcuts:[de("Alt+/")]}),p(Pe,{label:L("search.title"),shortcuts:[Ai("searchMenu")]}),p(Pe,{label:L("commandPalette.title"),shortcuts:i2?[Ai("commandPalette")]:[Ai("commandPalette"),Ai("commandPalette",1)]})]}),z(i4,{className:"HelpDialog__island--editor",caption:L("helpDialog.editor"),children:[p(Pe,{label:L("helpDialog.createFlowchart"),shortcuts:[de("CtrlOrCmd+Arrow Key")],isOr:!0}),p(Pe,{label:L("helpDialog.navigateFlowchart"),shortcuts:[de("Alt+Arrow Key")],isOr:!0}),p(Pe,{label:L("labels.moveCanvas"),shortcuts:[de(`Space+${L("helpDialog.drag")}`),de(`Wheel+${L("helpDialog.drag")}`)],isOr:!0}),p(Pe,{label:L("buttons.clearReset"),shortcuts:[de("CtrlOrCmd+Delete")]}),p(Pe,{label:L("labels.delete"),shortcuts:[de("Delete")]}),p(Pe,{label:L("labels.cut"),shortcuts:[de("CtrlOrCmd+X")]}),p(Pe,{label:L("labels.copy"),shortcuts:[de("CtrlOrCmd+C")]}),p(Pe,{label:L("labels.paste"),shortcuts:[de("CtrlOrCmd+V")]}),p(Pe,{label:L("labels.pasteAsPlaintext"),shortcuts:[de("CtrlOrCmd+Shift+V")]}),p(Pe,{label:L("labels.selectAll"),shortcuts:[de("CtrlOrCmd+A")]}),p(Pe,{label:L("labels.multiSelect"),shortcuts:[de(`Shift+${L("helpDialog.click")}`)]}),p(Pe,{label:L("helpDialog.deepSelect"),shortcuts:[de(`CtrlOrCmd+${L("helpDialog.click")}`)]}),p(Pe,{label:L("helpDialog.deepBoxSelect"),shortcuts:[de(`CtrlOrCmd+${L("helpDialog.drag")}`)]}),(jT||i2)&&p(Pe,{label:L("labels.copyAsPng"),shortcuts:[de("Shift+Alt+C")]}),p(Pe,{label:L("labels.copyStyles"),shortcuts:[de("CtrlOrCmd+Alt+C")]}),p(Pe,{label:L("labels.pasteStyles"),shortcuts:[de("CtrlOrCmd+Alt+V")]}),p(Pe,{label:L("labels.sendToBack"),shortcuts:[de(sl?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),p(Pe,{label:L("labels.bringToFront"),shortcuts:[de(sl?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),p(Pe,{label:L("labels.sendBackward"),shortcuts:[de("CtrlOrCmd+[")]}),p(Pe,{label:L("labels.bringForward"),shortcuts:[de("CtrlOrCmd+]")]}),p(Pe,{label:L("labels.alignTop"),shortcuts:[de("CtrlOrCmd+Shift+Up")]}),p(Pe,{label:L("labels.alignBottom"),shortcuts:[de("CtrlOrCmd+Shift+Down")]}),p(Pe,{label:L("labels.alignLeft"),shortcuts:[de("CtrlOrCmd+Shift+Left")]}),p(Pe,{label:L("labels.alignRight"),shortcuts:[de("CtrlOrCmd+Shift+Right")]}),p(Pe,{label:L("labels.duplicateSelection"),shortcuts:[de("CtrlOrCmd+D"),de(`Alt+${L("helpDialog.drag")}`)]}),p(Pe,{label:L("helpDialog.toggleElementLock"),shortcuts:[de("CtrlOrCmd+Shift+L")]}),p(Pe,{label:L("buttons.undo"),shortcuts:[de("CtrlOrCmd+Z")]}),p(Pe,{label:L("buttons.redo"),shortcuts:k$?[de("CtrlOrCmd+Y"),de("CtrlOrCmd+Shift+Z")]:[de("CtrlOrCmd+Shift+Z")]}),p(Pe,{label:L("labels.group"),shortcuts:[de("CtrlOrCmd+G")]}),p(Pe,{label:L("labels.ungroup"),shortcuts:[de("CtrlOrCmd+Shift+G")]}),p(Pe,{label:L("labels.flipHorizontal"),shortcuts:[de("Shift+H")]}),p(Pe,{label:L("labels.flipVertical"),shortcuts:[de("Shift+V")]}),p(Pe,{label:L("labels.showStroke"),shortcuts:[de("S")]}),p(Pe,{label:L("labels.showBackground"),shortcuts:[de("G")]}),p(Pe,{label:L("labels.showFonts"),shortcuts:[de("Shift+F")]}),p(Pe,{label:L("labels.decreaseFontSize"),shortcuts:[de("CtrlOrCmd+Shift+<")]}),p(Pe,{label:L("labels.increaseFontSize"),shortcuts:[de("CtrlOrCmd+Shift+>")]})]})]})]})})},FEe=4,BEe=8,$Ee=({shouldWrap:e,children:t,username:n})=>e?p(xc,{label:n||"Unknown user",children:t}):p(ke,{children:t}),o4=({actionManager:e,collaborator:t,socketId:n,withName:r=!1,shouldWrapWithTooltip:i=!1,isBeingFollowed:o})=>{const s={socketId:n,collaborator:t,withName:r,isBeingFollowed:o},a=e.renderAction("goToCollaborator",s);return p($Ee,{username:t.username,shouldWrap:i,children:a},n)},zEe=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],Rj=Ee.memo(({className:e,mobile:t,collaborators:n,userToFollow:r})=>{const i=xo(),o=new Map;n.forEach((b,v)=>{const _=b.id||v;o.set(_,{...b,socketId:v})});const s=Array.from(o.values()).filter(b=>{var v;return(v=b.username)==null?void 0:v.trim()}),[a,l]=Ee.useState(""),c=s.filter(b=>{var v;return(v=b.username)==null?void 0:v.toLowerCase().includes(a)}),u=Ee.useRef(null);D.useLayoutEffect(()=>{if(u.current){const b=_=>{const E=Math.max(1,Math.min(8,Math.floor(_/38)));f(E)};if(b(u.current.clientWidth),!C_)return;const v=new ResizeObserver(_=>{for(const E of _){const{width:w}=E.contentRect;b(w)}});return v.observe(u.current),()=>{v.disconnect()}}},[]);const[d,f]=Ee.useState(FEe),U=s.slice(0,d-1).map(b=>o4({actionManager:i,collaborator:b,socketId:b.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:b.socketId===r}));return t?p("div",{className:Re("UserList UserList_mobile",e),children:s.map(b=>o4({actionManager:i,collaborator:b,socketId:b.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:b.socketId===r}))}):p("div",{className:"UserList__wrapper",ref:u,children:z("div",{className:Re("UserList",e),style:{"--max-avatars":d},children:[U,s.length>d-1&&z(W3,{children:[z(G3,{className:"UserList__more",children:["+",s.length-d+1]}),p(_x,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:z(ha,{padding:2,children:[s.length>=BEe&&p(kX,{placeholder:L("quickSearch.placeholder"),onChange:l}),p(RX,{className:"dropdown-menu UserList__collaborators",placeholder:L("userList.empty"),children:c.length>0?[p("div",{className:"hint",children:L("userList.hint.text")}),c.map(b=>o4({actionManager:i,collaborator:b,socketId:b.socketId,withName:!0,isBeingFollowed:b.socketId===r}))]:[]}),p(xX,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;const n=t.collaborators.keys();for(const[r,i]of e.collaborators){const o=t.collaborators.get(r);if(!o||r!==n.next().value||!ai(i,o,zEe))return!1}return!0}),qw=({children:e,color:t})=>p("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":Kr[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":Kr[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":Kr[t][9]},children:e}),VEe=({elements:e,appState:t,setAppState:n,files:r,actionManager:i,exportOpts:o,canvas:s,onCloseRequest:a})=>{const{onExportToBackend:l}=o;return p("div",{className:"ExportDialog ExportDialog--json",children:z("div",{className:"ExportDialog-cards",children:[o.saveFileToDisk&&z(qw,{color:"lime",children:[p("div",{className:"Card-icon",children:cde}),p("h2",{children:L("exportDialog.disk_title")}),z("div",{className:"Card-details",children:[L("exportDialog.disk_details"),!vh&&i.renderAction("changeProjectName")]}),p(vt,{className:"Card-button",type:"button",title:L("exportDialog.disk_button"),"aria-label":L("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{i.executeAction(zX,"ui")}})]}),l&&z(qw,{color:"pink",children:[p("div",{className:"Card-icon",children:Sy}),p("h2",{children:L("exportDialog.link_title")}),p("div",{className:"Card-details",children:L("exportDialog.link_details")}),p(vt,{className:"Card-button",type:"button",title:L("exportDialog.link_button"),"aria-label":L("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{Dt("export","link",`ui (${nU()})`),await l(e,t,r),a()}catch(c){n({errorMessage:c.message})}}})]}),o.renderCustomUI&&o.renderCustomUI(e,t,r,s)]})})},HEe=({elements:e,appState:t,files:n,actionManager:r,exportOpts:i,canvas:o,setAppState:s})=>{var l;const a=Ee.useCallback(()=>{s({openDialog:null})},[s]);return p(ke,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&p(Ko,{onCloseRequest:a,title:L("buttons.export"),children:p(VEe,{elements:e,appState:t,setAppState:s,files:n,actionManager:r,onCloseRequest:a,exportOpts:i,canvas:o})})})},WEe=e=>p("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${L("helpDialog.title")} — ?`,"aria-label":L("helpDialog.title"),children:cT}),Pj=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:r})=>{const{FooterCenterTunnel:i,WelcomeScreenHelpHintTunnel:o}=to(),s=Or(),a=!e.viewModeEnabled&&e.multiElement&&s.isTouchScreen;return z("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[p("div",{className:Re("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:p(ys.Col,{gap:2,children:z(R2,{heading:"canvasActions",children:[p(y7e,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&p(v7e,{renderAction:t.renderAction,className:Re("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&p(_7e,{renderAction:t.renderAction,className:Re("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),p(i.Out,{}),p("div",{className:Re("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:z("div",{style:{position:"relative"},children:[r&&p(o.Out,{}),p(WEe,{onClick:()=>t.executeAction(Cx)})]})}),p(E7e,{actionManager:t,showExitZenModeBtn:n})]})};Pj.displayName="Footer";const Mj=Ee.createContext({}),Lj=({children:e,className:t})=>{const n=Or(),r=D.useContext(Mj),i=!!(n.editor.canFitSidebar&&r.shouldRenderDockButton);return z("div",{className:Re("sidebar__header",t),"data-testid":"sidebar-header",children:[e,z("div",{className:"sidebar__header__buttons",children:[i&&p(xc,{label:L("labels.sidebarLock"),children:p(rh,{onSelect:()=>{var o;return(o=r.onDock)==null?void 0:o.call(r,!r.docked)},selected:!!r.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":L("labels.sidebarLock"),children:Hue})}),p(rh,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:r.onCloseRequest,"aria-label":L("buttons.close"),children:Uh})]})]})};Lj.displayName="SidebarHeader";const Dj=({name:e,tab:t,icon:n,title:r,children:i,onToggle:o,className:s,style:a})=>{var u;const l=Ir(),c=Qr();return z("label",{title:r,className:"sidebar-trigger__label-element",children:[p("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var g;(g=document.querySelector(".layer-ui__wrapper"))==null||g.classList.remove("animate");const f=d.target.checked;l({openSidebar:f?{name:e,tab:t}:null}),o==null||o(f)},checked:((u=c.openSidebar)==null?void 0:u.name)===e,"aria-label":r,"aria-keyshortcuts":"0"}),z("div",{className:Re("sidebar-trigger",s),style:a,children:[n&&p("div",{children:n}),i&&p("div",{className:"sidebar-trigger__label",children:i})]})]})};Dj.displayName="SidebarTrigger";function GEe(e){const t=e+"CollectionProvider",[n,r]=UU(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=g=>{const{scope:U,children:b}=g,v=Ee.useRef(null),_=Ee.useRef(new Map).current;return Ee.createElement(i,{scope:U,itemMap:_,collectionRef:v},b)},a=e+"CollectionSlot",l=Ee.forwardRef((g,U)=>{const{scope:b,children:v}=g,_=o(a,b),E=dl(U,_.collectionRef);return Ee.createElement(S2,{ref:E},v)}),c=e+"CollectionItemSlot",u="data-radix-collection-item",d=Ee.forwardRef((g,U)=>{const{scope:b,children:v,..._}=g,E=Ee.useRef(null),w=dl(U,E),T=o(c,b);return Ee.useEffect(()=>(T.itemMap.set(E,{ref:E,..._}),()=>void T.itemMap.delete(E))),Ee.createElement(S2,{[u]:"",ref:w},v)});function f(g){const U=o(e+"CollectionConsumer",g);return Ee.useCallback(()=>{const v=U.collectionRef.current;if(!v)return[];const _=Array.from(v.querySelectorAll(`[${u}]`));return Array.from(U.itemMap.values()).sort((T,A)=>_.indexOf(T.ref.current)-_.indexOf(A.ref.current))},[U.collectionRef,U.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},f,r]}const XEe=D.createContext(void 0);function Nj(e){const t=D.useContext(XEe);return e||t||"ltr"}const s4="rovingFocusGroup.onEntryFocus",jEe={bubbles:!1,cancelable:!0},Px="RovingFocusGroup",[Qw,Oj,KEe]=GEe(Px),[YEe,Fj]=UU(Px,[KEe]),[ZEe,qEe]=YEe(Px),QEe=D.forwardRef((e,t)=>D.createElement(Qw.Provider,{scope:e.__scopeRovingFocusGroup},D.createElement(Qw.Slot,{scope:e.__scopeRovingFocusGroup},D.createElement(JEe,bn({},e,{ref:t}))))),JEe=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=e,d=D.useRef(null),f=dl(t,d),g=Nj(o),[U=null,b]=Ex({prop:s,defaultProp:a,onChange:l}),[v,_]=D.useState(!1),E=Tc(c),w=Oj(n),T=D.useRef(!1),[A,M]=D.useState(0);return D.useEffect(()=>{const S=d.current;if(S)return S.addEventListener(s4,E),()=>S.removeEventListener(s4,E)},[E]),D.createElement(ZEe,{scope:n,orientation:r,dir:g,loop:i,currentTabStopId:U,onItemFocus:D.useCallback(S=>b(S),[b]),onItemShiftTab:D.useCallback(()=>_(!0),[]),onFocusableItemAdd:D.useCallback(()=>M(S=>S+1),[]),onFocusableItemRemove:D.useCallback(()=>M(S=>S-1),[])},D.createElement(Io.div,bn({tabIndex:v||A===0?-1:0,"data-orientation":r},u,{ref:f,style:{outline:"none",...e.style},onMouseDown:Ri(e.onMouseDown,()=>{T.current=!0}),onFocus:Ri(e.onFocus,S=>{const x=!T.current;if(S.target===S.currentTarget&&x&&!v){const C=new CustomEvent(s4,jEe);if(S.currentTarget.dispatchEvent(C),!C.defaultPrevented){const R=w().filter(K=>K.focusable),O=R.find(K=>K.active),F=R.find(K=>K.id===U),J=[O,F,...R].filter(Boolean).map(K=>K.ref.current);Bj(J)}}T.current=!1}),onBlur:Ri(e.onBlur,()=>_(!1))})))}),e4e="RovingFocusGroupItem",t4e=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=e,a=Ux(),l=o||a,c=qEe(e4e,n),u=c.currentTabStopId===l,d=Oj(n),{onFocusableItemAdd:f,onFocusableItemRemove:g}=c;return D.useEffect(()=>{if(r)return f(),()=>g()},[r,f,g]),D.createElement(Qw.ItemSlot,{scope:n,id:l,focusable:r,active:i},D.createElement(Io.span,bn({tabIndex:u?0:-1,"data-orientation":c.orientation},s,{ref:t,onMouseDown:Ri(e.onMouseDown,U=>{r?c.onItemFocus(l):U.preventDefault()}),onFocus:Ri(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ri(e.onKeyDown,U=>{if(U.key==="Tab"&&U.shiftKey){c.onItemShiftTab();return}if(U.target!==U.currentTarget)return;const b=i4e(U,c.orientation,c.dir);if(b!==void 0){U.preventDefault();let _=d().filter(E=>E.focusable).map(E=>E.ref.current);if(b==="last")_.reverse();else if(b==="prev"||b==="next"){b==="prev"&&_.reverse();const E=_.indexOf(U.currentTarget);_=c.loop?o4e(_,E+1):_.slice(E+1)}setTimeout(()=>Bj(_))}})})))}),n4e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function r4e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function i4e(e,t,n){const r=r4e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return n4e[r]}function Bj(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function o4e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const s4e=QEe,a4e=t4e,$j="Tabs",[l4e,kLe]=UU($j,[Fj]),zj=Fj(),[c4e,Mx]=l4e($j),u4e=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:s="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=Nj(a),[d,f]=Ex({prop:r,onChange:i,defaultProp:o});return D.createElement(c4e,{scope:n,baseId:Ux(),value:d,onValueChange:f,orientation:s,dir:u,activationMode:l},D.createElement(Io.div,bn({dir:u,"data-orientation":s},c,{ref:t})))}),d4e="TabsList",f4e=D.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,o=Mx(d4e,n),s=zj(n);return D.createElement(s4e,bn({asChild:!0},s,{orientation:o.orientation,dir:o.dir,loop:r}),D.createElement(Io.div,bn({role:"tablist","aria-orientation":o.orientation},i,{ref:t})))}),h4e="TabsTrigger",g4e=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...o}=e,s=Mx(h4e,n),a=zj(n),l=Vj(s.baseId,r),c=Hj(s.baseId,r),u=r===s.value;return D.createElement(a4e,bn({asChild:!0},a,{focusable:!i,active:u}),D.createElement(Io.button,bn({type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},o,{ref:t,onMouseDown:Ri(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?s.onValueChange(r):d.preventDefault()}),onKeyDown:Ri(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&s.onValueChange(r)}),onFocus:Ri(e.onFocus,()=>{const d=s.activationMode!=="manual";!u&&!i&&d&&s.onValueChange(r)})})))}),p4e="TabsContent",m4e=D.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...s}=e,a=Mx(p4e,n),l=Vj(a.baseId,r),c=Hj(a.baseId,r),u=r===a.value,d=D.useRef(u);return D.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),D.createElement(z3,{present:i||u},({present:f})=>D.createElement(Io.div,bn({"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0},s,{ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0}}),f&&o))});function Vj(e,t){return`${e}-trigger-${t}`}function Hj(e,t){return`${e}-content-${t}`}const Wj=u4e,Gj=f4e,Xj=g4e,jj=m4e,Kj=({children:e,...t})=>p(Gj,{className:"sidebar-triggers",...t,children:e});Kj.displayName="SidebarTabTriggers";const Yj=({children:e,tab:t,onSelect:n,...r})=>p(Xj,{value:t,asChild:!0,onSelect:n,children:p("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...r,children:e})});Yj.displayName="SidebarTabTrigger";const Zj=({children:e,...t})=>{const n=Qr(),r=Ir();if(!n.openSidebar)return null;const{name:i}=n.openSidebar;return p(Wj,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:o=>r(s=>({...s,openSidebar:{...s.openSidebar,name:i,tab:o}})),...t,children:e})};Zj.displayName="SidebarTabs";const qj=({tab:e,children:t,...n})=>p(jj,{...n,value:e,"data-testid":e,children:t});qj.displayName="SidebarTab";const Lx=Pn(!1),Qj=D.forwardRef(({name:e,children:t,onDock:n,docked:r,className:i,...o},s)=>{const a=Ir(),l=i3(Lx);D.useLayoutEffect(()=>(l(!!r),()=>{l(!1)}),[l,r]);const c=D.useRef({});c.current.onCloseRequest=()=>{a({openSidebar:null})},c.current.onDock=g=>n==null?void 0:n(g),c.current=fb(c.current,{docked:r,shouldRenderDockButton:!!n&&r!=null});const u=D.useRef(null);D.useImperativeHandle(s,()=>u.current);const d=Or(),f=D.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return wx(u,D.useCallback(g=>{g.target.closest(".sidebar-trigger")||(!r||!d.editor.canFitSidebar)&&f()},[f,r,d.editor.canFitSidebar])),D.useEffect(()=>{const g=U=>{U.key===j.ESCAPE&&(!r||!d.editor.canFitSidebar)&&f()};return document.addEventListener(ge.KEYDOWN,g),()=>{document.removeEventListener(ge.KEYDOWN,g)}},[f,r,d.editor.canFitSidebar]),p(ha,{...o,className:Re("sidebar",{"sidebar--docked":r},i),ref:u,children:p(Mj.Provider,{value:c.current,children:t})})});Qj.displayName="SidebarInner";const Va=Object.assign(D.forwardRef((e,t)=>{var l;const n=Qr(),{onStateChange:r}=e,i=D.useRef(n.openSidebar);D.useEffect(()=>{var c,u,d,f,g;(!n.openSidebar&&((c=i==null?void 0:i.current)==null?void 0:c.name)===e.name||((u=n.openSidebar)==null?void 0:u.name)===e.name&&((d=i==null?void 0:i.current)==null?void 0:d.name)!==e.name||((f=i.current)==null?void 0:f.name)===e.name)&&n.openSidebar!==i.current&&(r==null||r(((g=n.openSidebar)==null?void 0:g.name)!==e.name?null:n.openSidebar)),i.current=n.openSidebar},[n.openSidebar,r,e.name]);const[o,s]=D.useState(!1);return D.useLayoutEffect(()=>(s(!0),()=>s(!1)),[]),o&&((l=n.openSidebar)==null?void 0:l.name)===e.name?D.createElement(Qj,{...e,ref:t,key:e.name}):null}),{Header:Lj,TabTriggers:Kj,TabTrigger:Yj,Tabs:Zj,Tab:qj,Trigger:Dj});Va.displayName="Sidebar";const Jj=Pn({active:!1});async function Jw({title:e,description:t,actionLabel:n,color:r}){return new Promise(i=>{ia.set(Jj,{active:!0,onConfirm:()=>i(!0),onClose:()=>i(!1),onReject:()=>i(!1),title:e,description:t,actionLabel:n,color:r})})}const eK=({value:e,shortcut:t,onChange:n,choices:r,children:i,name:o})=>{const s=Or();return z(ke,{children:[z("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[p("label",{className:"dropdown-menu-item__text",htmlFor:o,children:i}),p(_j,{name:o,value:e,onChange:n,choices:r})]}),t&&!s.editor.isMobile&&p("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};eK.displayName="DropdownMenuItemContentRadio";const tK=()=>{const{t:e}=Zn(),t=xo(),n=tv();return t.isActionEnabled(Vw)?p(To,{icon:dT,onSelect:async()=>{(!n.length||await Jw({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:p(Uo,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:i=>p("strong",{children:i}),br:()=>p("br",{})})}))&&t.executeAction(Vw)},"data-testid":"load-button",shortcut:Ai("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};tK.displayName="LoadScene";const nK=()=>{const{t:e}=Zn(),t=xo();return t.isActionEnabled(jL)?p(To,{shortcut:Ai("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(jL),icon:sde,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};nK.displayName="SaveToActiveFile";const rK=()=>{const e=Ir(),{t}=Zn();return p(To,{icon:MV,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Ai("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};rK.displayName="SaveAsImage";const iK=e=>{const t=Ir(),{t:n}=Zn();return p(To,{icon:HV,"data-testid":"command-palette-button",onSelect:()=>{Dt("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Ai("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};iK.displayName="CommandPalette";const oK=e=>{const{t}=Zn(),n=xo();return p(To,{icon:Wf,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(yj)},shortcut:Ai("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};oK.displayName="SearchMenu";const sK=()=>{const{t:e}=Zn(),t=xo();return p(To,{"data-testid":"help-menu-item",icon:cT,onSelect:()=>t.executeAction(Cx),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};sK.displayName="Help";const aK=()=>{const{t:e}=Zn(),t=i3(ev);return xo().isActionEnabled(Am)?p(To,{icon:Ju,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};aK.displayName="ClearCanvas";const lK=e=>{const{t}=Zn(),n=Qr(),r=xo(),i=Ai("toggleTheme");return r.isActionEnabled(o8)?e!=null&&e.allowSystemTheme?p(eK,{name:"theme",value:e.theme,onChange:o=>e.onSelect(o),choices:[{value:Ge.LIGHT,label:Q_,ariaLabel:`${t("buttons.lightMode")} - ${i}`},{value:Ge.DARK,label:q_,ariaLabel:`${t("buttons.darkMode")} - ${i}`},{value:"system",label:Ife,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):p(To,{onSelect:o=>{if(o.preventDefault(),e!=null&&e.onSelect)e.onSelect(n.theme===Ge.DARK?Ge.LIGHT:Ge.DARK);else return r.executeAction(o8)},icon:n.theme===Ge.DARK?Q_:q_,"data-testid":"toggle-dark-mode",shortcut:i,"aria-label":n.theme===Ge.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===Ge.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};lK.displayName="ToggleTheme";const cK=()=>{const{t:e}=Zn(),t=Qr(),n=xo(),r=wU();return t.viewModeEnabled||!r.UIOptions.canvasActions.changeViewBackgroundColor?null:z("div",{style:{marginTop:"0.5rem"},children:[p("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),p("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};cK.displayName="ChangeCanvasBackground";const uK=()=>{const{t:e}=Zn(),t=Ir();return p(To,{icon:h3,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};uK.displayName="Export";const dK=()=>{const{t:e}=Zn();return z(ke,{children:[p(Rm,{icon:uT,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),p(Rm,{icon:PV,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),p(Rm,{icon:RV,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};dK.displayName="Socials";const fK=({onSelect:e,isCollaborating:t})=>{const{t:n}=Zn();return p(To,{"data-testid":"collab-button",icon:hT,className:Re({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};fK.displayName="LiveCollaborationTrigger";const U4e=Object.freeze(Object.defineProperty({__proto__:null,ChangeCanvasBackground:cK,ClearCanvas:aK,CommandPalette:iK,Export:uK,Help:sK,LiveCollaborationTrigger:fK,LoadScene:tK,SaveAsImage:rK,SaveToActiveFile:nK,SearchMenu:oK,Socials:dK,ToggleTheme:lK},Symbol.toStringTag,{value:"Module"})),vU=(e,t)=>{const n=Pn(0),r=i=>{const{tunnelsJotai:{useAtom:o}}=to(),[,s]=o(n),a=D.useRef({preferHost:!1,counter:0});return D.useLayoutEffect(()=>{const l=a.current;return s(c=>{const u=c+1;return l.counter=u,u}),()=>{s(c=>{const u=c-1;return l.counter=u,u||(l.preferHost=!1),u})}},[s]),i.__fallback||(a.current.preferHost=!0),!a.current.counter&&i.__fallback&&a.current.preferHost||a.current.counter>1&&i.__fallback?null:p(t,{...i})};return r.displayName=e,r},Xt=Object.assign(vU("MainMenu",({children:e,onSelect:t})=>{var a;const{MainMenuTunnel:n}=to(),r=Or(),i=Qr(),o=Ir(),s=r.editor.isMobile?void 0:()=>o({openMenu:null});return p(n.In,{children:z(Rt,{open:i.openMenu==="canvas",children:[p(Rt.Trigger,{onToggle:()=>{o({openMenu:i.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:kV}),z(Rt.Content,{onClickOutside:s,onSelect:c3(t,()=>{o({openMenu:null})}),children:[e,r.editor.isMobile&&i.collaborators.size>0&&z("fieldset",{className:"UserList-Wrapper",children:[p("legend",{children:L("labels.collaborators")}),p(Rj,{mobile:!0,collaborators:i.collaborators,userToFollow:((a=i.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:Rt.Trigger,Item:Rt.Item,ItemLink:Rt.ItemLink,ItemCustom:Rt.ItemCustom,Group:Rt.Group,Separator:Rt.Separator,DefaultItems:U4e}),Dx=({title:e,children:t,actionLabel:n,onClick:r})=>z("div",{className:"OverwriteConfirm__Actions__Action",children:[p("h4",{children:e}),p("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),p(ga,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:r})]}),b4e=()=>{const{t:e}=Zn(),t=xo(),n=Ir();return p(Dx,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction($X,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},y4e=()=>{const{t:e}=Zn(),t=xo();return p(Dx,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(zX,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},xD=Object.assign(({children:e})=>p("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:b4e,SaveToDisk:y4e}),Ef=Object.assign(vU("OverwriteConfirmDialog",({children:e})=>{const{OverwriteConfirmDialogTunnel:t}=to(),[n,r]=Yn(Jj);if(!n.active)return null;const i=()=>{n.onClose(),r(s=>({...s,active:!1}))},o=()=>{n.onConfirm(),r(s=>({...s,active:!1}))};return p(t.In,{children:p(Ko,{onCloseRequest:i,title:!1,size:916,children:z("div",{className:"OverwriteConfirm",children:[p("h3",{children:n.title}),z("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[p("div",{className:"OverwriteConfirm__Description__icon",children:sfe}),p("div",{children:n.description}),p("div",{className:"OverwriteConfirm__Description__spacer"}),p(ga,{color:n.color,size:"large",label:n.actionLabel,onClick:o})]}),p(xD,{children:e})]})})})}),{Actions:xD,Action:Dx});var l8={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */l8.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",d=1,f=2,g=4,U=1,b=2,v=1,_=2,E=4,w=8,T=16,A=32,M=64,S=128,x=256,C=512,R=30,O="...",F=800,N=16,J=1,K=2,ne=3,ee=1/0,q=9007199254740991,Z=17976931348623157e292,te=NaN,pe=4294967295,Ie=pe-1,Se=pe>>>1,lt=[["ary",S],["bind",v],["bindKey",_],["curry",w],["curryRight",T],["flip",C],["partial",A],["partialRight",M],["rearg",x]],at="[object Arguments]",gt="[object Array]",ht="[object AsyncFunction]",tn="[object Boolean]",Kt="[object Date]",pt="[object DOMException]",mt="[object Error]",Ot="[object Function]",Ia="[object GeneratorFunction]",gr="[object Map]",fi="[object Number]",Yo="[object Null]",qn="[object Object]",Ph="[object Promise]",Ds="[object Proxy]",Li="[object RegExp]",Jr="[object Set]",no="[object String]",Ta="[object Symbol]",yd="[object Undefined]",Oc="[object WeakMap]",Fr="[object WeakSet]",ir="[object ArrayBuffer]",Ns="[object DataView]",Mh="[object Float32Array]",Lh="[object Float64Array]",I0="[object Int8Array]",yl="[object Int16Array]",Dh="[object Int32Array]",Nh="[object Uint8Array]",vd="[object Uint8ClampedArray]",T0="[object Uint16Array]",x0="[object Uint32Array]",S0=/\b__p \+= '';/g,MU=/\b(__p \+=) '' \+/g,LU=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fc=/&(?:amp|lt|gt|quot|#39);/g,Oh=/[&<>"']/g,C0=RegExp(Fc.source),vl=RegExp(Oh.source),DU=/<%-([\s\S]+?)%>/g,Fh=/<%([\s\S]+?)%>/g,A0=/<%=([\s\S]+?)%>/g,Ed=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NU=/^\w*$/,ei=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bh=/[\\^$.*+?()[\]{}|]/g,_d=RegExp(Bh.source),El=/^\s+/,wv=/\s/,Iv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bc=/\{\n\/\* \[wrapped with (.+)\] \*/,Tv=/,? & /,xv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$h=/[()=,{}\[\]\/\s]/,OU=/\\(\\)?/g,k0=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wd=/\w*$/,xa=/^[-+]0x[0-9a-f]+$/i,FU=/^0b[01]+$/i,BU=/^\[object .+?Constructor\]$/,R0=/^0o[0-7]+$/i,P0=/^(?:0|[1-9]\d*)$/,$U=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Id=/($^)/,Sv=/['\n\r\u2028\u2029\\]/g,_l="\\ud800-\\udfff",zU="\\u0300-\\u036f",M0="\\ufe20-\\ufe2f",Td="\\u20d0-\\u20ff",Sa=zU+M0+Td,zh="\\u2700-\\u27bf",VU="a-z\\xdf-\\xf6\\xf8-\\xff",HU="\\xac\\xb1\\xd7\\xf7",WU="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",GU="\\u2000-\\u206f",L0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vh="A-Z\\xc0-\\xd6\\xd8-\\xde",D0="\\ufe0e\\ufe0f",N0=HU+WU+GU+L0,O0="['’]",Cv="["+_l+"]",F0="["+N0+"]",xd="["+Sa+"]",XU="\\d+",wl="["+zh+"]",Zo="["+VU+"]",Sd="[^"+_l+N0+XU+zh+VU+Vh+"]",$c="\\ud83c[\\udffb-\\udfff]",jU="(?:"+xd+"|"+$c+")",fn="[^"+_l+"]",zc="(?:\\ud83c[\\udde6-\\uddff]){2}",Il="[\\ud800-\\udbff][\\udc00-\\udfff]",qo="["+Vh+"]",KU="\\u200d",B0="(?:"+Zo+"|"+Sd+")",Av="(?:"+qo+"|"+Sd+")",YU="(?:"+O0+"(?:d|ll|m|re|s|t|ve))?",ZU="(?:"+O0+"(?:D|LL|M|RE|S|T|VE))?",qU=jU+"?",Vc="["+D0+"]?",Ca="(?:"+KU+"(?:"+[fn,zc,Il].join("|")+")"+Vc+qU+")*",QU="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",JU="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$0=Vc+qU+Ca,Hc="(?:"+[wl,zc,Il].join("|")+")"+$0,kv="(?:"+[fn+xd+"?",xd,zc,Il,Cv].join("|")+")",Rv=RegExp(O0,"g"),Pv=RegExp(xd,"g"),Qo=RegExp($c+"(?="+$c+")|"+kv+$0,"g"),Mv=RegExp([qo+"?"+Zo+"+"+YU+"(?="+[F0,qo,"$"].join("|")+")",Av+"+"+ZU+"(?="+[F0,qo+B0,"$"].join("|")+")",qo+"?"+B0+"+"+YU,qo+"+"+ZU,JU,QU,XU,Hc].join("|"),"g"),Lv=RegExp("["+KU+_l+Sa+D0+"]"),Hh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],e6=-1,Yt={};Yt[Mh]=Yt[Lh]=Yt[I0]=Yt[yl]=Yt[Dh]=Yt[Nh]=Yt[vd]=Yt[T0]=Yt[x0]=!0,Yt[at]=Yt[gt]=Yt[ir]=Yt[tn]=Yt[Ns]=Yt[Kt]=Yt[mt]=Yt[Ot]=Yt[gr]=Yt[fi]=Yt[qn]=Yt[Li]=Yt[Jr]=Yt[no]=Yt[Oc]=!1;var Ht={};Ht[at]=Ht[gt]=Ht[ir]=Ht[Ns]=Ht[tn]=Ht[Kt]=Ht[Mh]=Ht[Lh]=Ht[I0]=Ht[yl]=Ht[Dh]=Ht[gr]=Ht[fi]=Ht[qn]=Ht[Li]=Ht[Jr]=Ht[no]=Ht[Ta]=Ht[Nh]=Ht[vd]=Ht[T0]=Ht[x0]=!0,Ht[mt]=Ht[Ot]=Ht[Oc]=!1;var t6={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},z0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Dv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nv=parseFloat,n6=parseInt,V0=typeof Ka=="object"&&Ka&&Ka.Object===Object&&Ka,r6=typeof self=="object"&&self&&self.Object===Object&&self,Qn=V0||r6||Function("return this")(),Gh=t&&!t.nodeType&&t,ti=Gh&&!0&&e&&!e.nodeType&&e,H0=ti&&ti.exports===Gh,W0=H0&&V0.process,Br=function(){try{var re=ti&&ti.require&&ti.require("util").types;return re||W0&&W0.binding&&W0.binding("util")}catch{}}(),G0=Br&&Br.isArrayBuffer,Xh=Br&&Br.isDate,Cd=Br&&Br.isMap,X0=Br&&Br.isRegExp,Ad=Br&&Br.isSet,i6=Br&&Br.isTypedArray;function hi(re,he,ce){switch(ce.length){case 0:return re.call(he);case 1:return re.call(he,ce[0]);case 2:return re.call(he,ce[0],ce[1]);case 3:return re.call(he,ce[0],ce[1],ce[2])}return re.apply(he,ce)}function kd(re,he,ce,Oe){for(var ct=-1,qt=re==null?0:re.length;++ct<qt;){var Sr=re[ct];he(Oe,Sr,ce(Sr),re)}return Oe}function Di(re,he){for(var ce=-1,Oe=re==null?0:re.length;++ce<Oe&&he(re[ce],ce,re)!==!1;);return re}function o6(re,he){for(var ce=re==null?0:re.length;ce--&&he(re[ce],ce,re)!==!1;);return re}function jh(re,he){for(var ce=-1,Oe=re==null?0:re.length;++ce<Oe;)if(!he(re[ce],ce,re))return!1;return!0}function Jo(re,he){for(var ce=-1,Oe=re==null?0:re.length,ct=0,qt=[];++ce<Oe;){var Sr=re[ce];he(Sr,ce,re)&&(qt[ct++]=Sr)}return qt}function Rd(re,he){var ce=re==null?0:re.length;return!!ce&&Tl(re,he,0)>-1}function Wc(re,he,ce){for(var Oe=-1,ct=re==null?0:re.length;++Oe<ct;)if(ce(he,re[Oe]))return!0;return!1}function yn(re,he){for(var ce=-1,Oe=re==null?0:re.length,ct=Array(Oe);++ce<Oe;)ct[ce]=he(re[ce],ce,re);return ct}function Os(re,he){for(var ce=-1,Oe=he.length,ct=re.length;++ce<Oe;)re[ct+ce]=he[ce];return re}function Fs(re,he,ce,Oe){var ct=-1,qt=re==null?0:re.length;for(Oe&&qt&&(ce=re[++ct]);++ct<qt;)ce=he(ce,re[ct],ct,re);return ce}function s6(re,he,ce,Oe){var ct=re==null?0:re.length;for(Oe&&ct&&(ce=re[--ct]);ct--;)ce=he(ce,re[ct],ct,re);return ce}function Kh(re,he){for(var ce=-1,Oe=re==null?0:re.length;++ce<Oe;)if(he(re[ce],ce,re))return!0;return!1}var a6=$("length");function l6(re){return re.split("")}function Yh(re){return re.match(xv)||[]}function gi(re,he,ce){var Oe;return ce(re,function(ct,qt,Sr){if(he(ct,qt,Sr))return Oe=qt,!1}),Oe}function Pd(re,he,ce,Oe){for(var ct=re.length,qt=ce+(Oe?1:-1);Oe?qt--:++qt<ct;)if(he(re[qt],qt,re))return qt;return-1}function Tl(re,he,ce){return he===he?Qq(re,he,ce):Pd(re,y,ce)}function Gc(re,he,ce,Oe){for(var ct=ce-1,qt=re.length;++ct<qt;)if(Oe(re[ct],he))return ct;return-1}function y(re){return re!==re}function k(re,he){var ce=re==null?0:re.length;return ce?xe(re,he)/ce:te}function $(re){return function(he){return he==null?n:he[re]}}function G(re){return function(he){return re==null?n:re[he]}}function se(re,he,ce,Oe,ct){return ct(re,function(qt,Sr,vn){ce=Oe?(Oe=!1,qt):he(ce,qt,Sr,vn)}),ce}function ue(re,he){var ce=re.length;for(re.sort(he);ce--;)re[ce]=re[ce].value;return re}function xe(re,he){for(var ce,Oe=-1,ct=re.length;++Oe<ct;){var qt=he(re[Oe]);qt!==n&&(ce=ce===n?qt:ce+qt)}return ce}function Zt(re,he){for(var ce=-1,Oe=Array(re);++ce<re;)Oe[ce]=he(ce);return Oe}function xr(re,he){return yn(he,function(ce){return[ce,re[ce]]})}function St(re){return re&&re.slice(0,cC(re)+1).replace(El,"")}function nn(re){return function(he){return re(he)}}function pr(re,he){return yn(he,function(ce){return re[ce]})}function es(re,he){return re.has(he)}function ro(re,he){for(var ce=-1,Oe=re.length;++ce<Oe&&Tl(he,re[ce],0)>-1;);return ce}function Md(re,he){for(var ce=re.length;ce--&&Tl(he,re[ce],0)>-1;);return ce}function j0(re,he){for(var ce=re.length,Oe=0;ce--;)re[ce]===he&&++Oe;return Oe}var Gq=G(t6),Xq=G(z0);function jq(re){return"\\"+Dv[re]}function Kq(re,he){return re==null?n:re[he]}function Zh(re){return Lv.test(re)}function Yq(re){return Hh.test(re)}function Zq(re){for(var he,ce=[];!(he=re.next()).done;)ce.push(he.value);return ce}function Ov(re){var he=-1,ce=Array(re.size);return re.forEach(function(Oe,ct){ce[++he]=[ct,Oe]}),ce}function lC(re,he){return function(ce){return re(he(ce))}}function Xc(re,he){for(var ce=-1,Oe=re.length,ct=0,qt=[];++ce<Oe;){var Sr=re[ce];(Sr===he||Sr===u)&&(re[ce]=u,qt[ct++]=ce)}return qt}function c6(re){var he=-1,ce=Array(re.size);return re.forEach(function(Oe){ce[++he]=Oe}),ce}function qq(re){var he=-1,ce=Array(re.size);return re.forEach(function(Oe){ce[++he]=[Oe,Oe]}),ce}function Qq(re,he,ce){for(var Oe=ce-1,ct=re.length;++Oe<ct;)if(re[Oe]===he)return Oe;return-1}function Jq(re,he,ce){for(var Oe=ce+1;Oe--;)if(re[Oe]===he)return Oe;return Oe}function qh(re){return Zh(re)?tQ(re):a6(re)}function Bs(re){return Zh(re)?nQ(re):l6(re)}function cC(re){for(var he=re.length;he--&&wv.test(re.charAt(he)););return he}var eQ=G(Mn);function tQ(re){for(var he=Qo.lastIndex=0;Qo.test(re);)++he;return he}function nQ(re){return re.match(Qo)||[]}function rQ(re){return re.match(Mv)||[]}var iQ=function re(he){he=he==null?Qn:Qh.defaults(Qn.Object(),he,Qh.pick(Qn,Wh));var ce=he.Array,Oe=he.Date,ct=he.Error,qt=he.Function,Sr=he.Math,vn=he.Object,Fv=he.RegExp,oQ=he.String,ts=he.TypeError,u6=ce.prototype,sQ=qt.prototype,Jh=vn.prototype,d6=he["__core-js_shared__"],f6=sQ.toString,ln=Jh.hasOwnProperty,aQ=0,uC=function(){var h=/[^.]+$/.exec(d6&&d6.keys&&d6.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),h6=Jh.toString,lQ=f6.call(vn),cQ=Qn._,uQ=Fv("^"+f6.call(ln).replace(Bh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g6=H0?he.Buffer:n,jc=he.Symbol,p6=he.Uint8Array,dC=g6?g6.allocUnsafe:n,m6=lC(vn.getPrototypeOf,vn),fC=vn.create,hC=Jh.propertyIsEnumerable,U6=u6.splice,gC=jc?jc.isConcatSpreadable:n,K0=jc?jc.iterator:n,Ld=jc?jc.toStringTag:n,b6=function(){try{var h=Bd(vn,"defineProperty");return h({},"",{}),h}catch{}}(),dQ=he.clearTimeout!==Qn.clearTimeout&&he.clearTimeout,fQ=Oe&&Oe.now!==Qn.Date.now&&Oe.now,hQ=he.setTimeout!==Qn.setTimeout&&he.setTimeout,y6=Sr.ceil,v6=Sr.floor,Bv=vn.getOwnPropertySymbols,gQ=g6?g6.isBuffer:n,pC=he.isFinite,pQ=u6.join,mQ=lC(vn.keys,vn),Cr=Sr.max,pi=Sr.min,UQ=Oe.now,bQ=he.parseInt,mC=Sr.random,yQ=u6.reverse,$v=Bd(he,"DataView"),Y0=Bd(he,"Map"),zv=Bd(he,"Promise"),e1=Bd(he,"Set"),Z0=Bd(he,"WeakMap"),q0=Bd(vn,"create"),E6=Z0&&new Z0,t1={},vQ=$d($v),EQ=$d(Y0),_Q=$d(zv),wQ=$d(e1),IQ=$d(Z0),_6=jc?jc.prototype:n,Q0=_6?_6.valueOf:n,UC=_6?_6.toString:n;function W(h){if(Jn(h)&&!ut(h)&&!(h instanceof wt)){if(h instanceof ns)return h;if(ln.call(h,"__wrapped__"))return bA(h)}return new ns(h)}var n1=function(){function h(){}return function(m){if(!Hn(m))return{};if(fC)return fC(m);h.prototype=m;var I=new h;return h.prototype=n,I}}();function w6(){}function ns(h,m){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=n}W.templateSettings={escape:DU,evaluate:Fh,interpolate:A0,variable:"",imports:{_:W}},W.prototype=w6.prototype,W.prototype.constructor=W,ns.prototype=n1(w6.prototype),ns.prototype.constructor=ns;function wt(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pe,this.__views__=[]}function TQ(){var h=new wt(this.__wrapped__);return h.__actions__=io(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=io(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=io(this.__views__),h}function xQ(){if(this.__filtered__){var h=new wt(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function SQ(){var h=this.__wrapped__.value(),m=this.__dir__,I=ut(h),P=m<0,V=I?h.length:0,X=BJ(0,V,this.__views__),Y=X.start,Q=X.end,oe=Q-Y,me=P?Q:Y-1,Ue=this.__iteratees__,ye=Ue.length,Me=0,ze=pi(oe,this.__takeCount__);if(!I||!P&&V==oe&&ze==oe)return zC(h,this.__actions__);var qe=[];e:for(;oe--&&Me<ze;){me+=m;for(var bt=-1,Qe=h[me];++bt<ye;){var Et=Ue[bt],Ct=Et.iteratee,Ao=Et.type,Fi=Ct(Qe);if(Ao==K)Qe=Fi;else if(!Fi){if(Ao==J)continue e;break e}}qe[Me++]=Qe}return qe}wt.prototype=n1(w6.prototype),wt.prototype.constructor=wt;function Dd(h){var m=-1,I=h==null?0:h.length;for(this.clear();++m<I;){var P=h[m];this.set(P[0],P[1])}}function CQ(){this.__data__=q0?q0(null):{},this.size=0}function AQ(h){var m=this.has(h)&&delete this.__data__[h];return this.size-=m?1:0,m}function kQ(h){var m=this.__data__;if(q0){var I=m[h];return I===l?n:I}return ln.call(m,h)?m[h]:n}function RQ(h){var m=this.__data__;return q0?m[h]!==n:ln.call(m,h)}function PQ(h,m){var I=this.__data__;return this.size+=this.has(h)?0:1,I[h]=q0&&m===n?l:m,this}Dd.prototype.clear=CQ,Dd.prototype.delete=AQ,Dd.prototype.get=kQ,Dd.prototype.has=RQ,Dd.prototype.set=PQ;function xl(h){var m=-1,I=h==null?0:h.length;for(this.clear();++m<I;){var P=h[m];this.set(P[0],P[1])}}function MQ(){this.__data__=[],this.size=0}function LQ(h){var m=this.__data__,I=I6(m,h);if(I<0)return!1;var P=m.length-1;return I==P?m.pop():U6.call(m,I,1),--this.size,!0}function DQ(h){var m=this.__data__,I=I6(m,h);return I<0?n:m[I][1]}function NQ(h){return I6(this.__data__,h)>-1}function OQ(h,m){var I=this.__data__,P=I6(I,h);return P<0?(++this.size,I.push([h,m])):I[P][1]=m,this}xl.prototype.clear=MQ,xl.prototype.delete=LQ,xl.prototype.get=DQ,xl.prototype.has=NQ,xl.prototype.set=OQ;function Sl(h){var m=-1,I=h==null?0:h.length;for(this.clear();++m<I;){var P=h[m];this.set(P[0],P[1])}}function FQ(){this.size=0,this.__data__={hash:new Dd,map:new(Y0||xl),string:new Dd}}function BQ(h){var m=N6(this,h).delete(h);return this.size-=m?1:0,m}function $Q(h){return N6(this,h).get(h)}function zQ(h){return N6(this,h).has(h)}function VQ(h,m){var I=N6(this,h),P=I.size;return I.set(h,m),this.size+=I.size==P?0:1,this}Sl.prototype.clear=FQ,Sl.prototype.delete=BQ,Sl.prototype.get=$Q,Sl.prototype.has=zQ,Sl.prototype.set=VQ;function Nd(h){var m=-1,I=h==null?0:h.length;for(this.__data__=new Sl;++m<I;)this.add(h[m])}function HQ(h){return this.__data__.set(h,l),this}function WQ(h){return this.__data__.has(h)}Nd.prototype.add=Nd.prototype.push=HQ,Nd.prototype.has=WQ;function $s(h){var m=this.__data__=new xl(h);this.size=m.size}function GQ(){this.__data__=new xl,this.size=0}function XQ(h){var m=this.__data__,I=m.delete(h);return this.size=m.size,I}function jQ(h){return this.__data__.get(h)}function KQ(h){return this.__data__.has(h)}function YQ(h,m){var I=this.__data__;if(I instanceof xl){var P=I.__data__;if(!Y0||P.length<i-1)return P.push([h,m]),this.size=++I.size,this;I=this.__data__=new Sl(P)}return I.set(h,m),this.size=I.size,this}$s.prototype.clear=GQ,$s.prototype.delete=XQ,$s.prototype.get=jQ,$s.prototype.has=KQ,$s.prototype.set=YQ;function bC(h,m){var I=ut(h),P=!I&&zd(h),V=!I&&!P&&Qc(h),X=!I&&!P&&!V&&s1(h),Y=I||P||V||X,Q=Y?Zt(h.length,oQ):[],oe=Q.length;for(var me in h)(m||ln.call(h,me))&&!(Y&&(me=="length"||V&&(me=="offset"||me=="parent")||X&&(me=="buffer"||me=="byteLength"||me=="byteOffset")||Rl(me,oe)))&&Q.push(me);return Q}function yC(h){var m=h.length;return m?h[Qv(0,m-1)]:n}function ZQ(h,m){return O6(io(h),Od(m,0,h.length))}function qQ(h){return O6(io(h))}function Vv(h,m,I){(I!==n&&!zs(h[m],I)||I===n&&!(m in h))&&Cl(h,m,I)}function J0(h,m,I){var P=h[m];(!(ln.call(h,m)&&zs(P,I))||I===n&&!(m in h))&&Cl(h,m,I)}function I6(h,m){for(var I=h.length;I--;)if(zs(h[I][0],m))return I;return-1}function QQ(h,m,I,P){return Kc(h,function(V,X,Y){m(P,V,I(V),Y)}),P}function vC(h,m){return h&&ka(m,$r(m),h)}function JQ(h,m){return h&&ka(m,so(m),h)}function Cl(h,m,I){m=="__proto__"&&b6?b6(h,m,{configurable:!0,enumerable:!0,value:I,writable:!0}):h[m]=I}function Hv(h,m){for(var I=-1,P=m.length,V=ce(P),X=h==null;++I<P;)V[I]=X?n:w7(h,m[I]);return V}function Od(h,m,I){return h===h&&(I!==n&&(h=h<=I?h:I),m!==n&&(h=h>=m?h:m)),h}function rs(h,m,I,P,V,X){var Y,Q=m&d,oe=m&f,me=m&g;if(I&&(Y=V?I(h,P,V,X):I(h)),Y!==n)return Y;if(!Hn(h))return h;var Ue=ut(h);if(Ue){if(Y=zJ(h),!Q)return io(h,Y)}else{var ye=mi(h),Me=ye==Ot||ye==Ia;if(Qc(h))return WC(h,Q);if(ye==qn||ye==at||Me&&!V){if(Y=oe||Me?{}:cA(h),!Q)return oe?kJ(h,JQ(Y,h)):AJ(h,vC(Y,h))}else{if(!Ht[ye])return V?h:{};Y=VJ(h,ye,Q)}}X||(X=new $s);var ze=X.get(h);if(ze)return ze;X.set(h,Y),FA(h)?h.forEach(function(Qe){Y.add(rs(Qe,m,I,Qe,h,X))}):NA(h)&&h.forEach(function(Qe,Et){Y.set(Et,rs(Qe,m,I,Et,h,X))});var qe=me?oe?c7:l7:oe?so:$r,bt=Ue?n:qe(h);return Di(bt||h,function(Qe,Et){bt&&(Et=Qe,Qe=h[Et]),J0(Y,Et,rs(Qe,m,I,Et,h,X))}),Y}function eJ(h){var m=$r(h);return function(I){return EC(I,h,m)}}function EC(h,m,I){var P=I.length;if(h==null)return!P;for(h=vn(h);P--;){var V=I[P],X=m[V],Y=h[V];if(Y===n&&!(V in h)||!X(Y))return!1}return!0}function _C(h,m,I){if(typeof h!="function")throw new ts(s);return sp(function(){h.apply(n,I)},m)}function ep(h,m,I,P){var V=-1,X=Rd,Y=!0,Q=h.length,oe=[],me=m.length;if(!Q)return oe;I&&(m=yn(m,nn(I))),P?(X=Wc,Y=!1):m.length>=i&&(X=es,Y=!1,m=new Nd(m));e:for(;++V<Q;){var Ue=h[V],ye=I==null?Ue:I(Ue);if(Ue=P||Ue!==0?Ue:0,Y&&ye===ye){for(var Me=me;Me--;)if(m[Me]===ye)continue e;oe.push(Ue)}else X(m,ye,P)||oe.push(Ue)}return oe}var Kc=YC(Aa),wC=YC(Gv,!0);function tJ(h,m){var I=!0;return Kc(h,function(P,V,X){return I=!!m(P,V,X),I}),I}function T6(h,m,I){for(var P=-1,V=h.length;++P<V;){var X=h[P],Y=m(X);if(Y!=null&&(Q===n?Y===Y&&!Co(Y):I(Y,Q)))var Q=Y,oe=X}return oe}function nJ(h,m,I,P){var V=h.length;for(I=Ut(I),I<0&&(I=-I>V?0:V+I),P=P===n||P>V?V:Ut(P),P<0&&(P+=V),P=I>P?0:$A(P);I<P;)h[I++]=m;return h}function IC(h,m){var I=[];return Kc(h,function(P,V,X){m(P,V,X)&&I.push(P)}),I}function ni(h,m,I,P,V){var X=-1,Y=h.length;for(I||(I=WJ),V||(V=[]);++X<Y;){var Q=h[X];m>0&&I(Q)?m>1?ni(Q,m-1,I,P,V):Os(V,Q):P||(V[V.length]=Q)}return V}var Wv=ZC(),TC=ZC(!0);function Aa(h,m){return h&&Wv(h,m,$r)}function Gv(h,m){return h&&TC(h,m,$r)}function x6(h,m){return Jo(m,function(I){return Pl(h[I])})}function Fd(h,m){m=Zc(m,h);for(var I=0,P=m.length;h!=null&&I<P;)h=h[Ra(m[I++])];return I&&I==P?h:n}function xC(h,m,I){var P=m(h);return ut(h)?P:Os(P,I(h))}function Ni(h){return h==null?h===n?yd:Yo:Ld&&Ld in vn(h)?FJ(h):qJ(h)}function Xv(h,m){return h>m}function rJ(h,m){return h!=null&&ln.call(h,m)}function iJ(h,m){return h!=null&&m in vn(h)}function oJ(h,m,I){return h>=pi(m,I)&&h<Cr(m,I)}function jv(h,m,I){for(var P=I?Wc:Rd,V=h[0].length,X=h.length,Y=X,Q=ce(X),oe=1/0,me=[];Y--;){var Ue=h[Y];Y&&m&&(Ue=yn(Ue,nn(m))),oe=pi(Ue.length,oe),Q[Y]=!I&&(m||V>=120&&Ue.length>=120)?new Nd(Y&&Ue):n}Ue=h[0];var ye=-1,Me=Q[0];e:for(;++ye<V&&me.length<oe;){var ze=Ue[ye],qe=m?m(ze):ze;if(ze=I||ze!==0?ze:0,!(Me?es(Me,qe):P(me,qe,I))){for(Y=X;--Y;){var bt=Q[Y];if(!(bt?es(bt,qe):P(h[Y],qe,I)))continue e}Me&&Me.push(qe),me.push(ze)}}return me}function sJ(h,m,I,P){return Aa(h,function(V,X,Y){m(P,I(V),X,Y)}),P}function tp(h,m,I){m=Zc(m,h),h=hA(h,m);var P=h==null?h:h[Ra(os(m))];return P==null?n:hi(P,h,I)}function SC(h){return Jn(h)&&Ni(h)==at}function aJ(h){return Jn(h)&&Ni(h)==ir}function lJ(h){return Jn(h)&&Ni(h)==Kt}function np(h,m,I,P,V){return h===m?!0:h==null||m==null||!Jn(h)&&!Jn(m)?h!==h&&m!==m:cJ(h,m,I,P,np,V)}function cJ(h,m,I,P,V,X){var Y=ut(h),Q=ut(m),oe=Y?gt:mi(h),me=Q?gt:mi(m);oe=oe==at?qn:oe,me=me==at?qn:me;var Ue=oe==qn,ye=me==qn,Me=oe==me;if(Me&&Qc(h)){if(!Qc(m))return!1;Y=!0,Ue=!1}if(Me&&!Ue)return X||(X=new $s),Y||s1(h)?sA(h,m,I,P,V,X):NJ(h,m,oe,I,P,V,X);if(!(I&U)){var ze=Ue&&ln.call(h,"__wrapped__"),qe=ye&&ln.call(m,"__wrapped__");if(ze||qe){var bt=ze?h.value():h,Qe=qe?m.value():m;return X||(X=new $s),V(bt,Qe,I,P,X)}}return Me?(X||(X=new $s),OJ(h,m,I,P,V,X)):!1}function uJ(h){return Jn(h)&&mi(h)==gr}function Kv(h,m,I,P){var V=I.length,X=V,Y=!P;if(h==null)return!X;for(h=vn(h);V--;){var Q=I[V];if(Y&&Q[2]?Q[1]!==h[Q[0]]:!(Q[0]in h))return!1}for(;++V<X;){Q=I[V];var oe=Q[0],me=h[oe],Ue=Q[1];if(Y&&Q[2]){if(me===n&&!(oe in h))return!1}else{var ye=new $s;if(P)var Me=P(me,Ue,oe,h,m,ye);if(!(Me===n?np(Ue,me,U|b,P,ye):Me))return!1}}return!0}function CC(h){if(!Hn(h)||XJ(h))return!1;var m=Pl(h)?uQ:BU;return m.test($d(h))}function dJ(h){return Jn(h)&&Ni(h)==Li}function fJ(h){return Jn(h)&&mi(h)==Jr}function hJ(h){return Jn(h)&&H6(h.length)&&!!Yt[Ni(h)]}function AC(h){return typeof h=="function"?h:h==null?ao:typeof h=="object"?ut(h)?PC(h[0],h[1]):RC(h):qA(h)}function Yv(h){if(!op(h))return mQ(h);var m=[];for(var I in vn(h))ln.call(h,I)&&I!="constructor"&&m.push(I);return m}function gJ(h){if(!Hn(h))return ZJ(h);var m=op(h),I=[];for(var P in h)P=="constructor"&&(m||!ln.call(h,P))||I.push(P);return I}function Zv(h,m){return h<m}function kC(h,m){var I=-1,P=oo(h)?ce(h.length):[];return Kc(h,function(V,X,Y){P[++I]=m(V,X,Y)}),P}function RC(h){var m=d7(h);return m.length==1&&m[0][2]?dA(m[0][0],m[0][1]):function(I){return I===h||Kv(I,h,m)}}function PC(h,m){return h7(h)&&uA(m)?dA(Ra(h),m):function(I){var P=w7(I,h);return P===n&&P===m?I7(I,h):np(m,P,U|b)}}function S6(h,m,I,P,V){h!==m&&Wv(m,function(X,Y){if(V||(V=new $s),Hn(X))pJ(h,m,Y,I,S6,P,V);else{var Q=P?P(p7(h,Y),X,Y+"",h,m,V):n;Q===n&&(Q=X),Vv(h,Y,Q)}},so)}function pJ(h,m,I,P,V,X,Y){var Q=p7(h,I),oe=p7(m,I),me=Y.get(oe);if(me){Vv(h,I,me);return}var Ue=X?X(Q,oe,I+"",h,m,Y):n,ye=Ue===n;if(ye){var Me=ut(oe),ze=!Me&&Qc(oe),qe=!Me&&!ze&&s1(oe);Ue=oe,Me||ze||qe?ut(Q)?Ue=Q:or(Q)?Ue=io(Q):ze?(ye=!1,Ue=WC(oe,!0)):qe?(ye=!1,Ue=GC(oe,!0)):Ue=[]:ap(oe)||zd(oe)?(Ue=Q,zd(Q)?Ue=zA(Q):(!Hn(Q)||Pl(Q))&&(Ue=cA(oe))):ye=!1}ye&&(Y.set(oe,Ue),V(Ue,oe,P,X,Y),Y.delete(oe)),Vv(h,I,Ue)}function MC(h,m){var I=h.length;if(I)return m+=m<0?I:0,Rl(m,I)?h[m]:n}function LC(h,m,I){m.length?m=yn(m,function(X){return ut(X)?function(Y){return Fd(Y,X.length===1?X[0]:X)}:X}):m=[ao];var P=-1;m=yn(m,nn(je()));var V=kC(h,function(X,Y,Q){var oe=yn(m,function(me){return me(X)});return{criteria:oe,index:++P,value:X}});return ue(V,function(X,Y){return CJ(X,Y,I)})}function mJ(h,m){return DC(h,m,function(I,P){return I7(h,P)})}function DC(h,m,I){for(var P=-1,V=m.length,X={};++P<V;){var Y=m[P],Q=Fd(h,Y);I(Q,Y)&&rp(X,Zc(Y,h),Q)}return X}function UJ(h){return function(m){return Fd(m,h)}}function qv(h,m,I,P){var V=P?Gc:Tl,X=-1,Y=m.length,Q=h;for(h===m&&(m=io(m)),I&&(Q=yn(h,nn(I)));++X<Y;)for(var oe=0,me=m[X],Ue=I?I(me):me;(oe=V(Q,Ue,oe,P))>-1;)Q!==h&&U6.call(Q,oe,1),U6.call(h,oe,1);return h}function NC(h,m){for(var I=h?m.length:0,P=I-1;I--;){var V=m[I];if(I==P||V!==X){var X=V;Rl(V)?U6.call(h,V,1):t7(h,V)}}return h}function Qv(h,m){return h+v6(mC()*(m-h+1))}function bJ(h,m,I,P){for(var V=-1,X=Cr(y6((m-h)/(I||1)),0),Y=ce(X);X--;)Y[P?X:++V]=h,h+=I;return Y}function Jv(h,m){var I="";if(!h||m<1||m>q)return I;do m%2&&(I+=h),m=v6(m/2),m&&(h+=h);while(m);return I}function yt(h,m){return m7(fA(h,m,ao),h+"")}function yJ(h){return yC(a1(h))}function vJ(h,m){var I=a1(h);return O6(I,Od(m,0,I.length))}function rp(h,m,I,P){if(!Hn(h))return h;m=Zc(m,h);for(var V=-1,X=m.length,Y=X-1,Q=h;Q!=null&&++V<X;){var oe=Ra(m[V]),me=I;if(oe==="__proto__"||oe==="constructor"||oe==="prototype")return h;if(V!=Y){var Ue=Q[oe];me=P?P(Ue,oe,Q):n,me===n&&(me=Hn(Ue)?Ue:Rl(m[V+1])?[]:{})}J0(Q,oe,me),Q=Q[oe]}return h}var OC=E6?function(h,m){return E6.set(h,m),h}:ao,EJ=b6?function(h,m){return b6(h,"toString",{configurable:!0,enumerable:!1,value:x7(m),writable:!0})}:ao;function _J(h){return O6(a1(h))}function is(h,m,I){var P=-1,V=h.length;m<0&&(m=-m>V?0:V+m),I=I>V?V:I,I<0&&(I+=V),V=m>I?0:I-m>>>0,m>>>=0;for(var X=ce(V);++P<V;)X[P]=h[P+m];return X}function wJ(h,m){var I;return Kc(h,function(P,V,X){return I=m(P,V,X),!I}),!!I}function C6(h,m,I){var P=0,V=h==null?P:h.length;if(typeof m=="number"&&m===m&&V<=Se){for(;P<V;){var X=P+V>>>1,Y=h[X];Y!==null&&!Co(Y)&&(I?Y<=m:Y<m)?P=X+1:V=X}return V}return e7(h,m,ao,I)}function e7(h,m,I,P){var V=0,X=h==null?0:h.length;if(X===0)return 0;m=I(m);for(var Y=m!==m,Q=m===null,oe=Co(m),me=m===n;V<X;){var Ue=v6((V+X)/2),ye=I(h[Ue]),Me=ye!==n,ze=ye===null,qe=ye===ye,bt=Co(ye);if(Y)var Qe=P||qe;else me?Qe=qe&&(P||Me):Q?Qe=qe&&Me&&(P||!ze):oe?Qe=qe&&Me&&!ze&&(P||!bt):ze||bt?Qe=!1:Qe=P?ye<=m:ye<m;Qe?V=Ue+1:X=Ue}return pi(X,Ie)}function FC(h,m){for(var I=-1,P=h.length,V=0,X=[];++I<P;){var Y=h[I],Q=m?m(Y):Y;if(!I||!zs(Q,oe)){var oe=Q;X[V++]=Y===0?0:Y}}return X}function BC(h){return typeof h=="number"?h:Co(h)?te:+h}function So(h){if(typeof h=="string")return h;if(ut(h))return yn(h,So)+"";if(Co(h))return UC?UC.call(h):"";var m=h+"";return m=="0"&&1/h==-ee?"-0":m}function Yc(h,m,I){var P=-1,V=Rd,X=h.length,Y=!0,Q=[],oe=Q;if(I)Y=!1,V=Wc;else if(X>=i){var me=m?null:LJ(h);if(me)return c6(me);Y=!1,V=es,oe=new Nd}else oe=m?[]:Q;e:for(;++P<X;){var Ue=h[P],ye=m?m(Ue):Ue;if(Ue=I||Ue!==0?Ue:0,Y&&ye===ye){for(var Me=oe.length;Me--;)if(oe[Me]===ye)continue e;m&&oe.push(ye),Q.push(Ue)}else V(oe,ye,I)||(oe!==Q&&oe.push(ye),Q.push(Ue))}return Q}function t7(h,m){return m=Zc(m,h),h=hA(h,m),h==null||delete h[Ra(os(m))]}function $C(h,m,I,P){return rp(h,m,I(Fd(h,m)),P)}function A6(h,m,I,P){for(var V=h.length,X=P?V:-1;(P?X--:++X<V)&&m(h[X],X,h););return I?is(h,P?0:X,P?X+1:V):is(h,P?X+1:0,P?V:X)}function zC(h,m){var I=h;return I instanceof wt&&(I=I.value()),Fs(m,function(P,V){return V.func.apply(V.thisArg,Os([P],V.args))},I)}function n7(h,m,I){var P=h.length;if(P<2)return P?Yc(h[0]):[];for(var V=-1,X=ce(P);++V<P;)for(var Y=h[V],Q=-1;++Q<P;)Q!=V&&(X[V]=ep(X[V]||Y,h[Q],m,I));return Yc(ni(X,1),m,I)}function VC(h,m,I){for(var P=-1,V=h.length,X=m.length,Y={};++P<V;){var Q=P<X?m[P]:n;I(Y,h[P],Q)}return Y}function r7(h){return or(h)?h:[]}function i7(h){return typeof h=="function"?h:ao}function Zc(h,m){return ut(h)?h:h7(h,m)?[h]:UA(rn(h))}var IJ=yt;function qc(h,m,I){var P=h.length;return I=I===n?P:I,!m&&I>=P?h:is(h,m,I)}var HC=dQ||function(h){return Qn.clearTimeout(h)};function WC(h,m){if(m)return h.slice();var I=h.length,P=dC?dC(I):new h.constructor(I);return h.copy(P),P}function o7(h){var m=new h.constructor(h.byteLength);return new p6(m).set(new p6(h)),m}function TJ(h,m){var I=m?o7(h.buffer):h.buffer;return new h.constructor(I,h.byteOffset,h.byteLength)}function xJ(h){var m=new h.constructor(h.source,wd.exec(h));return m.lastIndex=h.lastIndex,m}function SJ(h){return Q0?vn(Q0.call(h)):{}}function GC(h,m){var I=m?o7(h.buffer):h.buffer;return new h.constructor(I,h.byteOffset,h.length)}function XC(h,m){if(h!==m){var I=h!==n,P=h===null,V=h===h,X=Co(h),Y=m!==n,Q=m===null,oe=m===m,me=Co(m);if(!Q&&!me&&!X&&h>m||X&&Y&&oe&&!Q&&!me||P&&Y&&oe||!I&&oe||!V)return 1;if(!P&&!X&&!me&&h<m||me&&I&&V&&!P&&!X||Q&&I&&V||!Y&&V||!oe)return-1}return 0}function CJ(h,m,I){for(var P=-1,V=h.criteria,X=m.criteria,Y=V.length,Q=I.length;++P<Y;){var oe=XC(V[P],X[P]);if(oe){if(P>=Q)return oe;var me=I[P];return oe*(me=="desc"?-1:1)}}return h.index-m.index}function jC(h,m,I,P){for(var V=-1,X=h.length,Y=I.length,Q=-1,oe=m.length,me=Cr(X-Y,0),Ue=ce(oe+me),ye=!P;++Q<oe;)Ue[Q]=m[Q];for(;++V<Y;)(ye||V<X)&&(Ue[I[V]]=h[V]);for(;me--;)Ue[Q++]=h[V++];return Ue}function KC(h,m,I,P){for(var V=-1,X=h.length,Y=-1,Q=I.length,oe=-1,me=m.length,Ue=Cr(X-Q,0),ye=ce(Ue+me),Me=!P;++V<Ue;)ye[V]=h[V];for(var ze=V;++oe<me;)ye[ze+oe]=m[oe];for(;++Y<Q;)(Me||V<X)&&(ye[ze+I[Y]]=h[V++]);return ye}function io(h,m){var I=-1,P=h.length;for(m||(m=ce(P));++I<P;)m[I]=h[I];return m}function ka(h,m,I,P){var V=!I;I||(I={});for(var X=-1,Y=m.length;++X<Y;){var Q=m[X],oe=P?P(I[Q],h[Q],Q,I,h):n;oe===n&&(oe=h[Q]),V?Cl(I,Q,oe):J0(I,Q,oe)}return I}function AJ(h,m){return ka(h,f7(h),m)}function kJ(h,m){return ka(h,aA(h),m)}function k6(h,m){return function(I,P){var V=ut(I)?kd:QQ,X=m?m():{};return V(I,h,je(P,2),X)}}function r1(h){return yt(function(m,I){var P=-1,V=I.length,X=V>1?I[V-1]:n,Y=V>2?I[2]:n;for(X=h.length>3&&typeof X=="function"?(V--,X):n,Y&&Oi(I[0],I[1],Y)&&(X=V<3?n:X,V=1),m=vn(m);++P<V;){var Q=I[P];Q&&h(m,Q,P,X)}return m})}function YC(h,m){return function(I,P){if(I==null)return I;if(!oo(I))return h(I,P);for(var V=I.length,X=m?V:-1,Y=vn(I);(m?X--:++X<V)&&P(Y[X],X,Y)!==!1;);return I}}function ZC(h){return function(m,I,P){for(var V=-1,X=vn(m),Y=P(m),Q=Y.length;Q--;){var oe=Y[h?Q:++V];if(I(X[oe],oe,X)===!1)break}return m}}function RJ(h,m,I){var P=m&v,V=ip(h);function X(){var Y=this&&this!==Qn&&this instanceof X?V:h;return Y.apply(P?I:this,arguments)}return X}function qC(h){return function(m){m=rn(m);var I=Zh(m)?Bs(m):n,P=I?I[0]:m.charAt(0),V=I?qc(I,1).join(""):m.slice(1);return P[h]()+V}}function i1(h){return function(m){return Fs(YA(KA(m).replace(Rv,"")),h,"")}}function ip(h){return function(){var m=arguments;switch(m.length){case 0:return new h;case 1:return new h(m[0]);case 2:return new h(m[0],m[1]);case 3:return new h(m[0],m[1],m[2]);case 4:return new h(m[0],m[1],m[2],m[3]);case 5:return new h(m[0],m[1],m[2],m[3],m[4]);case 6:return new h(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new h(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var I=n1(h.prototype),P=h.apply(I,m);return Hn(P)?P:I}}function PJ(h,m,I){var P=ip(h);function V(){for(var X=arguments.length,Y=ce(X),Q=X,oe=o1(V);Q--;)Y[Q]=arguments[Q];var me=X<3&&Y[0]!==oe&&Y[X-1]!==oe?[]:Xc(Y,oe);if(X-=me.length,X<I)return nA(h,m,R6,V.placeholder,n,Y,me,n,n,I-X);var Ue=this&&this!==Qn&&this instanceof V?P:h;return hi(Ue,this,Y)}return V}function QC(h){return function(m,I,P){var V=vn(m);if(!oo(m)){var X=je(I,3);m=$r(m),I=function(Q){return X(V[Q],Q,V)}}var Y=h(m,I,P);return Y>-1?V[X?m[Y]:Y]:n}}function JC(h){return kl(function(m){var I=m.length,P=I,V=ns.prototype.thru;for(h&&m.reverse();P--;){var X=m[P];if(typeof X!="function")throw new ts(s);if(V&&!Y&&D6(X)=="wrapper")var Y=new ns([],!0)}for(P=Y?P:I;++P<I;){X=m[P];var Q=D6(X),oe=Q=="wrapper"?u7(X):n;oe&&g7(oe[0])&&oe[1]==(S|w|A|x)&&!oe[4].length&&oe[9]==1?Y=Y[D6(oe[0])].apply(Y,oe[3]):Y=X.length==1&&g7(X)?Y[Q]():Y.thru(X)}return function(){var me=arguments,Ue=me[0];if(Y&&me.length==1&&ut(Ue))return Y.plant(Ue).value();for(var ye=0,Me=I?m[ye].apply(this,me):Ue;++ye<I;)Me=m[ye].call(this,Me);return Me}})}function R6(h,m,I,P,V,X,Y,Q,oe,me){var Ue=m&S,ye=m&v,Me=m&_,ze=m&(w|T),qe=m&C,bt=Me?n:ip(h);function Qe(){for(var Et=arguments.length,Ct=ce(Et),Ao=Et;Ao--;)Ct[Ao]=arguments[Ao];if(ze)var Fi=o1(Qe),ko=j0(Ct,Fi);if(P&&(Ct=jC(Ct,P,V,ze)),X&&(Ct=KC(Ct,X,Y,ze)),Et-=ko,ze&&Et<me){var sr=Xc(Ct,Fi);return nA(h,m,R6,Qe.placeholder,I,Ct,sr,Q,oe,me-Et)}var Vs=ye?I:this,Ll=Me?Vs[h]:h;return Et=Ct.length,Q?Ct=QJ(Ct,Q):qe&&Et>1&&Ct.reverse(),Ue&&oe<Et&&(Ct.length=oe),this&&this!==Qn&&this instanceof Qe&&(Ll=bt||ip(Ll)),Ll.apply(Vs,Ct)}return Qe}function eA(h,m){return function(I,P){return sJ(I,h,m(P),{})}}function P6(h,m){return function(I,P){var V;if(I===n&&P===n)return m;if(I!==n&&(V=I),P!==n){if(V===n)return P;typeof I=="string"||typeof P=="string"?(I=So(I),P=So(P)):(I=BC(I),P=BC(P)),V=h(I,P)}return V}}function s7(h){return kl(function(m){return m=yn(m,nn(je())),yt(function(I){var P=this;return h(m,function(V){return hi(V,P,I)})})})}function M6(h,m){m=m===n?" ":So(m);var I=m.length;if(I<2)return I?Jv(m,h):m;var P=Jv(m,y6(h/qh(m)));return Zh(m)?qc(Bs(P),0,h).join(""):P.slice(0,h)}function MJ(h,m,I,P){var V=m&v,X=ip(h);function Y(){for(var Q=-1,oe=arguments.length,me=-1,Ue=P.length,ye=ce(Ue+oe),Me=this&&this!==Qn&&this instanceof Y?X:h;++me<Ue;)ye[me]=P[me];for(;oe--;)ye[me++]=arguments[++Q];return hi(Me,V?I:this,ye)}return Y}function tA(h){return function(m,I,P){return P&&typeof P!="number"&&Oi(m,I,P)&&(I=P=n),m=Ml(m),I===n?(I=m,m=0):I=Ml(I),P=P===n?m<I?1:-1:Ml(P),bJ(m,I,P,h)}}function L6(h){return function(m,I){return typeof m=="string"&&typeof I=="string"||(m=ss(m),I=ss(I)),h(m,I)}}function nA(h,m,I,P,V,X,Y,Q,oe,me){var Ue=m&w,ye=Ue?Y:n,Me=Ue?n:Y,ze=Ue?X:n,qe=Ue?n:X;m|=Ue?A:M,m&=~(Ue?M:A),m&E||(m&=~(v|_));var bt=[h,m,V,ze,ye,qe,Me,Q,oe,me],Qe=I.apply(n,bt);return g7(h)&&gA(Qe,bt),Qe.placeholder=P,pA(Qe,h,m)}function a7(h){var m=Sr[h];return function(I,P){if(I=ss(I),P=P==null?0:pi(Ut(P),292),P&&pC(I)){var V=(rn(I)+"e").split("e"),X=m(V[0]+"e"+(+V[1]+P));return V=(rn(X)+"e").split("e"),+(V[0]+"e"+(+V[1]-P))}return m(I)}}var LJ=e1&&1/c6(new e1([,-0]))[1]==ee?function(h){return new e1(h)}:A7;function rA(h){return function(m){var I=mi(m);return I==gr?Ov(m):I==Jr?qq(m):xr(m,h(m))}}function Al(h,m,I,P,V,X,Y,Q){var oe=m&_;if(!oe&&typeof h!="function")throw new ts(s);var me=P?P.length:0;if(me||(m&=~(A|M),P=V=n),Y=Y===n?Y:Cr(Ut(Y),0),Q=Q===n?Q:Ut(Q),me-=V?V.length:0,m&M){var Ue=P,ye=V;P=V=n}var Me=oe?n:u7(h),ze=[h,m,I,P,V,Ue,ye,X,Y,Q];if(Me&&YJ(ze,Me),h=ze[0],m=ze[1],I=ze[2],P=ze[3],V=ze[4],Q=ze[9]=ze[9]===n?oe?0:h.length:Cr(ze[9]-me,0),!Q&&m&(w|T)&&(m&=~(w|T)),!m||m==v)var qe=RJ(h,m,I);else m==w||m==T?qe=PJ(h,m,Q):(m==A||m==(v|A))&&!V.length?qe=MJ(h,m,I,P):qe=R6.apply(n,ze);var bt=Me?OC:gA;return pA(bt(qe,ze),h,m)}function iA(h,m,I,P){return h===n||zs(h,Jh[I])&&!ln.call(P,I)?m:h}function oA(h,m,I,P,V,X){return Hn(h)&&Hn(m)&&(X.set(m,h),S6(h,m,n,oA,X),X.delete(m)),h}function DJ(h){return ap(h)?n:h}function sA(h,m,I,P,V,X){var Y=I&U,Q=h.length,oe=m.length;if(Q!=oe&&!(Y&&oe>Q))return!1;var me=X.get(h),Ue=X.get(m);if(me&&Ue)return me==m&&Ue==h;var ye=-1,Me=!0,ze=I&b?new Nd:n;for(X.set(h,m),X.set(m,h);++ye<Q;){var qe=h[ye],bt=m[ye];if(P)var Qe=Y?P(bt,qe,ye,m,h,X):P(qe,bt,ye,h,m,X);if(Qe!==n){if(Qe)continue;Me=!1;break}if(ze){if(!Kh(m,function(Et,Ct){if(!es(ze,Ct)&&(qe===Et||V(qe,Et,I,P,X)))return ze.push(Ct)})){Me=!1;break}}else if(!(qe===bt||V(qe,bt,I,P,X))){Me=!1;break}}return X.delete(h),X.delete(m),Me}function NJ(h,m,I,P,V,X,Y){switch(I){case Ns:if(h.byteLength!=m.byteLength||h.byteOffset!=m.byteOffset)return!1;h=h.buffer,m=m.buffer;case ir:return!(h.byteLength!=m.byteLength||!X(new p6(h),new p6(m)));case tn:case Kt:case fi:return zs(+h,+m);case mt:return h.name==m.name&&h.message==m.message;case Li:case no:return h==m+"";case gr:var Q=Ov;case Jr:var oe=P&U;if(Q||(Q=c6),h.size!=m.size&&!oe)return!1;var me=Y.get(h);if(me)return me==m;P|=b,Y.set(h,m);var Ue=sA(Q(h),Q(m),P,V,X,Y);return Y.delete(h),Ue;case Ta:if(Q0)return Q0.call(h)==Q0.call(m)}return!1}function OJ(h,m,I,P,V,X){var Y=I&U,Q=l7(h),oe=Q.length,me=l7(m),Ue=me.length;if(oe!=Ue&&!Y)return!1;for(var ye=oe;ye--;){var Me=Q[ye];if(!(Y?Me in m:ln.call(m,Me)))return!1}var ze=X.get(h),qe=X.get(m);if(ze&&qe)return ze==m&&qe==h;var bt=!0;X.set(h,m),X.set(m,h);for(var Qe=Y;++ye<oe;){Me=Q[ye];var Et=h[Me],Ct=m[Me];if(P)var Ao=Y?P(Ct,Et,Me,m,h,X):P(Et,Ct,Me,h,m,X);if(!(Ao===n?Et===Ct||V(Et,Ct,I,P,X):Ao)){bt=!1;break}Qe||(Qe=Me=="constructor")}if(bt&&!Qe){var Fi=h.constructor,ko=m.constructor;Fi!=ko&&"constructor"in h&&"constructor"in m&&!(typeof Fi=="function"&&Fi instanceof Fi&&typeof ko=="function"&&ko instanceof ko)&&(bt=!1)}return X.delete(h),X.delete(m),bt}function kl(h){return m7(fA(h,n,EA),h+"")}function l7(h){return xC(h,$r,f7)}function c7(h){return xC(h,so,aA)}var u7=E6?function(h){return E6.get(h)}:A7;function D6(h){for(var m=h.name+"",I=t1[m],P=ln.call(t1,m)?I.length:0;P--;){var V=I[P],X=V.func;if(X==null||X==h)return V.name}return m}function o1(h){var m=ln.call(W,"placeholder")?W:h;return m.placeholder}function je(){var h=W.iteratee||S7;return h=h===S7?AC:h,arguments.length?h(arguments[0],arguments[1]):h}function N6(h,m){var I=h.__data__;return GJ(m)?I[typeof m=="string"?"string":"hash"]:I.map}function d7(h){for(var m=$r(h),I=m.length;I--;){var P=m[I],V=h[P];m[I]=[P,V,uA(V)]}return m}function Bd(h,m){var I=Kq(h,m);return CC(I)?I:n}function FJ(h){var m=ln.call(h,Ld),I=h[Ld];try{h[Ld]=n;var P=!0}catch{}var V=h6.call(h);return P&&(m?h[Ld]=I:delete h[Ld]),V}var f7=Bv?function(h){return h==null?[]:(h=vn(h),Jo(Bv(h),function(m){return hC.call(h,m)}))}:k7,aA=Bv?function(h){for(var m=[];h;)Os(m,f7(h)),h=m6(h);return m}:k7,mi=Ni;($v&&mi(new $v(new ArrayBuffer(1)))!=Ns||Y0&&mi(new Y0)!=gr||zv&&mi(zv.resolve())!=Ph||e1&&mi(new e1)!=Jr||Z0&&mi(new Z0)!=Oc)&&(mi=function(h){var m=Ni(h),I=m==qn?h.constructor:n,P=I?$d(I):"";if(P)switch(P){case vQ:return Ns;case EQ:return gr;case _Q:return Ph;case wQ:return Jr;case IQ:return Oc}return m});function BJ(h,m,I){for(var P=-1,V=I.length;++P<V;){var X=I[P],Y=X.size;switch(X.type){case"drop":h+=Y;break;case"dropRight":m-=Y;break;case"take":m=pi(m,h+Y);break;case"takeRight":h=Cr(h,m-Y);break}}return{start:h,end:m}}function $J(h){var m=h.match(Bc);return m?m[1].split(Tv):[]}function lA(h,m,I){m=Zc(m,h);for(var P=-1,V=m.length,X=!1;++P<V;){var Y=Ra(m[P]);if(!(X=h!=null&&I(h,Y)))break;h=h[Y]}return X||++P!=V?X:(V=h==null?0:h.length,!!V&&H6(V)&&Rl(Y,V)&&(ut(h)||zd(h)))}function zJ(h){var m=h.length,I=new h.constructor(m);return m&&typeof h[0]=="string"&&ln.call(h,"index")&&(I.index=h.index,I.input=h.input),I}function cA(h){return typeof h.constructor=="function"&&!op(h)?n1(m6(h)):{}}function VJ(h,m,I){var P=h.constructor;switch(m){case ir:return o7(h);case tn:case Kt:return new P(+h);case Ns:return TJ(h,I);case Mh:case Lh:case I0:case yl:case Dh:case Nh:case vd:case T0:case x0:return GC(h,I);case gr:return new P;case fi:case no:return new P(h);case Li:return xJ(h);case Jr:return new P;case Ta:return SJ(h)}}function HJ(h,m){var I=m.length;if(!I)return h;var P=I-1;return m[P]=(I>1?"& ":"")+m[P],m=m.join(I>2?", ":" "),h.replace(Iv,`{
/* [wrapped with `+m+`] */
`)}function WJ(h){return ut(h)||zd(h)||!!(gC&&h&&h[gC])}function Rl(h,m){var I=typeof h;return m=m??q,!!m&&(I=="number"||I!="symbol"&&P0.test(h))&&h>-1&&h%1==0&&h<m}function Oi(h,m,I){if(!Hn(I))return!1;var P=typeof m;return(P=="number"?oo(I)&&Rl(m,I.length):P=="string"&&m in I)?zs(I[m],h):!1}function h7(h,m){if(ut(h))return!1;var I=typeof h;return I=="number"||I=="symbol"||I=="boolean"||h==null||Co(h)?!0:NU.test(h)||!Ed.test(h)||m!=null&&h in vn(m)}function GJ(h){var m=typeof h;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?h!=="__proto__":h===null}function g7(h){var m=D6(h),I=W[m];if(typeof I!="function"||!(m in wt.prototype))return!1;if(h===I)return!0;var P=u7(I);return!!P&&h===P[0]}function XJ(h){return!!uC&&uC in h}var jJ=d6?Pl:R7;function op(h){var m=h&&h.constructor,I=typeof m=="function"&&m.prototype||Jh;return h===I}function uA(h){return h===h&&!Hn(h)}function dA(h,m){return function(I){return I==null?!1:I[h]===m&&(m!==n||h in vn(I))}}function KJ(h){var m=z6(h,function(P){return I.size===c&&I.clear(),P}),I=m.cache;return m}function YJ(h,m){var I=h[1],P=m[1],V=I|P,X=V<(v|_|S),Y=P==S&&I==w||P==S&&I==x&&h[7].length<=m[8]||P==(S|x)&&m[7].length<=m[8]&&I==w;if(!(X||Y))return h;P&v&&(h[2]=m[2],V|=I&v?0:E);var Q=m[3];if(Q){var oe=h[3];h[3]=oe?jC(oe,Q,m[4]):Q,h[4]=oe?Xc(h[3],u):m[4]}return Q=m[5],Q&&(oe=h[5],h[5]=oe?KC(oe,Q,m[6]):Q,h[6]=oe?Xc(h[5],u):m[6]),Q=m[7],Q&&(h[7]=Q),P&S&&(h[8]=h[8]==null?m[8]:pi(h[8],m[8])),h[9]==null&&(h[9]=m[9]),h[0]=m[0],h[1]=V,h}function ZJ(h){var m=[];if(h!=null)for(var I in vn(h))m.push(I);return m}function qJ(h){return h6.call(h)}function fA(h,m,I){return m=Cr(m===n?h.length-1:m,0),function(){for(var P=arguments,V=-1,X=Cr(P.length-m,0),Y=ce(X);++V<X;)Y[V]=P[m+V];V=-1;for(var Q=ce(m+1);++V<m;)Q[V]=P[V];return Q[m]=I(Y),hi(h,this,Q)}}function hA(h,m){return m.length<2?h:Fd(h,is(m,0,-1))}function QJ(h,m){for(var I=h.length,P=pi(m.length,I),V=io(h);P--;){var X=m[P];h[P]=Rl(X,I)?V[X]:n}return h}function p7(h,m){if(!(m==="constructor"&&typeof h[m]=="function")&&m!="__proto__")return h[m]}var gA=mA(OC),sp=hQ||function(h,m){return Qn.setTimeout(h,m)},m7=mA(EJ);function pA(h,m,I){var P=m+"";return m7(h,HJ(P,JJ($J(P),I)))}function mA(h){var m=0,I=0;return function(){var P=UQ(),V=N-(P-I);if(I=P,V>0){if(++m>=F)return arguments[0]}else m=0;return h.apply(n,arguments)}}function O6(h,m){var I=-1,P=h.length,V=P-1;for(m=m===n?P:m;++I<m;){var X=Qv(I,V),Y=h[X];h[X]=h[I],h[I]=Y}return h.length=m,h}var UA=KJ(function(h){var m=[];return h.charCodeAt(0)===46&&m.push(""),h.replace(ei,function(I,P,V,X){m.push(V?X.replace(OU,"$1"):P||I)}),m});function Ra(h){if(typeof h=="string"||Co(h))return h;var m=h+"";return m=="0"&&1/h==-ee?"-0":m}function $d(h){if(h!=null){try{return f6.call(h)}catch{}try{return h+""}catch{}}return""}function JJ(h,m){return Di(lt,function(I){var P="_."+I[0];m&I[1]&&!Rd(h,P)&&h.push(P)}),h.sort()}function bA(h){if(h instanceof wt)return h.clone();var m=new ns(h.__wrapped__,h.__chain__);return m.__actions__=io(h.__actions__),m.__index__=h.__index__,m.__values__=h.__values__,m}function eee(h,m,I){(I?Oi(h,m,I):m===n)?m=1:m=Cr(Ut(m),0);var P=h==null?0:h.length;if(!P||m<1)return[];for(var V=0,X=0,Y=ce(y6(P/m));V<P;)Y[X++]=is(h,V,V+=m);return Y}function tee(h){for(var m=-1,I=h==null?0:h.length,P=0,V=[];++m<I;){var X=h[m];X&&(V[P++]=X)}return V}function nee(){var h=arguments.length;if(!h)return[];for(var m=ce(h-1),I=arguments[0],P=h;P--;)m[P-1]=arguments[P];return Os(ut(I)?io(I):[I],ni(m,1))}var ree=yt(function(h,m){return or(h)?ep(h,ni(m,1,or,!0)):[]}),iee=yt(function(h,m){var I=os(m);return or(I)&&(I=n),or(h)?ep(h,ni(m,1,or,!0),je(I,2)):[]}),oee=yt(function(h,m){var I=os(m);return or(I)&&(I=n),or(h)?ep(h,ni(m,1,or,!0),n,I):[]});function see(h,m,I){var P=h==null?0:h.length;return P?(m=I||m===n?1:Ut(m),is(h,m<0?0:m,P)):[]}function aee(h,m,I){var P=h==null?0:h.length;return P?(m=I||m===n?1:Ut(m),m=P-m,is(h,0,m<0?0:m)):[]}function lee(h,m){return h&&h.length?A6(h,je(m,3),!0,!0):[]}function cee(h,m){return h&&h.length?A6(h,je(m,3),!0):[]}function uee(h,m,I,P){var V=h==null?0:h.length;return V?(I&&typeof I!="number"&&Oi(h,m,I)&&(I=0,P=V),nJ(h,m,I,P)):[]}function yA(h,m,I){var P=h==null?0:h.length;if(!P)return-1;var V=I==null?0:Ut(I);return V<0&&(V=Cr(P+V,0)),Pd(h,je(m,3),V)}function vA(h,m,I){var P=h==null?0:h.length;if(!P)return-1;var V=P-1;return I!==n&&(V=Ut(I),V=I<0?Cr(P+V,0):pi(V,P-1)),Pd(h,je(m,3),V,!0)}function EA(h){var m=h==null?0:h.length;return m?ni(h,1):[]}function dee(h){var m=h==null?0:h.length;return m?ni(h,ee):[]}function fee(h,m){var I=h==null?0:h.length;return I?(m=m===n?1:Ut(m),ni(h,m)):[]}function hee(h){for(var m=-1,I=h==null?0:h.length,P={};++m<I;){var V=h[m];P[V[0]]=V[1]}return P}function _A(h){return h&&h.length?h[0]:n}function gee(h,m,I){var P=h==null?0:h.length;if(!P)return-1;var V=I==null?0:Ut(I);return V<0&&(V=Cr(P+V,0)),Tl(h,m,V)}function pee(h){var m=h==null?0:h.length;return m?is(h,0,-1):[]}var mee=yt(function(h){var m=yn(h,r7);return m.length&&m[0]===h[0]?jv(m):[]}),Uee=yt(function(h){var m=os(h),I=yn(h,r7);return m===os(I)?m=n:I.pop(),I.length&&I[0]===h[0]?jv(I,je(m,2)):[]}),bee=yt(function(h){var m=os(h),I=yn(h,r7);return m=typeof m=="function"?m:n,m&&I.pop(),I.length&&I[0]===h[0]?jv(I,n,m):[]});function yee(h,m){return h==null?"":pQ.call(h,m)}function os(h){var m=h==null?0:h.length;return m?h[m-1]:n}function vee(h,m,I){var P=h==null?0:h.length;if(!P)return-1;var V=P;return I!==n&&(V=Ut(I),V=V<0?Cr(P+V,0):pi(V,P-1)),m===m?Jq(h,m,V):Pd(h,y,V,!0)}function Eee(h,m){return h&&h.length?MC(h,Ut(m)):n}var _ee=yt(wA);function wA(h,m){return h&&h.length&&m&&m.length?qv(h,m):h}function wee(h,m,I){return h&&h.length&&m&&m.length?qv(h,m,je(I,2)):h}function Iee(h,m,I){return h&&h.length&&m&&m.length?qv(h,m,n,I):h}var Tee=kl(function(h,m){var I=h==null?0:h.length,P=Hv(h,m);return NC(h,yn(m,function(V){return Rl(V,I)?+V:V}).sort(XC)),P});function xee(h,m){var I=[];if(!(h&&h.length))return I;var P=-1,V=[],X=h.length;for(m=je(m,3);++P<X;){var Y=h[P];m(Y,P,h)&&(I.push(Y),V.push(P))}return NC(h,V),I}function U7(h){return h==null?h:yQ.call(h)}function See(h,m,I){var P=h==null?0:h.length;return P?(I&&typeof I!="number"&&Oi(h,m,I)?(m=0,I=P):(m=m==null?0:Ut(m),I=I===n?P:Ut(I)),is(h,m,I)):[]}function Cee(h,m){return C6(h,m)}function Aee(h,m,I){return e7(h,m,je(I,2))}function kee(h,m){var I=h==null?0:h.length;if(I){var P=C6(h,m);if(P<I&&zs(h[P],m))return P}return-1}function Ree(h,m){return C6(h,m,!0)}function Pee(h,m,I){return e7(h,m,je(I,2),!0)}function Mee(h,m){var I=h==null?0:h.length;if(I){var P=C6(h,m,!0)-1;if(zs(h[P],m))return P}return-1}function Lee(h){return h&&h.length?FC(h):[]}function Dee(h,m){return h&&h.length?FC(h,je(m,2)):[]}function Nee(h){var m=h==null?0:h.length;return m?is(h,1,m):[]}function Oee(h,m,I){return h&&h.length?(m=I||m===n?1:Ut(m),is(h,0,m<0?0:m)):[]}function Fee(h,m,I){var P=h==null?0:h.length;return P?(m=I||m===n?1:Ut(m),m=P-m,is(h,m<0?0:m,P)):[]}function Bee(h,m){return h&&h.length?A6(h,je(m,3),!1,!0):[]}function $ee(h,m){return h&&h.length?A6(h,je(m,3)):[]}var zee=yt(function(h){return Yc(ni(h,1,or,!0))}),Vee=yt(function(h){var m=os(h);return or(m)&&(m=n),Yc(ni(h,1,or,!0),je(m,2))}),Hee=yt(function(h){var m=os(h);return m=typeof m=="function"?m:n,Yc(ni(h,1,or,!0),n,m)});function Wee(h){return h&&h.length?Yc(h):[]}function Gee(h,m){return h&&h.length?Yc(h,je(m,2)):[]}function Xee(h,m){return m=typeof m=="function"?m:n,h&&h.length?Yc(h,n,m):[]}function b7(h){if(!(h&&h.length))return[];var m=0;return h=Jo(h,function(I){if(or(I))return m=Cr(I.length,m),!0}),Zt(m,function(I){return yn(h,$(I))})}function IA(h,m){if(!(h&&h.length))return[];var I=b7(h);return m==null?I:yn(I,function(P){return hi(m,n,P)})}var jee=yt(function(h,m){return or(h)?ep(h,m):[]}),Kee=yt(function(h){return n7(Jo(h,or))}),Yee=yt(function(h){var m=os(h);return or(m)&&(m=n),n7(Jo(h,or),je(m,2))}),Zee=yt(function(h){var m=os(h);return m=typeof m=="function"?m:n,n7(Jo(h,or),n,m)}),qee=yt(b7);function Qee(h,m){return VC(h||[],m||[],J0)}function Jee(h,m){return VC(h||[],m||[],rp)}var ete=yt(function(h){var m=h.length,I=m>1?h[m-1]:n;return I=typeof I=="function"?(h.pop(),I):n,IA(h,I)});function TA(h){var m=W(h);return m.__chain__=!0,m}function tte(h,m){return m(h),h}function F6(h,m){return m(h)}var nte=kl(function(h){var m=h.length,I=m?h[0]:0,P=this.__wrapped__,V=function(X){return Hv(X,h)};return m>1||this.__actions__.length||!(P instanceof wt)||!Rl(I)?this.thru(V):(P=P.slice(I,+I+(m?1:0)),P.__actions__.push({func:F6,args:[V],thisArg:n}),new ns(P,this.__chain__).thru(function(X){return m&&!X.length&&X.push(n),X}))});function rte(){return TA(this)}function ite(){return new ns(this.value(),this.__chain__)}function ote(){this.__values__===n&&(this.__values__=BA(this.value()));var h=this.__index__>=this.__values__.length,m=h?n:this.__values__[this.__index__++];return{done:h,value:m}}function ste(){return this}function ate(h){for(var m,I=this;I instanceof w6;){var P=bA(I);P.__index__=0,P.__values__=n,m?V.__wrapped__=P:m=P;var V=P;I=I.__wrapped__}return V.__wrapped__=h,m}function lte(){var h=this.__wrapped__;if(h instanceof wt){var m=h;return this.__actions__.length&&(m=new wt(this)),m=m.reverse(),m.__actions__.push({func:F6,args:[U7],thisArg:n}),new ns(m,this.__chain__)}return this.thru(U7)}function cte(){return zC(this.__wrapped__,this.__actions__)}var ute=k6(function(h,m,I){ln.call(h,I)?++h[I]:Cl(h,I,1)});function dte(h,m,I){var P=ut(h)?jh:tJ;return I&&Oi(h,m,I)&&(m=n),P(h,je(m,3))}function fte(h,m){var I=ut(h)?Jo:IC;return I(h,je(m,3))}var hte=QC(yA),gte=QC(vA);function pte(h,m){return ni(B6(h,m),1)}function mte(h,m){return ni(B6(h,m),ee)}function Ute(h,m,I){return I=I===n?1:Ut(I),ni(B6(h,m),I)}function xA(h,m){var I=ut(h)?Di:Kc;return I(h,je(m,3))}function SA(h,m){var I=ut(h)?o6:wC;return I(h,je(m,3))}var bte=k6(function(h,m,I){ln.call(h,I)?h[I].push(m):Cl(h,I,[m])});function yte(h,m,I,P){h=oo(h)?h:a1(h),I=I&&!P?Ut(I):0;var V=h.length;return I<0&&(I=Cr(V+I,0)),W6(h)?I<=V&&h.indexOf(m,I)>-1:!!V&&Tl(h,m,I)>-1}var vte=yt(function(h,m,I){var P=-1,V=typeof m=="function",X=oo(h)?ce(h.length):[];return Kc(h,function(Y){X[++P]=V?hi(m,Y,I):tp(Y,m,I)}),X}),Ete=k6(function(h,m,I){Cl(h,I,m)});function B6(h,m){var I=ut(h)?yn:kC;return I(h,je(m,3))}function _te(h,m,I,P){return h==null?[]:(ut(m)||(m=m==null?[]:[m]),I=P?n:I,ut(I)||(I=I==null?[]:[I]),LC(h,m,I))}var wte=k6(function(h,m,I){h[I?0:1].push(m)},function(){return[[],[]]});function Ite(h,m,I){var P=ut(h)?Fs:se,V=arguments.length<3;return P(h,je(m,4),I,V,Kc)}function Tte(h,m,I){var P=ut(h)?s6:se,V=arguments.length<3;return P(h,je(m,4),I,V,wC)}function xte(h,m){var I=ut(h)?Jo:IC;return I(h,V6(je(m,3)))}function Ste(h){var m=ut(h)?yC:yJ;return m(h)}function Cte(h,m,I){(I?Oi(h,m,I):m===n)?m=1:m=Ut(m);var P=ut(h)?ZQ:vJ;return P(h,m)}function Ate(h){var m=ut(h)?qQ:_J;return m(h)}function kte(h){if(h==null)return 0;if(oo(h))return W6(h)?qh(h):h.length;var m=mi(h);return m==gr||m==Jr?h.size:Yv(h).length}function Rte(h,m,I){var P=ut(h)?Kh:wJ;return I&&Oi(h,m,I)&&(m=n),P(h,je(m,3))}var Pte=yt(function(h,m){if(h==null)return[];var I=m.length;return I>1&&Oi(h,m[0],m[1])?m=[]:I>2&&Oi(m[0],m[1],m[2])&&(m=[m[0]]),LC(h,ni(m,1),[])}),$6=fQ||function(){return Qn.Date.now()};function Mte(h,m){if(typeof m!="function")throw new ts(s);return h=Ut(h),function(){if(--h<1)return m.apply(this,arguments)}}function CA(h,m,I){return m=I?n:m,m=h&&m==null?h.length:m,Al(h,S,n,n,n,n,m)}function AA(h,m){var I;if(typeof m!="function")throw new ts(s);return h=Ut(h),function(){return--h>0&&(I=m.apply(this,arguments)),h<=1&&(m=n),I}}var y7=yt(function(h,m,I){var P=v;if(I.length){var V=Xc(I,o1(y7));P|=A}return Al(h,P,m,I,V)}),kA=yt(function(h,m,I){var P=v|_;if(I.length){var V=Xc(I,o1(kA));P|=A}return Al(m,P,h,I,V)});function RA(h,m,I){m=I?n:m;var P=Al(h,w,n,n,n,n,n,m);return P.placeholder=RA.placeholder,P}function PA(h,m,I){m=I?n:m;var P=Al(h,T,n,n,n,n,n,m);return P.placeholder=PA.placeholder,P}function MA(h,m,I){var P,V,X,Y,Q,oe,me=0,Ue=!1,ye=!1,Me=!0;if(typeof h!="function")throw new ts(s);m=ss(m)||0,Hn(I)&&(Ue=!!I.leading,ye="maxWait"in I,X=ye?Cr(ss(I.maxWait)||0,m):X,Me="trailing"in I?!!I.trailing:Me);function ze(sr){var Vs=P,Ll=V;return P=V=n,me=sr,Y=h.apply(Ll,Vs),Y}function qe(sr){return me=sr,Q=sp(Et,m),Ue?ze(sr):Y}function bt(sr){var Vs=sr-oe,Ll=sr-me,QA=m-Vs;return ye?pi(QA,X-Ll):QA}function Qe(sr){var Vs=sr-oe,Ll=sr-me;return oe===n||Vs>=m||Vs<0||ye&&Ll>=X}function Et(){var sr=$6();if(Qe(sr))return Ct(sr);Q=sp(Et,bt(sr))}function Ct(sr){return Q=n,Me&&P?ze(sr):(P=V=n,Y)}function Ao(){Q!==n&&HC(Q),me=0,P=oe=V=Q=n}function Fi(){return Q===n?Y:Ct($6())}function ko(){var sr=$6(),Vs=Qe(sr);if(P=arguments,V=this,oe=sr,Vs){if(Q===n)return qe(oe);if(ye)return HC(Q),Q=sp(Et,m),ze(oe)}return Q===n&&(Q=sp(Et,m)),Y}return ko.cancel=Ao,ko.flush=Fi,ko}var Lte=yt(function(h,m){return _C(h,1,m)}),Dte=yt(function(h,m,I){return _C(h,ss(m)||0,I)});function Nte(h){return Al(h,C)}function z6(h,m){if(typeof h!="function"||m!=null&&typeof m!="function")throw new ts(s);var I=function(){var P=arguments,V=m?m.apply(this,P):P[0],X=I.cache;if(X.has(V))return X.get(V);var Y=h.apply(this,P);return I.cache=X.set(V,Y)||X,Y};return I.cache=new(z6.Cache||Sl),I}z6.Cache=Sl;function V6(h){if(typeof h!="function")throw new ts(s);return function(){var m=arguments;switch(m.length){case 0:return!h.call(this);case 1:return!h.call(this,m[0]);case 2:return!h.call(this,m[0],m[1]);case 3:return!h.call(this,m[0],m[1],m[2])}return!h.apply(this,m)}}function Ote(h){return AA(2,h)}var Fte=IJ(function(h,m){m=m.length==1&&ut(m[0])?yn(m[0],nn(je())):yn(ni(m,1),nn(je()));var I=m.length;return yt(function(P){for(var V=-1,X=pi(P.length,I);++V<X;)P[V]=m[V].call(this,P[V]);return hi(h,this,P)})}),v7=yt(function(h,m){var I=Xc(m,o1(v7));return Al(h,A,n,m,I)}),LA=yt(function(h,m){var I=Xc(m,o1(LA));return Al(h,M,n,m,I)}),Bte=kl(function(h,m){return Al(h,x,n,n,n,m)});function $te(h,m){if(typeof h!="function")throw new ts(s);return m=m===n?m:Ut(m),yt(h,m)}function zte(h,m){if(typeof h!="function")throw new ts(s);return m=m==null?0:Cr(Ut(m),0),yt(function(I){var P=I[m],V=qc(I,0,m);return P&&Os(V,P),hi(h,this,V)})}function Vte(h,m,I){var P=!0,V=!0;if(typeof h!="function")throw new ts(s);return Hn(I)&&(P="leading"in I?!!I.leading:P,V="trailing"in I?!!I.trailing:V),MA(h,m,{leading:P,maxWait:m,trailing:V})}function Hte(h){return CA(h,1)}function Wte(h,m){return v7(i7(m),h)}function Gte(){if(!arguments.length)return[];var h=arguments[0];return ut(h)?h:[h]}function Xte(h){return rs(h,g)}function jte(h,m){return m=typeof m=="function"?m:n,rs(h,g,m)}function Kte(h){return rs(h,d|g)}function Yte(h,m){return m=typeof m=="function"?m:n,rs(h,d|g,m)}function Zte(h,m){return m==null||EC(h,m,$r(m))}function zs(h,m){return h===m||h!==h&&m!==m}var qte=L6(Xv),Qte=L6(function(h,m){return h>=m}),zd=SC(function(){return arguments}())?SC:function(h){return Jn(h)&&ln.call(h,"callee")&&!hC.call(h,"callee")},ut=ce.isArray,Jte=G0?nn(G0):aJ;function oo(h){return h!=null&&H6(h.length)&&!Pl(h)}function or(h){return Jn(h)&&oo(h)}function ene(h){return h===!0||h===!1||Jn(h)&&Ni(h)==tn}var Qc=gQ||R7,tne=Xh?nn(Xh):lJ;function nne(h){return Jn(h)&&h.nodeType===1&&!ap(h)}function rne(h){if(h==null)return!0;if(oo(h)&&(ut(h)||typeof h=="string"||typeof h.splice=="function"||Qc(h)||s1(h)||zd(h)))return!h.length;var m=mi(h);if(m==gr||m==Jr)return!h.size;if(op(h))return!Yv(h).length;for(var I in h)if(ln.call(h,I))return!1;return!0}function ine(h,m){return np(h,m)}function one(h,m,I){I=typeof I=="function"?I:n;var P=I?I(h,m):n;return P===n?np(h,m,n,I):!!P}function E7(h){if(!Jn(h))return!1;var m=Ni(h);return m==mt||m==pt||typeof h.message=="string"&&typeof h.name=="string"&&!ap(h)}function sne(h){return typeof h=="number"&&pC(h)}function Pl(h){if(!Hn(h))return!1;var m=Ni(h);return m==Ot||m==Ia||m==ht||m==Ds}function DA(h){return typeof h=="number"&&h==Ut(h)}function H6(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=q}function Hn(h){var m=typeof h;return h!=null&&(m=="object"||m=="function")}function Jn(h){return h!=null&&typeof h=="object"}var NA=Cd?nn(Cd):uJ;function ane(h,m){return h===m||Kv(h,m,d7(m))}function lne(h,m,I){return I=typeof I=="function"?I:n,Kv(h,m,d7(m),I)}function cne(h){return OA(h)&&h!=+h}function une(h){if(jJ(h))throw new ct(o);return CC(h)}function dne(h){return h===null}function fne(h){return h==null}function OA(h){return typeof h=="number"||Jn(h)&&Ni(h)==fi}function ap(h){if(!Jn(h)||Ni(h)!=qn)return!1;var m=m6(h);if(m===null)return!0;var I=ln.call(m,"constructor")&&m.constructor;return typeof I=="function"&&I instanceof I&&f6.call(I)==lQ}var _7=X0?nn(X0):dJ;function hne(h){return DA(h)&&h>=-q&&h<=q}var FA=Ad?nn(Ad):fJ;function W6(h){return typeof h=="string"||!ut(h)&&Jn(h)&&Ni(h)==no}function Co(h){return typeof h=="symbol"||Jn(h)&&Ni(h)==Ta}var s1=i6?nn(i6):hJ;function gne(h){return h===n}function pne(h){return Jn(h)&&mi(h)==Oc}function mne(h){return Jn(h)&&Ni(h)==Fr}var Une=L6(Zv),bne=L6(function(h,m){return h<=m});function BA(h){if(!h)return[];if(oo(h))return W6(h)?Bs(h):io(h);if(K0&&h[K0])return Zq(h[K0]());var m=mi(h),I=m==gr?Ov:m==Jr?c6:a1;return I(h)}function Ml(h){if(!h)return h===0?h:0;if(h=ss(h),h===ee||h===-ee){var m=h<0?-1:1;return m*Z}return h===h?h:0}function Ut(h){var m=Ml(h),I=m%1;return m===m?I?m-I:m:0}function $A(h){return h?Od(Ut(h),0,pe):0}function ss(h){if(typeof h=="number")return h;if(Co(h))return te;if(Hn(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=Hn(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=St(h);var I=FU.test(h);return I||R0.test(h)?n6(h.slice(2),I?2:8):xa.test(h)?te:+h}function zA(h){return ka(h,so(h))}function yne(h){return h?Od(Ut(h),-q,q):h===0?h:0}function rn(h){return h==null?"":So(h)}var vne=r1(function(h,m){if(op(m)||oo(m)){ka(m,$r(m),h);return}for(var I in m)ln.call(m,I)&&J0(h,I,m[I])}),VA=r1(function(h,m){ka(m,so(m),h)}),G6=r1(function(h,m,I,P){ka(m,so(m),h,P)}),Ene=r1(function(h,m,I,P){ka(m,$r(m),h,P)}),_ne=kl(Hv);function wne(h,m){var I=n1(h);return m==null?I:vC(I,m)}var Ine=yt(function(h,m){h=vn(h);var I=-1,P=m.length,V=P>2?m[2]:n;for(V&&Oi(m[0],m[1],V)&&(P=1);++I<P;)for(var X=m[I],Y=so(X),Q=-1,oe=Y.length;++Q<oe;){var me=Y[Q],Ue=h[me];(Ue===n||zs(Ue,Jh[me])&&!ln.call(h,me))&&(h[me]=X[me])}return h}),Tne=yt(function(h){return h.push(n,oA),hi(HA,n,h)});function xne(h,m){return gi(h,je(m,3),Aa)}function Sne(h,m){return gi(h,je(m,3),Gv)}function Cne(h,m){return h==null?h:Wv(h,je(m,3),so)}function Ane(h,m){return h==null?h:TC(h,je(m,3),so)}function kne(h,m){return h&&Aa(h,je(m,3))}function Rne(h,m){return h&&Gv(h,je(m,3))}function Pne(h){return h==null?[]:x6(h,$r(h))}function Mne(h){return h==null?[]:x6(h,so(h))}function w7(h,m,I){var P=h==null?n:Fd(h,m);return P===n?I:P}function Lne(h,m){return h!=null&&lA(h,m,rJ)}function I7(h,m){return h!=null&&lA(h,m,iJ)}var Dne=eA(function(h,m,I){m!=null&&typeof m.toString!="function"&&(m=h6.call(m)),h[m]=I},x7(ao)),Nne=eA(function(h,m,I){m!=null&&typeof m.toString!="function"&&(m=h6.call(m)),ln.call(h,m)?h[m].push(I):h[m]=[I]},je),One=yt(tp);function $r(h){return oo(h)?bC(h):Yv(h)}function so(h){return oo(h)?bC(h,!0):gJ(h)}function Fne(h,m){var I={};return m=je(m,3),Aa(h,function(P,V,X){Cl(I,m(P,V,X),P)}),I}function Bne(h,m){var I={};return m=je(m,3),Aa(h,function(P,V,X){Cl(I,V,m(P,V,X))}),I}var $ne=r1(function(h,m,I){S6(h,m,I)}),HA=r1(function(h,m,I,P){S6(h,m,I,P)}),zne=kl(function(h,m){var I={};if(h==null)return I;var P=!1;m=yn(m,function(X){return X=Zc(X,h),P||(P=X.length>1),X}),ka(h,c7(h),I),P&&(I=rs(I,d|f|g,DJ));for(var V=m.length;V--;)t7(I,m[V]);return I});function Vne(h,m){return WA(h,V6(je(m)))}var Hne=kl(function(h,m){return h==null?{}:mJ(h,m)});function WA(h,m){if(h==null)return{};var I=yn(c7(h),function(P){return[P]});return m=je(m),DC(h,I,function(P,V){return m(P,V[0])})}function Wne(h,m,I){m=Zc(m,h);var P=-1,V=m.length;for(V||(V=1,h=n);++P<V;){var X=h==null?n:h[Ra(m[P])];X===n&&(P=V,X=I),h=Pl(X)?X.call(h):X}return h}function Gne(h,m,I){return h==null?h:rp(h,m,I)}function Xne(h,m,I,P){return P=typeof P=="function"?P:n,h==null?h:rp(h,m,I,P)}var GA=rA($r),XA=rA(so);function jne(h,m,I){var P=ut(h),V=P||Qc(h)||s1(h);if(m=je(m,4),I==null){var X=h&&h.constructor;V?I=P?new X:[]:Hn(h)?I=Pl(X)?n1(m6(h)):{}:I={}}return(V?Di:Aa)(h,function(Y,Q,oe){return m(I,Y,Q,oe)}),I}function Kne(h,m){return h==null?!0:t7(h,m)}function Yne(h,m,I){return h==null?h:$C(h,m,i7(I))}function Zne(h,m,I,P){return P=typeof P=="function"?P:n,h==null?h:$C(h,m,i7(I),P)}function a1(h){return h==null?[]:pr(h,$r(h))}function qne(h){return h==null?[]:pr(h,so(h))}function Qne(h,m,I){return I===n&&(I=m,m=n),I!==n&&(I=ss(I),I=I===I?I:0),m!==n&&(m=ss(m),m=m===m?m:0),Od(ss(h),m,I)}function Jne(h,m,I){return m=Ml(m),I===n?(I=m,m=0):I=Ml(I),h=ss(h),oJ(h,m,I)}function ere(h,m,I){if(I&&typeof I!="boolean"&&Oi(h,m,I)&&(m=I=n),I===n&&(typeof m=="boolean"?(I=m,m=n):typeof h=="boolean"&&(I=h,h=n)),h===n&&m===n?(h=0,m=1):(h=Ml(h),m===n?(m=h,h=0):m=Ml(m)),h>m){var P=h;h=m,m=P}if(I||h%1||m%1){var V=mC();return pi(h+V*(m-h+Nv("1e-"+((V+"").length-1))),m)}return Qv(h,m)}var tre=i1(function(h,m,I){return m=m.toLowerCase(),h+(I?jA(m):m)});function jA(h){return T7(rn(h).toLowerCase())}function KA(h){return h=rn(h),h&&h.replace($U,Gq).replace(Pv,"")}function nre(h,m,I){h=rn(h),m=So(m);var P=h.length;I=I===n?P:Od(Ut(I),0,P);var V=I;return I-=m.length,I>=0&&h.slice(I,V)==m}function rre(h){return h=rn(h),h&&vl.test(h)?h.replace(Oh,Xq):h}function ire(h){return h=rn(h),h&&_d.test(h)?h.replace(Bh,"\\$&"):h}var ore=i1(function(h,m,I){return h+(I?"-":"")+m.toLowerCase()}),sre=i1(function(h,m,I){return h+(I?" ":"")+m.toLowerCase()}),are=qC("toLowerCase");function lre(h,m,I){h=rn(h),m=Ut(m);var P=m?qh(h):0;if(!m||P>=m)return h;var V=(m-P)/2;return M6(v6(V),I)+h+M6(y6(V),I)}function cre(h,m,I){h=rn(h),m=Ut(m);var P=m?qh(h):0;return m&&P<m?h+M6(m-P,I):h}function ure(h,m,I){h=rn(h),m=Ut(m);var P=m?qh(h):0;return m&&P<m?M6(m-P,I)+h:h}function dre(h,m,I){return I||m==null?m=0:m&&(m=+m),bQ(rn(h).replace(El,""),m||0)}function fre(h,m,I){return(I?Oi(h,m,I):m===n)?m=1:m=Ut(m),Jv(rn(h),m)}function hre(){var h=arguments,m=rn(h[0]);return h.length<3?m:m.replace(h[1],h[2])}var gre=i1(function(h,m,I){return h+(I?"_":"")+m.toLowerCase()});function pre(h,m,I){return I&&typeof I!="number"&&Oi(h,m,I)&&(m=I=n),I=I===n?pe:I>>>0,I?(h=rn(h),h&&(typeof m=="string"||m!=null&&!_7(m))&&(m=So(m),!m&&Zh(h))?qc(Bs(h),0,I):h.split(m,I)):[]}var mre=i1(function(h,m,I){return h+(I?" ":"")+T7(m)});function Ure(h,m,I){return h=rn(h),I=I==null?0:Od(Ut(I),0,h.length),m=So(m),h.slice(I,I+m.length)==m}function bre(h,m,I){var P=W.templateSettings;I&&Oi(h,m,I)&&(m=n),h=rn(h),m=G6({},m,P,iA);var V=G6({},m.imports,P.imports,iA),X=$r(V),Y=pr(V,X),Q,oe,me=0,Ue=m.interpolate||Id,ye="__p += '",Me=Fv((m.escape||Id).source+"|"+Ue.source+"|"+(Ue===A0?k0:Id).source+"|"+(m.evaluate||Id).source+"|$","g"),ze="//# sourceURL="+(ln.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++e6+"]")+`
`;h.replace(Me,function(Qe,Et,Ct,Ao,Fi,ko){return Ct||(Ct=Ao),ye+=h.slice(me,ko).replace(Sv,jq),Et&&(Q=!0,ye+=`' +
__e(`+Et+`) +
'`),Fi&&(oe=!0,ye+=`';
`+Fi+`;
__p += '`),Ct&&(ye+=`' +
((__t = (`+Ct+`)) == null ? '' : __t) +
'`),me=ko+Qe.length,Qe}),ye+=`';
`;var qe=ln.call(m,"variable")&&m.variable;if(!qe)ye=`with (obj) {
`+ye+`
}
`;else if($h.test(qe))throw new ct(a);ye=(oe?ye.replace(S0,""):ye).replace(MU,"$1").replace(LU,"$1;"),ye="function("+(qe||"obj")+`) {
`+(qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Q?", __e = _.escape":"")+(oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ye+`return __p
}`;var bt=ZA(function(){return qt(X,ze+"return "+ye).apply(n,Y)});if(bt.source=ye,E7(bt))throw bt;return bt}function yre(h){return rn(h).toLowerCase()}function vre(h){return rn(h).toUpperCase()}function Ere(h,m,I){if(h=rn(h),h&&(I||m===n))return St(h);if(!h||!(m=So(m)))return h;var P=Bs(h),V=Bs(m),X=ro(P,V),Y=Md(P,V)+1;return qc(P,X,Y).join("")}function _re(h,m,I){if(h=rn(h),h&&(I||m===n))return h.slice(0,cC(h)+1);if(!h||!(m=So(m)))return h;var P=Bs(h),V=Md(P,Bs(m))+1;return qc(P,0,V).join("")}function wre(h,m,I){if(h=rn(h),h&&(I||m===n))return h.replace(El,"");if(!h||!(m=So(m)))return h;var P=Bs(h),V=ro(P,Bs(m));return qc(P,V).join("")}function Ire(h,m){var I=R,P=O;if(Hn(m)){var V="separator"in m?m.separator:V;I="length"in m?Ut(m.length):I,P="omission"in m?So(m.omission):P}h=rn(h);var X=h.length;if(Zh(h)){var Y=Bs(h);X=Y.length}if(I>=X)return h;var Q=I-qh(P);if(Q<1)return P;var oe=Y?qc(Y,0,Q).join(""):h.slice(0,Q);if(V===n)return oe+P;if(Y&&(Q+=oe.length-Q),_7(V)){if(h.slice(Q).search(V)){var me,Ue=oe;for(V.global||(V=Fv(V.source,rn(wd.exec(V))+"g")),V.lastIndex=0;me=V.exec(Ue);)var ye=me.index;oe=oe.slice(0,ye===n?Q:ye)}}else if(h.indexOf(So(V),Q)!=Q){var Me=oe.lastIndexOf(V);Me>-1&&(oe=oe.slice(0,Me))}return oe+P}function Tre(h){return h=rn(h),h&&C0.test(h)?h.replace(Fc,eQ):h}var xre=i1(function(h,m,I){return h+(I?" ":"")+m.toUpperCase()}),T7=qC("toUpperCase");function YA(h,m,I){return h=rn(h),m=I?n:m,m===n?Yq(h)?rQ(h):Yh(h):h.match(m)||[]}var ZA=yt(function(h,m){try{return hi(h,n,m)}catch(I){return E7(I)?I:new ct(I)}}),Sre=kl(function(h,m){return Di(m,function(I){I=Ra(I),Cl(h,I,y7(h[I],h))}),h});function Cre(h){var m=h==null?0:h.length,I=je();return h=m?yn(h,function(P){if(typeof P[1]!="function")throw new ts(s);return[I(P[0]),P[1]]}):[],yt(function(P){for(var V=-1;++V<m;){var X=h[V];if(hi(X[0],this,P))return hi(X[1],this,P)}})}function Are(h){return eJ(rs(h,d))}function x7(h){return function(){return h}}function kre(h,m){return h==null||h!==h?m:h}var Rre=JC(),Pre=JC(!0);function ao(h){return h}function S7(h){return AC(typeof h=="function"?h:rs(h,d))}function Mre(h){return RC(rs(h,d))}function Lre(h,m){return PC(h,rs(m,d))}var Dre=yt(function(h,m){return function(I){return tp(I,h,m)}}),Nre=yt(function(h,m){return function(I){return tp(h,I,m)}});function C7(h,m,I){var P=$r(m),V=x6(m,P);I==null&&!(Hn(m)&&(V.length||!P.length))&&(I=m,m=h,h=this,V=x6(m,$r(m)));var X=!(Hn(I)&&"chain"in I)||!!I.chain,Y=Pl(h);return Di(V,function(Q){var oe=m[Q];h[Q]=oe,Y&&(h.prototype[Q]=function(){var me=this.__chain__;if(X||me){var Ue=h(this.__wrapped__),ye=Ue.__actions__=io(this.__actions__);return ye.push({func:oe,args:arguments,thisArg:h}),Ue.__chain__=me,Ue}return oe.apply(h,Os([this.value()],arguments))})}),h}function Ore(){return Qn._===this&&(Qn._=cQ),this}function A7(){}function Fre(h){return h=Ut(h),yt(function(m){return MC(m,h)})}var Bre=s7(yn),$re=s7(jh),zre=s7(Kh);function qA(h){return h7(h)?$(Ra(h)):UJ(h)}function Vre(h){return function(m){return h==null?n:Fd(h,m)}}var Hre=tA(),Wre=tA(!0);function k7(){return[]}function R7(){return!1}function Gre(){return{}}function Xre(){return""}function jre(){return!0}function Kre(h,m){if(h=Ut(h),h<1||h>q)return[];var I=pe,P=pi(h,pe);m=je(m),h-=pe;for(var V=Zt(P,m);++I<h;)m(I);return V}function Yre(h){return ut(h)?yn(h,Ra):Co(h)?[h]:io(UA(rn(h)))}function Zre(h){var m=++aQ;return rn(h)+m}var qre=P6(function(h,m){return h+m},0),Qre=a7("ceil"),Jre=P6(function(h,m){return h/m},1),eie=a7("floor");function tie(h){return h&&h.length?T6(h,ao,Xv):n}function nie(h,m){return h&&h.length?T6(h,je(m,2),Xv):n}function rie(h){return k(h,ao)}function iie(h,m){return k(h,je(m,2))}function oie(h){return h&&h.length?T6(h,ao,Zv):n}function sie(h,m){return h&&h.length?T6(h,je(m,2),Zv):n}var aie=P6(function(h,m){return h*m},1),lie=a7("round"),cie=P6(function(h,m){return h-m},0);function uie(h){return h&&h.length?xe(h,ao):0}function die(h,m){return h&&h.length?xe(h,je(m,2)):0}return W.after=Mte,W.ary=CA,W.assign=vne,W.assignIn=VA,W.assignInWith=G6,W.assignWith=Ene,W.at=_ne,W.before=AA,W.bind=y7,W.bindAll=Sre,W.bindKey=kA,W.castArray=Gte,W.chain=TA,W.chunk=eee,W.compact=tee,W.concat=nee,W.cond=Cre,W.conforms=Are,W.constant=x7,W.countBy=ute,W.create=wne,W.curry=RA,W.curryRight=PA,W.debounce=MA,W.defaults=Ine,W.defaultsDeep=Tne,W.defer=Lte,W.delay=Dte,W.difference=ree,W.differenceBy=iee,W.differenceWith=oee,W.drop=see,W.dropRight=aee,W.dropRightWhile=lee,W.dropWhile=cee,W.fill=uee,W.filter=fte,W.flatMap=pte,W.flatMapDeep=mte,W.flatMapDepth=Ute,W.flatten=EA,W.flattenDeep=dee,W.flattenDepth=fee,W.flip=Nte,W.flow=Rre,W.flowRight=Pre,W.fromPairs=hee,W.functions=Pne,W.functionsIn=Mne,W.groupBy=bte,W.initial=pee,W.intersection=mee,W.intersectionBy=Uee,W.intersectionWith=bee,W.invert=Dne,W.invertBy=Nne,W.invokeMap=vte,W.iteratee=S7,W.keyBy=Ete,W.keys=$r,W.keysIn=so,W.map=B6,W.mapKeys=Fne,W.mapValues=Bne,W.matches=Mre,W.matchesProperty=Lre,W.memoize=z6,W.merge=$ne,W.mergeWith=HA,W.method=Dre,W.methodOf=Nre,W.mixin=C7,W.negate=V6,W.nthArg=Fre,W.omit=zne,W.omitBy=Vne,W.once=Ote,W.orderBy=_te,W.over=Bre,W.overArgs=Fte,W.overEvery=$re,W.overSome=zre,W.partial=v7,W.partialRight=LA,W.partition=wte,W.pick=Hne,W.pickBy=WA,W.property=qA,W.propertyOf=Vre,W.pull=_ee,W.pullAll=wA,W.pullAllBy=wee,W.pullAllWith=Iee,W.pullAt=Tee,W.range=Hre,W.rangeRight=Wre,W.rearg=Bte,W.reject=xte,W.remove=xee,W.rest=$te,W.reverse=U7,W.sampleSize=Cte,W.set=Gne,W.setWith=Xne,W.shuffle=Ate,W.slice=See,W.sortBy=Pte,W.sortedUniq=Lee,W.sortedUniqBy=Dee,W.split=pre,W.spread=zte,W.tail=Nee,W.take=Oee,W.takeRight=Fee,W.takeRightWhile=Bee,W.takeWhile=$ee,W.tap=tte,W.throttle=Vte,W.thru=F6,W.toArray=BA,W.toPairs=GA,W.toPairsIn=XA,W.toPath=Yre,W.toPlainObject=zA,W.transform=jne,W.unary=Hte,W.union=zee,W.unionBy=Vee,W.unionWith=Hee,W.uniq=Wee,W.uniqBy=Gee,W.uniqWith=Xee,W.unset=Kne,W.unzip=b7,W.unzipWith=IA,W.update=Yne,W.updateWith=Zne,W.values=a1,W.valuesIn=qne,W.without=jee,W.words=YA,W.wrap=Wte,W.xor=Kee,W.xorBy=Yee,W.xorWith=Zee,W.zip=qee,W.zipObject=Qee,W.zipObjectDeep=Jee,W.zipWith=ete,W.entries=GA,W.entriesIn=XA,W.extend=VA,W.extendWith=G6,C7(W,W),W.add=qre,W.attempt=ZA,W.camelCase=tre,W.capitalize=jA,W.ceil=Qre,W.clamp=Qne,W.clone=Xte,W.cloneDeep=Kte,W.cloneDeepWith=Yte,W.cloneWith=jte,W.conformsTo=Zte,W.deburr=KA,W.defaultTo=kre,W.divide=Jre,W.endsWith=nre,W.eq=zs,W.escape=rre,W.escapeRegExp=ire,W.every=dte,W.find=hte,W.findIndex=yA,W.findKey=xne,W.findLast=gte,W.findLastIndex=vA,W.findLastKey=Sne,W.floor=eie,W.forEach=xA,W.forEachRight=SA,W.forIn=Cne,W.forInRight=Ane,W.forOwn=kne,W.forOwnRight=Rne,W.get=w7,W.gt=qte,W.gte=Qte,W.has=Lne,W.hasIn=I7,W.head=_A,W.identity=ao,W.includes=yte,W.indexOf=gee,W.inRange=Jne,W.invoke=One,W.isArguments=zd,W.isArray=ut,W.isArrayBuffer=Jte,W.isArrayLike=oo,W.isArrayLikeObject=or,W.isBoolean=ene,W.isBuffer=Qc,W.isDate=tne,W.isElement=nne,W.isEmpty=rne,W.isEqual=ine,W.isEqualWith=one,W.isError=E7,W.isFinite=sne,W.isFunction=Pl,W.isInteger=DA,W.isLength=H6,W.isMap=NA,W.isMatch=ane,W.isMatchWith=lne,W.isNaN=cne,W.isNative=une,W.isNil=fne,W.isNull=dne,W.isNumber=OA,W.isObject=Hn,W.isObjectLike=Jn,W.isPlainObject=ap,W.isRegExp=_7,W.isSafeInteger=hne,W.isSet=FA,W.isString=W6,W.isSymbol=Co,W.isTypedArray=s1,W.isUndefined=gne,W.isWeakMap=pne,W.isWeakSet=mne,W.join=yee,W.kebabCase=ore,W.last=os,W.lastIndexOf=vee,W.lowerCase=sre,W.lowerFirst=are,W.lt=Une,W.lte=bne,W.max=tie,W.maxBy=nie,W.mean=rie,W.meanBy=iie,W.min=oie,W.minBy=sie,W.stubArray=k7,W.stubFalse=R7,W.stubObject=Gre,W.stubString=Xre,W.stubTrue=jre,W.multiply=aie,W.nth=Eee,W.noConflict=Ore,W.noop=A7,W.now=$6,W.pad=lre,W.padEnd=cre,W.padStart=ure,W.parseInt=dre,W.random=ere,W.reduce=Ite,W.reduceRight=Tte,W.repeat=fre,W.replace=hre,W.result=Wne,W.round=lie,W.runInContext=re,W.sample=Ste,W.size=kte,W.snakeCase=gre,W.some=Rte,W.sortedIndex=Cee,W.sortedIndexBy=Aee,W.sortedIndexOf=kee,W.sortedLastIndex=Ree,W.sortedLastIndexBy=Pee,W.sortedLastIndexOf=Mee,W.startCase=mre,W.startsWith=Ure,W.subtract=cie,W.sum=uie,W.sumBy=die,W.template=bre,W.times=Kre,W.toFinite=Ml,W.toInteger=Ut,W.toLength=$A,W.toLower=yre,W.toNumber=ss,W.toSafeInteger=yne,W.toString=rn,W.toUpper=vre,W.trim=Ere,W.trimEnd=_re,W.trimStart=wre,W.truncate=Ire,W.unescape=Tre,W.uniqueId=Zre,W.upperCase=xre,W.upperFirst=T7,W.each=xA,W.eachRight=SA,W.first=_A,C7(W,function(){var h={};return Aa(W,function(m,I){ln.call(W.prototype,I)||(h[I]=m)}),h}(),{chain:!1}),W.VERSION=r,Di(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){W[h].placeholder=W}),Di(["drop","take"],function(h,m){wt.prototype[h]=function(I){I=I===n?1:Cr(Ut(I),0);var P=this.__filtered__&&!m?new wt(this):this.clone();return P.__filtered__?P.__takeCount__=pi(I,P.__takeCount__):P.__views__.push({size:pi(I,pe),type:h+(P.__dir__<0?"Right":"")}),P},wt.prototype[h+"Right"]=function(I){return this.reverse()[h](I).reverse()}}),Di(["filter","map","takeWhile"],function(h,m){var I=m+1,P=I==J||I==ne;wt.prototype[h]=function(V){var X=this.clone();return X.__iteratees__.push({iteratee:je(V,3),type:I}),X.__filtered__=X.__filtered__||P,X}}),Di(["head","last"],function(h,m){var I="take"+(m?"Right":"");wt.prototype[h]=function(){return this[I](1).value()[0]}}),Di(["initial","tail"],function(h,m){var I="drop"+(m?"":"Right");wt.prototype[h]=function(){return this.__filtered__?new wt(this):this[I](1)}}),wt.prototype.compact=function(){return this.filter(ao)},wt.prototype.find=function(h){return this.filter(h).head()},wt.prototype.findLast=function(h){return this.reverse().find(h)},wt.prototype.invokeMap=yt(function(h,m){return typeof h=="function"?new wt(this):this.map(function(I){return tp(I,h,m)})}),wt.prototype.reject=function(h){return this.filter(V6(je(h)))},wt.prototype.slice=function(h,m){h=Ut(h);var I=this;return I.__filtered__&&(h>0||m<0)?new wt(I):(h<0?I=I.takeRight(-h):h&&(I=I.drop(h)),m!==n&&(m=Ut(m),I=m<0?I.dropRight(-m):I.take(m-h)),I)},wt.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},wt.prototype.toArray=function(){return this.take(pe)},Aa(wt.prototype,function(h,m){var I=/^(?:filter|find|map|reject)|While$/.test(m),P=/^(?:head|last)$/.test(m),V=W[P?"take"+(m=="last"?"Right":""):m],X=P||/^find/.test(m);V&&(W.prototype[m]=function(){var Y=this.__wrapped__,Q=P?[1]:arguments,oe=Y instanceof wt,me=Q[0],Ue=oe||ut(Y),ye=function(Et){var Ct=V.apply(W,Os([Et],Q));return P&&Me?Ct[0]:Ct};Ue&&I&&typeof me=="function"&&me.length!=1&&(oe=Ue=!1);var Me=this.__chain__,ze=!!this.__actions__.length,qe=X&&!Me,bt=oe&&!ze;if(!X&&Ue){Y=bt?Y:new wt(this);var Qe=h.apply(Y,Q);return Qe.__actions__.push({func:F6,args:[ye],thisArg:n}),new ns(Qe,Me)}return qe&&bt?h.apply(this,Q):(Qe=this.thru(ye),qe?P?Qe.value()[0]:Qe.value():Qe)})}),Di(["pop","push","shift","sort","splice","unshift"],function(h){var m=u6[h],I=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",P=/^(?:pop|shift)$/.test(h);W.prototype[h]=function(){var V=arguments;if(P&&!this.__chain__){var X=this.value();return m.apply(ut(X)?X:[],V)}return this[I](function(Y){return m.apply(ut(Y)?Y:[],V)})}}),Aa(wt.prototype,function(h,m){var I=W[m];if(I){var P=I.name+"";ln.call(t1,P)||(t1[P]=[]),t1[P].push({name:m,func:I})}}),t1[R6(n,_).name]=[{name:"wrapper",func:n}],wt.prototype.clone=TQ,wt.prototype.reverse=xQ,wt.prototype.value=SQ,W.prototype.at=nte,W.prototype.chain=rte,W.prototype.commit=ite,W.prototype.next=ote,W.prototype.plant=ate,W.prototype.reverse=lte,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=cte,W.prototype.first=W.prototype.head,K0&&(W.prototype[K0]=ste),W},Qh=iQ();ti?((ti.exports=Qh)._=Qh,Gh._=Qh):Qn._=Qh}).call(Ka)})(l8,l8.exports);var hK=l8.exports;const v4e=Pn(""),gK=Pn(null),E4e=350,_4e=()=>{const e=wa(),t=Ir(),n=D.useRef(null),[r,i]=Yn(v4e),o=r.trim(),[s,a]=D.useState(!1),[l,c]=D.useState({nonce:null,items:[]}),u=D.useRef(null),d=D.useRef(void 0),[f,g]=Yn(gK),U=e.scene.getNonDeletedElementsMap();D.useEffect(()=>{s||(o!==u.current||e.scene.getSceneNonce()!==d.current)&&(u.current=null,SD(o,e,(w,T)=>{c({nonce:al(),items:w}),u.current=o,d.current=e.scene.getSceneNonce(),t({searchMatches:w.map(A=>({id:A.textElement.id,focus:!1,matchedLines:A.matchedLines}))})}))},[s,o,U,e,t,g,d]);const b=()=>{l.items.length>0&&g(w=>w===null?0:(w+1)%l.items.length)},v=()=>{l.items.length>0&&g(w=>w===null?0:w-1<0?l.items.length-1:w-1)};D.useEffect(()=>{t(w=>({searchMatches:w.searchMatches.map((T,A)=>A===f?{...T,focus:!0}:{...T,focus:!1})}))},[f,t]),D.useEffect(()=>{var w,T,A,M;if(l.items.length>0&&f!==null){const S=l.items[f];if(S){const x=e.state.zoom.value,C=Wo({text:S.searchQuery,x:S.textElement.x+(((w=S.matchedLines[0])==null?void 0:w.offsetX)??0),y:S.textElement.y+(((T=S.matchedLines[0])==null?void 0:T.offsetY)??0),width:(A=S.matchedLines[0])==null?void 0:A.width,height:(M=S.matchedLines[0])==null?void 0:M.height,fontSize:S.textElement.fontSize,fontFamily:S.textElement.fontFamily}),R=14,O=S.textElement.fontSize,F=O*x<R;if(!Ab([C],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||F){let N;F?O>=R?N={fitToContent:!0}:N={fitToViewport:!0,maxZoom:rc(R/O,1)}:N={fitToContent:!0},e.scrollToContent(C,{animate:!0,duration:300,...N,canvasOffsets:e.getEditorUIOffsets()})}}}},[f,l,e]),D.useEffect(()=>()=>{g(null),u.current=null,d.current=void 0,t({searchMatches:[]}),a(!1)},[t,g]);const _=X3({goToNextItem:b,goToPreviousItem:v,searchMatches:l});D.useEffect(()=>{const w=T=>{var A,M,S;if(T.key===j.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){T.preventDefault(),T.stopPropagation(),t({openSidebar:null});return}T[j.CTRL_OR_CMD]&&T.key===j.F&&(T.preventDefault(),T.stopPropagation(),(A=n.current)!=null&&A.matches(":focus")?t({openSidebar:null}):(e.state.openDialog&&t({openDialog:null}),(M=n.current)==null||M.focus(),(S=n.current)==null||S.select())),T.target instanceof HTMLElement&&T.target.closest(".layer-ui__search")&&_.searchMatches.items.length&&(T.key===j.ENTER&&(T.stopPropagation(),_.goToNextItem()),T.key===j.ARROW_UP?(T.stopPropagation(),_.goToPreviousItem()):T.key===j.ARROW_DOWN&&(T.stopPropagation(),_.goToNextItem()))};return Dn(window,ge.KEYDOWN,w,{capture:!0,passive:!1})},[t,_,e]);const E=`${l.items.length} ${l.items.length===1?L("search.singleResult"):L("search.multipleResults")}`;return z("div",{className:"layer-ui__search",children:[p("div",{className:"layer-ui__search-header",children:p(Vg,{className:Ig.SEARCH_MENU_INPUT_WRAPPER,value:r,ref:n,placeholder:L("search.placeholder"),icon:Wf,onChange:w=>{i(w),a(!0);const T=w.trim();SD(T,e,(A,M)=>{c({nonce:al(),items:A}),g(M),u.current=T,d.current=e.scene.getSceneNonce(),t({searchMatches:A.map(S=>({id:S.textElement.id,focus:!1,matchedLines:S.matchedLines}))}),a(!1)})},selectOnRender:!0})}),z("div",{className:"layer-ui__search-count",children:[l.items.length>0&&z(ke,{children:[f!==null&&f>-1?z("div",{children:[f+1," / ",E]}):p("div",{children:E}),z("div",{className:"result-nav",children:[p(rh,{onSelect:()=>{b()},className:"result-nav-btn",children:jV}),p(rh,{onSelect:()=>{v()},className:"result-nav-btn",children:Rfe})]})]}),l.items.length===0&&o&&u.current&&p("div",{style:{margin:"1rem auto"},children:L("search.noMatch")})]}),p(x4e,{matches:l,onItemClick:g,focusIndex:f,searchQuery:o})]})},w4e=e=>{const t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return p("div",{tabIndex:-1,className:Re("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:p("div",{className:"preview-text",children:t.flatMap((n,r)=>p(D.Fragment,{children:r===2?p("b",{children:n}):n},r))})})},I4e=e=>p("div",{className:"layer-ui__search-result-container",children:e.matches.items.map((t,n)=>p(w4e,{searchQuery:e.searchQuery,preview:t.preview,highlighted:n===e.focusIndex,onClick:()=>e.onItemClick(n)},t.textElement.id+t.index))}),T4e=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,x4e=D.memo(I4e,T4e),S4e=(e,t,n)=>{const o=e.slice(0,t),s=o.split(/\s+/),a=o.endsWith(" "),l=s.length-2-1-(a?0:1);let c=s.slice(l<=0?0:l).join(" ")+(a?" ":"");const u=20;c=c.length>u?c.slice(-u):c;const d=e.slice(t+n.length),f=d.split(/\s+/),g=!d.startsWith(" "),U=g?6:5,b=(g?"":" ")+f.slice(0,U).join(" ");return{indexInSearchQuery:c.length,previewText:c+n+b,moreBefore:l>0,moreAfter:f.length>U}},C4e=(e,t)=>{const n=e.split(`
`),r=[];let i=0;for(let o=0;o<n.length;o++){let s=n[o];const a=n[o+1];if(a){const l=t.indexOf(a,i);if(l>s.length+i){let c=l-(s.length+i);for(;c>0;)s+=" ",c--}}r.push(s),i=i+s.length}return r.join(`
`)},A4e=(e,t,n)=>{const i=C4e(e.text,e.originalText).split(`
`),o=[];let s=0,a=0;for(const d of i){const f=s,g=f+d.length-1;o.push({line:d,startIndex:f,endIndex:g,lineNumber:a}),s=g+1,a++}let l=n,c=e.originalText.slice(n,n+t.length);const u=[];for(const d of o){if(c==="")break;if(l>=d.startIndex&&l<=d.endIndex){const f=d.endIndex+1-l,g=d.line.slice(0,l-d.startIndex),U=c.slice(0,f);c=c.slice(f);const b=ki(g,an(e),e.lineHeight);if(g===""&&(b.width=0),e.textAlign!=="left"&&d.line.length>0){const T=ki(d.line,an(e),e.lineHeight),A=e.textAlign==="center"?(e.width-T.width)/2:e.width-T.width;b.width+=A}const{width:v,height:_}=ki(U,an(e),e.lineHeight),E=b.width,w=d.lineNumber*b.height;u.push({offsetX:E,offsetY:w,width:v,height:_}),l+=f}}return u},k4e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),SD=hK.debounce((e,t,n)=>{if(!e||e===""){n([],null);return}const i=t.scene.getNonDeletedElements().filter(c=>Ae(c));i.sort((c,u)=>c.y-u.y);const o=[],s=new RegExp(k4e(e),"gi");for(const c of i){let u=null;const d=c.originalText;for(;(u=s.exec(d))!==null;){const f=S4e(d,u.index,e),g=A4e(c,e,u.index);g.length>0&&o.push({textElement:c,searchQuery:e,preview:f,index:u.index,matchedLines:g})}}const a=new Set(t.visibleElements.map(c=>c.id)),l=o.findIndex(c=>a.has(c.textElement.id))??null;n(o,l)},E4e),pK=vU("DefaultSidebarTrigger",e=>{const{DefaultSidebarTriggerTunnel:t}=to();return p(t.In,{children:p(Va.Trigger,{...e,className:"default-sidebar-trigger",name:ws.name})})});pK.displayName="DefaultSidebarTrigger";const mK=({children:e})=>{const{DefaultSidebarTabTriggersTunnel:t}=to();return p(t.In,{children:e})};mK.displayName="DefaultTabTriggers";const CD=Object.assign(vU("DefaultSidebar",({children:e,className:t,onDock:n,docked:r,...i})=>{var c;const o=Qr(),s=Ir(),{DefaultSidebarTabTriggersTunnel:a}=to(),l=((c=o.openSidebar)==null?void 0:c.tab)===Tf;return D.createElement(Va,{...i,name:"default",key:"default",className:Re("default-sidebar",t),docked:l||(r??o.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&r!=null?void 0:c3(n,u=>{s({defaultSidebarDockedPreference:u})})},z(Va.Tabs,{children:[p(Va.Header,{children:z(Va.TabTriggers,{children:[p(Va.TabTrigger,{tab:Tf,children:Wf}),p(Va.TabTrigger,{tab:py,children:aT}),p(a.Out,{})]})}),p(Va.Tab,{tab:py,children:p(J7e,{})}),p(Va.Tab,{tab:Tf,children:p(_4e,{})}),e]}))}),{Trigger:pK,TabTriggers:mK}),R4e="small",P4e=e=>z("label",{className:Re("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${R4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[p("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),p("div",{className:"ToolIcon__icon",children:zV})]}),M4e=e=>{const[t,n]=D.useState(!0);return D.useEffect(()=>{const r=async()=>{await Nz(i),n(!1)},i=o3.find(o=>o.code===e.langCode)||ph;r()},[e.langCode]),t?p(Sj,{theme:e.theme}):e.children},UK=({children:e})=>{const{FooterCenterTunnel:t}=to(),n=Qr();return p(t.In,{children:p("div",{className:Re("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":n.zenModeEnabled}),children:e})})};UK.displayName="FooterCenter";const L4e=()=>p("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:p("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),D4e=()=>z("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[p("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),p("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),p("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),p("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),bK=({style:e,size:t="small",withText:n})=>z("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[p(L4e,{}),n&&p(D4e,{})]}),Nx=({icon:e,shortcut:t,children:n})=>{const r=Or();return z(ke,{children:[p("div",{className:"welcome-screen-menu-item__icon",children:e}),p("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!r.editor.isMobile&&p("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};Nx.displayName="WelcomeScreenMenuItemContent";const EU=({onSelect:e,children:t,icon:n,shortcut:r,className:i="",...o})=>p("button",{...o,type:"button",className:`welcome-screen-menu-item ${i}`,onClick:e,children:p(Nx,{icon:n,shortcut:r,children:t})});EU.displayName="WelcomeScreenMenuItem";const yK=({children:e,href:t,icon:n,shortcut:r,className:i="",...o})=>p("a",{...o,className:`welcome-screen-menu-item ${i}`,href:t,target:"_blank",rel:"noreferrer",children:p(Nx,{icon:n,shortcut:r,children:e})});yK.displayName="WelcomeScreenMenuItemLink";const _a=({children:e})=>{const{WelcomeScreenCenterTunnel:t}=to();return p(t.In,{children:p("div",{className:"welcome-screen-center",children:e||z(ke,{children:[p(Ox,{}),p(Fx,{children:L("welcomeScreen.defaults.center_heading")}),z(Bx,{children:[p(zx,{}),p($x,{})]})]})})})};_a.displayName="Center";const Ox=({children:e})=>p("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||p(bK,{withText:!0})});Ox.displayName="Logo";const Fx=({children:e})=>p("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});Fx.displayName="Heading";const Bx=({children:e})=>p("div",{className:"welcome-screen-menu",children:e});Bx.displayName="Menu";const $x=()=>{const e=xo();return p(EU,{onSelect:()=>e.executeAction(Cx),shortcut:"?",icon:cT,children:L("helpDialog.title")})};$x.displayName="MenuItemHelp";const zx=()=>{const e=Qr(),t=xo();return e.viewModeEnabled?null:p(EU,{onSelect:()=>t.executeAction(Vw),shortcut:Ai("loadScene"),icon:dT,children:L("buttons.load")})};zx.displayName="MenuItemLoadScene";const vK=({onSelect:e})=>{const{t}=Zn();return p(EU,{shortcut:null,onSelect:e,icon:hT,children:t("labels.liveCollaboration")})};vK.displayName="MenuItemLiveCollaborationTrigger";_a.Logo=Ox;_a.Heading=Fx;_a.Menu=Bx;_a.MenuItem=EU;_a.MenuItemLink=yK;_a.MenuItemHelp=$x;_a.MenuItemLoadScene=zx;_a.MenuItemLiveCollaborationTrigger=vK;const Vx=({children:e})=>{const{WelcomeScreenMenuHintTunnel:t}=to();return p(t.In,{children:z("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[Wue,p("div",{className:"welcome-screen-decor-hint__label",children:e||L("welcomeScreen.defaults.menuHint")})]})})};Vx.displayName="MenuHint";const Hx=({children:e})=>{const{WelcomeScreenToolbarHintTunnel:t}=to();return p(t.In,{children:z("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[p("div",{className:"welcome-screen-decor-hint__label",children:e||L("welcomeScreen.defaults.toolbarHint")}),Xue]})})};Hx.displayName="ToolbarHint";const Wx=({children:e})=>{const{WelcomeScreenHelpHintTunnel:t}=to();return p(t.In,{children:z("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[p("div",{children:e||L("welcomeScreen.defaults.helpHint")}),Gue]})})};Wx.displayName="HelpHint";const zi=e=>p(ke,{children:e.children||z(ke,{children:[p(_a,{}),p(Vx,{}),p(Hx,{}),p(Wx,{})]})});zi.displayName="WelcomeScreen";zi.Center=_a;zi.Hints={MenuHint:Vx,ToolbarHint:Hx,HelpHint:Wx};const EK=({isCollaborating:e,onSelect:t,...n})=>{const r=Qr(),i=r.width<830;return z(rh,{...n,className:Re("collab-button",{active:e}),type:"button",onSelect:t,style:{position:"relative",width:i?void 0:"auto"},title:L("labels.liveCollaboration"),children:[i?fT:L("labels.share"),r.collaborators.size>0&&p("div",{className:"CollabButton-collaborators",children:r.collaborators.size})]})};EK.displayName="LiveCollaborationTrigger";const N4e=(e,t,n)=>{var r,i,o;return!!(t&&(t.id===((r=e.editingTextElement)==null?void 0:r.id)||t.id===((i=e.resizingElement)==null?void 0:i.id)||t.id===((o=e.newElement)==null?void 0:o.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},O4e=ql((e,t,n)=>{if(window!=null&&window.DEBUG_FRACTIONAL_INDICES){const r=wc(e.map(i=>({...i})));nx(r,{shouldThrow:P$.TEST==="production",includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1}),Gx=(e,t,n)=>{const r=He(e),i=[],o=new Set;for(const a of t)if(!o.has(a.id)){const l=r.get(a.id),c=N4e(n,l,a);l&&c?(i.push(l),o.add(l.id)):(i.push(a),o.add(a.id))}for(const a of e)o.has(a.id)||(i.push(a),o.add(a.id));const s=IG(i);return O4e(s,e,t),wc(s),s},F4e=.01,Sc=(e,t)=>!(t==="height"&&Ae(e)||t==="width"&&Ae(e)||t==="angle"&&We(e)),Si=(e,t)=>{const n=e+t/2;return n-n%t},c8=(e,t,n)=>Object.keys(e).map(r=>({original:(n??t).get(r),latest:t.get(r)})).filter(r=>r.original!==void 0&&r.latest!==void 0),P2=(e,t,n,r,i,o,s,a=!0)=>{const l=r.get(n.id);if(!l)return;const[c,u]=[n.x+n.width/2,n.y+n.height/2],[d,f]=le(B(n.x,n.y),B(c,u),n.angle),g=e-d,U=t-f,[b,v]=le(B(e,t),B(c+g,u+U),-n.angle);fe(l,{x:b,y:v},a),e9(l,r,i,o);const _=rt(n,s);if(_){const E=r.get(_.id);E&&fe(E,{x:_.x+g,y:_.y+U},a)}},Xx=(e,t)=>{const r=kf(t).map(i=>Tn(e,i).reduce((o,s)=>(o[s.id]=!0,o),{}));return e.filter(i=>!Pg(i)).forEach(i=>{r.push({[i.id]:!0})}),r},e9=(e,t,n,r,i)=>{et(e)?Ly([e],t,n,r,!0,[],i==null?void 0:i.zoom):_o(e,t,i)},Dc=({label:e,icon:t,dragInputCallback:n,value:r,elements:i,editable:o=!0,shouldKeepAspectRatio:s,property:a,scene:l,appState:c,sensitivity:u=1})=>{const d=wa(),f=D.useRef(null),g=D.useRef(null),[U,b]=D.useState(r.toString()),v=D.useRef(null);v.current||(v.current={originalAppState:ic(c),originalElements:i,lastUpdatedValue:U,updatePending:!1}),D.useEffect(()=>{const w=r.toString();b(w),v.current.lastUpdatedValue=w},[r]);const _=(w,T,A)=>{if(!v.current.updatePending)return!1;v.current.updatePending=!1;const M=Number(w);if(isNaN(M)){b(r.toString());return}const S=Number(M.toFixed(2)),x=Number(r);(isNaN(x)||Math.abs(S-x)>=F4e)&&(v.current.lastUpdatedValue=w,n({accumulatedChange:0,instantChange:0,originalElements:T,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:s,shouldChangeByStepSize:!1,scene:l,nextValue:S,property:a,originalAppState:A,setInputValue:C=>b(String(C))}),d.syncActionResult({storeAction:ae.CAPTURE}))},E=D.useRef({});return E.current.handleInputValue=_,D.useEffect(()=>{const w=f.current,T=E.current;return()=>{var M;const A=w==null?void 0:w.value;A&&((M=T.handleInputValue)==null||M.call(T,A,v.current.originalElements,v.current.originalAppState)),window.removeEventListener(ge.POINTER_MOVE,T.onPointerMove,!1),window.removeEventListener(ge.POINTER_UP,T.onPointerUp,!1)}},[o]),o?z("div",{className:Re("drag-input-container",!o&&"disabled"),"data-testid":e,children:[p("div",{className:"drag-input-label",ref:g,onPointerDown:w=>{if(f.current&&o){document.body.classList.add("excalidraw-cursor-resize"),Number(f.current.value);let T=null,A=d.scene.getNonDeletedElements().reduce((F,N)=>(F.set(N.id,bh(N)),F),new Map),M=i.map(F=>A.get(F.id));const S=ic(c);let x=0,C=0;const R=F=>{if(T&&A!==null&&M!==null){const N=F.clientX-T.x;N!==0&&(C+=N,Math.abs(C)>=u&&(C=Math.sign(C)*Math.floor(Math.abs(C)/u),x+=C,n({accumulatedChange:x,instantChange:C,originalElements:M,originalElementsMap:A,shouldKeepAspectRatio:s,shouldChangeByStepSize:F.shiftKey,property:a,scene:l,originalAppState:S,setInputValue:J=>b(String(J))}),C=0))}T={x:F.clientX,y:F.clientY}},O=()=>{window.removeEventListener(ge.POINTER_MOVE,R,!1),d.syncActionResult({storeAction:ae.CAPTURE}),T=null,x=0,C=0,M=null,A=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener(ge.POINTER_UP,O,!1)};E.current.onPointerMove=R,E.current.onPointerUp=O,window.addEventListener(ge.POINTER_MOVE,R,!1),window.addEventListener(ge.POINTER_UP,O,!1)}},onPointerEnter:()=>{g.current&&(g.current.style.cursor="ew-resize")},children:t?p(K3,{icon:t}):e}),p("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:w=>{if(o){const T=w.target;T instanceof HTMLInputElement&&w.key===j.ENTER&&(_(T.value,i,c),d.focusContainer())}},ref:f,value:U,onChange:w=>{v.current.updatePending=!0,b(w.target.value)},onFocus:w=>{w.target.select(),v.current.originalElements=i,v.current.originalAppState=ic(c)},onBlur:w=>{U?o&&_(w.target.value,v.current.originalElements,v.current.originalAppState):b(r.toString())},disabled:!o})]}):null},AD=10,B4e=e=>e.type==="image",$4e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:r,shouldChangeByStepSize:i,nextValue:o,property:s,originalAppState:a,instantChange:l,scene:c})=>{const u=c.getNonDeletedElementsMap(),d=t[0],f=u.get(d.id);if(d&&f){const g=r||B4e(d),U=d.width/d.height;if(a.croppingElementId===d.id){const w=u.get(d.id);if(!w||!kt(w)||!w.crop)return;const T=w.crop;let A={...T};const M=w.scale[0]===-1,S=w.scale[1]===-1,{width:x,height:C}=yc(w),R=T.naturalWidth/x,O=T.naturalHeight/C,F=M?T.width+T.x:T.naturalWidth-T.x,N=S?T.height+T.y:T.naturalHeight-T.y,J=zr*R,K=zr*O;if(o!==void 0){if(s==="width"){const te=o*R,pe=dt(te,J,F);A={...A,width:pe,x:M?T.x+T.width-pe:T.x}}else if(s==="height"){const te=o*O,pe=dt(te,K,N);A={...A,height:pe,y:S?T.y+T.height-pe:T.y}}fe(w,{crop:A,width:A.width/(T.naturalWidth/x),height:A.height/(T.naturalHeight/C)});return}const ne=s==="width"?l:0,ee=s==="height"?l:0,q=dt(T.width+ne,J,F),Z=dt(T.height+ee,J,N);A={...T,x:M?T.x+T.width-q:T.x,y:S?T.y+T.height-Z:T.y,width:q,height:Z},fe(w,{crop:A,width:A.width/(T.naturalWidth/x),height:A.height/(T.naturalHeight/C)});return}if(o!==void 0){const w=Math.max(s==="width"?o:g?o*U:d.width,us),T=Math.max(s==="height"?o:g?o/U:d.height,us);T2(w,T,f,d,u,n,s==="width"?"e":"s",{shouldMaintainAspectRatio:g});return}const b=s==="width"?e:0,v=s==="height"?e:0;let _=Math.max(0,d.width+b);s==="width"&&(i?_=Si(_,AD):_=Math.round(_));let E=Math.max(0,d.height+v);s==="height"&&(i?E=Si(E,AD):E=Math.round(E)),g&&(s==="width"?E=Math.round(_/U*100)/100:_=Math.round(E*U*100)/100),E=Math.max(us,E),_=Math.max(us,_),T2(_,E,f,d,u,n,s==="width"?"e":"s",{shouldMaintainAspectRatio:g})}},kD=({property:e,element:t,scene:n,appState:r})=>{let i=rc(e==="width"?t.width:t.height,2);if(r.croppingElementId&&r.croppingElementId===t.id&&kt(t)&&t.crop){const{width:o,height:s}=yc(t);if(e==="width"){const a=o/t.crop.naturalWidth;i=rc(t.crop.width*a,2)}if(e==="height"){const a=s/t.crop.naturalHeight;i=rc(t.crop.height*a,2)}}return p(Dc,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:$4e,value:i,editable:Sc(t,e),scene:n,appState:r,property:e})},z4e=15,V4e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{const o=i.getNonDeletedElementsMap(),s=i.getNonDeletedElements(),a=t[0];if(a&&!De(a)){const l=o.get(a.id);if(!l)return;if(r!==void 0){const U=xf(r);fe(l,{angle:U}),e9(l,o,s,i);const b=rt(l,o);b&&!st(l)&&fe(b,{angle:U});return}const c=Math.round(J2(a.angle)*100)/100,u=Math.round(e);let d=(c+u)%360;n&&(d=Si(d,z4e)),d=d<0?d+360:d;const f=xf(d);fe(l,{angle:f}),e9(l,o,s,i);const g=rt(l,o);g&&!st(l)&&fe(g,{angle:f})}},H4e=({element:e,scene:t,appState:n,property:r})=>p(Dc,{label:"A",icon:OV,value:Math.round(J2(e.angle)%360*100)/100,elements:[e],dragInputCallback:V4e,editable:Sc(e,"angle"),scene:t,appState:n,property:r}),RD=4,W4e=4,G4e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{const o=i.getNonDeletedElementsMap(),s=t[0];if(s){const a=o.get(s.id);if(!a||!Ae(a))return;let l;if(r!==void 0)l=Math.max(Math.round(r),RD);else if(s.type==="text"){const c=Math.round(s.fontSize),u=Math.round(e);l=Math.max(c+u,RD),n&&(l=Si(l,W4e))}l&&(fe(a,{fontSize:l}),Zi(a,i.getContainerElement(a),i.getNonDeletedElementsMap()))}},X4e=({element:e,scene:t,appState:n,property:r})=>{const i=Ae(e)?e:Ps(e)?rt(e,t.getNonDeletedElementsMap()):null;return i?p(Dc,{label:"F",value:Math.round(i.fontSize*10)/10,elements:[i],dragInputCallback:G4e,icon:g3,appState:n,scene:t,property:r}):null},b1=10,j4e=(e,t,n,r)=>{const i=r.x-e,o=r.y-t,s=r.width*n,a=r.height*n,l=e+i*n,c=t+o*n;return{width:s,height:a,x:l,y:c,...ux(r,s,a,!1),...Ae(r)?{fontSize:r.fontSize*n}:{}}},K4e=(e,t,n,r,i,o,s,a)=>{const l=j4e(e,t,r,o);fe(i,l,!1);const c=rt(o,a);if(c){const u=c.fontSize*r;_o(i,s,{newSize:{width:l.width,height:l.height}});const d=s.get(c.id);d&&Ae(d)&&(fe(d,{fontSize:u},!1),mU(i,s,n==="width"?"e":"s",!0))}},PD=(e,t,n,r,i,o,s,a,l,c)=>{o==="width"?t=Math.round(e/r*100)/100:e=Math.round(t*r*100)/100;const u=t/n;for(let d=0;d<a.length;d++){const f=a[d],g=s[d];K4e(i[0],i[1],o,u,g,f,l,c)}},Y4e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:r,shouldChangeByStepSize:i,nextValue:o,scene:s,property:a})=>{const l=s.getNonDeletedElementsMap(),c=Xx(t,r);if(o!==void 0){for(const f of c){const g=c8(f,l,n);if(g.length>1){const U=g.map(C=>C.latest),b=g.map(C=>C.original),[v,_,E,w]=jt(b),T=E-v,A=w-_,M=T/A,S=Math.max(us,a==="width"?Math.max(0,o):T),x=Math.max(us,a==="height"?Math.max(0,o):A);PD(S,x,A,M,B(v,_),a,U,b,l,n)}else{const[U]=g,b=U==null?void 0:U.latest,v=U==null?void 0:U.original;if(b&&v&&Sc(b,a)){let _=a==="width"?Math.max(0,o):b.width;a==="width"&&(i?_=Si(_,b1):_=Math.round(_));let E=a==="height"?Math.max(0,o):b.height;a==="height"&&(i?E=Si(E,b1):E=Math.round(E)),_=Math.max(us,_),E=Math.max(us,E),T2(_,E,b,v,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}s.triggerUpdate();return}const u=a==="width"?e:0,d=a==="height"?e:0;for(const f of c){const g=c8(f,l,n);if(g.length>1){const U=g.map(C=>C.latest),b=g.map(C=>C.original),[v,_,E,w]=jt(b),T=E-v,A=w-_,M=T/A;let S=Math.max(0,T+u);a==="width"&&(i?S=Si(S,b1):S=Math.round(S));let x=Math.max(0,A+d);a==="height"&&(i?x=Si(x,b1):x=Math.round(x)),S=Math.max(us,S),x=Math.max(us,x),PD(S,x,A,M,B(v,_),a,U,b,l,n)}else{const[U]=g,b=U==null?void 0:U.latest,v=U==null?void 0:U.original;if(b&&v&&Sc(b,a)){let _=Math.max(0,v.width+u);a==="width"&&(i?_=Si(_,b1):_=Math.round(_));let E=Math.max(0,v.height+d);a==="height"&&(i?E=Si(E,b1):E=Math.round(E)),_=Math.max(us,_),E=Math.max(us,E),T2(_,E,b,v,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}s.triggerUpdate()},MD=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:o})=>{const s=D.useMemo(()=>r.map(c=>{const u=c8(c,n);if(u.length>1){const[f,g,U,b]=jt(u.map(v=>v.latest));return Math.round((e==="width"?U-f:b-g)*100)/100}const[d]=u;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,r,e]),a=new Set(s).size===1?Math.round(s[0]*100)/100:"Mixed",l=s.length>0;return p(Dc,{label:e==="width"?"W":"H",elements:t,dragInputCallback:Y4e,value:a,editable:l,appState:o,property:e,scene:i})},Z4e=15,q4e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,property:i,scene:o})=>{const s=o.getNonDeletedElementsMap(),a=t.map(c=>s.get(c.id)).filter(c=>c&&!Pg(c)&&Sc(c,i)),l=t.filter(c=>!Pg(c)&&Sc(c,i));if(r!==void 0){const c=xf(r);for(const u of a){if(!u)continue;fe(u,{angle:c},!1);const d=rt(u,s);d&&!st(u)&&fe(d,{angle:c},!1)}o.triggerUpdate();return}for(let c=0;c<a.length;c++){const u=a[c];if(!u)continue;const d=l[c],f=Math.round(J2(d.angle)*100)/100,g=Math.round(e);let U=(f+g)%360;n&&(U=Si(U,Z4e)),U=U<0?U+360:U;const b=xf(U);fe(u,{angle:b},!1);const v=rt(u,s);v&&!st(u)&&fe(v,{angle:b},!1)}o.triggerUpdate()},Q4e=({elements:e,scene:t,appState:n,property:r})=>{const i=e.filter(l=>!Pg(l)&&Sc(l,"angle")),o=i.map(l=>Math.round(J2(l.angle)%360*100)/100),s=new Set(o).size===1?o[0]:"Mixed",a=i.some(l=>Sc(l,"angle"));return p(Dc,{label:"A",icon:OV,value:s,elements:e,dragInputCallback:q4e,editable:a,appState:n,scene:t,property:r})},LD=4,J4e=4,e_e=(e,t)=>e.reduce((n,r)=>{if(!r||Pg(r))return n;if(Ae(r))return n.push(r),n;if(Ps(r)){const i=rt(r,t);if(i)return n.push(i),n}return n},[]),t_e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{const o=i.getNonDeletedElementsMap(),s=t.map(l=>o.get(l.id));let a;if(r){a=Math.max(Math.round(r),LD);for(const l of s)fe(l,{fontSize:a},!1),Zi(l,i.getContainerElement(l),o,!1);i.triggerUpdate()}else{const l=t;for(let c=0;c<s.length;c++){const u=s[c],d=l[c],f=Math.round(d.fontSize),g=Math.round(e);let U=Math.max(f+g,LD);n&&(U=Si(U,J4e)),fe(u,{fontSize:U},!1),Zi(u,i.getContainerElement(u),o,!1)}i.triggerUpdate()}},n_e=({elements:e,scene:t,appState:n,property:r,elementsMap:i})=>{const o=e_e(e,i);if(!o.length)return null;const s=o.map(c=>Math.round(c.fontSize*10)/10),a=new Set(s).size===1?s[0]:"Mixed",l=s.length>0;return p(Dc,{label:"F",icon:g3,elements:o,dragInputCallback:t_e,value:a,editable:l,scene:t,property:r,appState:n})},DD=10,r_e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:r,shouldChangeByStepSize:i,nextValue:o,property:s,scene:a,originalAppState:l})=>{const c=a.getNonDeletedElementsMap(),u=a.getNonDeletedElements(),d=n[0],[f,g]=[d.x+d.width/2,d.y+d.height/2],[U,b]=le(B(d.x,d.y),B(f,g),d.angle);if(l.croppingElementId===d.id){const T=c.get(d.id);if(!T||!kt(T)||!T.crop)return;const A=T.crop;let M=A;const S=T.scale[0]===-1,x=T.scale[1]===-1,{width:C,height:R}=yc(T);if(o!==void 0){if(s==="x"){const N=o*(A.naturalWidth/C);S?M={...A,x:dt(A.naturalWidth-N-A.width,0,A.naturalWidth-A.width)}:M={...A,x:dt(o*(A.naturalWidth/C),0,A.naturalWidth-A.width)}}s==="y"&&(M={...A,y:dt(o*(A.naturalHeight/R),0,A.naturalHeight-A.height)}),fe(T,{crop:M});return}const O=(s==="x"?t:0)*(S?-1:1),F=(s==="y"?t:0)*(x?-1:1);M={...A,x:dt(A.x+O,0,A.naturalWidth-A.width),y:dt(A.y+F,0,A.naturalHeight-A.height)},fe(T,{crop:M});return}if(o!==void 0){P2(s==="x"?o:U,s==="y"?o:b,d,c,u,a,r);return}const v=s==="x"?e:0,_=s==="y"?e:0,E=s==="x"?Math.round(i?Si(d.x+v,DD):U+v):U,w=s==="y"?Math.round(i?Si(d.y+_,DD):b+_):b;P2(E,w,d,c,u,a,r)},ND=({property:e,element:t,elementsMap:n,scene:r,appState:i})=>{const[o,s]=le(B(t.x,t.y),B(t.x+t.width/2,t.y+t.height/2),t.angle);let a=rc(e==="x"?o:s,2);if(i.croppingElementId===t.id&&kt(t)&&t.crop){const l=Kme(t);l&&(a=rc(e==="x"?l.x:l.y,2))}return p(Dc,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:r_e,scene:r,value:a,property:e,appState:i})},i_e=10,o_e=(e,t,n,r,i,o,s,a)=>{for(let l=0;l<r.length;l++){const c=i[l],[u,d]=[c.x+c.width/2,c.y+c.height/2],[f,g]=le(B(c.x,c.y),B(u,d),c.angle),U=e==="x"?Math.round(f+t):f,b=e==="y"?Math.round(g+n):g;P2(U,b,c,o,r,a,s,!1)}},s_e=(e,t,n,r,i,o,s)=>{const[a,l,,]=jt(n),c=e-a,u=t-l;for(let d=0;d<n.length;d++){const f=n[d],g=r.get(f.id);if(g&&(!Ae(g)||!g.containerId)){const[U,b]=[g.x+g.width/2,g.y+g.height/2],[v,_]=le(B(g.x,g.y),B(U,b),g.angle);P2(v+c,_+u,f,r,i,s,o,!1)}}},a_e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:r,nextValue:i,property:o,scene:s,originalAppState:a})=>{var g,U;const l=s.getNonDeletedElementsMap(),c=s.getNonDeletedElements();if(i!==void 0){for(const b of Xx(t,a)){const v=c8(b,l,n);if(v.length>1){const[_,E,,]=jt(v.map(A=>A.latest));s_e(o==="x"?i:_,o==="y"?i:E,v.map(A=>A.original),l,c,n,s)}else{const _=(g=v[0])==null?void 0:g.original,E=(U=v[0])==null?void 0:U.latest;if(_&&E&&Sc(E,o)){const[w,T]=[_.x+_.width/2,_.y+_.height/2],[A,M]=le(B(_.x,_.y),B(w,T),_.angle);P2(o==="x"?i:A,o==="y"?i:M,_,l,c,s,n,!1)}}}s.triggerUpdate();return}const u=r?Si(e,i_e):e;o_e(o,o==="x"?u:0,o==="y"?u:0,t,t,l,n,s),s.triggerUpdate()},OD=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:o})=>{const s=D.useMemo(()=>r.map(l=>{const c=Object.keys(l).map(b=>n.get(b)).filter(b=>b!==void 0);if(c.length>1){const[b,v]=jt(c);return Math.round((e==="x"?b:v)*100)/100}const[u]=c,[d,f]=[u.x+u.width/2,u.y+u.height/2],[g,U]=le(B(u.x,u.y),B(d,f),u.angle);return Math.round((e==="x"?g:U)*100)/100}),[r,n,e]),a=new Set(s).size===1?s[0]:"Mixed";return p(Dc,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:a_e,value:a,property:e,scene:i,appState:o})},FD=5,l_e=({property:e,scene:t,appState:n,setAppState:r})=>p(Dc,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:i,instantChange:o,shouldChangeByStepSize:s,setInputValue:a})=>{r(l=>{let c;return i?c=i:o&&(c=s?Si(l.gridStep+FD*Math.sign(o),FD):l.gridStep+o),c?(c=$G(c),a(c),{gridStep:c}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),c_e=50,jl=e=>{const t=IU(),n=e.app.scene.getSceneNonce()||1,r=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),i=w2(e.app);return p(u_e,{...e,appState:t,sceneNonce:n,selectedElements:r,gridModeEnabled:i})},In=({children:e,columns:t=1,heading:n,style:r,...i})=>p("div",{className:Re("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...r},...i,children:e});In.displayName="StatsRow";const u8=({children:e,order:t,style:n,...r})=>p("div",{className:"exc-stats__rows",style:{order:t,...n},...r,children:e});u8.displayName="StatsRows";jl.StatsRow=In;jl.StatsRows=u8;const u_e=D.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:r,appState:i,sceneNonce:o,gridModeEnabled:s})=>{const a=e.scene,l=a.getNonDeletedElements(),c=a.getNonDeletedElementsMap(),u=Ir(),d=r.length===1?r[0]:null,f=r.length>1?r:null,g=i.croppingElementId&&kt(d),U=g?yc(d):null,[b,v]=D.useState({width:0,height:0}),_=D.useMemo(()=>hK.throttle(T=>{const A=jt(T);v({width:Math.round(A[2])-Math.round(A[0]),height:Math.round(A[3])-Math.round(A[1])})},c_e),[]);D.useEffect(()=>{_(l)},[o,l,_]),D.useEffect(()=>()=>_.cancel(),[_]);const E=D.useMemo(()=>Xx(r,i),[r,i]),w=D.useMemo(()=>aG(r),[r]);return p("div",{className:"exc-stats",children:z(ha,{padding:3,children:[z("div",{className:"title",children:[p("h2",{children:L("stats.title")}),p("div",{className:"close",onClick:t,children:Uh})]}),z(zw,{label:p("h3",{children:L("stats.generalStats")}),open:!!(i.stats.panels&H1.generalStats),openTrigger:()=>u(T=>({stats:{open:!0,panels:T.stats.panels^H1.generalStats}})),children:[z(u8,{children:[p(In,{heading:!0,children:L("stats.scene")}),z(In,{columns:2,children:[p("div",{children:L("stats.shapes")}),p("div",{children:l.length})]}),z(In,{columns:2,children:[p("div",{children:L("stats.width")}),p("div",{children:b.width})]}),z(In,{columns:2,children:[p("div",{children:L("stats.height")}),p("div",{children:b.height})]}),s&&z(ke,{children:[p(In,{heading:!0,children:"Canvas"}),p(In,{children:p(l_e,{property:"gridStep",scene:a,appState:i,setAppState:u})})]})]}),n==null?void 0:n(l,i)]}),!w&&r.length>0&&p("div",{id:"elementStats",style:{marginTop:12},children:p(zw,{label:p("h3",{children:L("stats.elementProperties")}),open:!!(i.stats.panels&H1.elementProperties),openTrigger:()=>u(T=>({stats:{open:!0,panels:T.stats.panels^H1.elementProperties}})),children:z(u8,{children:[d&&z(ke,{children:[g&&p(In,{heading:!0,children:L("labels.unCroppedDimension")}),i.croppingElementId&&kt(d)&&U&&z(In,{columns:2,children:[p("div",{children:L("stats.width")}),p("div",{children:rc(U.width,2)})]}),i.croppingElementId&&kt(d)&&U&&z(In,{columns:2,children:[p("div",{children:L("stats.height")}),p("div",{children:rc(U.height,2)})]}),p(In,{heading:!0,"data-testid":"stats-element-type",children:i.croppingElementId?L("labels.imageCropping"):L(`element.${d.type}`)}),p(In,{children:p(ND,{element:d,property:"x",elementsMap:c,scene:a,appState:i})}),p(In,{children:p(ND,{element:d,property:"y",elementsMap:c,scene:a,appState:i})}),p(In,{children:p(kD,{property:"width",element:d,scene:a,appState:i})}),p(In,{children:p(kD,{property:"height",element:d,scene:a,appState:i})}),!De(d)&&p(In,{children:p(H4e,{property:"angle",element:d,scene:a,appState:i})}),p(In,{children:p(X4e,{property:"fontSize",element:d,scene:a,appState:i})})]}),f&&z(ke,{children:[_V(f)&&p(In,{heading:!0,children:L("element.group")}),z(In,{columns:2,style:{margin:"0.3125rem 0"},children:[p("div",{children:L("stats.shapes")}),p("div",{children:r.length})]}),p(In,{children:p(OD,{property:"x",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:i})}),p(In,{children:p(OD,{property:"y",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:i})}),p(In,{children:p(MD,{property:"width",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:i})}),p(In,{children:p(MD,{property:"height",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:i})}),p(In,{children:p(Q4e,{property:"angle",elements:f,scene:a,appState:i})}),p(In,{children:p(n_e,{property:"fontSize",elements:f,scene:a,appState:i,elementsMap:c})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),_K=({children:e,icon:t})=>{const{TTDDialogTriggerTunnel:n}=to(),r=Ir();return p(n.In,{children:z(Rt.Item,{onSelect:()=>{Dt("ai","dialog open","ttd"),r({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??dfe,children:[e??L("labels.textToDiagram"),p(Rt.Item.Badge,{children:"AI"})]})})};_K.displayName="TTDDialogTrigger";const M5={width:100,height:0},Su=100,d_e=(e,t,n)=>{const r=Wo({x:0,y:0,textAlign:s2.CENTER,verticalAlign:Do.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:r.id})}),Zi(r,e,n),[e,r]},BD=(e,t,n,r,i)=>{let o,s;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){const u=(t==null?void 0:t.width)??Su,d=(t==null?void 0:t.height)??Su;let f;t.id&&(f=r.getElement(t.id),f||console.error(`No element for start binding with id ${t.id} found`));const g=t.x||e.x-u,U=t.y||e.y-d/2,b=f?f.type:t.type;if(b){if(b==="text"){let v="";f&&f.type==="text"?v=f.text:t.type==="text"&&(v=t.text),v||console.error(`No text found for start binding text element for ${e.id}`),o=Wo({x:g,y:U,type:"text",...f,...t,text:v}),Object.assign(o,{x:t.x||e.x-o.width,y:t.y||e.y-o.height/2})}else switch(b){case"rectangle":case"ellipse":case"diamond":{o=Uc({x:g,y:U,width:u,height:d,...f,...t,type:b});break}default:qu(e,`Unhandled element start type "${t.type}"`,!0)}ll(e,o,"start",i)}}if(n){const u=(n==null?void 0:n.height)??Su,d=(n==null?void 0:n.width)??Su;let f;n.id&&(f=r.getElement(n.id),f||console.error(`No element for end binding with id ${n.id} found`));const g=n.x||e.x+e.width,U=n.y||e.y-u/2,b=f?f.type:n.type;if(b){if(b==="text"){let v="";f&&f.type==="text"?v=f.text:n.type==="text"&&(v=n.text),v||console.error(`No text found for end binding text element for ${e.id}`),s=Wo({x:g,y:U,type:"text",...f,...n,text:v}),Object.assign(s,{y:n.y||e.y-s.height/2})}else switch(b){case"rectangle":case"ellipse":case"diamond":{s=Uc({x:g,y:U,width:d,height:u,...f,...n,type:b});break}default:qu(e,`Unhandled element end type "${b}"`,!0)}ll(e,s,"end",i)}}if(e.points.length<2)return{linearElement:e,startBoundElement:o,endBoundElement:s};const a=e.points.length-1,l=.5,c=ic(e.points);return e.points[a][0]>e.points[a-1][0]&&(c[0][0]=l,c[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(c[0][0]=-l,c[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(c[0][1]=l,c[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(c[0][1]=-l,c[a][1]+=l),Object.assign(e,{points:c}),{linearElement:e,startBoundElement:o,endBoundElement:s}};class f_e{constructor(){H(this,"excalidrawElements",new Map);H(this,"add",t=>{t&&this.excalidrawElements.set(t.id,t)});H(this,"getElements",()=>wc(Array.from(this.excalidrawElements.values())));H(this,"getElementsMap",()=>Ho(He(this.getElements())));H(this,"getElement",t=>this.excalidrawElements.get(t))}}const t9=(e,t)=>{var a,l,c;if(!e)return[];const n=ic(e),r=new f_e,i=new Map,o=new Map;for(const u of n){let d;const f=u.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(u,{id:Ms()}),u.type){case"rectangle":case"ellipse":case"diamond":{const U=(a=u==null?void 0:u.label)!=null&&a.text&&u.width===void 0?0:(u==null?void 0:u.width)||Su,b=(l=u==null?void 0:u.label)!=null&&l.text&&u.height===void 0?0:(u==null?void 0:u.height)||Su;d=Uc({...u,width:U,height:b});break}case"line":{const U=u.width||M5.width,b=u.height||M5.height;d=Rf({width:U,height:b,points:[B(0,0),B(U,b)],...u});break}case"arrow":{const U=u.width||M5.width,b=u.height||M5.height;d=yT({width:U,height:b,endArrowhead:"arrow",points:[B(0,0),B(U,b)],...u,type:"arrow"}),Object.assign(d,Og(d.points));break}case"text":{const U=(u==null?void 0:u.fontFamily)||md,b=(u==null?void 0:u.fontSize)||Pc,v=(u==null?void 0:u.lineHeight)||Gf(U),_=u.text??"",E=Rg(_),w=ki(E,an({fontFamily:U,fontSize:b}),v);d=Wo({width:w.width,height:w.height,fontFamily:U,fontSize:b,...u});break}case"image":{d=QV({width:(u==null?void 0:u.width)||Su,height:(u==null?void 0:u.height)||Su,...u});break}case"frame":{d=bT({x:0,y:0,...u});break}case"magicframe":{d=nw({x:0,y:0,...u});break}case"freedraw":case"iframe":case"embeddable":{d=u;break}default:d=u,qu(u,`Unhandled element type "${u.type}"`,!0)}r.getElement(d.id)?console.error(`Duplicate id found for ${d.id}`):(r.add(d),i.set(d.id,u),f&&o.set(f,d.id))}const s=r.getElementsMap();for(const[u,d]of i){const f=r.getElement(u);switch(d.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((c=d.label)!=null&&c.text){let[g,U]=d_e(f,d==null?void 0:d.label,s);if(r.add(g),r.add(U),st(g)){const b=d.type==="arrow"?d==null?void 0:d.start:void 0,v=d.type==="arrow"?d==null?void 0:d.end:void 0;if(b&&b.id){const T=o.get(b.id);T&&Object.assign(b,{id:T})}if(v&&v.id){const T=o.get(v.id);T&&Object.assign(v,{id:T})}const{linearElement:_,startBoundElement:E,endBoundElement:w}=BD(g,b,v,r,s);g=_,r.add(_),r.add(E),r.add(w)}}else switch(d.type){case"arrow":{const{start:g,end:U}=d;if(g&&g.id){const E=o.get(g.id);Object.assign(g,{id:E})}if(U&&U.id){const E=o.get(U.id);Object.assign(U,{id:E})}const{linearElement:b,startBoundElement:v,endBoundElement:_}=BD(f,g,U,r,s);r.add(b),r.add(v),r.add(_);break}}break}}}for(const[u,d]of i){if(d.type!=="frame"&&d.type!=="magicframe")continue;const f=r.getElement(u);if(!f)throw new Error(`Excalidraw element with id ${u} doesn't exist`);const g=[];d.children.forEach(S=>{var R;const x=o.get(S);if(!x)throw new Error(`Element with ${S} wasn't mapped correctly`);const C=r.getElement(x);if(!C)throw new Error(`Frame element with id ${x} doesn't exist`);Object.assign(C,{frameId:f.id}),(R=C==null?void 0:C.boundElements)==null||R.forEach(O=>{const F=r.getElement(O.id);if(!F)throw new Error(`Bound element with id ${O.id} doesn't exist`);Object.assign(F,{frameId:f.id}),g.push(F)}),g.push(C)});let[U,b,v,_]=jt(g);const E=10;U=U-E,b=b-E,v=v+E,_=_+E;const w=(f==null?void 0:f.x)||U,T=(f==null?void 0:f.y)||b,A=(f==null?void 0:f.width)||v-U,M=(f==null?void 0:f.height)||_-b;Object.assign(f,{x:w,y:T,width:A,height:M})}return r.getElements()},h_e=e=>{const t=wa();return D.useLayoutEffect(()=>{t.setPlugins({diagramToCode:{generate:e.generate}})},[t,e.generate]),null};I$();const g_e=e=>{var q,Z,te,pe;const{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i=!1,onPointerUpdate:o,renderTopRightUI:s,langCode:a=ph.code,viewModeEnabled:l,zenModeEnabled:c,gridModeEnabled:u,libraryReturnUrl:d,theme:f,name:g,renderCustomStats:U,onPaste:b,detectScroll:v=!0,handleKeyboardGlobally:_=!1,onLibraryChange:E,autoFocus:w=!1,generateIdForFile:T,onLinkOpen:A,generateLinkForSelection:M,onPointerDown:S,onPointerUp:x,onScrollChange:C,onDuplicate:R,children:O,validateEmbeddable:F,renderEmbeddable:N,aiEnabled:J,showDeprecatedFonts:K}=e,ne=(q=e.UIOptions)==null?void 0:q.canvasActions,ee={...e.UIOptions,canvasActions:{...dR.canvasActions,...ne},tools:{image:((te=(Z=e.UIOptions)==null?void 0:Z.tools)==null?void 0:te.image)??!0}};return ne!=null&&ne.export&&(ee.canvasActions.export.saveFileToDisk=((pe=ne.export)==null?void 0:pe.saveFileToDisk)??dR.canvasActions.export.saveFileToDisk),ee.canvasActions.toggleTheme===null&&typeof f>"u"&&(ee.canvasActions.toggleTheme=!0),D.useEffect(()=>{(async()=>{await Le(()=>import("./roundRect-0PYZxl1G.js"),__vite__mapDeps([]))})();const Se=lt=>{typeof lt.scale=="number"&&lt.scale!==1&&lt.preventDefault()};return document.addEventListener("touchmove",Se,{passive:!1}),()=>{document.removeEventListener("touchmove",Se)}},[]),p(ule,{store:ia,children:p(M4e,{langCode:a,theme:f,children:p(tS,{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i,onPointerUpdate:o,renderTopRightUI:s,langCode:a,viewModeEnabled:l,zenModeEnabled:c,gridModeEnabled:u,libraryReturnUrl:d,theme:f,name:g,renderCustomStats:U,UIOptions:ee,onPaste:b,detectScroll:v,handleKeyboardGlobally:_,onLibraryChange:E,autoFocus:w,generateIdForFile:T,onLinkOpen:A,generateLinkForSelection:M,onPointerDown:S,onPointerUp:x,onScrollChange:C,onDuplicate:R,validateEmbeddable:F,renderEmbeddable:N,aiEnabled:J!==!1,showDeprecatedFonts:K,children:O})})})},p_e=(e,t)=>{if(e.children!==t.children)return!1;const{initialData:n,UIOptions:r={},...i}=e,{initialData:o,UIOptions:s={},...a}=t,l=Object.keys(r),c=Object.keys(s);return l.length!==c.length?!1:l.every(d=>d==="canvasActions"?Object.keys(r.canvasActions).every(g=>{var U,b,v,_;return g==="export"&&((U=r==null?void 0:r.canvasActions)!=null&&U.export)&&((b=s==null?void 0:s.canvasActions)!=null&&b.export)?r.canvasActions.export.saveFileToDisk===s.canvasActions.export.saveFileToDisk:((v=r==null?void 0:r.canvasActions)==null?void 0:v[g])===((_=s==null?void 0:s.canvasActions)==null?void 0:_[g])}):r[d]===s[d])&&ai(i,a)},wK=Ee.memo(g_e,p_e);wK.displayName="Excalidraw";const m_e=({canvasRef:e,setError:t})=>{const n=e.current;if(!n)return;const r=n.parentElement;r&&(r.style.background="",t(null),n.replaceChildren())},IK=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:r,data:i})=>{const o=e.current,s=o==null?void 0:o.parentElement;if(!(!o||!s)){if(!n){m_e({canvasRef:e,setError:r});return}try{const a=await t.api;let l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}const{elements:c,files:u}=l;r(null),i.current={elements:t9(c,{regenerateIds:!0}),files:u};const d=await A3({elements:i.current.elements,files:i.current.files,exportPadding:s0,maxWidthOrHeight:Math.max(s.offsetWidth,s.offsetHeight)*window.devicePixelRatio});try{await E2(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(L("canvasError.canvasTooBig")):f}s.style.background="var(--default-bg-color)",o.replaceChildren(d)}catch(a){throw s.style.background="var(--default-bg-color)",n&&r(a),a}}},jx=e=>{Mf.set(hm.MERMAID_TO_EXCALIDRAW,e)},TK=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:r})=>{const{elements:i,files:o}=t.current;i.length&&(e.addElementsFromPasteOrLibrary({elements:i,files:o,position:"center",fitToContent:!0}),e.setOpenDialog(null),r&&n&&jx(n))},xK=({children:e})=>p("div",{className:"ttd-dialog-panels",children:e}),d8=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgess:i,renderTopRight:o,renderSubmitShortcut:s,renderBottomRight:a})=>z("div",{className:"ttd-dialog-panel",children:[z("div",{className:"ttd-dialog-panel__header",children:[p("label",{children:e}),o==null?void 0:o()]}),t,z("div",{className:Re("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[z(rh,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:r||i,children:[z("div",{className:Re({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&p("span",{children:n.icon})]}),i&&p(Ic,{})]}),!r&&!i&&(s==null?void 0:s()),a==null?void 0:a()]})]}),SK=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{const i=D.useRef(null),o=D.useRef(r);return o.current=r,D.useEffect(()=>{if(!o.current)return;const s=i.current;if(s){const a=l=>{var c;l[j.CTRL_OR_CMD]&&l.key===j.ENTER&&(l.preventDefault(),(c=o.current)==null||c.call(o))};return s.addEventListener(ge.KEYDOWN,a),()=>{s.removeEventListener(ge.KEYDOWN,a)}}},[]),p("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},U_e=({error:e})=>z("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",p("p",{children:e})]}),CK=({error:e,canvasRef:t,loaded:n})=>z("div",{className:"ttd-dialog-output-wrapper",children:[e&&p(U_e,{error:e.message}),n?p("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):p(Ic,{size:"2rem"})]}),AK=()=>z("div",{className:"ttd-dialog-submit-shortcut",children:[p("div",{className:"ttd-dialog-submit-shortcut__key",children:de("CtrlOrCmd")}),p("div",{className:"ttd-dialog-submit-shortcut__key",children:de("Enter")})]}),b_e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,$D=mc(jx,300),y_e=({mermaidToExcalidrawLib:e})=>{const[t,n]=D.useState(()=>Mf.get(hm.MERMAID_TO_EXCALIDRAW)||b_e),r=D.useDeferredValue(t.trim()),[i,o]=D.useState(null),s=D.useRef(null),a=D.useRef({elements:[],files:null}),l=wa();D.useEffect(()=>{IK({canvasRef:s,data:a,mermaidToExcalidrawLib:e,setError:o,mermaidDefinition:r}).catch(u=>{}),$D(r)},[r,e]),D.useEffect(()=>()=>{$D.flush()},[]);const c=()=>{TK({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return z(ke,{children:[p("div",{className:"ttd-dialog-desc",children:p(Uo,{i18nKey:"mermaid.description",flowchartLink:u=>p("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:u}),sequenceLink:u=>p("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:u}),classLink:u=>p("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:u})})}),z(xK,{children:[p(d8,{label:L("mermaid.syntax"),children:p(SK,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:u=>n(u.target.value),onKeyboardSubmit:()=>{c()}})}),p(d8,{label:L("mermaid.preview"),panelAction:{action:()=>{c()},label:L("mermaid.button"),icon:pb},renderSubmitShortcut:()=>p(AK,{}),children:p(CK,{canvasRef:s,loaded:e.loaded,error:i})})]})]})},kK=e=>{const t=Ir(),n=D.useRef(null),r=D.useRef(0);return p(Wj,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:i=>{var s;if(!i)return;const o=(s=n.current)==null?void 0:s.closest(".Modal__content");if(o){const a=o.offsetHeight||0;a>r.current&&(r.current=a,o.style.minHeight=`min(${r.current}px, 100%)`)}e.dialog==="ttd"&&rV(["text-to-diagram","mermaid"],i)&&t({openDialog:{name:e.dialog,tab:i}})},children:e.children})};kK.displayName="TTDDialogTabs";const RK=({children:e,...t})=>p(Gj,{className:"ttd-dialog-triggers",...t,children:e});RK.displayName="TTDDialogTabTriggers";const n9=({children:e,tab:t,onSelect:n,...r})=>p(Xj,{value:t,asChild:!0,onSelect:n,children:p("button",{type:"button",className:"ttd-dialog-tab-trigger",...r,children:e})});n9.displayName="TTDDialogTabTrigger";const r9=({tab:e,children:t,...n})=>p(jj,{...n,value:e,children:t});r9.displayName="TTDDialogTab";const a4=3,y1=1e3,v_e=Pn(null),E_e=Pn(null),PK=e=>{var n;const t=Qr();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:p(__e,{...e,tab:t.openDialog.tab})},__e=vU("TTDDialogBase",({tab:e,...t})=>{const n=wa(),r=Ir(),i=D.useRef(null),[o,s]=Yn(E_e),[a,l]=D.useState((o==null?void 0:o.prompt)??""),c=a.trim(),u=M=>{l(M.target.value),s(S=>({generatedResponse:(S==null?void 0:S.generatedResponse)??null,prompt:M.target.value}))},[d,f]=D.useState(!1),[g,U]=Yn(v_e),b=async()=>{if(c.length>y1||c.length<a4||d||(g==null?void 0:g.rateLimitRemaining)===0||"__fallback"in t){c.length<a4&&A(new Error(`Prompt is too short (min ${a4} characters)`)),c.length>y1&&A(new Error(`Prompt is too long (max ${y1} characters)`));return}try{f(!0),Dt("ai","generate","ttd");const{generatedResponse:M,error:S,rateLimit:x,rateLimitRemaining:C}=await t.onTextSubmit(c);if(typeof M=="string"&&s(R=>({generatedResponse:M,prompt:(R==null?void 0:R.prompt)??null})),pm(x)&&pm(C)&&U({rateLimit:x,rateLimitRemaining:C}),S){A(S);return}if(!M){A(new Error("Generation failed"));return}try{await IK({canvasRef:i,data:w,mermaidToExcalidrawLib:_,setError:A,mermaidDefinition:M}),Dt("ai","mermaid parse success","ttd")}catch(R){console.info(`%cTTD mermaid render errror: ${R.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${R.message}`,"color: yellow"),Dt("ai","mermaid parse failed","ttd"),A(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(M){let S=M.message;(!S||S==="Failed to fetch")&&(S="Request failed"),A(new Error(S))}finally{f(!1)}},v=D.useRef(b);v.current=b;const[_,E]=D.useState({loaded:!1,api:Le(()=>import("./index-DDSADHlU.js").then(M=>M.b5),__vite__mapDeps([]))});D.useEffect(()=>{(async()=>{await _.api,E(S=>({...S,loaded:!0}))})()},[_.api]);const w=D.useRef({elements:[],files:null}),[T,A]=D.useState(null);return p(Ko,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:z(kK,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?p("p",{className:"dialog-mermaid-title",children:L("mermaid.title")}):z(RK,{children:[p(n9,{tab:"text-to-diagram",children:z("div",{style:{display:"flex",alignItems:"center"},children:[L("labels.textToDiagram"),p("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),p(n9,{tab:"mermaid",children:"Mermaid"})]}),p(r9,{className:"ttd-dialog-content",tab:"mermaid",children:p(y_e,{mermaidToExcalidrawLib:_})}),!("__fallback"in t)&&z(r9,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[p("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),z(xK,{children:[p(d8,{label:L("labels.prompt"),panelAction:{action:b,label:"Generate",icon:pb},onTextSubmitInProgess:d,panelActionDisabled:c.length>y1||(g==null?void 0:g.rateLimitRemaining)===0,renderTopRight:()=>g?z("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:g.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[g.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>p(AK,{}),renderBottomRight:()=>{if(typeof(o==null?void 0:o.generatedResponse)=="string")return z("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(o==null?void 0:o.generatedResponse)=="string"&&(jx(o.generatedResponse),r({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",p(K3,{icon:pb})]});const M=c.length/y1;return M>.8?z("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:M>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",y1]}):null},children:p(SK,{onChange:u,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{v.current()}})}),p(d8,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),TK({app:n,data:w})},label:"Insert",icon:pb},children:p(CK,{canvasRef:i,error:T,loaded:_.loaded})})]})]})]})})}),w_e=({sourceElementId:e,onClose:t,elementsMap:n,appState:r,generateLinkForSelection:i=OW})=>{var d;const o=((d=n.get(e))==null?void 0:d.link)??null,[s,a]=D.useState(o),[l,c]=D.useState(!1);D.useEffect(()=>{const f=ot(n,r);let g=o;if(f.length>0&&i){const U=FW(f,r);U&&(g=zo(i(U.id,U.type)))}a(g)},[n,r,r.selectedElementIds,o,i]);const u=D.useCallback(()=>{var f;if(s&&s!==((f=n.get(e))==null?void 0:f.link)){const g=n.get(e);g&&fe(g,{link:s})}if(!s&&l&&e){const g=n.get(e);g&&fe(g,{link:null})}t==null||t()},[e,s,n,l,t]);return D.useEffect(()=>{const f=g=>{var U,b;((U=r.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&g.key===j.ENTER&&u(),((b=r.openDialog)==null?void 0:b.name)==="elementLinkSelector"&&g.key===j.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}},[r,t,u]),z("div",{className:"ElementLinkDialog",children:[z("div",{className:"ElementLinkDialog__header",children:[p("h2",{children:L("elementLink.title")}),p("p",{children:L("elementLink.desc")})]}),z("div",{className:"ElementLinkDialog__input",children:[p(Vg,{value:s??"",onChange:f=>{l||c(!0),a(f)},onKeyDown:f=>{f.key===j.ENTER&&u()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),o&&s&&p(vt,{type:"button",title:L("buttons.remove"),"aria-label":L("buttons.remove"),label:L("buttons.remove"),onClick:()=>{a(null),c(!0)},className:"ElementLinkDialog__remove",icon:Ju})]}),z("div",{className:"ElementLinkDialog__actions",children:[p(Wg,{label:L("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),p(Wg,{label:L("buttons.confirm"),onClick:u,actionType:"primary"})]})]})},I_e=({UIOptions:e})=>z(Xt,{__fallback:!0,children:[p(Xt.DefaultItems.LoadScene,{}),p(Xt.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&p(Xt.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&p(Xt.DefaultItems.SaveAsImage,{}),p(Xt.DefaultItems.SearchMenu,{}),p(Xt.DefaultItems.Help,{}),p(Xt.DefaultItems.ClearCanvas,{}),p(Xt.Separator,{}),p(Xt.Group,{title:"Excalidraw links",children:p(Xt.DefaultItems.Socials,{})}),p(Xt.Separator,{}),p(Xt.DefaultItems.ToggleTheme,{}),p(Xt.DefaultItems.ChangeCanvasBackground,{})]}),T_e=()=>z(Ef,{__fallback:!0,children:[p(Ef.Actions.SaveToDisk,{}),p(Ef.Actions.ExportToImage,{})]}),x_e=({actionManager:e,appState:t,files:n,setAppState:r,elements:i,canvas:o,onLockToggle:s,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:c,renderTopRightUI:u,renderCustomStats:d,UIOptions:f,onExportImage:g,renderWelcomeScreen:U,children:b,app:v,isCollaborating:_,generateLinkForSelection:E})=>{var ne,ee,q;const w=Or(),T=b7e(),A=T.tunnelsJotai.Provider,[M,S]=Yn(j3),x=()=>f.canvasActions.export?p(HEe,{elements:i,appState:t,files:n,actionManager:e,exportOpts:f.canvasActions.export,canvas:o,setAppState:r}):null,C=()=>{var Z;return!f.canvasActions.saveAsImage||((Z=t.openDialog)==null?void 0:Z.name)!=="imageExport"?null:p(bEe,{elements:i,appState:t,files:n,actionManager:e,onExportImage:g,onCloseRequest:()=>r({openDialog:null}),name:v.getName()})},R=()=>z("div",{style:{position:"relative"},children:[p(T.MainMenuTunnel.Out,{}),U&&p(T.WelcomeScreenMenuHintTunnel.Out,{})]}),O=()=>p(R2,{heading:"selectedShapeActions",className:Re("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:p(ha,{className:Ig.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:p(lj,{appState:t,elementsMap:v.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:v})})}),F=()=>{var pe,Ie,Se,lt,at;const Z=fx(t,i),te=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((pe=t.openDialog)==null?void 0:pe.name)!=="elementLinkSelector";return p(wj,{side:"top",children:z("div",{className:"App-menu App-menu_top",children:[z(ys.Col,{gap:6,className:Re("App-menu_top__left"),children:[R(),Z&&O()]}),!t.viewModeEnabled&&((Ie=t.openDialog)==null?void 0:Ie.name)!=="elementLinkSelector"&&p(R2,{heading:"shapes",className:"shapes-section",children:gt=>z("div",{style:{position:"relative"},children:[U&&p(T.WelcomeScreenToolbarHintTunnel.Out,{}),p(ys.Col,{gap:4,align:"start",children:z(ys.Row,{gap:1,className:Re("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[z(ha,{padding:1,className:Re("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[p(xj,{appState:t,isMobile:w.editor.isMobile,device:w,app:v}),gt,z(ys.Row,{gap:1,children:[p(Aj,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:L("toolBar.penMode"),penDetected:t.penDetected}),p(Cj,{checked:t.activeTool.locked,onChange:s,title:L("toolBar.lock")}),p("div",{className:"App-toolbar__divider"}),p(kj,{checked:xg(t),onChange:()=>a(),title:L("toolBar.hand"),isMobile:!0}),p(cj,{appState:t,activeTool:t.activeTool,UIOptions:f,app:v})]})]}),_&&p(ha,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:p(P4e,{title:L("toolBar.laser"),checked:t.activeTool.type===kr.laser,onChange:()=>v.setActiveTool({type:kr.laser}),isMobile:!0})})]})})]})}),z("div",{className:Re("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&p(Rj,{collaborators:t.collaborators,userToFollow:((Se=t.userToFollow)==null?void 0:Se.socketId)||null}),u==null?void 0:u(w.editor.isMobile,t),!t.viewModeEnabled&&((lt=t.openDialog)==null?void 0:lt.name)!=="elementLinkSelector"&&(!J||((at=t.openSidebar)==null?void 0:at.name)!==ws.name)&&p(T.DefaultSidebarTriggerTunnel.Out,{}),te&&p(jl,{app:v,onClose:()=>{e.executeAction(Ww)},renderCustomStats:d})]})]})})},N=()=>p(CD,{__fallback:!0,onDock:Z=>{Dt("sidebar",`toggleDock (${Z?"dock":"undock"})`,`(${w.editor.isMobile?"mobile":"desktop"})`)}}),J=Lz(Lx),K=z(ke,{children:[b,p(I_e,{UIOptions:f}),p(CD.Trigger,{__fallback:!0,icon:aT,title:mm(L("toolBar.library")),onToggle:Z=>{Z&&Dt("sidebar",`${ws.name} (open)`,`button (${w.editor.isMobile?"mobile":"desktop"})`)},tab:ws.defaultTab,children:L("toolBar.library")}),p(T_e,{}),((ne=t.openDialog)==null?void 0:ne.name)==="ttd"&&p(PK,{__fallback:!0}),t.isLoading&&p(Sj,{delay:250}),t.errorMessage&&p(nS,{onClose:()=>r({errorMessage:null}),children:t.errorMessage}),M&&!w.editor.isMobile&&p(C3e,{colorPickerType:M.colorPickerType,onCancel:()=>{S(null)},onChange:(Z,te,pe,{altKey:Ie})=>{var Se;if(!(Z!=="elementBackground"&&Z!=="elementStroke"))if(pe.length){for(const lt of pe)fe(lt,{[Ie&&M.swapPreviewOnAlt?Z==="elementBackground"?"strokeColor":"backgroundColor":Z==="elementBackground"?"backgroundColor":"strokeColor"]:te},!1),Sn.delete(lt);(Se=ya.getScene(pe[0]))==null||Se.triggerUpdate()}else r(Z==="elementBackground"?{currentItemBackgroundColor:te}:{currentItemStrokeColor:te})},onSelect:(Z,te)=>{var pe;S(Ie=>Ie!=null&&Ie.keepOpenOnAlt&&te.altKey?Ie:null),(pe=M==null?void 0:M.onSelect)==null||pe.call(M,Z,te)}}),((ee=t.openDialog)==null?void 0:ee.name)==="help"&&p(OEe,{onClose:()=>{r({openDialog:null})}}),p(eEe,{}),((q=t.openDialog)==null?void 0:q.name)==="elementLinkSelector"&&p(w_e,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{r({openDialog:null})},elementsMap:v.scene.getNonDeletedElementsMap(),appState:t,generateLinkForSelection:E}),p(T.OverwriteConfirmDialogTunnel.Out,{}),C(),x(),t.pasteDialog.shown&&p(REe,{setAppState:r,appState:t,onClose:()=>r({pasteDialog:{shown:!1,data:null}})}),w.editor.isMobile&&p(kEe,{app:v,appState:t,elements:i,actionManager:e,renderJSONExportDialog:x,renderImageExportDialog:C,setAppState:r,onLockToggle:s,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:u,renderCustomStats:d,renderSidebars:N,device:w,renderWelcomeScreen:U,UIOptions:f}),!w.editor.isMobile&&z(ke,{children:[z("div",{className:"layer-ui__wrapper",style:t.openSidebar&&J&&w.editor.canFitSidebar?{width:`calc(100% - ${Oae}px)`}:{},children:[U&&p(T.WelcomeScreenCenterTunnel.Out,{}),F(),p(Pj,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:U}),t.scrolledOutside&&p("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(Z=>({...x2(i,Z)}))},children:L("buttons.scrollBackToContent")})]}),N()]})]});return p(SX.Provider,{value:t,children:p(A,{children:p(oj.Provider,{value:T,children:K})})})},zD=e=>{const{suggestedBindings:t,startBoundElement:n,cursorButton:r,scrollX:i,scrollY:o,...s}=e;return s},S_e=(e,t)=>{if(e.children!==t.children)return!1;const{canvas:n,appState:r,...i}=e,{canvas:o,appState:s,...a}=t;return ai(zD(r),zD(s),{selectedElementIds:ai,selectedGroupIds:ai})&&ai(i,a)},C_e=Ee.memo(x_e,S_e),A_e=5e3,k_e=({message:e,onClose:t,closable:n=!1,duration:r=A_e,style:i})=>{const o=D.useRef(0),s=r!==1/0,a=D.useCallback(()=>{s&&(o.current=window.setTimeout(()=>t(),r))},[t,r,s]);return D.useEffect(()=>{if(s)return a(),()=>clearTimeout(o.current)},[a,e,r,s]),z("div",{className:"Toast",onMouseEnter:s?()=>clearTimeout(o==null?void 0:o.current):void 0,onMouseLeave:s?a:void 0,style:i,children:[p("p",{className:"Toast__message",children:e}),n&&p(vt,{icon:Uh,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},VD=we({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:gT,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},storeAction:ae.NONE}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[j.CTRL_OR_CMD]&&e.altKey&&e.code===It.R}),MK=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length===1&&We(n[0])},R_e=we({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t).at(0)||null;if(We(i)){const o=cl(Un(e),i.id).filter(s=>!(s.type==="text"&&s.containerId));return{elements:e,appState:{...t,selectedElementIds:o.reduce((s,a)=>(s[a.id]=!0,s),{})},storeAction:ae.CAPTURE}}return{elements:e,appState:t,storeAction:ae.NONE}},predicate:(e,t,n,r)=>MK(t,r)}),P_e=we({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,r)=>{const i=r.scene.getSelectedElements(t).at(0)||null;return We(i)?{elements:iG(e,i),appState:{...t,selectedElementIds:{[i.id]:!0}},storeAction:ae.CAPTURE}:{elements:e,appState:t,storeAction:ae.NONE}},predicate:(e,t,n,r)=>MK(t,r)});we({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},storeAction:ae.NONE}),checked:e=>e.frameRendering.enabled});we({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:BV,viewMode:!1,perform:(e,t,n,r)=>{const i=lr(t,{type:"frame"});return Ba(r.interactiveCanvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:lr(t,{type:"frame"})},storeAction:ae.NONE}},keyTest:e=>!e[j.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===j.F});const M_e=we({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{const i=ot(e,t);return i.length>0&&!i.some(o=>We(o))},perform:(e,t,n,r)=>{const i=ot(e,t),[o,s,a,l]=jt(i,r.scene.getNonDeletedElementsMap()),c=16,u=bT({x:o-c,y:s-c,width:a-o+c*2,height:l-s+c*2});if(t.editingGroupId){const f=Tn(i,t.editingGroupId);for(const g of f){const U=g.groupIds.indexOf(t.editingGroupId);fe(g,{groupIds:g.groupIds.slice(0,U)},!1)}}return{elements:Tm([...r.scene.getElementsIncludingDeleted(),u],i,u,t),appState:{selectedElementIds:{[u.id]:!0}},storeAction:ae.CAPTURE}}}),L_e=()=>z("div",{"data-testid":"brave-measure-text-error",children:[p("p",{children:p(Uo,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>p("span",{style:{fontWeight:600},children:e})})}),p("p",{children:p(Uo,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>p("span",{style:{fontWeight:600},children:e})})}),p("p",{children:p(Uo,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>p("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),p("p",{children:p(Uo,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>p("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>z("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),Nn=e=>t=>{Pr.unstable_batchedUpdates(e,t)},l4=e=>a0(t=>{Pr.unstable_batchedUpdates(e,t)}),Kx=(()=>{let e;try{const n=D.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),D_e="#ff6b6b",N_e="#ff0000",HD=1,WD=2,O_e=(e,t)=>{if(!t.snapLines.length)return;const n=t.theme===Ge.LIGHT||t.zenModeEnabled?D_e:N_e,r=(t.zenModeEnabled?HD*1.5:HD)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(const i of t.snapLines)i.type==="pointer"?(e.lineWidth=r,e.strokeStyle=n,B_e(i,e,t)):i.type==="gap"?(e.lineWidth=r,e.strokeStyle=n,$_e(i.points[0],i.points[1],i.direction,t,e)):i.type==="points"&&(e.lineWidth=r,e.strokeStyle=n,F_e(i,e,t));e.restore()},F_e=(e,t,n)=>{if(!n.zenModeEnabled){const r=e.points[0],i=e.points[e.points.length-1];ls(r,i,t)}for(const r of e.points)LK(r,n,t)},B_e=(e,t,n)=>{LK(e.points[0],n,t),n.zenModeEnabled||ls(e.points[0],e.points[1],t)},LK=([e,t],n,r)=>{r.save();const i=(n.zenModeEnabled?WD*1.5:WD)/n.zoom.value;r.beginPath(),r.moveTo(e-i,t-i),r.lineTo(e+i,t+i),r.moveTo(e+i,t-i),r.lineTo(e-i,t+i),r.stroke(),r.restore()},ls=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},$_e=(e,t,n,r,i)=>{const o=8/r.zoom.value,s=o/2,a=o/4;if(n==="horizontal"){const l=[(e[0]+t[0])/2,e[1]];r.zenModeEnabled||ls(B(e[0],e[1]-o),B(e[0],e[1]+o),i),ls(B(l[0]-a,l[1]-s),B(l[0]-a,l[1]+s),i),ls(B(l[0]+a,l[1]-s),B(l[0]+a,l[1]+s),i),r.zenModeEnabled||(ls(B(t[0],t[1]-o),B(t[0],t[1]+o),i),ls(e,t,i))}else{const l=[e[0],(e[1]+t[1])/2];r.zenModeEnabled||ls(B(e[0]-o,e[1]),B(e[0]+o,e[1]),i),ls(B(l[0]-s,l[1]-a),B(l[0]+s,l[1]-a),i),ls(B(l[0]-s,l[1]+a),B(l[0]+s,l[1]+a),i),r.zenModeEnabled||(ls(B(t[0]-o,t[1]),B(t[0]+o,t[1]),i),ls(e,t,i))}},z_e=(e,t)=>{Yi(t.selectedLinearElement,"selectedLinearElement is null");const{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;Yi(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),DK(n,e,t),e.restore()},V_e=(e,t,n)=>{var a,l;const{elementId:r,hoverPointIndex:i}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(i))return;const o=Ce.getElement(r,n);if(!o)return;const s=Ce.getPointAtIndexGlobalCoordinates(o,i,n);e.save(),e.translate(t.scrollX,t.scrollY),DK(s,e,t),e.restore()},DK=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",T3(t,e[0],e[1],Ce.POINT_HANDLE_SIZE/n.zoom.value,!1)},_U=(e,t,n,r,i,o,s,a,l=!1,c=0)=>{e.save(),e.translate(o,s),e.rotate(a),l&&e.fillRect(t-o,n-s,r,i),c&&e.roundRect?(e.beginPath(),e.roundRect(t-o,n-s,r,i,c),e.stroke(),e.closePath()):e.strokeRect(t-o,n-s,r,i),e.restore()},H_e=(e,t,n,r,i,o)=>{e.save(),e.translate(r,i),e.rotate(o),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()},c4=(e,t,n,r,i,o=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",i?e.fillStyle="rgba(134, 131, 226, 0.9)":o&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),T3(e,n[0],n[1],r/t.zoom.value,!o)},W_e=(e,t,n,r,i,o)=>{e.beginPath(),e.ellipse(r,i,t/2,n/2,o,0,Math.PI*2),e.stroke()},G_e=(e,t,n,r)=>{const[i,o,s,a]=Ke(t,n),l=s-i,c=a-o;e.strokeStyle="rgba(0,0,0,.05)";const u=r.value<1?r.value:1;e.lineWidth=TT/u;const d=e.lineWidth/2+xT,f=Fu(Math.min(t.width,t.height),t);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":_U(e,i-d,o-d,l+d*2,c+d*2,i+l/2,o+c/2,t.angle,void 0,f);break;case"diamond":const g=Math.hypot(l,c),U=d*g/c,b=d*g/l;H_e(e,l+U*2,c+b*2,i+l/2,o+c/2,t.angle);break;case"ellipse":W_e(e,l+d*2,c+d*2,i+l/2,o+c/2,t.angle);break}},X_e=(e,t,n,r)=>{const[i,o,s]=t,a=lU(s,s.width,s.height,r);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(o==="both"?[0,-1]:o==="start"?[0]:[-1]).forEach(c=>{const[u,d]=Ce.getPointAtIndexGlobalCoordinates(i,c,n);T3(e,u,d,a)})},NK=(e,t,n)=>{const{angle:r,x1:i,y1:o,x2:s,y2:a,selectionColors:l,cx:c,cy:u,dashed:d,activeEmbeddable:f}=n,g=s-i,U=a-o,v=(n.padding??zf*2)/t.zoom.value,_=8/t.zoom.value,E=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(f?4:1)/t.zoom.value;const w=l.length;for(let T=0;T<w;++T)e.strokeStyle=l[T],d&&e.setLineDash([_,E+(_+E)*(w-1)]),e.lineDashOffset=(_+E)*T,_U(e,i-v,o-v,g+v*2,U+v*2,c,u,r);e.restore()},j_e=(e,t,n,r)=>{const i=Array.isArray(n)?X_e:G_e;e.save(),e.translate(t.scrollX,t.scrollY),i(e,n,r,t.zoom),e.restore()},K_e=(e,t,n,r)=>{const[i,o,s,a]=Ke(n,r),l=s-i,c=a-o;e.strokeStyle="rgb(0,118,255)",e.lineWidth=Fn.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),_U(e,i,o,l,c,i+l/2,o+c/2,n.angle,!1,Fn.radius/t.zoom.value),e.restore()},Y_e=(e,t,n)=>{const r=n.filter(a=>a.groupIds.length===0),i=n.filter(a=>a.groupIds.length>0),o=a=>{const[l,c,u,d]=jt(a);return{angle:0,x1:l,x2:u,y1:c,y2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(u-l)/2,cy:c+(d-c)/2,activeEmbeddable:!1}},s=a=>{const l=Tn(n,a);return o(l)};Object.entries(EV(i,t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>s(a)).concat(r.map(a=>o([a]))).forEach(a=>NK(e,t,a))},u4=(e,t,n,r)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;const i=Ce.getPointsGlobalCoordinates(n,r),{POINT_HANDLE_SIZE:o}=Ce,s=t.editingLinearElement?o:o/2;if(i.forEach((l,c)=>{var d,f;if(De(n)&&c!==0&&c!==i.length-1)return;const u=!!((f=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&f.includes(c));c4(e,t,l,s,u)}),De(n)){const l=((a=n.fixedSegments)==null?void 0:a.map(c=>c.index))||[];i.slice(0,-1).forEach((c,u)=>{Ce.isSegmentTooShort(n,i[u+1],i[u],u,t.zoom)||c4(e,t,B((c[0]+i[u+1][0])/2,(c[1]+i[u+1][1])/2),o/2,!1,!l.includes(u+1))})}else Ce.getEditorMidPoints(n,r,t).filter((c,u,d)=>c!==null&&!(De(n)&&(u===0||u===d.length-1))).forEach(c=>{(t.editingLinearElement||i.length===2)&&c4(e,t,c,o/2,!1,!0)});e.restore()},GD=(e,t,n,r,i)=>{Object.keys(r).forEach(o=>{const s=r[o];if(s!==void 0){const[a,l,c,u]=s;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),o==="rotation"?T3(e,a+c/2,l+u/2,c/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,c,u,2/n.zoom.value),e.fill(),e.stroke()):_U(e,a,l,c,u,a+c/2,l+u/2,i,!0),e.restore()}})},Z_e=(e,t,n,r,i)=>{const[o,s,,,a,l]=Ke(r,i),c=3,u=20,d=c/n.zoom.value,f=d/2,g=a-o+d,U=l-s+d,b=Math.min(u/n.zoom.value,g),v=Math.min(u/n.zoom.value,U);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-g,-U],[0,f],[b,f],[f,0],[f,v]],[[g-f,-U],[f,f],[-b+f,f],[0,0],[0,v]],[[-g,U],[0,-f],[b,-f],[f,0],[f,-v]],[[g-f,U],[f,-f],[-b+f,-f],[0,0],[0,-v]]].forEach(E=>{const[[w,T],[A,M],[S,x],[C,R],[O,F]]=E;e.save(),e.translate(a,l),e.rotate(r.angle),e.beginPath(),e.moveTo(w+A,T+M),e.lineTo(w+S,T+x),e.stroke(),e.beginPath(),e.moveTo(w+C,T+R),e.lineTo(w+O,T+F),e.stroke(),e.restore()}),e.restore()},q_e=(e,t,n,r)=>{t.save();const i=zf*2/n.zoom.value,o=e.width+i*2,s=e.height+i*2,a=e.x+o/2,l=e.y+s/2,c=-(o/2+i),u=-(s/2+i);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(c,u,o,s),t.restore()},OK=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:r,allElementsMap:i,scale:o,appState:s,renderConfig:a,device:l})=>{var b,v,_;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};const[c,u]=x3(e,o),d=S3({canvas:e,scale:o,normalizedWidth:c,normalizedHeight:u});d.save(),d.scale(s.zoom.value,s.zoom.value);let f;if(n.forEach(E=>{var w;((w=s.editingLinearElement)==null?void 0:w.elementId)===E.id&&E&&(f=E)}),f&&u4(d,s,f,t),s.selectionElement&&!s.isCropping)try{v5e(s.selectionElement,d,s,a.selectionColor)}catch(E){console.error(E)}if(s.editingTextElement&&Ae(s.editingTextElement)){const E=i.get(s.editingTextElement.id);E&&!E.autoResize&&q_e(E,d,s,a.selectionColor)}s.isBindingEnabled&&s.suggestedBindings.filter(E=>E!=null).forEach(E=>{j_e(d,s,E,t)}),s.frameToHighlight&&K_e(d,s,s.frameToHighlight,t),s.elementsToHighlight&&Y_e(d,s,s.elementsToHighlight);const g=r.some(E=>We(E));if(r.length===1&&((b=s.editingLinearElement)==null?void 0:b.elementId)===r[0].id&&u4(d,s,r[0],t),De(r[0])&&s.selectedLinearElement&&s.selectedLinearElement.segmentMidPointHoveredCoords?z_e(d,s):s.selectedLinearElement&&s.selectedLinearElement.hoverPointIndex>=0&&!(De(r[0])&&s.selectedLinearElement.hoverPointIndex>0&&s.selectedLinearElement.hoverPointIndex<r[0].points.length-1)&&V_e(d,s,t),!s.multiElement&&!s.editingLinearElement){const E=RG(r,s),w=r.length===1&&et(r[0]);w&&((v=s.selectedLinearElement)==null?void 0:v.elementId)===r[0].id&&!r[0].locked&&u4(d,s,r[0],t);const T=a.selectionColor||Kr.black;if(E){const A=He(r),M=[];for(const x of t.values()){const C=[],R=a.remoteSelectedElementIds.get(x.id);if(w&&De(x)&&(x.startBinding||x.endBinding)||(A.has(x.id)&&!yV(s,x)&&C.push(T),R&&C.push(...R.map(O=>Q3(O,s.collaborators.get(O))))),C.length){const[O,F,N,J,K,ne]=Ke(x,t,!0);M.push({angle:x.angle,x1:O,y1:F,x2:N,y2:J,selectionColors:C,dashed:!!R,cx:K,cy:ne,activeEmbeddable:((_=s.activeEmbeddable)==null?void 0:_.element)===x&&s.activeEmbeddable.state==="active",padding:x.id===s.croppingElementId||kt(x)?0:void 0})}}const S=x=>{const C=Tn(t,x),[R,O,F,N]=jt(C);M.push({angle:0,x1:R,x2:F,y1:O,y2:N,selectionColors:[Kr.black],dashed:!0,cx:R+(F-R)/2,cy:O+(N-O)/2,activeEmbeddable:!1})};for(const x of kf(s))S(x);s.editingGroupId&&S(s.editingGroupId),M.forEach(x=>NK(d,s,x))}if(d.save(),d.translate(s.scrollX,s.scrollY),r.length===1){d.fillStyle=Kr.white;const A=kG(r[0],s.zoom,t,"mouse",xm(l));if(!s.viewModeEnabled&&E&&!Ae(s.editingTextElement)&&!s.croppingElementId&&GD(d,a,s,A,r[0].angle),s.croppingElementId&&!s.isCropping){const M=t.get(s.croppingElementId);M&&kt(M)&&Z_e(d,a,s,M,t)}}else if(r.length>1&&!s.isRotating){const A=zf*2/s.zoom.value;d.fillStyle=Kr.white;const[M,S,x,C]=jt(r),R=d.getLineDash();d.setLineDash([2/s.zoom.value]);const O=d.lineWidth;d.lineWidth=1/s.zoom.value,d.strokeStyle=T,_U(d,M-A,S-A,x-M+A*2,C-S+A*2,(M+x)/2,(S+C)/2,0),d.lineWidth=O,d.setLineDash(R);const F=cx([M,S,x,C,(M+x)/2,(S+C)/2],0,s.zoom,"mouse",g?{...xm(l),rotation:!0}:xm(l));r.some(N=>!N.locked)&&GD(d,a,s,F,0)}d.restore()}s.searchMatches.forEach(({id:E,focus:w,matchedLines:T})=>{const A=t.get(E);if(A&&Ae(A)){const[M,S,,,x,C]=Ke(A,t,!0);d.save(),s.theme===Ge.LIGHT?w?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":w?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)",d.translate(s.scrollX,s.scrollY),d.translate(x,C),d.rotate(A.angle),T.forEach(R=>{d.fillRect(M+R.offsetX-x,S+R.offsetY-C,R.width,R.height)}),d.restore()}}),O_e(d,s),d.restore(),sve({context:d,renderConfig:a,appState:s,normalizedWidth:c,normalizedHeight:u});let U;return a.renderScrollbars&&(U=CEe(n,c,u,s),d.save(),d.fillStyle=SEe,d.strokeStyle="rgba(255,255,255,0.8)",[U.horizontal,U.vertical].forEach(E=>{E&&HX(d,E.x,E.y,E.width,E.height,xu/2)}),d.restore()),{scrollBars:U,atLeastOneVisibleElement:n.length>0,elementsMap:t}},FK=a0(e=>{var n;const t=OK(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),Q_e=(e,t)=>{if(t){FK(e);return}const n=OK(e);return e.callback(n),n},J_e=e=>{const t=D.useRef(!1);return D.useEffect(()=>{var l;if(!t.current){t.current=!0;return}const n=new Map,r=new Map,i=new Map,o=new Map,s=new Map;e.appState.collaborators.forEach((c,u)=>{if(c.selectedElementIds)for(const d of Object.keys(c.selectedElementIds))i.has(d)||i.set(d,[]),i.get(d).push(u);!c.pointer||c.pointer.renderCursor===!1||(c.username&&o.set(u,c.username),c.userState&&s.set(u,c.userState),r.set(u,oa({sceneX:c.pointer.x,sceneY:c.pointer.y},e.appState)),n.set(u,c.button))});const a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";Q_e({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:r,remotePointerButton:n,remoteSelectedElementIds:i,remotePointerUsernames:o,remotePointerUserStates:s,selectionColor:a,renderScrollbars:!1},device:e.device,callback:e.renderInteractiveSceneCallback},Kx())}),p("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?Qt.GRAB:Qt.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:L("labels.drawingCanvas")})},XD=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),ewe=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements?!1:ai(XD(e.appState),XD(t.appState)),twe=Ee.memo(J_e,ewe),nwe=e=>{const t=D.useRef(null),n=D.useRef(!1);return D.useEffect(()=>{const r=t.current;if(!r)return;const i=e.canvas;n.current||(n.current=!0,r.replaceChildren(i),i.classList.add("excalidraw__canvas","static"));const o=`${e.appState.width}px`,s=`${e.appState.height}px`;i.style.width!==o&&(i.style.width=o),i.style.height!==s&&(i.style.height=s);const a=e.appState.width*e.scale,l=e.appState.height*e.scale;i.width!==a&&(i.width=a),i.height!==l&&(i.height=l),zW({canvas:i,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},Kx())}),p("div",{className:"excalidraw__canvas-wrapper",ref:t})},jD=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),rwe=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:ai(jD(e.appState),jD(t.appState))&&ai(e.renderConfig,t.renderConfig),iwe=Ee.memo(nwe,rwe);class KD{constructor(t){H(this,"scene");H(this,"getRenderableElements",(()=>{const t=({elementsMap:r,zoom:i,offsetLeft:o,offsetTop:s,scrollX:a,scrollY:l,height:c,width:u})=>{const d=[];for(const f of r.values())Qy(f,u,c,{zoom:i,offsetLeft:o,offsetTop:s,scrollX:a,scrollY:l},r)&&d.push(f);return d},n=({elements:r,editingTextElement:i,newElementId:o,pendingImageElementId:s})=>{const a=Ho(new Map);for(const l of r)kt(l)&&s===l.id||o!==l.id&&(!i||i.type!=="text"||l.id!==i.id)&&a.set(l.id,l);return a};return Bce(({zoom:r,offsetLeft:i,offsetTop:o,scrollX:s,scrollY:a,height:l,width:c,editingTextElement:u,newElementId:d,pendingImageElementId:f,sceneNonce:g})=>{const U=this.scene.getNonDeletedElements(),b=n({elements:U,editingTextElement:u,newElementId:d,pendingImageElementId:f}),v=t({elementsMap:b,zoom:r,offsetLeft:i,offsetTop:o,scrollX:s,scrollY:a,height:l,width:c});return{elementsMap:b,visibleElements:v}})})());this.scene=t}destroy(){FK.cancel(),$W.cancel(),this.getRenderableElements.clear()}}const owe=({trails:e})=>{const t=D.useRef(null);return D.useEffect(()=>{if(t.current)for(const n of e)n.start(t.current);return()=>{for(const n of e)n.stop()}},e),p("div",{className:"SVGLayer",children:p("svg",{ref:t})})},swe=5,awe=(e,t,n)=>{const[r,i]=Ke(e,n),{x:o,y:s}=oa({sceneX:r+e.width,sceneY:i},t),a=o-t.offsetLeft+10,l=s-t.offsetTop;return{x:a,y:l}},YD=({children:e,element:t,elementsMap:n})=>{const r=IU();if(r.contextMenu||r.newElement||r.resizingElement||r.isRotating||r.openMenu||r.viewModeEnabled)return null;const{x:i,y:o}=awe(t,r,n);return p("div",{className:"excalidraw-canvas-buttons",style:{top:`${o}px`,left:`${i}px`,padding:swe},children:e})},lwe="small",d4=e=>z("label",{className:Re("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${lwe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[p("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),p("div",{className:"ToolIcon__icon",children:e.icon})]}),cwe=({height:e,width:t,userToFollow:n,onDisconnect:r})=>p("div",{className:"follow-mode",style:{width:t,height:e},children:z("div",{className:"follow-mode__badge",children:[z("div",{className:"follow-mode__badge__label",children:["Following"," ",p("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),p("button",{type:"button",onClick:r,className:"follow-mode__disconnect-btn",children:Uh})]})});class uwe{constructor(){H(this,"targets",new WeakMap);H(this,"rafIds",new WeakMap)}register(t,n){this.targets.set(t,{callback:n,stopped:!0})}start(t){const n=this.targets.get(t);n&&(this.rafIds.has(t)||(this.targets.set(t,{...n,stopped:!1}),this.scheduleFrame(t)))}stop(t){const n=this.targets.get(t);n&&!n.stopped&&this.targets.set(t,{...n,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return n=>{const r=this.targets.get(t);if(!r)return;const i=this.onFrame(r,n);!r.stopped&&!i?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){const n=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,n)}cancelFrame(t){if(this.rafIds.has(t)){const n=this.rafIds.get(t);cancelAnimationFrame(n)}this.rafIds.delete(t)}onFrame(t,n){return t.callback(n)??!1}}function dwe(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var fwe={};dwe(fwe,"LaserPointer",()=>h8);function er([e,t,n],[r,i,o]){return[e+r,t+i,n+o]}function qp([e,t,n],[r,i,o]){return[e-r,t-i,n-o]}function mr([e,t,n],r){return[e*r,t*r,n*r]}function v1([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function yi([e,t,n],r){return[Math.cos(r)*e-Math.sin(r)*t,Math.sin(r)*e+Math.cos(r)*t,n]}function hwe(e,t,n){return er(e,mr(qp(t,e),n))}function ZD(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function qD(e){return Math.atan2(Math.sin(e),Math.cos(e))}function QD([e,t]){return Math.sqrt(e**2+t**2)}function gg([e,t],[n,r]){return Math.sqrt((n-e)**2+(r-t)**2)}function gwe(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=gg(e[n-1],e[n]);return t+=gg(e[e.length-2],e[e.length-1]),t}const pwe=(e,t,n)=>Math.max(t,Math.min(n,e));function mwe(e,t,n){const r=gg(t,n);if(r===0)return gg(e,t);const i=pwe(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r**2,0,1),o=[t[0]+i*(n[0]-t[0]),t[1]+i*(n[1]-t[1]),e[2]];return gg(o,e)}function f8(e,t){if(t===0||e.length<=2)return e;const n=e[0],r=e[e.length-1],[i,o]=e.reduce(([s,a],l,c)=>{const u=mwe(l,n,r);return u>s?[u,c]:[s,a]},[0,-1]);if(i>=t){const s=e[o];return[...f8([n,...e.slice(1,o),s],t).slice(0,-1),s,...f8([s,...e.slice(o,-1),r],t).slice(1)]}else return[n,r]}const hu=class hu{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},hu.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=hwe(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),gwe(this.tailPoints)>hu.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,r,i,o){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:o,currentIndex:r,totalLength:i})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=f8(n,this.options.simplify));const r=n.length;if(r===0)return[];if(r===1){const S=n[0],x=this.getSize(t,S[2],0,r,0);if(x<.5)return[];const C=[];for(let R=0;R<=Math.PI*2;R+=Math.PI/16)C.push(er(S,mr(yi([1,0,0],R),x)));return C.push(er(S,mr([1,0,0],this.getSize(t,S[2],0,r,0)))),C}if(r===2){const S=n[0],x=n[1],C=this.getSize(t,S[2],0,r,0),R=this.getSize(t,x[2],0,r,0);if(C<.5||R<.5)return[];const O=[],F=ZD(S,[S[0],S[1]-100,S[2]],x);for(let N=F;N<=Math.PI+F;N+=Math.PI/16)O.push(er(S,mr(yi([1,0,0],N),C)));for(let N=Math.PI+F;N<=Math.PI*2+F;N+=Math.PI/16)O.push(er(x,mr(yi([1,0,0],N),R)));return O.push(O[0]),O}const i=[],o=[];let s=0,a=0,l=0,c=0;for(let S=1;S<r-1;S++){const x=n[S-1],C=n[S],R=n[S+1];let O=C[2];const F=gg(x,C);c+=F,s=a+(F-a)*.2;const N=this.getSize(t,O,S,r,c);if(N===0){l=S+1;continue}const J=v1(qp(x,C)),K=v1(qp(R,C)),ne=yi(J,Math.PI/2),ee=yi(J,-Math.PI/2),q=yi(K,Math.PI/2),Z=yi(K,-Math.PI/2),te=er(C,mr(ne,N)),pe=er(C,mr(ee,N)),Ie=er(C,mr(q,N)),Se=er(C,mr(Z,N)),lt=er(ne,Z),at=er(ee,q),gt=er(C,mr(QD(lt)===0?J:v1(lt),N)),ht=er(C,mr(QD(at)===0?K:v1(at),N)),tn=qD(ZD(C,x,R)),Kt=hu.constants.cornerDetectionMaxAngle/180*Math.PI*hu.constants.cornerDetectionVariance(s);if(Math.abs(tn)<Kt){const pt=Math.abs(qD(Math.PI-tn));if(pt===0)continue;if(tn<0){o.push(pe,ht);for(let mt=0;mt<=pt;mt+=pt/4)i.push(er(C,yi(mr(ne,N),mt)));for(let mt=pt;mt>=0;mt-=pt/4)o.push(er(C,yi(mr(ne,N),mt)));o.push(ht,Ie)}else{i.push(te,gt);for(let mt=0;mt<=pt;mt+=pt/4)o.push(er(C,yi(mr(ne,-N),-mt)));for(let mt=pt;mt>=0;mt-=pt/4)i.push(er(C,yi(mr(ne,-N),-mt)));i.push(gt,Se)}}else i.push(gt),o.push(ht);a=s}if(l>=r-2)if(this.options.keepHead){const S=n[r-1],x=[];for(let C=0;C<=Math.PI*2;C+=Math.PI/16)x.push(er(S,mr(yi([1,0,0],C),this.options.size)));return x.push(er(S,mr([1,0,0],this.options.size))),x}else return[];const u=n[l],d=n[l+1],f=n[r-2],g=n[r-1],U=v1(qp(d,u)),b=v1(qp(f,g)),v=yi(U,-Math.PI/2),_=yi(b,Math.PI/2),E=this.getSize(t,u[2],0,r,0),w=[],T=this.options.keepHead?this.options.size:this.getSize(t,f[2],r-2,r,c),A=[];if(E>1){for(let S=0;S<=Math.PI;S+=Math.PI/16)w.unshift(er(u,yi(mr(v,E),-S)));w.unshift(er(u,mr(v,-E)))}else w.push(u);for(let S=0;S<=Math.PI*3;S+=Math.PI/16)A.push(er(g,yi(mr(_,-T),-S)));const M=[...w,...i,...A.reverse(),...o.reverse()];return w.length>0&&M.push(w[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?f8(M,this.options.simplify):M}};hu.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},hu.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let h8=hu;class i9{constructor(t,n,r){H(this,"currentTrail");H(this,"pastTrails",[]);H(this,"container");H(this,"trailElement");this.animationFrameHandler=t,this.app=n,this.options=r,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(Mt,"path")}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,n){if(this.currentTrail){const r=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[r-1][0]===t&&this.currentTrail.originalPoints[r-1][1]===n}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var t;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((t=this.container)==null||t.removeChild(this.trailElement))}startPath(t,n){this.currentTrail=new h8(this.options),this.currentTrail.addPoint([t,n,performance.now()]),this.update()}addPointToPath(t,n){this.currentTrail&&(this.currentTrail.addPoint([t,n,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){const t=[];for(const r of this.pastTrails)t.push(this.drawTrail(r,this.app.state));if(this.currentTrail){const r=this.drawTrail(this.currentTrail,this.app.state);t.push(r)}this.pastTrails=this.pastTrails.filter(r=>r.getStrokeOutline().length!==0),t.length===0&&this.stop();const n=t.join(" ").trim();this.trailElement.setAttribute("d",n),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,n){const r=t.getStrokeOutline(t.options.size/n.zoom.value).map(([i,o])=>{const s=oa({sceneX:i,sceneY:o},n);return[s.x,s.y]});return $ce(r,!0)}}class Uwe{constructor(t,n){H(this,"localTrail");H(this,"collabTrails",new Map);H(this,"container");this.animationFrameHandler=t,this.app=n,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new i9(t,n,{...this.getTrailOptions(),fill:()=>vae})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{const i=Math.max(0,1-(performance.now()-t.pressure)/1e3),o=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(Cf(o),Cf(i))}}}startPath(t,n){this.localTrail.startPath(t,n)}addPointToPath(t,n){this.localTrail.addPointToPath(t,n)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(const[t,n]of this.app.state.collaborators.entries()){let r;this.collabTrails.has(t)?r=this.collabTrails.get(t):(r=new i9(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var i;return((i=n.pointer)==null?void 0:i.laserColor)||Q3(t,n)}}),r.start(this.container),this.collabTrails.set(t,r)),n.pointer&&n.pointer.tool==="laser"&&(n.button==="down"&&!r.hasCurrentTrail&&r.startPath(n.pointer.x,n.pointer.y),n.button==="down"&&r.hasCurrentTrail&&!r.hasLastPoint(n.pointer.x,n.pointer.y)&&r.addPointToPath(n.pointer.x,n.pointer.y),n.button==="up"&&r.hasCurrentTrail&&(r.addPointToPath(n.pointer.x,n.pointer.y),r.endPath()))}for(const t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}}const bwe=(e,t,n,r,i,o)=>{const{zoom:s}=r,a=180*n/Math.PI;let l=e*(s.value-1)/2,c=t*(s.value-1)/2;return e>i&&s.value!==1&&(l=i*(s.value-1)/2),t>o&&s.value!==1&&(c=o*(s.value-1)/2),`translate(${l}px, ${c}px) scale(${s.value}) rotate(${a}deg)`},ywe=({id:e,onChange:t,onSubmit:n,getViewportCoords:r,element:i,canvas:o,excalidrawContainer:s,app:a,autoSelect:l=!0})=>{const c=(K,ne)=>{if(!ne.style.fontFamily||!ne.style.fontSize)return!1;const ee=ne.style.fontFamily.replace(/"/g,"");return tU({fontFamily:K.fontFamily})!==ee||`${K.fontSize}px`!==ne.style.fontSize},u=()=>{var te;const K=a.state,ne=(te=ya.getScene(i))==null?void 0:te.getElement(e);if(!ne)return;const{textAlign:ee,verticalAlign:q}=ne,Z=a.scene.getNonDeletedElementsMap();if(ne&&Ae(ne)){let pe=ne.x,Ie=ne.y;const Se=Zr(ne,a.scene.getNonDeletedElementsMap());let lt=ne.width,at=ne.height,gt=ne.width,ht=ne.height;if(Se&&ne.containerId){if(st(Se)){const qn=Ce.getBoundTextElementPosition(Se,ne,Z);pe=qn.x,Ie=qn.y}const fi=c(ne,d);let Yo;if(fi?Yo=qy(Se.id,Se.height):(Yo=zg[Se.id],Yo||(Yo=qy(Se.id,Se.height))),gt=_c(Se,ne),ht=N3(Se,ne),!st(Se)&&at>ht){const qn=th(at,Se.type);fe(Se,{height:qn});return}else if(!st(Se)&&Se.height>Yo.height&&at<ht){const qn=th(at,Se.type);fe(Se,{height:qn})}else{const{y:qn}=D3(Se,ne,Z);Ie=qn}}const[tn,Kt]=r(pe,Ie),pt=d.selectionStart,mt=d.selectionEnd,Ot=d.value.length;if(pt===mt&&mt!==Ot){const fi=Ot-mt;d.selectionStart=d.value.length-fi,d.selectionEnd=d.value.length-fi}Se?lt+=.5:(gt=(K.width-8-tn)/K.zoom.value,lt=Math.min(lt,gt)),at*=1.05;const Ia=an(ne),gr=(K.height-Kt)/K.zoom.value;Object.assign(d.style,{font:Ia,lineHeight:ne.lineHeight,width:`${lt}px`,height:`${at}px`,left:`${tn}px`,top:`${Kt}px`,transform:bwe(lt,at,Z5e(ne,Se),K,gt,gr),textAlign:ee,verticalAlign:q,color:ne.strokeColor,opacity:ne.opacity/100,filter:"var(--theme-filter)",maxHeight:`${gr}px`}),d.scrollTop=0,fe(ne,{x:pe,y:Ie})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let f="pre",g="normal";(Cn(i)||!i.autoResize)&&(f="pre-wrap",g="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:g,whiteSpace:f,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=i.originalText,u(),t&&(d.onpaste=async K=>{const ne=await JW(K,!0);if(!ne.text)return;const ee=Rg(ne.text);if(!ee)return;const q=Zr(i,a.scene.getNonDeletedElementsMap()),Z=an({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(q){const te=rt(q,a.scene.getNonDeletedElementsMap()),pe=mh(`${d.value}${ee}`,Z,_c(q,te)),Ie=rT(pe,Z);d.style.width=`${Ie}px`}},d.oninput=()=>{const K=Rg(d.value);if(d.value!==K){const ne=d.selectionStart;d.value=K,d.selectionStart=ne,d.selectionEnd=ne}t(d.value)}),d.onkeydown=K=>{if(!K.shiftKey&&HL.keyTest(K))K.preventDefault(),a.actionManager.executeAction(HL),u();else if(!K.shiftKey&&WL.keyTest(K))K.preventDefault(),a.actionManager.executeAction(WL),u();else if(!K.shiftKey&&GL.keyTest(K))K.preventDefault(),a.actionManager.executeAction(GL),u();else if($L.keyTest(K))a.actionManager.executeAction($L);else if(zL.keyTest(K))a.actionManager.executeAction(zL);else if(K.key===j.ESCAPE)K.preventDefault(),A=!0,M();else if(K.key===j.ENTER&&K[j.CTRL_OR_CMD]){if(K.preventDefault(),K.isComposing||K.keyCode===229)return;A=!0,M()}else if(K.key===j.TAB||K[j.CTRL_OR_CMD]&&(K.code===It.BRACKET_LEFT||K.code===It.BRACKET_RIGHT)){if(K.preventDefault(),K.isComposing)return;K.shiftKey||K.code===It.BRACKET_LEFT?E():_(),d.dispatchEvent(new Event("input"))}};const U=4,b=" ".repeat(U),v=new RegExp(`^ {1,${U}}`),_=()=>{const{selectionStart:K,selectionEnd:ne}=d,ee=w();let q=d.value;ee.forEach(Z=>{const te=q.slice(0,Z),pe=q.slice(Z);q=`${te}${b}${pe}`}),d.value=q,d.selectionStart=K+U,d.selectionEnd=ne+U*ee.length},E=()=>{const{selectionStart:K,selectionEnd:ne}=d,ee=w(),q=[];let Z=d.value;ee.forEach(te=>{const pe=Z.slice(te,te+U).match(v);if(pe){const Ie=Z.slice(0,te),Se=Z.slice(te+pe[0].length);Z=`${Ie}${Se}`,q.push(te)}}),d.value=Z,q.length&&(K>q[q.length-1]?d.selectionStart=Math.max(K-U,q[q.length-1]):d.selectionStart=K,d.selectionEnd=Math.max(d.selectionStart,ne-U*q.length))},w=()=>{let{selectionStart:K,selectionEnd:ne,value:ee}=d;const q=ee.slice(0,K).match(/[^\n]*$/)[0].length;return K=K-q,ee.slice(K,ne).split(`
`).reduce((te,pe,Ie,Se)=>te.concat(Ie?te[Ie-1]+Se[Ie-1].length+1:K),[]).reverse()},T=K=>{K.target instanceof HTMLCanvasElement&&(K.preventDefault(),K.stopPropagation())};let A=!1;const M=()=>{var ee,q;if(N)return;N=!0,S();const K=(ee=ya.getScene(i))==null?void 0:ee.getElement(i.id);if(!K)return;const ne=Zr(K,a.scene.getNonDeletedElementsMap());if(ne){if(d.value.trim()){const Z=Ec(ne);!Z||Z!==i.id?fe(ne,{boundElements:(ne.boundElements||[]).concat({type:"text",id:i.id})}):st(ne)&&O3(ne)}else fe(ne,{boundElements:(q=ne.boundElements)==null?void 0:q.filter(Z=>!Ae(Z))});Zi(K,ne,a.scene.getNonDeletedElementsMap())}n({viaKeyboard:A,nextOriginalText:d.value})},S=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,J&&J.disconnect(),window.removeEventListener("resize",u),window.removeEventListener("wheel",T,!0),window.removeEventListener("pointerdown",R),window.removeEventListener("pointerup",x),window.removeEventListener("blur",M),window.removeEventListener("beforeunload",M),O(),F(),d.remove()},x=K=>{window.removeEventListener("pointerup",x);const ne=K==null?void 0:K.target,ee=ne instanceof HTMLElement&&ne.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=M,ee||d.focus()})},C=()=>{d.onblur=null,window.addEventListener("pointerup",x),window.addEventListener("blur",M)},R=K=>{const ne=K==null?void 0:K.target;if(K.button===iu.WHEEL){ne instanceof HTMLTextAreaElement&&(K.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(K)),C();return}const ee=ne instanceof HTMLElement&&ne.classList.contains("properties-trigger");(K.target instanceof HTMLElement||K.target instanceof SVGElement)&&K.target.closest(`.${Ig.SHAPE_ACTIONS_MENU}, .${Ig.ZOOM_ACTIONS}`)&&!rf(K.target)||ee?C():K.target instanceof HTMLCanvasElement&&!Nce()&&requestAnimationFrame(()=>{M()})},O=a.scene.onUpdate(()=>{var ne;u(),!!((ne=document.activeElement)!=null&&ne.closest(".properties-content"))||d.focus()}),F=a.onScrollChangeEmitter.on(()=>{u()});let N=!1;l&&d.select(),x();let J=null;o&&"ResizeObserver"in window?(J=new window.ResizeObserver(()=>{u()}),J.observe(o)):window.addEventListener("resize",u),d.onpointerdown=K=>K.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",R,{capture:!0})}),window.addEventListener("beforeunload",M),s==null||s.querySelector(".excalidraw-textEditorContainer").appendChild(d)},vwe=we({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,r)=>{const i=ot(e,t);return i.length===1&&Ae(i[0])&&!i[0].autoResize},perform:(e,t,n,r)=>{const i=ot(e,t);return{appState:t,elements:e.map(o=>{if(o.id===i[0].id&&Ae(o)){const s=ki(o.originalText,an(o),o.lineHeight);return Xe(o,{autoResize:!0,width:s.width,height:s.height,text:o.originalText})}return o}),storeAction:ae.CAPTURE}}}),Ewe=e=>{const t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(r=>`\\s*${r}(-beta)?`).join("|")})\\b`).test(e.trim())},BK=({canvas:e,rc:t,newElement:n,elementsMap:r,allElementsMap:i,scale:o,appState:s,renderConfig:a})=>{if(e){const[l,c]=x3(e,o),u=S3({canvas:e,scale:o,normalizedWidth:l,normalizedHeight:c});u.save(),u.scale(s.zoom.value,s.zoom.value),n&&n.type!=="selection"?Jd(n,r,i,t,u,a,s):u.clearRect(0,0,l,c)}},_we=a0(e=>{BK(e)},{trailing:!0}),wwe=(e,t)=>{if(t){_we(e);return}BK(e)},Iwe=e=>{const t=D.useRef(null);return D.useEffect(()=>{t.current&&wwe({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},Kx())}),p("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},$K=Ee.createContext(null),zK=Ee.createContext(null),VK={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},Yx=Ee.createContext(VK);Yx.displayName="DeviceContext";const Zx=Ee.createContext({container:null,id:null});Zx.displayName="ExcalidrawContainerContext";const qx=Ee.createContext([]);qx.displayName="ExcalidrawElementsContext";const Qx=Ee.createContext({...ks(),width:0,height:0,offsetLeft:0,offsetTop:0});Qx.displayName="ExcalidrawAppStateContext";const Jx=Ee.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});Jx.displayName="ExcalidrawSetAppStateContext";const eS=Ee.createContext(null);eS.displayName="ExcalidrawActionManagerContext";const wa=()=>D.useContext($K),wU=()=>D.useContext(zK),Or=()=>D.useContext(Yx),bl=()=>D.useContext(Zx),tv=()=>D.useContext(qx),IU=()=>D.useContext(Qx),Ir=()=>D.useContext(Jx),xo=()=>D.useContext(eS);let Rp=!1,f4=0,Wd=!1,Pp=!1,h4=!1,g4={horizontal:null,vertical:null},ru=0,Mp=!1;const p4=new Map;let L5=!1,JD=0,eN=!1,Gd=null;const Ft={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null};class tS extends Ee.Component{constructor(n){super(n);H(this,"canvas");H(this,"interactiveCanvas",null);H(this,"rc");H(this,"unmounted",!1);H(this,"actionManager");H(this,"device",VK);H(this,"excalidrawContainerRef",Ee.createRef());H(this,"scene");H(this,"fonts");H(this,"renderer");H(this,"visibleElements");H(this,"resizeObserver");H(this,"nearestScrollableContainer");H(this,"library");H(this,"libraryItemsFromStorage");H(this,"id");H(this,"store");H(this,"history");H(this,"excalidrawContainerValue");H(this,"files",{});H(this,"imageCache",new Map);H(this,"iFrameRefs",new Map);H(this,"embedsValidationStatus",new Map);H(this,"initializedEmbeds",new Set);H(this,"elementsPendingErasure",new Set);H(this,"flowChartCreator",new wEe);H(this,"flowChartNavigator",new _Ee);H(this,"hitLinkElement");H(this,"lastPointerDownEvent",null);H(this,"lastPointerUpEvent",null);H(this,"lastPointerMoveEvent",null);H(this,"lastPointerMoveCoords",null);H(this,"lastViewportPosition",{x:0,y:0});H(this,"animationFrameHandler",new uwe);H(this,"laserTrails",new Uwe(this.animationFrameHandler,this));H(this,"eraserTrail",new i9(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:n=>{const o=Math.max(0,1-(performance.now()-n.pressure)/200),s=(10-Math.min(10,n.totalLength-n.currentIndex))/10;return Math.min(Cf(s),Cf(o))},fill:()=>this.state.theme===Ge.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"}));H(this,"onChangeEmitter",new Wa);H(this,"onPointerDownEmitter",new Wa);H(this,"onPointerUpEmitter",new Wa);H(this,"onUserFollowEmitter",new Wa);H(this,"onScrollChangeEmitter",new Wa);H(this,"missingPointerEventCleanupEmitter",new Wa);H(this,"onRemoveEventListenersEmitter",new Wa);H(this,"getEffectiveGridSize",()=>w2(this)?this.state.gridSize:null);H(this,"updateEmbedValidationStatus",(n,r)=>{this.embedsValidationStatus.set(n.id,r),Sn.delete(n)});H(this,"updateEmbeddables",()=>{const n=new Set;let r=!1;this.scene.getNonDeletedElements().filter(i=>{if(co(i)){if(n.add(i.id),!this.embedsValidationStatus.has(i.id)){r=!0;const o=bb(i.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(i,o)}}else uu(i)&&n.add(i.id);return!1}),r&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((i,o)=>{n.has(o)||this.iFrameRefs.delete(o)})});H(this,"getFrameNameDOMId",n=>`${this.id}-frame-name-${n.id}`);H(this,"frameNameBoundsCache",{get:n=>{let r=this.frameNameBoundsCache._cache.get(n.id);if(!r||r.zoom!==this.state.zoom.value||r.versionNonce!==n.versionNonce){const i=document.getElementById(this.getFrameNameDOMId(n));if(i){const o=i.getBoundingClientRect(),s=En({clientX:o.x,clientY:o.y},this.state),a=En({clientX:o.right,clientY:o.bottom},this.state);return r={x:s.x,y:s.y,width:a.x-s.x,height:a.y-s.y,angle:0,zoom:this.state.zoom.value,versionNonce:n.versionNonce},this.frameNameBoundsCache._cache.set(n.id,r),r}return null}return r},_cache:new Map});H(this,"resetEditingFrame",n=>{var r;n&&fe(n,{name:((r=n.name)==null?void 0:r.trim())||null}),this.setState({editingFrame:null})});H(this,"renderFrameNames",()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;const n=this.state.theme===Ge.DARK;return this.scene.getNonDeletedFramesLikes().map(r=>{if(!Qy(r,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===r.id&&this.resetEditingFrame(r),null;const{x:i,y:o}=oa({sceneX:r.x,sceneY:r.y},this.state),s=6;let a;const l=sG(r);if(r.id===this.state.editingFrame){const c=l;a=p("input",{autoFocus:!0,value:c,onChange:u=>{fe(r,{name:u.target.value})},onFocus:u=>u.target.select(),onBlur:()=>this.resetEditingFrame(r),onKeyDown:u=>{(u.key===j.ESCAPE||u.key===j.ENTER)&&this.resetEditingFrame(r)},style:{background:this.state.viewBackgroundColor,filter:n?GI:"none",zIndex:2,border:"none",display:"block",padding:`${s}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${s}px, ${s}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-i-s}px`},size:c.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else a=l;return p("div",{id:this.getFrameNameDOMId(r),style:{position:"absolute",bottom:`${this.state.height+Fn.nameOffsetY-o+this.state.offsetTop}px`,left:`${i-this.state.offsetLeft}px`,zIndex:2,fontSize:Fn.nameFontSize,color:n?Fn.nameColorDarkTheme:Fn.nameColorLightTheme,lineHeight:Fn.nameLineHeight,width:"max-content",maxWidth:`${r.width}px`,overflow:r.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:Qt.MOVE,pointerEvents:this.state.viewModeEnabled?Yd.disabled:Yd.enabled},onPointerDown:c=>this.handleCanvasPointerDown(c),onWheel:c=>this.handleWheel(c),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:r.id})},children:a},r.id)})});H(this,"focusContainer",()=>{var n;(n=this.excalidrawContainerRef.current)==null||n.focus()});H(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted());H(this,"getSceneElements",()=>this.scene.getNonDeletedElements());H(this,"onInsertElements",n=>{this.addElementsFromPasteOrLibrary({elements:n,position:"center",files:null})});H(this,"onExportImage",async(n,r,i)=>{Dt("export",n,"ui");const o=await q3(n,r,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:i.exportingFrame}).catch(Jz).catch(s=>{console.error(s),this.setState({errorMessage:s.message})});this.state.exportEmbedScene&&o&&BT(o)&&this.setState({fileHandle:o})});H(this,"magicGenerations",new Map);H(this,"updateMagicGeneration",({frameElement:n,data:r})=>{r.status==="pending"?fe(n,{customData:{generationData:void 0}},!1):fe(n,{customData:{generationData:r}},!1),this.magicGenerations.set(n.id,r),this.triggerRender()});H(this,"plugins",{});H(this,"onMagicframeToolSelect",()=>{const n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(n.length===0)this.setActiveTool({type:kr.magicframe}),Dt("ai","tool-select (empty-selection)","d2c");else{const r=n.length===1&&gb(n[0])&&n[0];if(!r&&n.some(o=>We(o)||o.frameId)){this.setActiveTool({type:kr.magicframe});return}Dt("ai","tool-select (existing selection)","d2c");let i;if(r)i=r;else{const[o,s,a,l]=jt(n),c=50;i=nw({...Fn,x:o-c,y:s-c,width:a-o+c*2,height:l-s+c*2,opacity:100,locked:!1}),this.scene.insertElement(i);for(const u of n)fe(u,{frameId:i.id});this.setState({selectedElementIds:{[i.id]:!0}})}this.onMagicFrameGenerate(i,"upstream")}});H(this,"openEyeDropper",({type:n})=>{ia.set(j3,{swapPreviewOnAlt:!0,colorPickerType:n==="stroke"?"elementStroke":"elementBackground",onSelect:(r,i)=>{const o=n==="background"&&i.altKey||n==="stroke"&&!i.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?o?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:r},storeAction:ae.CAPTURE}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:r},storeAction:ae.CAPTURE}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?Xe(a,{[o?"strokeColor":"backgroundColor"]:r}):a),storeAction:ae.CAPTURE})},keepOpenOnAlt:!1})});H(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})});H(this,"syncActionResult",Nn(n=>{var o,s,a,l,c,u;if(this.unmounted||n===!1)return;n.storeAction===ae.UPDATE?this.store.shouldUpdateSnapshot():n.storeAction===ae.CAPTURE&&this.store.shouldCaptureIncrement();let r=!1,i=null;if(n.elements&&(this.scene.replaceAllElements(n.elements),r=!0),n.files&&(this.addMissingFiles(n.files,n.replaceFiles),this.addNewImagesToImageCache()),n.appState||i||this.state.contextMenu){let d=((o=n==null?void 0:n.appState)==null?void 0:o.viewModeEnabled)||!1,f=((s=n==null?void 0:n.appState)==null?void 0:s.zenModeEnabled)||!1;const g=((a=n==null?void 0:n.appState)==null?void 0:a.theme)||this.props.theme||Ge.LIGHT,U=((l=n==null?void 0:n.appState)==null?void 0:l.name)??this.state.name,b=((c=n==null?void 0:n.appState)==null?void 0:c.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(d=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(f=this.props.zenModeEnabled),i=((u=n.appState)==null?void 0:u.editingTextElement)||null,n.elements&&i&&n.elements.forEach(v=>{(i==null?void 0:i.id)===v.id&&i!==v&&Rw(v)&&Ae(v)&&(i=v)}),i!=null&&i.isDeleted&&(i=null),this.setState(v=>{const _=n.appState||{};return{...v,..._,contextMenu:null,editingTextElement:i,viewModeEnabled:d,zenModeEnabled:f,theme:g,name:U,errorMessage:b}}),r=!0}!r&&n.storeAction!==ae.NONE&&this.scene.triggerUpdate()}));H(this,"onBlur",Nn(()=>{Wd=!1,this.setState({isBindingEnabled:!0})}));H(this,"onUnload",()=>{this.onBlur()});H(this,"disableEvent",n=>{n.preventDefault()});H(this,"resetHistory",()=>{this.history.clear()});H(this,"resetStore",()=>{this.store.clear()});H(this,"resetScene",Nn(n=>{this.scene.replaceAllElements([]),this.setState(r=>({...ks(),isLoading:n!=null&&n.resetLoadingState?!1:r.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()}));H(this,"initializeScene",async()=>{var i;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async o=>{if(!o.files.length)return;const s=o.files[0],a=await s.getFile();this.loadFileToCanvas(new File([a],a.name||"",{type:a.type}),s)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let n=null;try{typeof this.props.initialData=="function"?n=await this.props.initialData()||null:n=await this.props.initialData||null,n!=null&&n.libraryItems&&this.library.updateLibrary({libraryItems:n.libraryItems,merge:!0}).catch(o=>{console.error(o)})}catch(o){console.error(o),n={appState:{errorMessage:o.message||"Encountered an error during importing or restoring scene data"}}}const r=eh(n,null,null,{repairBindings:!0});r.appState={...r.appState,theme:this.props.theme||r.appState.theme,openSidebar:((i=r.appState)==null?void 0:i.openSidebar)||this.state.openSidebar,activeTool:r.appState.activeTool.type==="image"?{...r.appState.activeTool,type:"selection"}:r.appState.activeTool,isLoading:!1,toast:this.state.toast},n!=null&&n.scrollToContent&&(r.appState={...r.appState,...x2(r.elements,{...r.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...r,storeAction:ae.UPDATE}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(o=>{this.fonts.onLoaded(o)}),ug(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})});H(this,"isMobileBreakpoint",(n,r)=>n<Mae||r<Dae&&n<Lae);H(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;const{clientWidth:r,clientHeight:i}=document.body,o=this.device.viewport,s=fb(o,{isLandscape:r>i,isMobile:this.isMobileBreakpoint(r,i)});return o!==s?(this.device={...this.device,viewport:s},!0):!1});H(this,"refreshEditorBreakpoints",()=>{const n=this.excalidrawContainerRef.current;if(!n)return;const{width:r,height:i}=n.getBoundingClientRect(),o=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Nae,s=this.device.editor,a=fb(s,{isMobile:this.isMobileBreakpoint(r,i),canFitSidebar:r>o});return s!==a?(this.device={...this.device,editor:a},!0):!1});H(this,"onResize",Nn(()=>{this.scene.getElementsIncludingDeleted().forEach(n=>Sn.delete(n)),this.refreshViewportBreakpoints(),this.updateDOMRect(),C_||this.refreshEditorBreakpoints(),this.setState({})}));H(this,"onFullscreenChange",()=>{var n;!document.fullscreenElement&&((n=this.state.activeEmbeddable)==null?void 0:n.state)==="active"&&this.setState({activeEmbeddable:null})});H(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:n,scrollBars:r,elementsMap:i})=>{r&&(g4=r);const o=this.state.editingTextElement?!1:!n&&i.size>0;this.state.scrolledOutside!==o&&this.setState({scrolledOutside:o}),this.scheduleImageRefresh()});H(this,"onScroll",mc(()=>{const{offsetTop:n,offsetLeft:r}=this.getCanvasOffsets();this.setState(i=>i.offsetLeft===r&&i.offsetTop===n?null:{offsetTop:n,offsetLeft:r})},Rae));H(this,"onCut",Nn(n=>{var i;!((i=this.excalidrawContainerRef.current)!=null&&i.contains(document.activeElement))||rf(n.target)||(this.actionManager.executeAction(qL,"keyboard",n),n.preventDefault(),n.stopPropagation())}));H(this,"onCopy",Nn(n=>{var i;!((i=this.excalidrawContainerRef.current)!=null&&i.contains(document.activeElement))||rf(n.target)||(this.actionManager.executeAction(Mb,"keyboard",n),n.preventDefault(),n.stopPropagation())}));H(this,"onTouchStart",n=>{if(R$&&n.preventDefault(),!Rp){Rp=!0,clearTimeout(f4),f4=window.setTimeout(tS.resetTapTwice,Sae);return}if(Rp&&n.touches.length===1){const r=n.touches[0];this.handleCanvasDoubleClick({clientX:r.clientX,clientY:r.clientY}),Rp=!1,clearTimeout(f4)}n.touches.length===2&&this.setState({selectedElementIds:Bt({},this.state),activeEmbeddable:null})});H(this,"onTouchEnd",n=>{this.resetContextMenuTimer(),n.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:Bt(this.state.previousSelectedElementIds,this.state)}):Ft.pointers.clear()});H(this,"pasteFromClipboard",Nn(async n=>{var d,f;const r=!!L5,i=document.activeElement,o=(d=this.excalidrawContainerRef.current)==null?void 0:d.contains(i);if(n&&!o)return;const s=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(n&&(!(s instanceof HTMLCanvasElement)||rf(i)))return;const{x:a,y:l}=En({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state);let c=(f=n==null?void 0:n.clipboardData)==null?void 0:f.files[0];const u=await JW(n,r);if(!c&&!r){if(u.mixedContent)return this.addElementsFromMixedContentPaste(u.mixedContent,{isPlainPaste:r,sceneX:a,sceneY:l});if(u.text){const g=u.text.trim();g.startsWith("<svg")&&g.endsWith("</svg>")&&(c=vM(g))}}if(Pf(c)&&!u.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:L("errors.imageToolNotSupported")});return}const g=this.createImageElement({sceneX:a,sceneY:l});this.insertImageElement(g,c),this.initializeImageDimensions(g),this.setState({selectedElementIds:Bt({[g.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(u,n)===!1)return}catch(g){console.error(g)}if(u.errorMessage)this.setState({errorMessage:u.errorMessage});else if(u.spreadsheet&&!r)this.setState({pasteDialog:{data:u.spreadsheet,shown:!0}});else if(u.elements){const g=u.programmaticAPI?t9(u.elements):u.elements;this.addElementsFromPasteOrLibrary({elements:g,files:u.files||null,position:"cursor",retainSeed:r})}else if(u.text){if(u.text&&Ewe(u.text)){const b=await Le(()=>import("./index-DDSADHlU.js").then(v=>v.b5),__vite__mapDeps([]));try{const{elements:v,files:_}=await b.parseMermaidToExcalidraw(u.text),E=t9(v,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:E,files:_,position:"cursor"});return}catch(v){console.warn(`parsing pasted text as mermaid definition failed: ${v.message}`)}}const g=iV(u.text).split(/\n+/).map(b=>b.trim()).filter(Boolean),U=g.map(b=>Hme(b)).filter(b=>{var v;return bb(b,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(b)||((v=Z1(b))==null?void 0:v.type)==="video")});if(!L5&&U.length>0&&U.length===g.length){const b=[];for(const v of U){const _=b[b.length-1],E=this.insertEmbeddableElement({sceneX:_?_.x+_.width+20:a,sceneY:l,link:zo(v)});E&&b.push(E)}b.length&&this.setState({selectedElementIds:Object.fromEntries(b.map(v=>[v.id,!0]))});return}this.addTextFromPaste(u.text,r)}this.setActiveTool({type:"selection"}),n==null||n.preventDefault()}));H(this,"addElementsFromPasteOrLibrary",n=>{var x,C;const r=Jf(n.elements,null,void 0),[i,o,s,a]=jt(r),l=xi(i,s)/2,c=xi(o,a)/2,u=typeof n.position=="object"?n.position.clientX:n.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,d=typeof n.position=="object"?n.position.clientY:n.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:f,y:g}=En({clientX:u,clientY:d},this.state),U=f-l,b=g-c,[v,_]=Ur(U,b,this.getEffectiveGridSize()),E=eH(r.map(R=>Xe(R,{x:R.x+v-i,y:R.y+_-o})),{randomizeSeed:!n.retainSeed}),w=this.scene.getElementsIncludingDeleted();let T=[...w,...E];T=((C=(x=this.props).onDuplicate)==null?void 0:C.call(x,T,w))||T,ul(T,He(E));const M=this.getTopLayerFrameAtSceneCoords({x:f,y:g});if(M){const R=p5e(E,M);Tm(T,R,M,this.state)}this.scene.replaceAllElements(T),E.forEach(R=>{if(Ae(R)&&Cn(R)){const O=Zr(R,this.scene.getElementsMapIncludingDeleted());Zi(R,O,this.scene.getElementsMapIncludingDeleted())}}),pae&&ca.loadElementsFonts(E).then(R=>{this.fonts.onLoaded(R)}),n.files&&this.addMissingFiles(n.files),this.store.shouldCaptureIncrement();const S=gx(E);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&ia.get(Lx)?this.state.openSidebar:null,...Vi({editingGroupId:null,selectedElementIds:S.reduce((R,O)=>(Cn(O)||(R[O.id]=!0),R),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{n.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),n.fitToContent&&this.scrollToContent(E,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})});H(this,"setAppState",(n,r)=>{this.setState(n,r)});H(this,"removePointer",n=>{ru&&this.resetContextMenuTimer(),Ft.pointers.delete(n.pointerId)});H(this,"toggleLock",(n="ui")=>{this.state.activeTool.locked||Dt("toolbar","toggleLock",`${n} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(r=>({activeTool:{...r.activeTool,...lr(this.state,r.activeTool.locked?{type:"selection"}:r.activeTool),locked:!r.activeTool.locked}}))});H(this,"updateFrameRendering",n=>{this.setState(r=>{const i=typeof n=="function"?n(r.frameRendering):n;return{frameRendering:{enabled:(i==null?void 0:i.enabled)??r.frameRendering.enabled,clip:(i==null?void 0:i.clip)??r.frameRendering.clip,name:(i==null?void 0:i.name)??r.frameRendering.name,outline:(i==null?void 0:i.outline)??r.frameRendering.outline}}})});H(this,"togglePenMode",n=>{this.setState(r=>({penMode:n??!r.penMode,penDetected:!0}))});H(this,"onHandToolToggle",()=>{this.actionManager.executeAction(G3e)});H(this,"zoomCanvas",n=>{this.setState({...Uf({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:ec(n)},this.state)})});H(this,"cancelInProgressAnimation",null);H(this,"scrollToContent",(n=this.scene.getNonDeletedElements(),r)=>{var l;if(typeof n=="string"){let c;if(ug(n)?c=p6e(n):c=n,c){const u=this.scene.getElementsFromId(c);u!=null&&u.length?this.scrollToContent(u,{fitToContent:(r==null?void 0:r.fitToContent)??!0,animate:(r==null?void 0:r.animate)??!0}):ug(n)&&this.setState({toast:{message:L("elementLink.notFound"),duration:3e3,closable:!0}})}return}(l=this.cancelInProgressAnimation)==null||l.call(this);const i=Array.isArray(n)?n:[n];let o=this.state.zoom,s=this.state.scrollX,a=this.state.scrollY;if(r!=null&&r.fitToContent||r!=null&&r.fitToViewport){const{appState:c}=Y3({canvasOffsets:r.canvasOffsets,targetElements:i,appState:this.state,fitToViewport:!!(r!=null&&r.fitToViewport),viewportZoomFactor:r==null?void 0:r.viewportZoomFactor,minZoom:r==null?void 0:r.minZoom,maxZoom:r==null?void 0:r.maxZoom});o=c.zoom,s=c.scrollX,a=c.scrollY}else{const c=x2(i,this.state);s=c.scrollX,a=c.scrollY}if(r!=null&&r.animate){const c=this.state.scrollX,u=this.state.scrollY,d=this.state.zoom.value,f=Sce({fromValues:{scrollX:c,scrollY:u,zoom:d},toValues:{scrollX:s,scrollY:a,zoom:o.value},interpolateValue:(g,U,b,v)=>{if(v==="zoom")return g*Math.pow(U/g,Cf(b))},onStep:({scrollX:g,scrollY:U,zoom:b})=>{this.setState({scrollX:g,scrollY:U,zoom:{value:b}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(r==null?void 0:r.duration)??500});this.cancelInProgressAnimation=()=>{f(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:s,scrollY:a,zoom:o})});H(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})});H(this,"translateCanvas",n=>{var r;(r=this.cancelInProgressAnimation)==null||r.call(this),this.maybeUnfollowRemoteUser(),this.setState(n)});H(this,"setToast",n=>{this.setState({toast:n})});H(this,"restoreFileFromShare",async()=>{try{const n=await caches.open("web-share-target"),r=await n.match("shared-file");if(r){const i=await r.blob(),o=new File([i],i.name||"",{type:i.type});this.loadFileToCanvas(o,null),await n.delete("shared-file"),window.history.replaceState(null,nc,window.location.pathname)}}catch(n){this.setState({errorMessage:n.message})}});H(this,"addFiles",Nn(n=>{const{addedFiles:r}=this.addMissingFiles(n);this.clearImageShapeCache(r),this.scene.triggerUpdate(),this.addNewImagesToImageCache()}));H(this,"addMissingFiles",(n,r=!1)=>{const i=r?{}:{...this.files},o={},s=Array.isArray(n)?n:Object.values(n);for(const a of s)if(!i[a.id]&&(o[a.id]=a,i[a.id]=a,a.mimeType===Ne.svg))try{const l=i6e(_M(s6e(a.dataURL)),Ne.svg);a.dataURL!==l&&(a.version=(a.version??1)+1,a.dataURL=l)}catch(l){console.error(l)}return this.files=i,{addedFiles:o}});H(this,"updateScene",Nn(n=>{const r=wc(n.elements??[]);if(n.storeAction&&n.storeAction!==ae.NONE){const i=this.store.snapshot.appState,o=this.store.snapshot.elements,s=n.appState?Object.assign({},i,n.appState):i,a=n.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),He(r)):o;n.storeAction===ae.CAPTURE?this.store.captureIncrement(a,s):n.storeAction===ae.UPDATE&&this.store.updateSnapshot(a,s)}n.appState&&this.setState(n.appState),n.elements&&this.scene.replaceAllElements(r),n.collaborators&&this.setState({collaborators:n.collaborators})}));H(this,"triggerRender",n=>{n===!0?this.scene.triggerUpdate():this.setState({})});H(this,"toggleSidebar",({name:n,tab:r,force:i})=>{var a,l;let o;i===void 0?o=((a=this.state.openSidebar)==null?void 0:a.name)===n&&((l=this.state.openSidebar)==null?void 0:l.tab)===r?null:n:o=i?n:null;const s=o?{name:o}:null;return s&&r&&(s.tab=r),this.setState({openSidebar:s}),!!o});H(this,"updateCurrentCursorPosition",Nn(n=>{this.lastViewportPosition.x=n.clientX,this.lastViewportPosition.y=n.clientY}));H(this,"getEditorUIOffsets",()=>{var s,a,l,c,u,d,f,g,U,b;const n=((c=(l=(a=(s=this.excalidrawContainerRef)==null?void 0:s.current)==null?void 0:a.querySelector(".App-toolbar"))==null?void 0:l.getBoundingClientRect())==null?void 0:c.bottom)??0,r=(f=(d=(u=this.excalidrawContainerRef)==null?void 0:u.current)==null?void 0:d.querySelector(".sidebar"))==null?void 0:f.getBoundingClientRect(),i=(b=(U=(g=this.excalidrawContainerRef)==null?void 0:g.current)==null?void 0:U.querySelector(".App-menu__left"))==null?void 0:b.getBoundingClientRect(),o=16;return l2().rtl?{top:n+o,right:Math.max(this.state.width-((i==null?void 0:i.left)??this.state.width),0)+o,bottom:o,left:Math.max((r==null?void 0:r.right)??0,0)+o}:{top:n+o,right:Math.max(this.state.width-((r==null?void 0:r.left)??this.state.width)+o,0),bottom:o,left:Math.max((i==null?void 0:i.right)??0,0)+o}});H(this,"onKeyDown",Nn(n=>{var s,a;if("Proxy"in window&&(!n.shiftKey&&/^[A-Z]$/.test(n.key)||n.shiftKey&&/^[a-z]$/.test(n.key))&&(n=new Proxy(n,{get(l,c){const u=l[c];return typeof u=="function"?u.bind(l):c==="key"?n.shiftKey?l.key.toUpperCase():l.key.toLowerCase():u}})),!H_(n.target)){if((n.key===j.ESCAPE||n.key===j.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}const l=ot(this.scene.getNonDeletedElementsMap(),this.state);if(l.length===1&&kt(l[0])&&n.key===j.ENTER){this.startImageCropping(l[0]);return}if(n.key===j.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}const c=Wp(n.key);if(n[j.CTRL_OR_CMD]&&c&&!n.shiftKey){n.preventDefault();const u=ot(this.scene.getNonDeletedElementsMap(),this.state);u.length===1&&u3(u[0])&&this.flowChartCreator.createNodes(u[0],this.scene.getNonDeletedElementsMap(),this.state,_D(n.key)),(s=this.flowChartCreator.pendingNodes)!=null&&s.length&&!Ab(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(n.altKey){const u=ot(this.scene.getNonDeletedElementsMap(),this.state);if(u.length===1&&c){n.preventDefault();const d=this.flowChartNavigator.exploreByDirection(u[0],this.scene.getNonDeletedElementsMap(),_D(n.key));if(d){this.setState(g=>({selectedElementIds:Bt({[d]:!0},g)}));const f=this.scene.getNonDeletedElementsMap().get(d);f&&!Ab([f],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(f,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(n[j.CTRL_OR_CMD]&&n.key===j.P&&!n.shiftKey&&!n.altKey){this.setToast({message:L("commandPalette.shortcutHint",{shortcut:Ai("commandPalette")})}),n.preventDefault();return}if(n[j.CTRL_OR_CMD]&&n.key.toLowerCase()===j.V&&(L5=n.shiftKey,clearTimeout(JD),JD=window.setTimeout(()=>{L5=!1},100)),n[j.CTRL_OR_CMD]&&rf(n.target)&&(n.code===It.MINUS||n.code===It.EQUAL)){n.preventDefault();return}if(rf(n.target)&&n.key!==j.ESCAPE||Wp(n.key)&&H_(n.target))return;if(n.key===j.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(n.key.toLowerCase()===j.E&&n.shiftKey&&n[j.CTRL_OR_CMD]){n.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(n.key===j.PAGE_UP||n.key===j.PAGE_DOWN){let l=(n.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;n.key===j.PAGE_DOWN&&(l=-l),n.shiftKey?this.translateCanvas(c=>({scrollX:c.scrollX+l})):this.translateCanvas(c=>({scrollY:c.scrollY+l}))}if(((a=this.state.openDialog)==null?void 0:a.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(n)||this.state.viewModeEnabled)return;if(n[j.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),Wp(n.key)){let l=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});const c=l.find(De),u=new Set;l.filter(De).filter(U=>{const b=U.startBinding&&!l.some(_=>{var E;return _.id===((E=U.startBinding)==null?void 0:E.elementId)}),v=U.endBinding&&!l.some(_=>{var E;return _.id===((E=U.endBinding)==null?void 0:E.elementId)});return b||v}).forEach(U=>u.add(U.id)),l=l.filter(U=>!u.has(U.id));const d=this.getEffectiveGridSize()&&(n.shiftKey?lR:this.getEffectiveGridSize())||(n.shiftKey?bae:lR);let f=0,g=0;n.key===j.ARROW_LEFT?f=-d:n.key===j.ARROW_RIGHT?f=d:n.key===j.ARROW_UP?g=-d:n.key===j.ARROW_DOWN&&(g=d),l.forEach(U=>{fe(U,{x:U.x+f,y:U.y+g},!1),_o(U,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:l})}),this.setState({suggestedBindings:_E(l.filter(U=>U.id!==(c==null?void 0:c.id)||d!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),n.preventDefault()}else if(n.key===j.ENTER){const l=this.scene.getSelectedElements(this.state);if(l.length===1){const c=l[0];if(n[j.CTRL_OR_CMD])et(c)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==l[0].id)&&(this.store.shouldCaptureIncrement(),De(c)||this.setState({editingLinearElement:new Ce(c)}));else if(Ae(c)||ebe(c)){let u;Ae(c)||(u=c);const d=zE(c,this.state,this.scene.getNonDeletedElementsMap()),f=d.x,g=d.y;this.startTextEditing({sceneX:f,sceneY:g,container:u}),n.preventDefault();return}else We(c)&&this.setState({editingFrame:c.id})}}else if(!n.ctrlKey&&!n.altKey&&!n.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){const l=Kpe(n.key);l?(this.state.activeTool.type!==l&&Dt("toolbar",l,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),l==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(c=>({currentItemArrowType:c.currentItemArrowType===Vr.sharp?Vr.round:c.currentItemArrowType===Vr.round?Vr.elbow:Vr.sharp})),this.setActiveTool({type:l}),n.stopPropagation()):n.key===j.Q&&(this.toggleLock("keyboard"),n.stopPropagation())}if(n.key===j.SPACE&&Ft.pointers.size===0&&(Wd=!0,on(this.interactiveCanvas,Qt.GRAB),n.preventDefault()),(n.key===j.G||n.key===j.S)&&!n.altKey&&!n[j.CTRL_OR_CMD]){const l=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!l.length)return;n.key===j.G&&(Bg(this.state.activeTool.type)||l.some(c=>Bg(c.type)))&&(this.setState({openPopup:"elementBackground"}),n.stopPropagation()),n.key===j.S&&(this.setState({openPopup:"elementStroke"}),n.stopPropagation())}if(!n[j.CTRL_OR_CMD]&&n.shiftKey&&n.key.toLowerCase()===j.F){const l=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!l.length)return;(this.state.activeTool.type==="text"||l.find(c=>Ae(c)||rt(c,this.scene.getNonDeletedElementsMap())))&&(n.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(n.key===j.K&&!n.altKey&&!n[j.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}n[j.CTRL_OR_CMD]&&(n.key===j.BACKSPACE||n.key===j.DELETE)&&ia.set(ev,"clearCanvas");const r=n.key.toLocaleLowerCase(),i=r===j.S&&n.shiftKey,o=n.key===j.I||r===j.G&&n.shiftKey;(i||o)&&this.openEyeDropper({type:i?"stroke":"background"})}));H(this,"onKeyUp",Nn(n=>{var r,i,o,s;if(n.key===j.SPACE&&(this.state.viewModeEnabled||((r=this.state.openDialog)==null?void 0:r.name)==="elementLinkSelector"?on(this.interactiveCanvas,Qt.GRAB):this.state.activeTool.type==="selection"?Ks(this.interactiveCanvas):(Ba(this.interactiveCanvas,this.state),this.setState({selectedElementIds:Bt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),Wd=!1),!n[j.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),Wp(n.key)&&(Ly(this.scene.getSelectedElements(this.state).filter(et),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,gf(this.state),((i=this.state.selectedLinearElement)==null?void 0:i.selectedPointsIndices)??[],this.state.zoom),this.setState({suggestedBindings:[]})),n.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({storeAction:ae.CAPTURE})),!n[j.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(o=this.flowChartCreator.pendingNodes)!=null&&o.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);const a=(s=this.flowChartCreator.pendingNodes)==null?void 0:s[0];a&&(this.setState(l=>({selectedElementIds:Bt({[a.id]:!0},l)})),Ab([a],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(a,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({storeAction:ae.CAPTURE})}}));H(this,"isToolSupported",n=>{var r;return((r=this.props.UIOptions.tools)==null?void 0:r[n])!==!1});H(this,"setActiveTool",n=>{if(!this.isToolSupported(n.type)){console.warn(`"${n.type}" tool is disabled via "UIOptions.canvasActions.tools.${n.type}"`);return}const r=lr(this.state,n);r.type==="hand"?on(this.interactiveCanvas,Qt.GRAB):Wd||Ba(this.interactiveCanvas,{...this.state,activeTool:r}),Tce(document.activeElement)&&this.focusContainer(),eT(r.type)||this.setState({suggestedBindings:[]}),r.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(n.type==="image"&&n.insertOnCanvasDirectly)??!1}),this.setState(i=>{const o={snapLines:i.snapLines.length?[]:i.snapLines,originSnapOffset:null,activeEmbeddable:null};return r.type==="freedraw"&&this.store.shouldCaptureIncrement(),r.type!=="selection"?{...i,activeTool:r,selectedElementIds:Bt({},i),selectedGroupIds:Bt({},i),editingGroupId:null,multiElement:null,...o}:{...i,activeTool:r,...o}})});H(this,"setOpenDialog",n=>{this.setState({openDialog:n})});H(this,"setCursor",n=>{on(this.interactiveCanvas,n)});H(this,"resetCursor",()=>{Ks(this.interactiveCanvas)});H(this,"isTouchScreenMultiTouchGesture",()=>Ft.pointers.size>=2);H(this,"getName",()=>this.state.name||this.props.name||`${L("labels.untitled")}-${DR()}`);H(this,"onGestureStart",Nn(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:Bt({},this.state),activeEmbeddable:null}),Ft.initialScale=this.state.zoom.value}));H(this,"onGestureChange",Nn(n=>{if(n.preventDefault(),this.isTouchScreenMultiTouchGesture())return;const r=Ft.initialScale;r&&this.setState(i=>({...Uf({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:ec(r*n.scale)},i)}))}));H(this,"onGestureEnd",Nn(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:Bt(this.state.previousSelectedElementIds,this.state)}),Ft.initialScale=null}));H(this,"startTextEditing",({sceneX:n,sceneY:r,insertAtParentCenter:i=!0,container:o,autoEdit:s=!0})=>{let a=!1,l=i&&this.getTextWysiwygSnappedToCenterPosition(n,r,this.state,o);o&&l&&(rt(o,this.scene.getNonDeletedElementsMap())||(a=!0));let c=null;const u=this.scene.getSelectedElements(this.state);u.length===1?Ae(u[0])?c=u[0]:o?c=rt(u[0],this.scene.getNonDeletedElementsMap()):c=this.getTextElementAtPosition(n,r):c=this.getTextElementAtPosition(n,r);const d=(c==null?void 0:c.fontFamily)||this.state.currentItemFontFamily,f=(c==null?void 0:c.lineHeight)||Gf(d),g=this.state.currentItemFontSize;if(!c&&a&&o&&!st(o)){const _=pV(an({fontSize:g,fontFamily:d}),f),E=mV(g,f),w=Math.max(o.height,E),T=Math.max(o.width,_);fe(o,{height:w,width:T}),n=o.x+T/2,r=o.y+w/2,l&&(l=this.getTextWysiwygSnappedToCenterPosition(n,r,this.state,o))}const U=this.getTopLayerFrameAtSceneCoords({x:n,y:r}),b=c||Wo({x:l?l.elementCenterX:n,y:l?l.elementCenterY:r,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:g,fontFamily:d,textAlign:l?"center":this.state.currentItemTextAlign,verticalAlign:l?Do.MIDDLE:fy,containerId:a?o==null?void 0:o.id:void 0,groupIds:(o==null?void 0:o.groupIds)??[],lineHeight:f,angle:(o==null?void 0:o.angle)??0,frameId:U?U.id:null});if(!c&&a&&o&&fe(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:b.id})}),this.setState({editingTextElement:b}),!c)if(o&&a){const v=this.scene.getElementIndex(o.id);this.scene.insertElementAtIndex(b,v+1)}else this.scene.insertElement(b);s||c||o?this.handleTextWysiwyg(b,{isExistingElement:!!c}):this.setState({newElement:b,multiElement:null})});H(this,"startImageCropping",n=>{this.store.shouldCaptureIncrement(),this.setState({croppingElementId:n.id})});H(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.shouldCaptureIncrement(),this.setState({croppingElementId:null}))});H(this,"handleCanvasDoubleClick",n=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;const r=this.scene.getSelectedElements(this.state);let{x:i,y:o}=En(n,this.state);if(r.length===1&&et(r[0])){if(n[j.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==r[0].id)&&!De(r[0])){this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new Ce(r[0])});return}else if(this.state.selectedLinearElement&&De(r[0])){const a=Ce.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:i,y:o},this.state,this.scene.getNonDeletedElementsMap()),l=a?Ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,a,this.scene.getNonDeletedElementsMap()):-1;if(l&&l>-1){this.store.shouldCaptureIncrement(),Ce.deleteFixedSegment(r[0],l);const c=Ce.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:i,y:o},this.state,this.scene.getNonDeletedElementsMap()),u=c?Ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,c,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:u,value:a,added:!1}},segmentMidPointHoveredCoords:c}});return}}}if(r.length===1&&kt(r[0])){this.startImageCropping(r[0]);return}if(Ks(this.interactiveCanvas),kf(this.state).length>0){const a=this.getElementAtPosition(i,o),l=a&&Iue(a,this.state.selectedGroupIds);if(l){this.store.shouldCaptureIncrement(),this.setState(c=>({...c,...Vi({editingGroupId:l,selectedElementIds:{[a.id]:!0}},this.scene.getNonDeletedElements(),c,this)}));return}}if(Ks(this.interactiveCanvas),!n[j.CTRL_OR_CMD]&&!this.state.viewModeEnabled){const a=this.getElementAtPosition(i,o);if(hs(a)){this.setState({activeEmbeddable:{element:a,state:"active"}});return}const l=this.getTextBindableContainerAtPosition(i,o);if(l&&(Ps(l)||!sa(l.backgroundColor)||w1({x:i,y:o,element:l,shape:Gl(l,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){const c=zE(l,this.state,this.scene.getNonDeletedElementsMap());i=c.x,o=c.y}this.startTextEditing({sceneX:i,sceneY:o,insertAtParentCenter:!n.altKey,container:l})}});H(this,"getElementLinkAtPosition",(n,r)=>{const i=this.scene.getNonDeletedElements();let o=-1;for(let s=i.length-1;s>=0;s--){const a=i[s];if(r&&a.id===r.id&&(o=s),a.link&&s>=o&&OE(a,this.scene.getNonDeletedElementsMap(),this.state,B(n.x,n.y),this.device.editor.isMobile))return a}});H(this,"redirectToLink",(n,r)=>{const i=Xn(B(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),B(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||i>Kd)return;const o=En(this.lastPointerDownEvent,this.state),s=this.scene.getNonDeletedElementsMap(),a=OE(this.hitLinkElement,s,this.state,B(o.x,o.y),this.device.editor.isMobile),l=En(this.lastPointerUpEvent,this.state),c=OE(this.hitLinkElement,s,this.state,B(l.x,l.y),this.device.editor.isMobile);if(a&&c){rD();let u=this.hitLinkElement.link;if(u){u=zo(u);let d;if(this.props.onLinkOpen&&(d=nV(ge.EXCALIDRAW_LINK,n.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:u},d)),!(d!=null&&d.defaultPrevented)){const f=IV(u)?"_self":"_blank",g=window.open(void 0,f);g&&(g.opener=null,g.location=u)}}}});H(this,"getTopLayerFrameAtSceneCoords",n=>{const r=this.scene.getNonDeletedElementsMap(),i=this.scene.getNonDeletedFramesLikes().filter(o=>PM(n,o,r));return i.length?i[i.length-1]:null});H(this,"handleCanvasPointerMove",n=>{var g,U,b,v,_,E;this.savePointer(n.clientX,n.clientY,this.state.cursorButton),this.lastPointerMoveEvent=n.nativeEvent,Ft.pointers.has(n.pointerId)&&Ft.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY});const r=Ft.initialScale;if(Ft.pointers.size===2&&Ft.lastCenter&&r&&Ft.initialDistance){const w=yD(Ft.pointers),T=w.x-Ft.lastCenter.x,A=w.y-Ft.lastCenter.y;Ft.lastCenter=w;const M=vD(Array.from(Ft.pointers.values())),S=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:M/Ft.initialDistance,x=S?ec(r*S):this.state.zoom.value;this.setState(C=>{const R=Uf({viewportX:w.x,viewportY:w.y,nextZoom:x},C);this.translateCanvas({zoom:R.zoom,scrollX:R.scrollX+2*(T/x),scrollY:R.scrollY+2*(A/x),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else Ft.lastCenter=Ft.initialDistance=Ft.initialScale=null;if(Wd||Pp||h4||xg(this.state))return;const o=ID(g4,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(o?Ks(this.interactiveCanvas):Ba(this.interactiveCanvas,this.state));const s=En(n,this.state),{x:a,y:l}=s;if(!this.state.newElement&&X5e(this.state.activeTool.type)){const{originOffset:w,snapLines:T}=G5e(this.scene.getNonDeletedElements(),this,{x:a,y:l},n,this.scene.getNonDeletedElementsMap());this.setState(A=>{const M=Ep(A.snapLines,T),S=A.originSnapOffset?Ep(A.originSnapOffset,w):w;return A.snapLines===M&&A.originSnapOffset===S?null:{snapLines:M,originSnapOffset:S}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(w=>w.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){const w=Ce.handlePointerMove(n,a,l,this,this.scene.getNonDeletedElementsMap());w&&w!==this.state.editingLinearElement&&Pr.flushSync(()=>{this.setState({editingLinearElement:w})}),(w==null?void 0:w.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(s,w.elbowed):Pr.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(sV(this.state.activeTool.type)){const{newElement:w}=this.state;Za(w,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(w,[s],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(s,!1)}if(this.state.multiElement){const{multiElement:w}=this.state,{x:T,y:A}=w,{points:M,lastCommittedPoint:S}=w,x=M[M.length-1];if(Ba(this.interactiveCanvas,this.state),x===S)Xn(B(a-T,l-A),x)>=ab?fe(w,{points:[...M,B(a-T,l-A)]},!1):on(this.interactiveCanvas,Qt.POINTER);else if(M.length>2&&S&&Xn(B(a-T,l-A),S)<ab)on(this.interactiveCanvas,Qt.POINTER),fe(w,{points:M.slice(0,-1)},!1);else{const[C,R]=Ur(a,l,n[j.CTRL_OR_CMD]||De(w)?null:this.getEffectiveGridSize()),[O,F]=(w==null?void 0:w.lastCommittedPoint)??[0,0];let N=C-T-O,J=R-A-F;Um(n)&&({width:N,height:J}=Aw(O+T,F+A,C,R)),bc(M,this.state.zoom.value)&&on(this.interactiveCanvas,Qt.POINTER),fe(w,{points:[...M.slice(0,-1),B(O+N,F+J)]},!1,{isDragging:!0}),this.triggerRender(!1)}return}if(!!n.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;const u=this.scene.getNonDeletedElements(),d=this.scene.getSelectedElements(this.state);if(d.length===1&&!o&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((g=this.state.openDialog)==null?void 0:g.name)!=="elementLinkSelector"&&!(d.length===1&&De(d[0]))){const w=lL(u,this.state,a,l,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(w&&w.transformHandleType){on(this.interactiveCanvas,uL(w));return}}}else if(d.length>1&&!o&&((U=this.state.openDialog)==null?void 0:U.name)!=="elementLinkSelector"){const w=cL(jt(d),a,l,this.state.zoom,n.pointerType,this.device);if(w){on(this.interactiveCanvas,uL({transformHandleType:w}));return}}const f=this.getElementAtPosition(s.x,s.y);this.hitLinkElement=this.getElementLinkAtPosition(s,f),!Ha(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(on(this.interactiveCanvas,Qt.POINTER),wve(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(rD(),f&&(f.link||co(f))&&this.state.selectedElementIds[f.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?on(this.interactiveCanvas,Ae(f)?Qt.TEXT:Qt.CROSSHAIR):this.state.viewModeEnabled?on(this.interactiveCanvas,Qt.GRAB):((b=this.state.openDialog)==null?void 0:b.name)==="elementLinkSelector"?on(this.interactiveCanvas,Qt.AUTO):o?on(this.interactiveCanvas,Qt.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l):n[j.CTRL_OR_CMD]?on(this.interactiveCanvas,Qt.AUTO):(f||this.isHittingCommonBoundingBoxOfSelectedElements(s,d))&&!(f!=null&&f.locked)&&(f&&hs(f)&&this.isIframeLikeElementCenter(f,n,a,l)?(on(this.interactiveCanvas,Qt.POINTER),this.setState({activeEmbeddable:{element:f,state:"hover"}})):(!f||!De(f))&&(on(this.interactiveCanvas,Qt.MOVE),((v=this.state.activeEmbeddable)==null?void 0:v.state)==="hover"&&this.setState({activeEmbeddable:null})))),((_=this.state.openDialog)==null?void 0:_.name)==="elementLinkSelector"&&f?this.setState(w=>({hoveredElementIds:Ep(w.hoveredElementIds,Vi({editingGroupId:w.editingGroupId,selectedElementIds:{[f.id]:!0}},this.scene.getNonDeletedElements(),w,this).selectedElementIds)})):((E=this.state.openDialog)==null?void 0:E.name)==="elementLinkSelector"&&!f&&this.setState(w=>({hoveredElementIds:Ep(w.hoveredElementIds,{})})))});H(this,"handleEraser",(n,r,i)=>{this.eraserTrail.addPointToPath(i.x,i.y);let o=!1;const s=new Set,a=this.scene.getNonDeletedElements(),l=g=>{var U;for(const b of g){if(b.locked)return;if(n.altKey?this.elementsPendingErasure.delete(b.id)&&(o=!0):this.elementsPendingErasure.has(b.id)||(o=!0,this.elementsPendingErasure.add(b.id)),o&&((U=b.groupIds)!=null&&U.length)){const v=b.groupIds.at(-1);if(!s.has(v)){s.add(v);const _=Tn(a,v);for(const E of _)n.altKey?this.elementsPendingErasure.delete(E.id):this.elementsPendingErasure.add(E.id)}}}},c=Xn(B(r.lastCoords.x,r.lastCoords.y),B(i.x,i.y)),u=this.getElementHitThreshold(),d={...r.lastCoords};let f=0;for(;f<=c;){const g=this.getElementsAtPosition(d.x,d.y);if(l(g),f===c)break;f=Math.min(f+u,c);const U=f/c,b=(1-U)*d.x+U*i.x,v=(1-U)*d.y+U*i.y;d.x=b,d.y=v}if(r.lastCoords.x=i.x,r.lastCoords.y=i.y,o){for(const g of this.scene.getNonDeletedElements())Cn(g)&&(this.elementsPendingErasure.has(g.id)||this.elementsPendingErasure.has(g.containerId))&&(n.altKey?(this.elementsPendingErasure.delete(g.id),this.elementsPendingErasure.delete(g.containerId)):(this.elementsPendingErasure.add(g.id),this.elementsPendingErasure.add(g.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.triggerRender()}});H(this,"handleTouchMove",n=>{Mp=!0});H(this,"handleCanvasPointerDown",n=>{var d,f,g;const r=n.target;if(r.setPointerCapture&&r.setPointerCapture(n.pointerId),this.maybeCleanupAfterMissingPointerUp(n.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(U=>({searchMatches:U.searchMatches.map(b=>({...b,focus:!1}))})),ia.set(gK,null)),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(n),n.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){const U=this.state.newElement;this.updateScene({...U.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(b=>b.id!==U.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:Bt(Object.keys(this.state.selectedElementIds).filter(b=>b!==U.id).reduce((b,v)=>(b[v]=this.state.selectedElementIds[v],b),{}),this.state)},storeAction:((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?ae.NONE:ae.UPDATE});return}const i=document.getSelection();if(i!=null&&i.anchorNode&&i.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),!this.state.penDetected&&n.pointerType==="pen"&&this.setState(U=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(n.pointerType)&&(this.device=fb(this.device,{isTouchScreen:!0})),Pp||(this.lastPointerDownEvent=n,this.handleCanvasPanUsingWheelOrSpaceDrag(n)))return;if(this.setState({lastPointerDownWith:n.pointerType,cursorButton:"down"}),this.savePointer(n.clientX,n.clientY,"down"),n.button===iu.ERASER&&this.state.activeTool.type!==kr.eraser){this.setState({activeTool:lr(this.state,{type:kr.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(n);const U=()=>{b(),v==null||v(),Ha(this.state)&&this.setState({activeTool:lr(this.state,{...this.state.activeTool.lastActiveTool||{type:kr.selection},lastActiveToolBeforeEraser:null})})},b=Dn(window,ge.POINTER_UP,U,{once:!0});let v;requestAnimationFrame(()=>{v=this.missingPointerEventCleanupEmitter.once(U)})});return}if(n.button!==iu.MAIN&&n.button!==iu.TOUCH&&n.button!==iu.ERASER||Ft.pointers.size>1)return;const o=this.initialPointerDownState(n);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(n,o)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(n),this.handleSelectionOnPointerDown(n,o))||!(!this.state.penMode||n.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(n,o);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(n,this.state.activeTool.type,o);else if(this.state.activeTool.type==="image"){on(this.interactiveCanvas,Qt.CROSSHAIR);const U=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!U)return;this.setState({newElement:U,pendingImageElementId:null,multiElement:null});const{x:b,y:v}=En(n,this.state),_=this.getTopLayerFrameAtSceneCoords({x:b,y:v});fe(U,{x:b,y:v,frameId:_?_.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(n,this.state.activeTool.type,o):this.state.activeTool.type==="custom"?Ba(this.interactiveCanvas,this.state):this.state.activeTool.type===kr.frame||this.state.activeTool.type===kr.magicframe?this.createFrameElementOnPointerDown(o,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(o.lastCoords.x,o.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,o);(g=(f=this.props)==null?void 0:f.onPointerDown)==null||g.call(f,this.state.activeTool,o),this.onPointerDownEmitter.trigger(this.state.activeTool,o,n),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(o.lastCoords.x,o.lastCoords.y);const a=this.onPointerMoveFromPointerDownHandler(o),l=this.onPointerUpFromPointerDownHandler(o),c=this.onKeyDownFromPointerDownHandler(o),u=this.onKeyUpFromPointerDownHandler(o);this.missingPointerEventCleanupEmitter.once(U=>l(U||n.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener(ge.POINTER_MOVE,a),window.addEventListener(ge.POINTER_UP,l),window.addEventListener(ge.KEYDOWN,c),window.addEventListener(ge.KEYUP,u),o.eventListeners.onMove=a,o.eventListeners.onUp=l,o.eventListeners.onKeyUp=u,o.eventListeners.onKeyDown=c)});H(this,"handleCanvasPointerUp",n=>{var o;this.removePointer(n),this.lastPointerUpEvent=n;const r=En({clientX:n.clientX,clientY:n.clientY},this.state),i=n.timeStamp-(((o=this.lastPointerDownEvent)==null?void 0:o.timeStamp)??0);if(this.device.editor.isMobile&&i<300){const s=this.getElementAtPosition(r.x,r.y);if(hs(s)&&this.isIframeLikeElementCenter(s,n,r.x,r.y)){this.handleEmbeddableCenterClick(s);return}}if(this.device.isTouchScreen){const s=this.getElementAtPosition(r.x,r.y);this.hitLinkElement=this.getElementLinkAtPosition(r,s)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?i<300&&hs(this.hitLinkElement)&&!NW(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,B(r.x,r.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(n,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})});H(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",n=>{n.pointerType==="touch"&&(Mp=!1,ru?Mp=!0:ru=window.setTimeout(()=>{ru=0,Mp||this.handleCanvasContextMenu(n)},Cae))});H(this,"resetContextMenuTimer",()=>{clearTimeout(ru),ru=0,Mp=!1});H(this,"maybeCleanupAfterMissingPointerUp",n=>{Gd==null||Gd(),this.missingPointerEventCleanupEmitter.trigger(n).clear()});H(this,"handleCanvasPanUsingWheelOrSpaceDrag",n=>{if(!(Ft.pointers.size<=1&&(n.button===iu.WHEEL||n.button===iu.MAIN&&Wd||xg(this.state)||this.state.viewModeEnabled)))return!1;Pp=!0,this.focusContainer(),this.state.editingTextElement||n.preventDefault();let r=!1;const i=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);on(this.interactiveCanvas,Qt.GRABBING);let{clientX:o,clientY:s}=n;const a=l4(c=>{const u=o-c.clientX,d=s-c.clientY;if(o=c.clientX,s=c.clientY,i&&!r&&(Math.abs(u)>1||Math.abs(d)>1)){r=!0;const f=U=>{document.body.removeEventListener(ge.PASTE,f),U.stopPropagation()},g=()=>{setTimeout(()=>{document.body.removeEventListener(ge.PASTE,f),window.removeEventListener(ge.POINTER_UP,g)},100)};document.body.addEventListener(ge.PASTE,f),window.addEventListener(ge.POINTER_UP,g)}this.translateCanvas({scrollX:this.state.scrollX-u/this.state.zoom.value,scrollY:this.state.scrollY-d/this.state.zoom.value})}),l=Nn(Gd=()=>{Gd=null,Pp=!1,Wd||(this.state.viewModeEnabled?on(this.interactiveCanvas,Qt.GRAB):Ba(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(ge.POINTER_MOVE,a),window.removeEventListener(ge.POINTER_UP,l),window.removeEventListener(ge.BLUR,l),a.flush()});return window.addEventListener(ge.BLUR,l),window.addEventListener(ge.POINTER_MOVE,a,{passive:!0}),window.addEventListener(ge.POINTER_UP,l),!0});H(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.setState({selectedElementIds:Bt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})});H(this,"handleSelectionOnPointerDown",(n,r)=>{var i;if(this.state.activeTool.type==="selection"){const o=this.scene.getNonDeletedElements(),s=this.scene.getNonDeletedElementsMap(),a=this.scene.getSelectedElements(this.state);if(a.length===1&&!this.state.editingLinearElement&&!De(a[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){const l=lL(o,this.state,r.origin.x,r.origin.y,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);l!=null&&(l.transformHandleType==="rotation"?(this.setState({resizingElement:l.element}),r.resize.handleType=l.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:l.element}),r.resize.handleType=l.transformHandleType))}else a.length>1&&(r.resize.handleType=cL(jt(a),r.origin.x,r.origin.y,this.state.zoom,n.pointerType,this.device));if(r.resize.handleType)r.resize.isResizing=!0,r.resize.offset=ms(xbe(r.resize.handleType,a,s,r.origin.x,r.origin.y)),a.length===1&&et(a[0])&&a[0].points.length===2&&(r.resize.arrowDirection=Sbe(r.resize.handleType,a[0]));else{if(this.state.selectedLinearElement){const u=this.state.editingLinearElement||this.state.selectedLinearElement,d=Ce.handlePointerDown(n,this,this.store,r.origin,u,this.scene);if(d.hitElement&&(r.hit.element=d.hitElement),d.linearElementEditor&&(this.setState({selectedLinearElement:d.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:d.linearElementEditor})),d.didAddPoint)return!0}if(r.hit.element=r.hit.element??this.getElementAtPosition(r.origin.x,r.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(r.origin,r.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((i=r.hit.element)==null?void 0:i.id)!==this.state.croppingElementId&&this.finishImageCropping(),r.hit.element&&this.getElementLinkAtPosition({x:r.origin.x,y:r.origin.y},r.hit.element))return!1;r.hit.allHitElements=this.getElementsAtPosition(r.origin.x,r.origin.y);const l=r.hit.element,c=r.hit.allHitElements.some(u=>this.isASelectedElement(u));if((l===null||!c)&&!n.shiftKey&&!r.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(l),this.state.editingLinearElement)this.setState({selectedElementIds:Bt({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(l!=null){if(n[j.CTRL_OR_CMD])return this.state.selectedElementIds[l.id]||(r.hit.wasAddedToSelection=!0),this.setState(u=>({...wue(u,l),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[l.id]||(this.state.editingGroupId&&!d2(l,this.state.editingGroupId)&&this.setState({selectedElementIds:Bt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!c&&!r.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(u=>{var g;let d={...u.selectedElementIds,[l.id]:!0};const f=[];if(Object.keys(u.selectedElementIds).forEach(U=>{const b=this.scene.getElement(U);b&&f.push(b)}),We(l))cl(f,l.id).forEach(U=>{delete d[U.id]});else if(l.frameId)d[l.frameId]&&delete d[l.id];else{const U=l.groupIds,b=new Set(U.flatMap(v=>Tn(this.scene.getNonDeletedElements(),v)).filter(v=>We(v)).map(v=>v.id));b.size>0&&f.forEach(v=>{v.frameId&&b.has(v.frameId)&&(delete d[v.id],v.groupIds.flatMap(_=>Tn(this.scene.getNonDeletedElements(),_)).forEach(_=>{delete d[_.id]}))})}return((g=u.openDialog)==null?void 0:g.name)==="elementLinkSelector"&&(l.groupIds.some(U=>u.selectedGroupIds[U])||(d={[l.id]:!0})),{...Vi({editingGroupId:u.editingGroupId,selectedElementIds:d},this.scene.getNonDeletedElements(),u,this),showHyperlinkPopup:l.link||co(l)?"info":!1}}),r.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1});H(this,"handleTextOnPointerDown",(n,r)=>{if(this.state.editingTextElement)return;let i=r.origin.x,o=r.origin.y;const s=this.getElementAtPosition(i,o,{includeBoundTextElement:!0});let a=this.getTextBindableContainerAtPosition(i,o);Ps(s)&&(a=s,i=s.x+s.width/2,o=s.y+s.height/2),this.startTextEditing({sceneX:i,sceneY:o,insertAtParentCenter:!n.altKey,container:a,autoEdit:!1}),Ks(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:lr(this.state,{type:"selection"})})});H(this,"handleFreeDrawElementOnPointerDown",(n,r,i)=>{const[o,s]=Ur(i.origin.x,i.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:o,y:s}),l=n.pressure===.5,c=upe({type:r,x:o,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:l,locked:!1,frameId:a?a.id:null,points:[B(0,0)],pressures:l?[]:[n.pressure]});this.scene.insertElement(c),this.setState(d=>{const f={...d.selectedElementIds};return delete f[c.id],{selectedElementIds:Bt(f,d)}});const u=bs(i.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:c,startBoundElement:u,suggestedBindings:[]})});H(this,"insertIframeElement",({sceneX:n,sceneY:r,width:i,height:o})=>{var c;const[s,a]=Ur(n,r,(c=this.lastPointerDownEvent)!=null&&c[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=ape({type:"iframe",x:s,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:i,height:o});return this.scene.insertElement(l),l});H(this,"insertEmbeddableElement",({sceneX:n,sceneY:r,link:i})=>{var c;const[o,s]=Ur(n,r,(c=this.lastPointerDownEvent)!=null&&c[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=Z1(i);if(!a)return;a.error instanceof URIError&&this.setToast({message:L("toast.unrecognizedLinkFormat"),closable:!0});const l=pP({type:"embeddable",x:o,y:s,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:i});return this.scene.insertElement(l),l});H(this,"createImageElement",({sceneX:n,sceneY:r,addToFrameUnderCursor:i=!0})=>{var c;const[o,s]=Ur(n,r,(c=this.lastPointerDownEvent)!=null&&c[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=i?this.getTopLayerFrameAtSceneCoords({x:o,y:s}):null;return QV({type:"image",x:o,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null})});H(this,"handleLinearElementOnPointerDown",(n,r,i)=>{if(this.state.multiElement){const{multiElement:o}=this.state;if(o.type==="line"&&bc(o.points,this.state.zoom.value)){fe(o,{lastCommittedPoint:o.points[o.points.length-1]}),this.actionManager.executeAction(Xs);return}if(De(o)&&o.points.length>1){fe(o,{lastCommittedPoint:o.points[o.points.length-1]}),this.actionManager.executeAction(Xs);return}const{x:s,y:a,lastCommittedPoint:l}=o;if(o.points.length>1&&l&&Xn(B(i.origin.x-s,i.origin.y-a),l)<ab){this.actionManager.executeAction(Xs);return}this.setState(c=>({selectedElementIds:Bt({...c.selectedElementIds,[o.id]:!0},c)})),fe(o,{lastCommittedPoint:o.points[o.points.length-1]}),on(this.interactiveCanvas,Qt.POINTER)}else{const[o,s]=Ur(i.origin.x,i.origin.y,n[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.getTopLayerFrameAtSceneCoords({x:o,y:s}),{currentItemStartArrowhead:l,currentItemEndArrowhead:c}=this.state,[u,d]=r==="arrow"?[l,c]:[null,null],f=r==="arrow"?yT({type:r,x:o,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===Vr.round?{type:Er.PROPORTIONAL_RADIUS}:null,startArrowhead:u,endArrowhead:d,locked:!1,frameId:a?a.id:null,elbowed:this.state.currentItemArrowType===Vr.elbow,fixedSegments:this.state.currentItemArrowType===Vr.elbow?[]:null}):Rf({type:r,x:o,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:Er.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:a?a.id:null});this.setState(U=>{const b={...U.selectedElementIds};return delete b[f.id],{selectedElementIds:Bt(b,U)}}),fe(f,{points:[...f.points,B(0,0)]});const g=bs(i.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,De(f),De(f));this.scene.insertElement(f),this.setState({newElement:f,startBoundElement:g,suggestedBindings:[]})}});H(this,"createGenericElementOnPointerDown",(n,r)=>{var c;const[i,o]=Ur(r.origin.x,r.origin.y,(c=this.lastPointerDownEvent)!=null&&c[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s=this.getTopLayerFrameAtSceneCoords({x:i,y:o}),a={x:i,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(n),locked:!1,frameId:s?s.id:null};let l;n==="embeddable"?l=pP({type:"embeddable",...a}):l=Uc({type:n,...a}),l.type==="selection"?this.setState({selectionElement:l}):(this.scene.insertElement(l),this.setState({multiElement:null,newElement:l}))});H(this,"createFrameElementOnPointerDown",(n,r)=>{var l;const[i,o]=Ur(n.origin.x,n.origin.y,(l=this.lastPointerDownEvent)!=null&&l[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),s={x:i,y:o,opacity:this.state.currentItemOpacity,locked:!1,...Fn},a=r===kr.magicframe?nw(s):bT(s);this.scene.insertElement(a),this.setState({multiElement:null,newElement:a})});H(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()});H(this,"eraseElements",()=>{let n=!1;const r=this.scene.getElementsIncludingDeleted().map(i=>this.elementsPendingErasure.has(i.id)||i.frameId&&this.elementsPendingErasure.has(i.frameId)||Cn(i)&&this.elementsPendingErasure.has(i.containerId)?(n=!0,Xe(i,{isDeleted:!0})):i);this.elementsPendingErasure=new Set,n&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(r))});H(this,"initializeImage",async({imageFile:n,imageElement:r,showCursorImagePreview:i=!1})=>{var u,d,f,g;if(!Pf(n))throw new Error(L("errors.unsupportedFileType"));const o=n.type;if(on(this.interactiveCanvas,"wait"),o===Ne.svg)try{n=vM(_M(await n.text()),n.name)}catch(U){throw console.warn(U),new Error(L("errors.svgImageInsertError"))}const s=await(((d=(u=this.props).generateIdForFile)==null?void 0:d.call(u,n))||r6e(n));if(!s)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(L("errors.imageInsertError"));const a=this.files[s];if(!(a!=null&&a.dataURL)){try{n=await _w(n,{maxWidthOrHeight:Fae})}catch(U){console.error("Error trying to resizing image file on insertion",U)}if(n.size>fR)throw new Error(L("errors.fileTooBig",{maxSize:`${Math.trunc(fR/1024/1024)}MB`}))}if(i){const U=(f=this.files[s])==null?void 0:f.dataURL,b=U&&o6e(U);this.setImagePreviewCursor(b||n)}const l=((g=this.files[s])==null?void 0:g.dataURL)||await Ew(n),c=fe(r,{fileId:s},!1);return new Promise(async(U,b)=>{var v;try{this.addMissingFiles([{mimeType:o,id:s,dataURL:l,created:Date.now(),lastRetrieved:Date.now()}]);const _=this.imageCache.get(s);_||(this.addNewImagesToImageCache(),await this.updateImageCache([c])),(_==null?void 0:_.image)instanceof Promise&&await _.image,this.state.pendingImageElementId!==c.id&&((v=this.state.newElement)==null?void 0:v.id)!==c.id&&this.initializeImageDimensions(c,!0),U(c)}catch(_){console.error(_),b(new Error(L("errors.imageInsertError")))}finally{i||Ks(this.interactiveCanvas)}})});H(this,"insertImageElement",async(n,r,i)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:L("errors.imageToolNotSupported")});return}this.scene.insertElement(n);try{return await this.initializeImage({imageFile:r,imageElement:n,showCursorImagePreview:i})}catch(o){return fe(n,{isDeleted:!0}),this.actionManager.executeAction(Xs),this.setState({errorMessage:o.message||L("errors.imageInsertError")}),null}});H(this,"setImagePreviewCursor",async n=>{let i;try{i=await _w(n,{maxWidthOrHeight:96})}catch(s){throw s.cause==="UNSUPPORTED"?new Error(L("errors.unsupportedFileType")):s}let o=await Ew(i);if(n.type===Ne.svg){const s=await RW(o);let a=Math.min(s.height,96),l=a*(s.width/s.height);l>96&&(l=96,a=l*(s.height/s.width));const c=document.createElement("canvas");c.height=a,c.width=l,c.getContext("2d").drawImage(s,0,0,l,a),o=c.toDataURL(Ne.svg)}this.state.pendingImageElementId&&on(this.interactiveCanvas,`url(${o}) 4 4, auto`)});H(this,"onImageAction",async({insertOnCanvasDirectly:n})=>{try{const r=this.state.width/2+this.state.offsetLeft,i=this.state.height/2+this.state.offsetTop,{x:o,y:s}=En({clientX:r,clientY:i},this.state),a=await kT({description:"Image",extensions:Object.keys(Tg)}),l=this.createImageElement({sceneX:o,sceneY:s,addToFrameUnderCursor:!1});n?(this.insertImageElement(l,a),this.initializeImageDimensions(l),this.setState({selectedElementIds:Bt({[l.id]:!0},this.state)},()=>{this.actionManager.executeAction(Xs)})):this.setState({pendingImageElementId:l.id},()=>{this.insertImageElement(l,a,!0)})}catch(r){r.name!=="AbortError"?console.error(r):console.warn(r),this.setState({pendingImageElementId:null,newElement:null,activeTool:lr(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Xs)})}});H(this,"initializeImageDimensions",(n,r=!1)=>{var o;const i=dr(n)&&((o=this.imageCache.get(n.fileId))==null?void 0:o.image);if(!i||i instanceof Promise){if(n.width<Kd/this.state.zoom.value&&n.height<Kd/this.state.zoom.value){const s=100/this.state.zoom.value;fe(n,{x:n.x-s/2,y:n.y-s/2,width:s,height:s})}return}if(r||n.width<Kd/this.state.zoom.value&&n.height<Kd/this.state.zoom.value){const s=Math.max(this.state.height-120,160),a=Math.min(s,Math.floor(this.state.height*.5)/this.state.zoom.value),l=Math.min(i.naturalHeight,a),c=l*(i.naturalWidth/i.naturalHeight),u=n.x+n.width/2-c/2,d=n.y+n.height/2-l/2;fe(n,{x:u,y:d,width:c,height:l,crop:null})}});H(this,"updateImageCache",async(n,r=this.files)=>{const{updatedFiles:i,erroredFiles:o}=await PW({imageCache:this.imageCache,fileIds:n.map(s=>s.fileId),files:r});if(i.size||o.size)for(const s of n)i.has(s.fileId)&&Sn.delete(s);return o.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(s=>dr(s)&&o.has(s.fileId)?Xe(s,{status:"error"}):s)),{updatedFiles:i,erroredFiles:o}});H(this,"addNewImagesToImageCache",async(n=MW(this.scene.getNonDeletedElements()),r=this.files)=>{const i=n.filter(o=>!o.isDeleted&&!this.imageCache.has(o.fileId));if(i.length){const{updatedFiles:o}=await this.updateImageCache(i,r);o.size&&this.scene.triggerUpdate()}});H(this,"scheduleImageRefresh",ql(()=>{this.addNewImagesToImageCache()},xae));H(this,"updateBindingEnabledOnPointerMove",n=>{const r=Qpe(n);this.state.isBindingEnabled!==r&&this.setState({isBindingEnabled:r})});H(this,"maybeSuggestBindingAtCursor",(n,r)=>{const i=bs(n,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,r);this.setState({suggestedBindings:i!=null?[i]:[]})});H(this,"maybeSuggestBindingsForLinearElementAtCoords",(n,r,i)=>{if(!r.length)return;const o=r.reduce((s,a)=>{const l=bs(a,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,De(n),De(n));return l!=null&&!UH(n,i==null?void 0:i.id,l)&&s.push(l),s},[]);this.setState({suggestedBindings:o})});H(this,"handleInteractiveCanvasRef",n=>{var r,i;n!==null?(this.interactiveCanvas=n,this.interactiveCanvas.addEventListener(ge.TOUCH_START,this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener(ge.TOUCH_END,this.onTouchEnd)):((r=this.interactiveCanvas)==null||r.removeEventListener(ge.TOUCH_START,this.onTouchStart),(i=this.interactiveCanvas)==null||i.removeEventListener(ge.TOUCH_END,this.onTouchEnd))});H(this,"handleAppOnDrop",async n=>{var l,c,u,d;const{file:r,fileHandle:i}=await l6e(n),{x:o,y:s}=En(n,this.state);try{if(Pf(r)&&this.isToolSupported("image")){if((r==null?void 0:r.type)===Ne.png||(r==null?void 0:r.type)===Ne.svg)try{const g=await $T(r,this.state,this.scene.getElementsIncludingDeleted(),i);this.syncActionResult({...g,appState:{...g.appState||this.state,isLoading:!1},replaceFiles:!0,storeAction:ae.CAPTURE});return}catch(g){if(g.name!=="EncodingError")throw new Error(L("alerts.couldNotLoadInvalidFile"))}const f=this.createImageElement({sceneX:o,sceneY:s});this.insertImageElement(f,r),this.initializeImageDimensions(f),this.setState({selectedElementIds:Bt({[f.id]:!0},this.state)});return}}catch(f){return this.setState({isLoading:!1,errorMessage:f.message})}const a=n.dataTransfer.getData(Ne.excalidrawlib);if(a&&typeof a=="string"){try{const f=SW(a);this.addElementsFromPasteOrLibrary({elements:gj(f),position:n,files:null})}catch(f){this.setState({errorMessage:f.message})}return}if(r&&await this.loadFileToCanvas(r,i),(c=(l=n.dataTransfer)==null?void 0:l.types)!=null&&c.includes("text/plain")){const f=(u=n.dataTransfer)==null?void 0:u.getData("text");if(f&&bb(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||((d=Z1(f))==null?void 0:d.type)==="video")){const g=this.insertEmbeddableElement({sceneX:o,sceneY:s,link:zo(f)});g&&this.setState({selectedElementIds:{[g.id]:!0}})}}});H(this,"loadFileToCanvas",async(n,r)=>{n=await zT(n);try{const i=this.scene.getElementsIncludingDeleted();let o;try{o=await xW(n,this.state,i,r)}catch(s){const a=s instanceof hf;if(a&&s.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:L("errors.imageToolNotSupported")});return}const l=L(a?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:l})}if(!o)return;o.type===Ne.excalidraw?(wc(i.concat(o.data.elements)),this.store.updateSnapshot(He(i),this.state),this.setState({isLoading:!0}),this.syncActionResult({...o.data,appState:{...o.data.appState||this.state,isLoading:!1},replaceFiles:!0,storeAction:ae.CAPTURE})):o.type===Ne.excalidrawlib&&await this.library.updateLibrary({libraryItems:n,merge:!0,openLibraryMenu:!0}).catch(s=>{console.error(s),this.setState({errorMessage:L("errors.importLibraryError")})})}catch(i){this.setState({isLoading:!1,errorMessage:i.message})}});H(this,"handleCanvasContextMenu",n=>{if(n.preventDefault(),("pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="touch"||"pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="pen"&&n.button!==iu.SECONDARY)&&this.state.activeTool.type!=="selection")return;const{x:r,y:i}=En(n,this.state),o=this.getElementAtPosition(r,i,{preferSelected:!0,includeLockedElements:!0}),s=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:r,y:i},s),l=o||a?"element":"canvas",c=this.excalidrawContainerRef.current,{top:u,left:d}=c.getBoundingClientRect(),f=n.clientX-d,g=n.clientY-u;Dt("contextMenu","openContextMenu",l),this.setState({...o&&!this.state.selectedElementIds[o.id]?{...this.state,...Vi({editingGroupId:this.state.editingGroupId,selectedElementIds:{[o.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:et(o)?new Ce(o):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:g,left:f,items:this.getContextMenuItems(l)}})})});H(this,"maybeDragNewGenericElement",(n,r,i=!0)=>{var U,b,v;const o=this.state.selectionElement,s=n.lastCoords;if(o&&this.state.activeTool.type!=="eraser"){fL({newElement:o,elementType:this.state.activeTool.type,originX:n.origin.x,originY:n.origin.y,x:s.x,y:s.y,width:xi(n.origin.x,s.x),height:xi(n.origin.y,s.y),shouldMaintainAspectRatio:Tp(r),shouldResizeFromCenter:EE(r),zoom:this.state.zoom.value,informMutation:i});return}const a=this.state.newElement;if(!a)return;let[l,c]=Ur(s.x,s.y,r[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=dr(a)&&((U=this.imageCache.get(a.fileId))==null?void 0:U.image),d=u&&!(u instanceof Promise)?u.width/u.height:null;this.maybeCacheReferenceSnapPoints(r,[a]);const{snapOffset:f,snapLines:g}=W5e(a,this,r,{x:n.originInGrid.x+(((b=this.state.originSnapOffset)==null?void 0:b.x)??0),y:n.originInGrid.y+(((v=this.state.originSnapOffset)==null?void 0:v.y)??0)},{x:l-n.originInGrid.x,y:c-n.originInGrid.y},this.scene.getNonDeletedElementsMap());l+=f.x,c+=f.y,this.setState({snapLines:g}),fL({newElement:a,elementType:this.state.activeTool.type,originX:n.originInGrid.x,originY:n.originInGrid.y,x:l,y:c,width:xi(n.originInGrid.x,l),height:xi(n.originInGrid.y,c),shouldMaintainAspectRatio:kt(a)?!Tp(r):Tp(r),shouldResizeFromCenter:EE(r),zoom:this.state.zoom.value,widthAspectRatio:d,originOffset:this.state.originSnapOffset,informMutation:i}),this.setState({newElement:a}),(this.state.activeTool.type===kr.frame||this.state.activeTool.type===kr.magicframe)&&this.setState({elementsToHighlight:Sb(this.scene.getNonDeletedElements(),a,this.state,this.scene.getNonDeletedElementsMap())})});H(this,"maybeHandleCrop",(n,r)=>{var c;if(!this.state.croppingElementId)return!1;const i=n.resize.handleType,o=n.lastCoords,[s,a]=Ur(o.x-n.resize.offset.x,o.y-n.resize.offset.y,r[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(i&&l&&kt(l)){const u=n.originalElements.get(l.id),d=dr(l)&&((c=this.imageCache.get(l.fileId))==null?void 0:c.image);if(u&&kt(u)&&d&&!(d instanceof Promise)){const[f,g]=Ur(o.x,o.y,r[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U={x:f-n.originInGrid.x,y:g-n.originInGrid.y};this.maybeCacheReferenceSnapPoints(r,[l]);const{snapOffset:b,snapLines:v}=YM([l],[u],this,r,U,i);fe(l,Wme(l,i,d.naturalWidth,d.naturalHeight,s+b.x,a+b.y,r.shiftKey?u.width/u.height:void 0)),_o(l,this.scene.getNonDeletedElementsMap(),{newSize:{width:l.width,height:l.height}}),this.setState({isCropping:i&&i!=="rotation",snapLines:v})}return!0}return!1});H(this,"maybeHandleResize",(n,r)=>{const i=this.scene.getSelectedElements(this.state),o=i.filter(d=>We(d)),s=n.resize.handleType;if(o.length>0&&s==="rotation"||i.length===1&&De(i[0])||this.state.croppingElementId)return!1;this.setState({isResizing:s&&s!=="rotation",isRotating:s==="rotation",activeEmbeddable:null});const a=n.lastCoords;let[l,c]=Ur(a.x-n.resize.offset.x,a.y-n.resize.offset.y,r[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=new Map;if(o.forEach(d=>{cl(this.scene.getNonDeletedElements(),d.id).forEach(g=>{u.set(d.id+g.id,{x:g.x-d.x,y:g.y-d.y})})}),!this.state.selectedElementsAreBeingDragged){const[d,f]=Ur(a.x,a.y,r[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g={x:d-n.originInGrid.x,y:f-n.originInGrid.y},U=[...n.originalElements.values()];this.maybeCacheReferenceSnapPoints(r,i);const{snapOffset:b,snapLines:v}=YM(i,ot(U,this.state),this,r,g,s);l+=b.x,c+=b.y,this.setState({snapLines:v})}if(_be(n.originalElements,s,i,this.scene.getElementsMapIncludingDeleted(),this.scene,Um(r),EE(r),i.some(d=>kt(d))?!Tp(r):Tp(r),l,c,n.resize.center.x,n.resize.center.y)){const d=_E(i,this.scene.getNonDeletedElementsMap(),this.state.zoom),f=new Set;return o.forEach(g=>{Sb(this.scene.getNonDeletedElements(),g,this.state,this.scene.getNonDeletedElementsMap()).forEach(U=>f.add(U))}),this.setState({elementsToHighlight:[...f],suggestedBindings:d}),!0}return!1});H(this,"getContextMenuItems",n=>{const r=[];return r.push(JL,QL),n==="canvas"?this.state.viewModeEnabled?[...r,tD,Hw,VD,Ww]:[ZL,Ar,JL,QL,eD,Ar,Jbe,Sve,Ar,tD,gve,Hw,VD,Ww]:(r.push(eD),this.state.viewModeEnabled?[Mb,...r]:[Ar,qL,Mb,ZL,Ar,R_e,P_e,M_e,Ar,lEe,Ar,...r,Ar,J3e,eve,Ar,nve,vwe,pve,mve,yve,rve,Ar,ave,Ar,Ybe,Zbe,qbe,Qbe,Ar,dve,fve,Ar,aEe,Ar,YX,Uj,Ar,rye,xve,Ar,zG])});H(this,"handleWheel",Nn(n=>{if(!(n.target instanceof HTMLCanvasElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLIFrameElement)){n[j.CTRL_OR_CMD]&&n.preventDefault();return}if(n.preventDefault(),Pp)return;const{deltaX:r,deltaY:i}=n;if(n.metaKey||n.ctrlKey){const o=Math.sign(i),s=t3*100,a=Math.abs(i);let l=i;a>s&&(l=s*o);let c=this.state.zoom.value-l/100;c+=Math.log10(Math.max(1,this.state.zoom.value))*-o*Math.min(1,a/20),this.translateCanvas(u=>({...Uf({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:ec(c)},u),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(n.shiftKey){this.translateCanvas(({zoom:o,scrollX:s})=>({scrollX:s-(i||r)/o.value}));return}this.translateCanvas(({zoom:o,scrollX:s,scrollY:a})=>({scrollX:s-r/o.value,scrollY:a-i/o.value}))}));H(this,"savePointer",(n,r,i)=>{var l,c;if(!n||!r)return;const{x:o,y:s}=En({clientX:n,clientY:r},this.state),a={x:o,y:s,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(c=(l=this.props).onPointerUpdate)==null||c.call(l,{pointer:a,button:i,pointersMap:Ft.pointers})});H(this,"resetShouldCacheIgnoreZoomDebounced",mc(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300));H(this,"updateDOMRect",n=>{var r;if((r=this.excalidrawContainerRef)!=null&&r.current){const i=this.excalidrawContainerRef.current,{width:o,height:s,left:a,top:l}=i.getBoundingClientRect(),{width:c,height:u,offsetTop:d,offsetLeft:f}=this.state;if(o===c&&s===u&&a===f&&l===d){n&&n();return}this.setState({width:o,height:s,offsetLeft:a,offsetTop:l},()=>{n&&n()})}});H(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});const r=ks(),{excalidrawAPI:i,viewModeEnabled:o=!1,zenModeEnabled:s=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:l=!1,theme:c=r.theme,name:u=`${L("labels.untitled")}-${DR()}`}=n;if(this.state={...r,theme:c,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:o,zenModeEnabled:s,objectsSnapModeEnabled:l,gridModeEnabled:a??r.gridModeEnabled,name:u,width:window.innerWidth,height:window.innerHeight},this.id=a3(),this.library=new C7e(this),this.actionManager=new dEe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new ya,this.canvas=document.createElement("canvas"),this.rc=Ud.canvas(this.canvas),this.renderer=new KD(this.scene),this.visibleElements=[],this.store=new Lme,this.history=new yf,i){const d={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:f=>{this.actionManager.registerAction(f)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:f=>this.onChangeEmitter.on(f),onPointerDown:f=>this.onPointerDownEmitter.on(f),onPointerUp:f=>this.onPointerUpEmitter.on(f),onScrollChange:f=>this.onScrollChangeEmitter.on(f),onUserFollow:f=>this.onUserFollowEmitter.on(f)};typeof i=="function"?i(d):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new ca(this.scene),this.history=new yf,this.actionManager.registerAll(K_),this.actionManager.registerAction(cEe(this.history,this.store)),this.actionManager.registerAction(uEe(this.history,this.store))}onWindowMessage(n){if(n.origin!=="https://player.vimeo.com"&&n.origin!=="https://www.youtube.com")return;let r=null;try{r=JSON.parse(n.data)}catch{}if(r)switch(n.origin){case"https://player.vimeo.com":if(r.method==="paused"){let i=null;const o=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!o)break;for(const s of o)s.contentWindow===n.source&&(i=s.contentWindow);i==null||i.postMessage(JSON.stringify({method:r.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(r.event==="infoDelivery"&&r.info&&r.id&&typeof r.info.playerState=="number"){const i=r.id,o=r.info.playerState;Object.values(c5).includes(o)&&p4.set(i,o)}break}}cacheEmbeddableRef(n,r){r&&this.iFrameRefs.set(n.id,r)}getHTMLIFrameElement(n){return this.iFrameRefs.get(n.id)}handleEmbeddableCenterClick(n){var i,o,s,a;if(((i=this.state.activeEmbeddable)==null?void 0:i.element)===n&&((o=this.state.activeEmbeddable)==null?void 0:o.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:n,state:"active"},selectedElementIds:{[n.id]:!0},newElement:null,selectionElement:null})},100),uu(n)))return;const r=this.getHTMLIFrameElement(n);if(r!=null&&r.contentWindow){if(r.src.includes("youtube")){const l=p4.get(n.id);switch(l||(p4.set(n.id,c5.UNSTARTED),r.contentWindow.postMessage(JSON.stringify({event:"listening",id:n.id}),"*")),l){case c5.PLAYING:case c5.BUFFERING:(s=r.contentWindow)==null||s.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(a=r.contentWindow)==null||a.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}r.src.includes("player.vimeo.com")&&r.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(n,r,i,o){var s,a;return n&&!r.altKey&&!r.shiftKey&&!r.metaKey&&!r.ctrlKey&&(((s=this.state.activeEmbeddable)==null?void 0:s.element)!==n||((a=this.state.activeEmbeddable)==null?void 0:a.state)==="hover"||!this.state.activeEmbeddable)&&i>=n.x+n.width/3&&i<=n.x+2*n.width/3&&o>=n.y+n.height/3&&o<=n.y+2*n.height/3}renderEmbeddables(){const n=this.state.zoom.value,r=this.state.width,i=this.state.height,o=this.scene.getNonDeletedElements().filter(s=>co(s)&&this.embedsValidationStatus.get(s.id)===!0||uu(s));return p(ke,{children:o.map(s=>{var b,v,_,E,w,T,A,M,S;const{x:a,y:l}=oa({sceneX:s.x,sceneY:s.y},this.state),c=Qy(s,r,i,this.state,this.scene.getNonDeletedElementsMap()),u=this.initializedEmbeds.has(s.id);if(c&&!u&&this.initializedEmbeds.add(s.id),!(c||u))return null;let f;if(uu(s)){f=null;const x=(((b=s.customData)==null?void 0:b.generationData)??this.magicGenerations.get(s.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(x.status==="done"){const C=x.html;f={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>C}}else if(x.status==="pending")f={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>ym(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===Ge.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let C;x.code==="ERR_GENERATION_INTERRUPTED"?C="Generation was interrupted...":C=x.message||"Generation failed",f={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>ym(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${ft.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${C}</h3>
                  `)}}}else f=Z1(sT(s.link||""));const g=((v=this.state.activeEmbeddable)==null?void 0:v.element)===s&&((_=this.state.activeEmbeddable)==null?void 0:_.state)==="active",U=((E=this.state.activeEmbeddable)==null?void 0:E.element)===s&&((w=this.state.activeEmbeddable)==null?void 0:w.state)==="hover";return p("div",{className:Re("excalidraw__embeddable-container",{"is-hovered":U}),style:{transform:c?`translate(${a-this.state.offsetLeft}px, ${l-this.state.offsetTop}px) scale(${n})`:"none",display:c?"block":"none",opacity:dG(s,wo(s,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((T=this.state.openDialog)==null?void 0:T.name)==="elementLinkSelector"?$$:1),"--embeddable-radius":`${Fu(Math.min(s.width,s.height),s)}px`},children:z("div",{className:"excalidraw__embeddable-container__inner",style:{width:c?`${s.width}px`:0,height:c?`${s.height}px`:0,transform:c?`rotate(${s.angle}rad)`:"none",pointerEvents:g?Yd.enabled:Yd.disabled},children:[U&&p("div",{className:"excalidraw__embeddable-hint",children:L("buttons.embeddableInteractionButton")}),p("div",{className:"excalidraw__embeddable__outer",style:{padding:`${s.strokeWidth}px`},children:(co(s)?(M=(A=this.props).renderEmbeddable)==null?void 0:M.call(A,s,this.state):null)??p("iframe",{ref:x=>this.cacheEmbeddableRef(s,x),className:"excalidraw__embeddable",srcDoc:(f==null?void 0:f.type)==="document"?f.srcdoc(this.state.theme):void 0,src:(f==null?void 0:f.type)!=="document"?(f==null?void 0:f.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(S=f==null?void 0:f.sandbox)!=null&&S.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},s.id)})})}toggleOverscrollBehavior(n){document.documentElement.style.overscrollBehaviorX=n.type==="pointerenter"?"none":"auto"}render(){var d,f,g,U,b,v,_,E;const n=this.scene.getSelectedElements(this.state),{renderTopRightUI:r,renderCustomStats:i}=this.props,o=this.scene.getSceneNonce(),{elementsMap:s,visibleElements:a}=this.renderer.getRenderableElements({sceneNonce:o,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(d=this.state.newElement)==null?void 0:d.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=a;const l=this.scene.getNonDeletedElementsMap(),c="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",u=n[0];return p("div",{className:Re("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":c?Yd.disabled:Yd.enabled},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:p($K.Provider,{value:this,children:p(zK.Provider,{value:this.props,children:p(Zx.Provider,{value:this.excalidrawContainerValue,children:p(Yx.Provider,{value:this.device,children:p(Jx.Provider,{value:this.setAppState,children:p(Qx.Provider,{value:this.state,children:z(qx.Provider,{value:this.scene.getNonDeletedElements(),children:[z(eS.Provider,{value:this.actionManager,children:[p(C_e,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:l2().code,renderTopRightUI:r,renderCustomStats:i,showExitZenModeBtn:typeof((g=this.props)==null?void 0:g.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),p("div",{className:"excalidraw-textEditorContainer"}),p("div",{className:"excalidraw-contextMenuContainer"}),p("div",{className:"excalidraw-eye-dropper-container"}),p(owe,{trails:[this.laserTrails,this.eraserTrail]}),n.length===1&&((U=this.state.openDialog)==null?void 0:U.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&p(_ve,{element:u,elementsMap:l,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},u.id),this.props.aiEnabled!==!1&&n.length===1&&gb(u)&&p(YD,{element:u,elementsMap:s,children:p(d4,{title:L("labels.convertToCode"),icon:VV,checked:!1,onChange:()=>this.onMagicFrameGenerate(u,"button")})}),n.length===1&&uu(u)&&((v=(b=u.customData)==null?void 0:b.generationData)==null?void 0:v.status)==="done"&&z(YD,{element:u,elementsMap:s,children:[p(d4,{title:L("labels.copySource"),icon:sU,checked:!1,onChange:()=>this.onIframeSrcCopy(u)}),p(d4,{title:"Enter fullscreen",icon:cfe,checked:!1,onChange:()=>{const w=this.getHTMLIFrameElement(u);if(w)try{w.requestFullscreen(),this.setState({activeEmbeddable:{element:u,state:"active"},selectedElementIds:{[u.id]:!0},newElement:null,selectionElement:null})}catch(T){console.warn(T),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&p(k_e,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&p(hEe,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:w=>{this.setState({contextMenu:null},()=>{this.focusContainer(),w==null||w()})}}),p(iwe,{canvas:this.canvas,rc:this.rc,elementsMap:s,allElementsMap:l,visibleElements:a,sceneNonce:o,selectionNonce:(_=this.state.selectionElement)==null?void 0:_.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:w2(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&p(Iwe,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:s,allElementsMap:l,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),p(twe,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:s,visibleElements:a,allElementsMap:l,selectedElements:n,sceneNonce:o,selectionNonce:(E=this.state.selectionElement)==null?void 0:E.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&p(cwe,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(n){Object.assign(this.plugins,n)}async onMagicFrameGenerate(n,r){var a;const i=(a=this.plugins.diagramToCode)==null?void 0:a.generate;if(!i){this.setState({errorMessage:"No diagram to code plugin found"});return}const o=QT(this.scene.getNonDeletedElements(),n).filter(l=>!gb(l));if(!o.length){r==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),Dt("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}const s=this.insertIframeElement({sceneX:n.x+n.width+30,sceneY:n.y,width:n.width,height:n.height});if(s){this.updateMagicGeneration({frameElement:s,data:{status:"pending"}}),this.setState({selectedElementIds:{[s.id]:!0}}),Dt("ai","generate (start)","d2c");try{const{html:l}=await i({frame:n,children:o});if(Dt("ai","generate (success)","d2c"),!l.trim()){this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}const c=l.includes("<!DOCTYPE html>")&&l.includes("</html>")?l.slice(l.indexOf("<!DOCTYPE html>"),l.indexOf("</html>")+7):l;this.updateMagicGeneration({frameElement:s,data:{status:"done",html:c}})}catch(l){Dt("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:l.message||"Unknown error during generation"}})}}}onIframeSrcCopy(n){var r,i;((i=(r=n.customData)==null?void 0:r.generationData)==null?void 0:i.status)==="done"&&(bd(n.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(n){const r=n??this.files;this.scene.getNonDeletedElements().forEach(i=>{dr(i)&&r[i.fileId]&&(this.imageCache.delete(i.fileId),Sn.delete(i))})}async componentDidMount(){var r;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,this.store.onStoreIncrementEmitter.on(i=>{this.history.record(i.elementsChange,i.appStateChange)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints(),C_&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(r=this.resizeObserver)==null||r.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),mae()&&!Qce()&&this.setState({errorMessage:p(L_e,{})})}componentWillUnmount(){var n,r;(n=window.launchQueue)==null||n.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new ya,this.fonts=new ca(this.scene),this.renderer=new KD(this.scene),this.files={},this.imageCache.clear(),(r=this.resizeObserver)==null||r.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),Sn.destroy(),Js.destroy(),clearTimeout(ru),_r.clearCache(),Vi.clearCache(),ru=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(Dn(document,ge.KEYDOWN,this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(Dn(this.excalidrawContainerRef.current,ge.WHEEL,this.handleWheel,{passive:!1}),Dn(window,ge.MESSAGE,this.onWindowMessage,!1),Dn(document,ge.POINTER_UP,this.removePointer,{passive:!1}),Dn(document,ge.COPY,this.onCopy,{passive:!1}),Dn(document,ge.KEYUP,this.onKeyUp,{passive:!0}),Dn(document,ge.POINTER_MOVE,this.updateCurrentCursorPosition,{passive:!1}),Dn(document.fonts,"loadingdone",n=>{const r=n.fontfaces;this.fonts.onLoaded(r)},{passive:!1}),Dn(document,ge.GESTURE_START,this.onGestureStart,!1),Dn(document,ge.GESTURE_CHANGE,this.onGestureChange,!1),Dn(document,ge.GESTURE_END,this.onGestureEnd,!1),Dn(window,ge.FOCUS,()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(Dn(document,ge.FULLSCREENCHANGE,this.onFullscreenChange,{passive:!1}),Dn(document,ge.PASTE,this.pasteFromClipboard,{passive:!1}),Dn(document,ge.CUT,this.onCut,{passive:!1}),Dn(window,ge.RESIZE,this.onResize,!1),Dn(window,ge.UNLOAD,this.onUnload,!1),Dn(window,ge.BLUR,this.onBlur,!1),Dn(this.excalidrawContainerRef.current,ge.WHEEL,this.handleWheel,{passive:!1}),Dn(this.excalidrawContainerRef.current,ge.DRAG_OVER,this.disableEvent,!1),Dn(this.excalidrawContainerRef.current,ge.DROP,this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(Dn(Pce(this.excalidrawContainerRef.current),ge.SCROLL,this.onScroll,{passive:!1})))}componentDidUpdate(n,r){var c,u,d,f,g,U,b,v,_,E;this.updateEmbeddables();const i=this.scene.getElementsIncludingDeleted(),o=this.scene.getElementsMapIncludingDeleted(),s=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!i.length&&this.setState({showWelcomeScreen:!0}),n.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),r.userToFollow&&!this.state.collaborators.has(r.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(r.zoom.value!==this.state.zoom.value||r.scrollX!==this.state.scrollX||r.scrollY!==this.state.scrollY)&&((u=(c=this.props)==null?void 0:c.onScrollChange)==null||u.call(c,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),r.userToFollow!==this.state.userToFollow&&(r.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:r.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Ha(this.state)&&this.setState({activeTool:lr(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&r.theme!==this.state.theme&&SV(this.interactiveCanvas,this.state.theme),r.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),n.langCode!==this.props.langCode&&this.updateLanguage(),Ha(r)&&!Ha(this.state)&&this.eraserTrail.endPath(),n.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),r.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((d=r.openDialog)==null?void 0:d.name)==="elementLinkSelector"||((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")&&((g=r.openDialog)==null?void 0:g.name)!==((U=this.state.openDialog)==null?void 0:U.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),n.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),n.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(b=this.excalidrawContainerRef.current)==null||b.classList.toggle("theme--dark",this.state.theme===Ge.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Xs)}),(v=this.state.editingTextElement)!=null&&v.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});const{multiElement:l}=r;r.activeTool!==this.state.activeTool&&l!=null&&gf(this.state)&&Za(l,!1)&&lw(l,this.state,ms(Ce.getPointAtIndexGlobalCoordinates(l,-1,s)),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.store.commit(o,this.state),this.state.isLoading||((E=(_=this.props).onChange)==null||E.call(_,i,this.state,this.files),this.onChangeEmitter.trigger(i,this.state,this.files))}static resetTapTwice(){Rp=!1}async addElementsFromMixedContentPaste(n,{isPlainPaste:r,sceneX:i,sceneY:o}){if(!r&&n.some(s=>s.type==="imageUrl")&&this.isToolSupported("image")){const s=n.filter(f=>f.type==="imageUrl").map(f=>f.value),a=await Promise.all(s.map(async f=>{try{return{file:await a6e(f)}}catch(g){let U=g.message;return g.cause==="FETCH_ERROR"?U=L("errors.failedToFetchImage"):g.cause==="UNSUPPORTED"&&(U=L("errors.unsupportedFileType")),{errorMessage:U}}}));let l=o,c=!1;const u={};for(const f of a)if(f.file){const g=this.createImageElement({sceneX:i,sceneY:l}),U=await this.insertImageElement(g,f.file);U&&(c||(c=!0,l-=U.height/2),fe(U,{y:l},!1),l=g.y+g.height+25,u[g.id]=!0)}this.setState({selectedElementIds:Bt(u,this.state)});const d=a.find(f=>!!f.errorMessage);d&&d.errorMessage&&this.setState({errorMessage:d.errorMessage})}else{const s=n.filter(a=>a.type==="text");s.length&&this.addTextFromPaste(s.map(a=>a.value).join(`

`),r)}}addTextFromPaste(n,r=!1){const{x:i,y:o}=En({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),s={x:i,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:n,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Z2,verticalAlign:fy,locked:!1},a=an({fontSize:s.fontSize,fontFamily:s.fontFamily}),l=Gf(s.fontFamily),[c,,u]=bG(this.state),d=Math.max(Math.min((u-c)*.5,800),200),f=10;let g=o;const U=r?[n]:n.split(`
`),b=U.reduce((v,_,E)=>{var T;const w=Rg(_).trim();if(w.length){const A=this.getTopLayerFrameAtSceneCoords({x:i,y:g});let M=ki(w,a,l);const S=M.width>d,x=S?mh(w,a,d):w;M=S?ki(x,a,l):M;const C=i-M.width/2,R=g-M.height/2,O=Wo({...s,x:C,y:R,text:x,originalText:w,lineHeight:l,autoResize:!S,frameId:A?A.id:null});v.push(O),g+=O.height+f}else((T=U[E-1])==null?void 0:T.trim())&&(g+=iU(s.fontSize,l)+f);return v},[]);b.length!==0&&(this.scene.insertElements(b),this.setState({selectedElementIds:Bt(Object.fromEntries(b.map(v=>[v.id,!0])),this.state)}),!r&&b.length>1&&eN===!1&&!this.device.editor.isMobile&&(this.setToast({message:L("toast.pasteAsSingleElement",{shortcut:de("CtrlOrCmd+Shift+V")}),duration:5e3}),eN=!0),this.store.shouldCaptureIncrement())}handleTextWysiwyg(n,{isExistingElement:r=!1}){const i=this.scene.getElementsMapIncludingDeleted(),o=(s,a)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id===n.id&&Ae(l)?Xe(l,{originalText:s,isDeleted:a??l.isDeleted,...qV(l,Zr(l,i),i,s)}):l)])};ywe({id:n.id,canvas:this.canvas,getViewportCoords:(s,a)=>{const{x:l,y:c}=oa({sceneX:s,sceneY:a},this.state);return[l-this.state.offsetLeft,c-this.state.offsetTop]},onChange:Nn(s=>{o(s,!1),Rw(n)&&_o(n,this.scene.getNonDeletedElementsMap())}),onSubmit:Nn(({viaKeyboard:s,nextOriginalText:a})=>{const l=!a.trim();if(o(a,l),!l&&s){const c=n.containerId?n.containerId:n.id;Pr.flushSync(()=>{this.setState(u=>({selectedElementIds:Bt({...u.selectedElementIds,[c]:!0},u)}))})}l&&EH(this.scene.getNonDeletedElements(),[n]),(!l||r)&&this.store.shouldCaptureIncrement(),Pr.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&Ba(this.interactiveCanvas,this.state),this.focusContainer()}),element:n,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),o(n.originalText,!1)}deselectElements(){this.setState({selectedElementIds:Bt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(n,r){const i=this.getElementAtPosition(n,r,{includeBoundTextElement:!0});return i&&Ae(i)&&!i.isDeleted?i:null}getElementAtPosition(n,r,i){const o=this.getElementsAtPosition(n,r,i==null?void 0:i.includeBoundTextElement,i==null?void 0:i.includeLockedElements);if(o.length>1){if(i!=null&&i.preferSelected){for(let a=o.length-1;a>-1;a--)if(this.state.selectedElementIds[o[a].id])return o[a]}const s=o[o.length-1];return w1({x:n,y:r,element:s,shape:Gl(s,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:We(s)?this.frameNameBoundsCache.get(s):null})?s:o[o.length-2]}return o.length===1?o[0]:null}getElementsAtPosition(n,r,i=!1,o=!1){const s=[],a=this.scene.getNonDeletedElementsMap();return(i&&o?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(c=>(o||!c.locked)&&(i||!(Ae(c)&&c.containerId)))).filter(c=>this.hitElement(n,r,c)).filter(c=>{const u=wo(c,a);return u&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?PM({x:n,y:r},u,a):!0}).filter(c=>uu(c)?(s.push(c),!1):!0).concat(s)}getElementHitThreshold(){return _ae/this.state.zoom.value}hitElement(n,r,i,o=!0){if(o&&this.state.selectedElementIds[i.id]&&RG([i],this.state)){const a=Ppe(i,this.scene.getNonDeletedElementsMap(),kt(i)?0:this.getElementHitThreshold());if(My(B(n,r),a))return!0}return cH(n,r,uH(i,this.scene.getNonDeletedElementsMap()))?!0:w1({x:n,y:r,element:i,shape:Gl(i,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:We(i)?this.frameNameBoundsCache.get(i):null})}getTextBindableContainerAtPosition(n,r){const i=this.scene.getNonDeletedElements(),o=this.scene.getSelectedElements(this.state);if(o.length===1)return Af(o[0],!1)?o[0]:null;let s=null;for(let a=i.length-1;a>=0;--a){if(i[a].isDeleted)continue;const[l,c,u,d]=Ke(i[a],this.scene.getNonDeletedElementsMap());if(st(i[a])&&w1({x:n,y:r,element:i[a],shape:Gl(i[a],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){s=i[a];break}else if(l<n&&n<u&&c<r&&r<d){s=i[a];break}}return Af(s,!1)?s:null}handleHoverSelectedLinearElement(n,r,i){const o=this.scene.getNonDeletedElementsMap(),s=Ce.getElement(n.elementId,o);if(s)if(this.state.selectedLinearElement){let a=-1,l=null;w1({x:r,y:i,element:s,shape:Gl(s,this.scene.getNonDeletedElementsMap())})?(a=Ce.getPointIndexUnderCursor(s,o,this.state.zoom,r,i),l=Ce.getSegmentMidpointHitCoords(n,{x:r,y:i},this.state,this.scene.getNonDeletedElementsMap()),(De(s)?a===0||a===s.points.length-1:a>=0)||l?on(this.interactiveCanvas,Qt.POINTER):this.hitElement(r,i,s)&&on(this.interactiveCanvas,Qt.MOVE)):this.hitElement(r,i,s)&&(!De(s)||!(s.startBinding||s.endBinding))&&on(this.interactiveCanvas,Qt.MOVE),this.state.selectedLinearElement.hoverPointIndex!==a&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:a}}),Ce.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,l)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:l}})}else on(this.interactiveCanvas,Qt.AUTO)}updateGestureOnPointerDown(n){Ft.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY}),Ft.pointers.size===2&&(Ft.lastCenter=yD(Ft.pointers),Ft.initialScale=this.state.zoom.value,Ft.initialDistance=vD(Array.from(Ft.pointers.values())))}initialPointerDownState(n){const r=En(n,this.state),i=this.scene.getSelectedElements(this.state),[o,s,a,l]=jt(i),c=i.findIndex(De)===0;return{origin:r,withCmdOrCtrl:n[j.CTRL_OR_CMD],originInGrid:ms(Ur(r.x,r.y,n[j.CTRL_OR_CMD]||c?null:this.getEffectiveGridSize())),scrollbars:ID(g4,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop),lastCoords:{...r},originalElements:this.scene.getNonDeletedElements().reduce((u,d)=>(u.set(d.id,bh(d)),u),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+o)/2,y:(l+s)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(r,i)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(n,r){if(!(r.scrollbars.isOverEither&&!this.state.multiElement))return!1;h4=!0,r.lastCoords.x=n.clientX,r.lastCoords.y=n.clientY;const i=l4(s=>{s.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(s,r)}),o=Nn(()=>{Gd=null,h4=!1,Ba(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(ge.POINTER_MOVE,i),window.removeEventListener(ge.POINTER_UP,o),i.flush()});return Gd=o,window.addEventListener(ge.POINTER_MOVE,i),window.addEventListener(ge.POINTER_UP,o),!0}isASelectedElement(n){return n!=null&&this.state.selectedElementIds[n.id]}isHittingCommonBoundingBoxOfSelectedElements(n,r){if(r.length<2)return!1;const i=this.getElementHitThreshold(),[o,s,a,l]=jt(r);return n.x>o-i&&n.x<a+i&&n.y>s-i&&n.y<l+i}getCurrentItemRoundness(n){return this.state.currentItemRoundness==="round"?{type:c0(n)?Er.ADAPTIVE_RADIUS:Er.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(n,r,i=!1){td({event:n,app:this,selectedElements:r})&&(i||!Js.getReferenceSnapPoints())&&Js.setReferenceSnapPoints($5e(this.scene.getNonDeletedElements(),r,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(n,r,i=!1){td({event:n,app:this,selectedElements:r})&&(i||!Js.getVisibleGaps())&&Js.setVisibleGaps(B5e(this.scene.getNonDeletedElements(),r,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(n){return Nn(r=>{this.maybeHandleResize(n,r)||this.maybeDragNewGenericElement(n,r)})}onKeyUpFromPointerDownHandler(n){return Nn(r=>{r.key===j.ALT&&r.preventDefault(),!this.maybeHandleResize(n,r)&&this.maybeDragNewGenericElement(n,r)})}onPointerMoveFromPointerDownHandler(n){return l4(r=>{var f,g,U,b,v,_;if(((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")return;const i=En(r,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){const[E,w]=Ur(i.x,i.y,r[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize());let T=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(T<0){const M=Ce.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:E,y:w},this.state,this.scene.getNonDeletedElementsMap());T=M?Ce.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,M,this.scene.getNonDeletedElementsMap()):-1}const A=Ce.moveFixedSegment(this.state.selectedLinearElement,T,E,w,this.scene.getNonDeletedElementsMap());Pr.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:A.segmentMidPointHoveredCoords,pointerDownState:A.pointerDownState}})});return}const o=this.lastPointerMoveCoords??n.origin;if(this.lastPointerMoveCoords=i,n.drag.offset===null&&(n.drag.offset=ms(Lbe(this.scene.getSelectedElements(this.state),n.origin.x,n.origin.y))),!(r.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(r,n))return;if(Ha(this.state)){this.handleEraser(r,n,i);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(i.x,i.y);const[a,l]=Ur(i.x,i.y,r[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!n.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&Xn(B(i.x,i.y),B(n.origin.x,n.origin.y))<Kd)return;if(n.resize.isResizing&&(n.lastCoords.x=i.x,n.lastCoords.y=i.y,this.maybeHandleCrop(n,r)||this.maybeHandleResize(n,r)))return!0;const c=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){const E=this.state.editingLinearElement||this.state.selectedLinearElement;if(Ce.shouldAddMidpoint(this.state.selectedLinearElement,i,this.state,c)){const T=Ce.addMidpoint(this.state.selectedLinearElement,i,this,!r[j.CTRL_OR_CMD],c);if(!T)return;Pr.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:T.pointerDownState,selectedPointsIndices:T.selectedPointsIndices}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:T.pointerDownState,selectedPointsIndices:T.selectedPointsIndices}})});return}else if(E.pointerDownState.segmentMidpoint.value!==null&&!E.pointerDownState.segmentMidpoint.added)return;if(Ce.handlePointDragging(r,this,i.x,i.y,(T,A)=>{this.maybeSuggestBindingsForLinearElementAtCoords(T,A)},E,this.scene)){n.lastCoords.x=i.x,n.lastCoords.y=i.y,n.drag.hasOccurred=!0,this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging&&this.setState({editingLinearElement:{...this.state.editingLinearElement,isDragging:!0}}),this.state.selectedLinearElement.isDragging||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isDragging:!0}});return}}const u=n.hit.allHitElements.some(E=>this.isASelectedElement(E)),d=this.state.editingLinearElement&&r.shiftKey&&this.state.editingLinearElement.elementId===((g=n.hit.element)==null?void 0:g.id);if((u||n.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!d){const E=this.scene.getSelectedElements(this.state);if(E.every(M=>M.locked))return;const w=E.find(M=>We(M)),T=this.getTopLayerFrameAtSceneCoords(i),A=T&&!w?T:null;if(this.state.frameToHighlight!==A&&Pr.flushSync(()=>{this.setState({frameToHighlight:A})}),n.drag.hasOccurred=!0,E.length>0&&!n.withCmdOrCtrl&&!this.state.editingTextElement&&((U=this.state.activeEmbeddable)==null?void 0:U.state)!=="active"){const M={x:i.x-n.origin.x,y:i.y-n.origin.y},S=[...n.originalElements.values()],x=r.shiftKey;if(x){const O=Math.abs(M.x),F=Math.abs(M.y),N=x&&O<F,J=x&&O>F;N&&(M.x=0),J&&(M.y=0)}if(this.state.croppingElementId){const O=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(O&&kt(O)&&O.crop!==null&&n.hit.element===O){const F=O.crop,N=dr(O)&&((b=this.imageCache.get(O.fileId))==null?void 0:b.image);if(N&&!(N instanceof Promise)){const J=el(Gr(i.x-o.x,i.y-o.y),Math.max(this.state.zoom.value,2)),[K,ne,ee,q,Z,te]=Ke(O,c),pe=sn(le(B(K,ne),B(Z,te),O.angle)),Ie=sn(le(B(ee,ne),B(Z,te),O.angle)),Se=sn(le(B(K,q),B(Z,te),O.angle)),lt=_y(Sf(Ie,pe)),at=_y(Sf(Se,pe)),gt=Gr(RR(J,lt),RR(J,at)),ht={...F,x:dt(F.x-gt[0]*Math.sign(O.scale[0]),0,N.naturalWidth-F.width),y:dt(F.y-gt[1]*Math.sign(O.scale[1]),0,N.naturalHeight-F.height)};fe(O,{crop:ht});return}}}this.maybeCacheVisibleGaps(r,E),this.maybeCacheReferenceSnapPoints(r,E);const{snapOffset:C,snapLines:R}=z5e(S,M,this,r,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:R}),this.state.editingFrame||Pbe(n,E,M,this.scene,C,r[j.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(E.length!==1||!De(E[0]))&&this.setState({suggestedBindings:_E(E,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),r.altKey&&!n.hit.hasBeenDuplicated){n.hit.hasBeenDuplicated=!0;const O=[],F=[],N=new Map,J=new Map,K=n.hit.element,ne=new Set(this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}).map(te=>te.id)),ee=this.scene.getElementsIncludingDeleted();for(const te of ee)if(ne.has(te.id)||te.id===(K==null?void 0:K.id)&&n.hit.wasAddedToSelection){const pe=JV(this.state.editingGroupId,N,te),Ie=n.originalElements.get(te.id);fe(pe,{x:Ie.x,y:Ie.y}),n.originalElements.set(pe.id,pe),O.push(pe),F.push(te),J.set(te.id,pe.id)}else O.push(te);let q=[...O,...F];q=((_=(v=this.props).onDuplicate)==null?void 0:_.call(v,q,ee))||q,ul(q,He(F)),_G(O,F,J),vH(q,F,J,"duplicatesServeAsOld"),nG(q,F,J),this.scene.replaceAllElements(q),this.maybeCacheVisibleGaps(r,E,!0),this.maybeCacheReferenceSnapPoints(r,E,!0)}return}}if(this.state.selectionElement)n.lastCoords.x=i.x,n.lastCoords.y=i.y,this.maybeDragNewGenericElement(n,r);else{const E=this.state.newElement;if(!E)return;if(E.type==="freedraw"){const w=E.points,T=i.x-E.x,A=i.y-E.y,M=w.length>0&&w[w.length-1];if(!(M&&M[0]===T&&M[1]===A)){const x=E.simulatePressure?E.pressures:[...E.pressures,r.pressure];fe(E,{points:[...w,B(T,A)],pressures:x},!1),this.setState({newElement:E})}}else if(et(E)){n.drag.hasOccurred=!0;const w=E.points;let T=a-E.x,A=l-E.y;Um(r)&&w.length===2&&({width:T,height:A}=Aw(E.x,E.y,i.x,i.y)),w.length===1?fe(E,{points:[...w,B(T,A)]},!1):(w.length===2||w.length>1&&De(E))&&fe(E,{points:[...w.slice(0,-1),B(T,A)]},!1,{isDragging:!0}),this.setState({newElement:E}),Za(E,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(E,[i],this.state.startBoundElement)}else n.lastCoords.x=i.x,n.lastCoords.y=i.y,this.maybeDragNewGenericElement(n,r,!1)}if(this.state.activeTool.type==="selection"){n.boxSelection.hasOccurred=!0;const E=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)Ce.handleBoxSelection(r,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let w=!0;!r.shiftKey&&_r(E,this.state)&&(n.withCmdOrCtrl&&n.hit.element?this.setState(A=>Vi({...A,selectedElementIds:{[n.hit.element.id]:!0}},this.scene.getNonDeletedElements(),A,this)):w=!1);const T=this.state.selectionElement?px(E,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(A=>{const M={...w&&A.selectedElementIds,...T.reduce((S,x)=>(S[x.id]=!0,S),{})};return n.hit.element&&(T.length?delete M[n.hit.element.id]:M[n.hit.element.id]=!0),A=w?A:{...A,selectedGroupIds:{},editingGroupId:null},{...Vi({editingGroupId:A.editingGroupId,selectedElementIds:M},this.scene.getNonDeletedElements(),A,this),selectedLinearElement:T.length===1&&et(T[0])?new Ce(T[0]):null,showHyperlinkPopup:T.length===1&&(T[0].link||co(T[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(n,r){if(r.scrollbars.isOverHorizontal){const i=n.clientX,o=i-r.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-o/this.state.zoom.value}),r.lastCoords.x=i,!0}if(r.scrollbars.isOverVertical){const i=n.clientY,o=i-r.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-o/this.state.zoom.value}),r.lastCoords.y=i,!0}return!1}onPointerUpFromPointerDownHandler(n){return Nn(r=>{var v,_,E,w,T,A,M,S,x,C,R,O;this.removePointer(r),n.eventListeners.onMove&&n.eventListeners.onMove.flush();const{newElement:i,resizingElement:o,croppingElementId:s,multiElement:a,activeTool:l,isResizing:c,isRotating:u,isCropping:d}=this.state;this.setState(F=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:Ep(F.snapLines,[]),originSnapOffset:null})),this.lastPointerMoveCoords=null,Js.setReferenceSnapPoints(null),Js.setVisibleGaps(null),this.savePointer(r.clientX,r.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});const f=this.scene.getNonDeletedElementsMap();if(n.drag.hasOccurred&&((_=(v=n.hit)==null?void 0:v.element)!=null&&_.id)){const F=f.get(n.hit.element.id);Ua(F)&&((E=F.boundElements)==null||E.filter(N=>N.type==="arrow").map(N=>f.get(N.id)).filter(N=>De(N)).forEach(N=>{N&&fe(N,{},!0)}))}if(this.state.editingLinearElement)if(!n.boxSelection.hasOccurred&&((T=(w=n.hit)==null?void 0:w.element)==null?void 0:T.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Xs);else{const F=Ce.handlePointerUp(r,this.state.editingLinearElement,this.state,this.scene);F!==this.state.editingLinearElement&&this.setState({editingLinearElement:F,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){const F=Ce.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());F&&fe(F,{},!0)}if(((M=(A=n.hit)==null?void 0:A.element)==null?void 0:M.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{const F=Ce.handlePointerUp(r,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:N,endBindingElement:J}=F,K=this.scene.getElement(F.elementId);Za(K)&&U3(K,N,J,f,this.scene),F!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...F,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener(ge.POINTER_MOVE,n.eventListeners.onMove),window.removeEventListener(ge.POINTER_UP,n.eventListeners.onUp),window.removeEventListener(ge.KEYDOWN,n.eventListeners.onKeyDown),window.removeEventListener(ge.KEYUP,n.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(x=(S=this.props)==null?void 0:S.onPointerUp)==null||x.call(S,l,n),this.onPointerUpEmitter.trigger(this.state.activeTool,n,r),(i==null?void 0:i.type)==="freedraw"){const F=En(r,this.state),N=i.points;let J=F.x-i.x,K=F.y-i.y;J===N[0][0]&&K===N[0][1]&&(K+=1e-4,J+=1e-4);const ne=i.simulatePressure?[]:[...i.pressures,r.pressure];fe(i,{points:[...N,B(J,K)],pressures:ne,lastCommittedPoint:B(J,K)}),this.actionManager.executeAction(Xs);return}if(kt(i)){const F=i;try{this.initializeImageDimensions(F),this.setState({selectedElementIds:Bt({[F.id]:!0},this.state)},()=>{this.actionManager.executeAction(Xs)})}catch(N){console.error(N),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(J=>J.id!==F.id)),this.actionManager.executeAction(Xs)}return}if(et(i)){i.points.length>1&&this.store.shouldCaptureIncrement();const F=En(r,this.state);!n.drag.hasOccurred&&i&&!a?(fe(i,{points:[...i.points,B(F.x-i.x,F.y-i.y)]}),this.setState({multiElement:i,newElement:i})):n.drag.hasOccurred&&!a&&(gf(this.state)&&Za(i,!1)&&lw(i,this.state,F,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.setState({suggestedBindings:[],startBoundElement:null}),l.locked?this.setState(N=>({newElement:null})):(Ks(this.interactiveCanvas),this.setState(N=>({newElement:null,activeTool:lr(this.state,{type:"selection"}),selectedElementIds:Bt({...N.selectedElementIds,[i.id]:!0},N),selectedLinearElement:new Ce(i)}))),this.scene.triggerUpdate());return}if(Ae(i)){const F=tT(an({fontSize:i.fontSize,fontFamily:i.fontFamily}),i.lineHeight);i.width<F&&fe(i,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(i,{isExistingElement:!0})}if(l.type!=="selection"&&i&&nh(i)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(F=>F.id!==i.id),appState:{newElement:null},storeAction:ae.UPDATE});return}if(We(i)){const F=h5e(this.scene.getElementsIncludingDeleted(),i,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(Tm(this.scene.getElementsMapIncludingDeleted(),F,i,this.state))}if(i&&(fe(i,CG(i)),this.scene.triggerUpdate()),n.drag.hasOccurred){const F=En(r,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){const N=this.scene.getElement(this.state.selectedLinearElement.elementId);if(N!=null&&N.frameId){const J=wo(N,f);J&&N&&(ed(N,J,this.scene.getNonDeletedElementsMap())||(fe(N,{groupIds:[]}),k3([N],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{const N=this.getTopLayerFrameAtSceneCoords(F),J=this.scene.getSelectedElements(this.state);let K=this.scene.getElementsMapIncludingDeleted();const ne=ee=>{if(ee.length>0){for(const q of ee){const Z=q.groupIds.indexOf(this.state.editingGroupId);fe(q,{groupIds:q.groupIds.slice(0,Z)},!1)}K.forEach(q=>{q.groupIds.length&&Tn(K,q.groupIds[q.groupIds.length-1]).length<2&&fe(q,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(N&&!this.state.selectedElementIds[N.id]){const ee=J.filter(q=>q.frameId!==N.id&&Yy(q,K,this.state));this.state.editingGroupId&&ne(ee),K=Tm(K,ee,N,this.state)}else if(!N&&this.state.editingGroupId){const ee=J.filter(q=>q.frameId&&!Yy(q,K,this.state));ne(ee)}K=Fg(K,this.state,this),this.scene.replaceAllElements(K)}}if(o&&this.store.shouldCaptureIncrement(),o&&nh(o)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(F=>F.id!==o.id),storeAction:ae.UPDATE}),n.resize.isResizing){let F=Fg(this.scene.getElementsIncludingDeleted(),this.state,this);const N=this.scene.getSelectedElements(this.state).filter(J=>We(J));for(const J of N)F=oG(F,Sb(this.scene.getElementsIncludingDeleted(),J,this.state,f),J,this);this.scene.replaceAllElements(F)}const g=n.hit.element;((C=this.state.selectedLinearElement)==null?void 0:C.elementId)!==(g==null?void 0:g.id)&&et(g)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new Ce(g)}),(!s||s&&(!g&&!d||g&&g.id!==s))&&this.finishImageCropping();const U=this.lastPointerDownEvent,b=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Ha(this.state)&&U&&b){if(this.eraserTrail.endPath(),Xn(B(U.clientX,U.clientY),B(b.clientX,b.clientY))===0){const N=En({clientX:b.clientX,clientY:b.clientY},this.state);this.getElementsAtPosition(N.x,N.y).forEach(K=>this.elementsPendingErasure.add(K.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(g&&!n.drag.hasOccurred&&!n.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!n.boxSelection.hasOccurred)&&(r.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[g.id]?yV(this.state,g)?this.setState(F=>{const N={...F.selectedElementIds};for(const J of g.groupIds.flatMap(K=>Tn(this.scene.getNonDeletedElements(),K)))delete N[J.id];return{selectedGroupIds:{...F.selectedElementIds,...g.groupIds.map(J=>({[J]:!1})).reduce((J,K)=>({...J,...K}),{})},selectedElementIds:Bt(N,F)}}):(R=this.state.selectedLinearElement)!=null&&R.isDragging||this.setState(F=>{const N={...F.selectedElementIds};delete N[g.id];const J=ot(this.scene.getNonDeletedElements(),{selectedElementIds:N});return{...Vi({editingGroupId:F.editingGroupId,selectedElementIds:N},this.scene.getNonDeletedElements(),F,this),selectedLinearElement:J.length===1&&et(J[0])?new Ce(J[0]):F.selectedLinearElement}}):g.frameId&&this.state.selectedElementIds[g.frameId]?this.setState(F=>{var J;const N={...F.selectedElementIds,[g.id]:!0};return delete N[g.frameId],(((J=this.scene.getElement(g.frameId))==null?void 0:J.groupIds)??[]).flatMap(K=>Tn(this.scene.getNonDeletedElements(),K)).forEach(K=>{delete N[K.id]}),{...Vi({editingGroupId:F.editingGroupId,selectedElementIds:N},this.scene.getNonDeletedElements(),F,this),showHyperlinkPopup:g.link||co(g)?"info":!1}}):this.setState(F=>({selectedElementIds:Bt({...F.selectedElementIds,[g.id]:!0},F)})):this.setState(F=>{var N;return{...Vi({editingGroupId:F.editingGroupId,selectedElementIds:{[g.id]:!0}},this.scene.getNonDeletedElements(),F,this),selectedLinearElement:et(g)&&((N=F.selectedLinearElement)==null?void 0:N.elementId)!==g.id?new Ce(g):F.selectedLinearElement}})),!(g&&De(g))&&!n.drag.hasOccurred&&!this.state.isResizing&&(g&&jpe({x:n.origin.x,y:n.origin.y,element:g,shape:Gl(g,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:We(g)?this.frameNameBoundsCache.get(g):null},f)||!g&&n.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:Bt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),on(this.interactiveCanvas,Qt.AUTO);return}if(!l.locked&&l.type!=="freedraw"&&i&&this.setState(F=>({selectedElementIds:Bt({...F.selectedElementIds,[i.id]:!0},F),showHyperlinkPopup:co(i)&&!i.link?"editor":F.showHyperlinkPopup})),(l.type!=="selection"||_r(this.scene.getNonDeletedElements(),this.state)||!ai(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),n.drag.hasOccurred||c||u||d){const F=this.scene.getSelectedElements(this.state).filter(et);Ly(F,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,gf(this.state),((O=this.state.selectedLinearElement)==null?void 0:O.selectedPointsIndices)??[],this.state.zoom)}if(l.type==="laser"){this.laserTrails.endPath();return}!l.locked&&l.type!=="freedraw"?(Ks(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:lr(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),g&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&Ft.pointers.size<=1&&hs(g)&&this.isIframeLikeElementCenter(g,this.lastPointerUpEvent,n.origin.x,n.origin.y)&&this.handleEmbeddableCenterClick(g)})}clearSelection(n){this.setState(r=>({selectedElementIds:Bt({},r),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:r.editingGroupId&&n!=null&&d2(n,r.editingGroupId)?r.editingGroupId:null})),this.setState({selectedElementIds:Bt({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(n,r,i,o){if(o){let s=o.x+o.width/2,a=o.y+o.height/2;const l=zE(o,i,this.scene.getNonDeletedElementsMap());if(l&&(s=l.x,a=l.y),Math.hypot(n-s,r-a)<yae){const{x:d,y:f}=oa({sceneX:s,sceneY:a},i);return{viewportX:d,viewportY:f,elementCenterX:s,elementCenterY:a}}}}getCanvasOffsets(){var n;if((n=this.excalidrawContainerRef)!=null&&n.current){const r=this.excalidrawContainerRef.current,{left:i,top:o}=r.getBoundingClientRect();return{offsetLeft:i,offsetTop:o}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){const n=o3.find(r=>r.code===this.props.langCode)||ph;await Nz(n),this.setAppState({})}}const Twe=e=>{const{closeOnClickOutside:t=!0}=e,n=CX({className:"excalidraw-modal-container"}),r=D.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;const i=o=>{o.key===j.ESCAPE&&(o.nativeEvent.stopImmediatePropagation(),o.stopPropagation(),e.onCloseRequest())};return Pr.createPortal(z("div",{className:Re("Modal",e.className,{"animations-disabled":r.current}),role:"dialog","aria-modal":"true",onKeyDown:i,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[p("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),p("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)};function xwe(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}const Ko=e=>{const[t,n]=Bz(),[r]=D.useState(document.activeElement),{id:i}=bl(),o=Or().viewport.isMobile;D.useEffect(()=>{if(!t)return;const c=G_(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});const u=d=>{if(d.key===j.TAB){const f=G_(t),{activeElement:g}=document,U=f.findIndex(b=>b===g);U===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):U===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",u),()=>t.removeEventListener("keydown",u)},[t,e.autofocus]);const s=Ir(),a=i3(kx),l=()=>{s({openMenu:null}),a(!1),r.focus(),e.onCloseRequest()};return p(Twe,{className:Re("Dialog",e.className,{"Dialog--fullscreen":o}),labelledBy:"dialog-title",maxWidth:xwe(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:z(ha,{ref:n,children:[e.title&&p("h2",{id:`${i}-dialog-title`,className:"Dialog__title",children:p("span",{className:"Dialog__titleContent",children:e.title})}),o&&p("button",{className:"Dialog__close",onClick:l,title:L("buttons.close"),"aria-label":L("buttons.close"),type:"button",children:Uh}),p("div",{className:"Dialog__content",children:e.children})]})})},nS=({children:e,onClose:t})=>{const[n,r]=D.useState(!!e),{container:i}=bl(),o=Ee.useCallback(()=>{r(!1),t&&t(),i==null||i.focus()},[t,i]);return p(ke,{children:n&&p(Ko,{size:"small",onCloseRequest:o,title:L("errorDialog.title"),children:p("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},pn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,mn=globalThis,Ih=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Lf="9.0.1";function nv(){return rv(mn),mn}function rv(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Lf,t[Lf]=t[Lf]||{}}function iv(e,t,n=mn){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[Lf]=r[Lf]||{};return i[e]||(i[e]=t())}const Swe="Sentry Logger ",g8=["debug","info","warn","error","log","assert","trace"],p8={};function b0(e){if(!("console"in mn))return e();const t=mn.console,n={},r=Object.keys(p8);r.forEach(i=>{const o=p8[i];n[i]=t[i],t[i]=o});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function Cwe(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Ih?g8.forEach(n=>{t[n]=(...r)=>{e&&b0(()=>{mn.console[n](`${Swe}[${n}]:`,...r)})}}):g8.forEach(n=>{t[n]=()=>{}}),t}const it=iv("logger",Cwe),HK=50,ih="?",tN=/\(error: (.*)\)/,nN=/captureMessage|captureException/;function WK(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const o=[],s=n.split(`
`);for(let a=r;a<s.length;a++){const l=s[a];if(l.length>1024)continue;const c=tN.test(l)?l.replace(tN,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){o.push(d);break}}if(o.length>=HK+i)break}}return kwe(o.slice(i))}}function Awe(e){return Array.isArray(e)?WK(...e):e}function kwe(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(D5(t).function||"")&&t.pop(),t.reverse(),nN.test(D5(t).function||"")&&(t.pop(),nN.test(D5(t).function||"")&&t.pop()),t.slice(0,HK).map(n=>({...n,filename:n.filename||D5(t).filename,function:n.function||ih}))}function D5(e){return e[e.length-1]||{}}const m4="<anonymous>";function id(e){try{return!e||typeof e!="function"?m4:e.name||m4}catch{return m4}}function rN(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const Db={},iN={};function Th(e,t){Db[e]=Db[e]||[],Db[e].push(t)}function xh(e,t){if(!iN[e]){iN[e]=!0;try{t()}catch(n){Ih&&it.error(`Error while instrumenting ${e}`,n)}}}function pa(e,t){const n=e&&Db[e];if(n)for(const r of n)try{r(t)}catch(i){Ih&&it.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${id(r)}
Error:`,i)}}let U4=null;function Rwe(e){const t="error";Th(t,e),xh(t,Pwe)}function Pwe(){U4=mn.onerror,mn.onerror=function(e,t,n,r,i){return pa("error",{column:r,error:i,line:n,msg:e,url:t}),U4?U4.apply(this,arguments):!1},mn.onerror.__SENTRY_INSTRUMENTED__=!0}let b4=null;function Mwe(e){const t="unhandledrejection";Th(t,e),xh(t,Lwe)}function Lwe(){b4=mn.onunhandledrejection,mn.onunhandledrejection=function(e){return pa("unhandledrejection",e),b4?b4.apply(this,arguments):!0},mn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const GK=Object.prototype.toString;function rS(e){switch(GK.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return oh(e,Error)}}function y0(e,t){return GK.call(e)===`[object ${t}]`}function XK(e){return y0(e,"ErrorEvent")}function oN(e){return y0(e,"DOMError")}function Dwe(e){return y0(e,"DOMException")}function ac(e){return y0(e,"String")}function iS(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function oS(e){return e===null||iS(e)||typeof e!="object"&&typeof e!="function"}function Gg(e){return y0(e,"Object")}function ov(e){return typeof Event<"u"&&oh(e,Event)}function Nwe(e){return typeof Element<"u"&&oh(e,Element)}function Owe(e){return y0(e,"RegExp")}function sv(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function Fwe(e){return Gg(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function oh(e,t){try{return e instanceof t}catch{return!1}}function jK(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const sS=mn,Bwe=80;function KK(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let o=0,s=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||Bwe;for(;n&&o++<r&&(c=$we(n,u),!(c==="html"||o>1&&s+i.length*l+c.length>=d));)i.push(c),s+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function $we(e,t){const n=e,r=[];if(!(n!=null&&n.tagName))return"";if(sS.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=t!=null&&t.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(i!=null&&i.length)i.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const s=n.className;if(s&&ac(s)){const a=s.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const o=["aria-label","type","name","title","alt"];for(const s of o){const a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function aS(){try{return sS.document.location.href}catch{return""}}function zwe(e){if(!sS.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function pg(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function m8(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const i=e[r];try{jK(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Vwe(e,t,n=!1){return ac(e)?Owe(t)?t.test(e):ac(t)?n?e===t:e.includes(t):!1:!1}function av(e,t=[],n=!1){return t.some(r=>Vwe(e,r,n))}function Oo(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);typeof i=="function"&&YK(i,r);try{e[t]=i}catch{Ih&&it.log(`Failed to replace method "${t}" in object`,e)}}function sh(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Ih&&it.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function YK(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,sh(e,"__sentry_original__",t)}catch{}}function lS(e){return e.__sentry_original__}function ZK(e){if(rS(e))return{message:e.message,name:e.name,stack:e.stack,...aN(e)};if(ov(e)){const t={type:e.type,target:sN(e.target),currentTarget:sN(e.currentTarget),...aN(e)};return typeof CustomEvent<"u"&&oh(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function sN(e){try{return Nwe(e)?KK(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function aN(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Hwe(e,t=40){const n=Object.keys(ZK(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return pg(r,t);for(let i=n.length;i>0;i--){const o=n.slice(0,i).join(", ");if(!(o.length>t))return i===n.length?o:pg(o,t)}return""}function Fo(e){return o9(e,new Map)}function o9(e,t){if(Wwe(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const i of Object.getOwnPropertyNames(e))typeof e[i]<"u"&&(r[i]=o9(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(i=>{r.push(o9(i,t))}),r}return e}function Wwe(e){if(!Gg(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const qK=1e3;function TU(){return Date.now()/qK}function Gwe(){const{performance:e}=mn;if(!(e!=null&&e.now))return TU;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/qK}const lc=Gwe();function xs(){const e=mn,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function QK(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function du(e){const{message:t,event_id:n}=e;if(t)return t;const r=QK(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function s9(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function ah(e,t){const n=QK(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const o={...i==null?void 0:i.data,...t.data};n.mechanism.data=o}}function lN(e){if(Xwe(e))return!0;try{sh(e,"__sentry_captured__",!0)}catch{}return!1}function Xwe(e){try{return e.__sentry_captured__}catch{}}var Vl;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Vl||(Vl={}));function lh(e){return new od(t=>{t(e)})}function U8(e){return new od((t,n)=>{n(e)})}class od{constructor(t){this._state=Vl.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new od((r,i)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(s){i(s)}},o=>{if(!n)i(o);else try{r(n(o))}catch(s){i(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new od((n,r)=>{let i,o;return this.then(s=>{o=!1,i=s,t&&t()},s=>{o=!0,i=s,t&&t()}).then(()=>{if(o){r(i);return}n(i)})})}_executeHandlers(){if(this._state===Vl.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Vl.RESOLVED&&n[1](this._value),this._state===Vl.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(o,s)=>{if(this._state===Vl.PENDING){if(sv(s)){s.then(r,i);return}this._state=o,this._value=s,this._executeHandlers()}},r=o=>{n(Vl.RESOLVED,o)},i=o=>{n(Vl.REJECTED,o)};try{t(r,i)}catch(o){i(o)}}}function jwe(e){const t=lc(),n={sid:xs(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Ywe(n)};return e&&Xg(n,e),n}function Xg(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||lc(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:xs()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Kwe(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),Xg(e,n)}function Ywe(e){return Fo({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function cN(){return xs()}function JK(){return xs().substring(16)}function xU(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=xU(r[i],t[i],n-1));return r}const a9="_sentrySpan";function uN(e,t){t?sh(e,a9,t):delete e[a9]}function dN(e){return e[a9]}const Zwe=100;class hl{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:cN(),sampleRand:Math.random()}}clone(){const t=new hl;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,uN(t,dN(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Xg(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof hl?n.getScopeData():Gg(n)?t:void 0,{tags:i,extra:o,user:s,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=r||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,uN(this,void 0),this._attachments=[],this.setPropagationContext({traceId:cN(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var o;const r=typeof n=="number"?n:Zwe;if(r<=0)return this;const i={timestamp:TU(),...t};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(o=this._client)==null||o.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:dN(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=xU(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=(n==null?void 0:n.event_id)||xs();if(!this._client)return it.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureMessage(t,n,r){const i=(r==null?void 0:r.event_id)||xs();if(!this._client)return it.warn("No client configured on scope - will not capture message!"),i;const o=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:i},this),i}captureEvent(t,n){const r=(n==null?void 0:n.event_id)||xs();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(it.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function qwe(){return iv("defaultCurrentScope",()=>new hl)}function Qwe(){return iv("defaultIsolationScope",()=>new hl)}class Jwe{constructor(t,n){let r;t?r=t:r=new hl;let i;n?i=n:i=new hl,this._stack=[{scope:r}],this._isolationScope=i}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(i){throw this._popScope(),i}return sv(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function jg(){const e=nv(),t=rv(e);return t.stack=t.stack||new Jwe(qwe(),Qwe())}function e9e(e){return jg().withScope(e)}function t9e(e,t){const n=jg();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function fN(e){return jg().withScope(()=>e(jg().getIsolationScope()))}function n9e(){return{withIsolationScope:fN,withScope:e9e,withSetScope:t9e,withSetIsolationScope:(e,t)=>fN(t),getCurrentScope:()=>jg().getScope(),getIsolationScope:()=>jg().getIsolationScope()}}function cS(e){const t=rv(e);return t.acs?t.acs:n9e()}function Nc(){const e=nv();return cS(e).getCurrentScope()}function SU(){const e=nv();return cS(e).getIsolationScope()}function r9e(){return iv("globalScope",()=>new hl)}function uS(...e){const t=nv(),n=cS(t);if(e.length===2){const[r,i]=e;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(e[0])}function Mi(){return Nc().getClient()}function i9e(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:i}=t;return Fo({trace_id:n,span_id:i||JK(),parent_span_id:r})}const o9e="sentry.source",s9e="sentry.sample_rate",a9e="sentry.op",l9e="sentry.origin",eY="sentry.profile_id",tY="sentry.exclusive_time",c9e=0,u9e=1,d9e="_sentryScope",f9e="_sentryIsolationScope";function nY(e){return{scope:e[d9e],isolationScope:e[f9e]}}function h9e(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const g9e="sentry-",p9e=/^sentry-/;function m9e(e){const t=U9e(e);if(!t)return;const n=Object.entries(t).reduce((r,[i,o])=>{if(i.match(p9e)){const s=i.slice(g9e.length);r[s]=o}return r},{});if(Object.keys(n).length>0)return n}function U9e(e){if(!(!e||!ac(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=hN(n);return Object.entries(r).forEach(([i,o])=>{t[i]=o}),t},{}):hN(e)}function hN(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}const b9e=1;let gN=!1;function y9e(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),i=r?t:dS(e).parent_span_id,o=nY(e).scope,s=r?(o==null?void 0:o.getPropagationContext().propagationSpanId)||JK():t;return Fo({parent_span_id:i,span_id:s,trace_id:n})}function pN(e){return typeof e=="number"?mN(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?mN(e.getTime()):lc()}function mN(e){return e>9999999999?e/1e3:e}function dS(e){if(E9e(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(v9e(e)){const{attributes:r,startTime:i,name:o,endTime:s,parentSpanId:a,status:l}=e;return Fo({span_id:t,trace_id:n,data:r,description:o,parent_span_id:a,start_timestamp:pN(i),timestamp:pN(s)||void 0,status:w9e(l),op:r[a9e],origin:r[l9e]})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function v9e(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function E9e(e){return typeof e.getSpanJSON=="function"}function _9e(e){const{traceFlags:t}=e.spanContext();return t===b9e}function w9e(e){if(!(!e||e.code===c9e))return e.code===u9e?"ok":e.message||"unknown_error"}const I9e="_sentryRootSpan";function rY(e){return e[I9e]||e}function UN(){gN||(b0(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),gN=!0)}function T9e(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=Mi())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const fS="production",x9e="_frozenDsc";function iY(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},i=Fo({environment:n.environment||fS,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",i),i}function S9e(e,t){const n=t.getPropagationContext();return n.dsc||iY(n.traceId,e)}function C9e(e){var U;const t=Mi();if(!t)return{};const n=rY(e),r=dS(n),i=r.data,o=n.spanContext().traceState,s=(o==null?void 0:o.get("sentry.sample_rate"))??i[s9e];function a(b){return(typeof s=="number"||typeof s=="string")&&(b.sample_rate=`${s}`),b}const l=n[x9e];if(l)return a(l);const c=o==null?void 0:o.get("sentry.dsc"),u=c&&m9e(c);if(u)return a(u);const d=iY(e.spanContext().traceId,t),f=i[o9e],g=r.description;return f!=="url"&&g&&(d.transaction=g),T9e()&&(d.sampled=String(_9e(n)),d.sample_rand=(o==null?void 0:o.get("sentry.sample_rand"))??((U=nY(n).scope)==null?void 0:U.getPropagationContext().sampleRand.toString())),a(d),t.emit("createDsc",d,n),d}const A9e=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function k9e(e){return e==="http"||e==="https"}function hS(e,t=!1){const{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${s}`}function R9e(e){const t=A9e.exec(e);if(!t){b0(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,i="",o="",s="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return oY({host:o,pass:i,path:l,projectId:c,port:s,protocol:n,publicKey:r})}function oY(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function P9e(e){if(!Ih)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(it.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?k9e(r)?t&&isNaN(parseInt(t,10))?(it.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(it.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(it.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function M9e(e){const t=typeof e=="string"?R9e(e):oY(e);if(!(!t||!P9e(t)))return t}function Hl(e,t=100,n=1/0){try{return l9("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function sY(e,t=3,n=100*1024){const r=Hl(e,t);return O9e(r)>n?sY(e,t-1,n):r}function l9(e,t,n=1/0,r=1/0,i=F9e()){const[o,s]=i;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=L9e(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const g=c.toJSON();return l9("",g,l-1,r,i)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=ZK(t);for(const g in f){if(!Object.prototype.hasOwnProperty.call(f,g))continue;if(d>=r){u[g]="[MaxProperties ~]";break}const U=f[g];u[g]=l9(g,U,l-1,r,i),d++}return s(t),u}function L9e(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(jK(t))return"[VueViewModel]";if(Fwe(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${id(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=D9e(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function D9e(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function N9e(e){return~-encodeURI(e).split(/%..|./).length}function O9e(e){return N9e(JSON.stringify(e))}function F9e(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function lv(e,t=[]){return[e,t]}function B9e(e,t){const[n,r]=e;return[n,[...r,t]]}function bN(e,t){const n=e[1];for(const r of n){const i=r[0].type;if(t(r,i))return!0}return!1}function c9(e){const t=rv(mn);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function $9e(e){const[t,n]=e;let r=JSON.stringify(t);function i(o){typeof r=="string"?r=typeof o=="string"?r+o:[c9(r),o]:r.push(typeof o=="string"?c9(o):o)}for(const o of n){const[s,a]=o;if(i(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(Hl(a))}i(l)}}return typeof r=="string"?r:z9e(r)}function z9e(e){const t=e.reduce((i,o)=>i+o.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function V9e(e){const t=typeof e.data=="string"?c9(e.data):e.data;return[Fo({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const H9e={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function yN(e){return H9e[e]}function aY(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function W9e(e,t,n,r){var o;const i=(o=e.sdkProcessingMetadata)==null?void 0:o.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:hS(r)},...i&&{trace:Fo({...i})}}}function G9e(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function X9e(e,t,n,r){const i=aY(n),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:hS(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return lv(o,[s])}function j9e(e,t,n,r){const i=aY(n),o=e.type&&e.type!=="replay_event"?e.type:"event";G9e(e,n==null?void 0:n.sdk);const s=W9e(e,i,r,t);return delete e.sdkProcessingMetadata,lv(s,[[{type:o},e]])}function u9(e,t,n,r=0){return new od((i,o)=>{const s=e[r];if(t===null||typeof s!="function")i(t);else{const a=s({...t},n);pn&&s.id&&a===null&&it.log(`Event processor "${s.id}" dropped event`),sv(a)?a.then(l=>u9(e,l,n,r+1).then(i)).then(null,o):u9(e,a,n,r+1).then(i).then(null,o)}})}let N5,vN,O5;function K9e(e){const t=mn._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return O5&&n.length===vN||(vN=n.length,O5=n.reduce((r,i)=>{N5||(N5={});const o=N5[i];if(o)r[o[0]]=o[1];else{const s=e(i);for(let a=s.length-1;a>=0;a--){const l=s[a],c=l==null?void 0:l.filename,u=t[i];if(c&&u){r[c]=u,N5[i]=[c,u];break}}}return r},{})),O5}function Y9e(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:o}=t;Z9e(e,t),r&&J9e(e,r),eIe(e,n),q9e(e,i),Q9e(e,o)}function EN(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:g,span:U}=t;F5(e,"extra",n),F5(e,"tags",r),F5(e,"user",i),F5(e,"contexts",o),e.sdkProcessingMetadata=xU(e.sdkProcessingMetadata,a,2),s&&(e.level=s),g&&(e.transactionName=g),U&&(e.span=U),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function F5(e,t,n){e[t]=xU(e[t],n,1)}function Z9e(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,transactionName:a}=t,l=Fo(n);Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Fo(r);Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Fo(i);Object.keys(u).length&&(e.user={...u,...e.user});const d=Fo(o);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function q9e(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Q9e(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function J9e(e,t){e.contexts={trace:y9e(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:C9e(t),...e.sdkProcessingMetadata};const n=rY(t),r=dS(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function eIe(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function tIe(e,t,n,r,i,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||xs(),timestamp:t.timestamp||TU()},c=n.integrations||e.integrations.map(v=>v.name);nIe(l,e),oIe(l,c),i&&i.emit("applyFrameMetadata",t),t.type===void 0&&rIe(l,e.stackParser);const u=aIe(r,n.captureContext);n.mechanism&&ah(l,n.mechanism);const d=i?i.getEventProcessors():[],f=r9e().getScopeData();if(o){const v=o.getScopeData();EN(f,v)}if(u){const v=u.getScopeData();EN(f,v)}const g=[...n.attachments||[],...f.attachments];g.length&&(n.attachments=g),Y9e(l,f);const U=[...d,...f.eventProcessors];return u9(U,l,n).then(v=>(v&&iIe(v),typeof s=="number"&&s>0?sIe(v,s,a):v))}function nIe(e,t){var l,c;const{environment:n,release:r,dist:i,maxValueLength:o=250}=t;e.environment=e.environment||n||fS,!e.release&&r&&(e.release=r),!e.dist&&i&&(e.dist=i),e.message&&(e.message=pg(e.message,o));const s=(c=(l=e.exception)==null?void 0:l.values)==null?void 0:c[0];s!=null&&s.value&&(s.value=pg(s.value,o));const a=e.request;a!=null&&a.url&&(a.url=pg(a.url,o))}function rIe(e,t){var r,i;const n=K9e(t);(i=(r=e.exception)==null?void 0:r.values)==null||i.forEach(o=>{var s,a;(a=(s=o.stacktrace)==null?void 0:s.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=n[l.filename])})})}function iIe(e){var r,i;const t={};if((i=(r=e.exception)==null?void 0:r.values)==null||i.forEach(o=>{var s,a;(a=(s=o.stacktrace)==null?void 0:s.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([o,s])=>{n.push({type:"sourcemap",code_file:o,debug_id:s})})}function oIe(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function sIe(e,t,n){var i,o;if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:Hl(s.data,t,n)}}))},...e.user&&{user:Hl(e.user,t,n)},...e.contexts&&{contexts:Hl(e.contexts,t,n)},...e.extra&&{extra:Hl(e.extra,t,n)}};return(i=e.contexts)!=null&&i.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Hl(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>({...s,...s.data&&{data:Hl(s.data,t,n)}}))),(o=e.contexts)!=null&&o.flags&&r.contexts&&(r.contexts.flags=Hl(e.contexts.flags,3,n)),r}function aIe(e,t){if(!t)return e;const n=e?e.clone():new hl;return n.update(t),n}function lIe(e){if(e)return cIe(e)?{captureContext:e}:dIe(e)?{captureContext:e}:e}function cIe(e){return e instanceof hl||typeof e=="function"}const uIe=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function dIe(e){return Object.keys(e).some(t=>uIe.includes(t))}function gS(e,t){return Nc().captureException(e,lIe(t))}function _N(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return Nc().captureMessage(e,n,r)}function lY(e,t){return Nc().captureEvent(e,t)}function wN(e){const t=SU(),n=Nc(),{userAgent:r}=mn.navigator||{},i=jwe({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession();return(o==null?void 0:o.status)==="ok"&&Xg(o,{status:"exited"}),cY(),t.setSession(i),i}function cY(){const e=SU(),n=Nc().getSession()||e.getSession();n&&Kwe(n),uY(),e.setSession()}function uY(){const e=SU(),t=Mi(),n=e.getSession();n&&t&&t.captureSession(n)}function IN(e=!1){if(e){cY();return}uY()}const fIe="7";function hIe(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function gIe(e){return`${hIe(e)}${e.projectId}/envelope/`}function pIe(e,t){const n={sentry_version:fIe};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function mIe(e,t,n){return t||`${gIe(e)}?${pIe(e,n)}`}const TN=[];function UIe(e){const t={};return e.forEach(n=>{const{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function bIe(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(i=>{i.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const i=n(t);r=Array.isArray(i)?i:[i]}else r=t;return UIe(r)}function yIe(e,t){const n={};return t.forEach(r=>{r&&dY(e,r,n)}),n}function xN(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function dY(e,t,n){if(n[t.name]){pn&&it.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,TN.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),TN.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,o)=>r(i,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((o,s)=>r(o,s,e),{id:t.name});e.addEventProcessor(i)}pn&&it.log(`Integration installed: ${t.name}`)}function vIe(e,t,n){const r=[{type:"client_report"},{timestamp:TU(),discarded_events:e}];return lv(t?{dsn:t}:{},[r])}class na extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}function fY(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function EIe(e){var l;const{trace_id:t,parent_span_id:n,span_id:r,status:i,origin:o,data:s,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return Fo({data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:s==null?void 0:s[eY],exclusive_time:s==null?void 0:s[tY],measurements:e.measurements,is_segment:!0})}function _Ie(e){const t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[eY]:e.profile_id},...e.exclusive_time&&{[tY]:e.exclusive_time}}}},measurements:e.measurements};return Fo(t)}const SN="Not capturing exception because it's already been captured.",CN="Discarded session because of missing or non-string release";class wIe{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=M9e(t.dsn):pn&&it.warn("No DSN provided, client will not send events."),this._dsn){const n=mIe(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){const i=xs();if(lN(t))return pn&&it.log(SN),i;const o={event_id:i,...n};return this._process(this.eventFromException(t,o).then(s=>this._captureEvent(s,o,r))),o.event_id}captureMessage(t,n,r,i){const o={event_id:xs(),...r},s=iS(t)?t:String(t),a=oS(t)?this.eventFromMessage(s,n,o):this.eventFromException(t,o);return this._process(a.then(l=>this._captureEvent(l,o,i))),o.event_id}captureEvent(t,n,r){const i=xs();if(n!=null&&n.originalException&&lN(n.originalException))return pn&&it.log(SN),i;const o={event_id:i,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,l=s.capturedSpanIsolationScope;return this._process(this._captureEvent(t,o,a||r,l)),o.event_id}captureSession(t){this.sendSession(t),Xg(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i))):lh(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];dY(this,t,this._integrations),n||xN(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=j9e(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=B9e(r,V9e(o));const i=this.sendEnvelope(r);i&&i.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const{release:n,environment:r=fS}=this._options;if("aggregates"in t){const o=t.attrs||{};if(!o.release&&!n){pn&&it.warn(CN);return}o.release=o.release||n,o.environment=o.environment||r,t.attrs=o}else{if(!t.release&&!n){pn&&it.warn(CN);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const i=X9e(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const i=`${t}:${n}`;pn&&it.log(`Recording outcome: "${i}"${r>1?` (${r} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(i=>i(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(pn&&it.error("Error while sending envelope:",n),n)):(pn&&it.error("Transport disabled"),lh({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=yIe(this,t),xN(this,t)}_updateSessionFromEvent(t,n){var l;let r=n.level==="fatal",i=!1;const o=(l=n.exception)==null?void 0:l.values;if(o){i=!0;for(const c of o){const u=c.mechanism;if((u==null?void 0:u.handled)===!1){r=!0;break}}}const s=t.status==="ok";(s&&t.errors===0||s&&r)&&(Xg(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new od(n=>{let r=0;const i=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=i,t&&r>=t&&(clearInterval(o),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,i){const o=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&(s!=null&&s.length)&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||i.setLastEventId(t.event_id||n.event_id),tIe(o,t,n,r,this,i).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:i9e(r),...a.contexts};const l=S9e(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=Nc(),i=SU()){return pn&&d9(t)&&it.log(`Captured error event \`${fY(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,i).then(o=>o.event_id,o=>{pn&&(o instanceof na&&o.logLevel==="log"?it.log(o.message):it.warn(o))})}_processEvent(t,n,r,i){const o=this.getOptions(),{sampleRate:s}=o,a=hY(t),l=d9(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof s>"u"?void 0:h9e(s);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),U8(new na(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const f=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,r,i).then(g=>{if(g===null)throw this.recordDroppedEvent("event_processor",f),new na("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return g;const b=TIe(this,o,g,n);return IIe(b,u)}).then(g=>{var v;if(g===null){if(this.recordDroppedEvent("before_send",f),a){const E=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",E)}throw new na(`${u} returned \`null\`, will not send event.`,"log")}const U=r.getSession()||i.getSession();if(l&&U&&this._updateSessionFromEvent(U,g),a){const _=((v=g.sdkProcessingMetadata)==null?void 0:v.spanCountBeforeProcessing)||0,E=g.spans?g.spans.length:0,w=_-E;w>0&&this.recordDroppedEvent("before_send","span",w)}const b=g.transaction_info;if(a&&b&&g.transaction!==t.transaction){const _="custom";g.transaction_info={...b,source:_}}return this.sendEvent(g,n),g}).then(null,g=>{throw g instanceof na?g:(this.captureException(g,{data:{__sentry__:!0},originalException:g}),new na(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${g}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[i,o]=n.split(":");return{reason:i,category:o,quantity:r}})}_flushOutcomes(){pn&&it.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){pn&&it.log("No outcomes to send");return}if(!this._dsn){pn&&it.log("No dsn provided, will not send outcomes");return}pn&&it.log("Sending outcomes:",t);const n=vIe(t,this._options.tunnel&&hS(this._dsn));this.sendEnvelope(n)}}function IIe(e,t){const n=`${t} must return \`null\` or a valid event.`;if(sv(e))return e.then(r=>{if(!Gg(r)&&r!==null)throw new na(n);return r},r=>{throw new na(`${t} rejected with ${r}`)});if(!Gg(e)&&e!==null)throw new na(n);return e}function TIe(e,t,n,r){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:s}=t;let a=n;if(d9(a)&&i)return i(a,r);if(hY(a)){if(s){const l=s(EIe(a));if(l?a=xU(n,_Ie(l)):UN(),a.spans){const c=[];for(const u of a.spans){const d=s(u);d?c.push(d):(UN(),c.push(u))}a.spans=c}}if(o){if(a.spans){const l=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return o(a,r)}}return a}function d9(e){return e.type===void 0}function hY(e){return e.type==="transaction"}function xIe(e,t){t.debug===!0&&(pn?it.enable():b0(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Nc().update(t.initialScope);const r=new e(t);return SIe(r),r.init(),r}function SIe(e){Nc().setClient(e)}function CIe(e){const t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]||Promise.resolve(void 0)}function i(s){if(!n())return U8(new na("Not adding Promise because buffer limit was reached."));const a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(s){return new od((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(d=>{lh(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:i,drain:o}}const AIe=60*1e3;function kIe(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?AIe:r-t}function RIe(e,t){return e[t]||e.all||0}function PIe(e,t,n=Date.now()){return RIe(e,t)>n}function MIe(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},o=n==null?void 0:n["x-sentry-rate-limits"],s=n==null?void 0:n["retry-after"];if(o)for(const a of o.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)i.all=r+f;else for(const g of c.split(";"))g==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(i[g]=r+f):i[g]=r+f}else s?i.all=r+kIe(s,r):t===429&&(i.all=r+60*1e3);return i}const LIe=64;function DIe(e,t,n=CIe(e.bufferSize||LIe)){let r={};const i=s=>n.drain(s);function o(s){const a=[];if(bN(s,(d,f)=>{const g=yN(f);PIe(r,g)?e.recordDroppedEvent("ratelimit_backoff",g):a.push(d)}),a.length===0)return lh({});const l=lv(s[0],a),c=d=>{bN(l,(f,g)=>{e.recordDroppedEvent(d,yN(g))})},u=()=>t({body:$9e(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&pn&&it.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=MIe(r,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof na)return pn&&it.error("Skipped sending event because buffer is full."),c("queue_overflow"),lh({});throw d})}return{send:o,flush:i}}function NIe(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function OIe(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function FIe(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:Lf})),version:Lf}),e._metadata=i}const BIe=100;function ch(e,t){const n=Mi(),r=SU();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=BIe}=n.getOptions();if(o<=0)return;const a={timestamp:TU(),...e},l=i?b0(()=>i(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),r.addBreadcrumb(l,o))}let AN;const $Ie="FunctionToString",kN=new WeakMap,zIe=()=>({name:$Ie,setupOnce(){AN=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=lS(this),n=kN.has(Mi())&&t!==void 0?t:this;return AN.apply(n,e)}}catch{}},setup(e){kN.set(e,!0)}}),VIe=zIe,HIe=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],WIe="InboundFilters",GIe=(e={})=>({name:WIe,processEvent(t,n,r){const i=r.getOptions(),o=jIe(e,i);return KIe(t,o)?null:t}}),XIe=GIe;function jIe(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:HIe],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function KIe(e,t){return t.ignoreInternal&&JIe(e)?(pn&&it.warn(`Event dropped due to being internal Sentry Error.
Event: ${du(e)}`),!0):YIe(e,t.ignoreErrors)?(pn&&it.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${du(e)}`),!0):tTe(e)?(pn&&it.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${du(e)}`),!0):ZIe(e,t.ignoreTransactions)?(pn&&it.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${du(e)}`),!0):qIe(e,t.denyUrls)?(pn&&it.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${du(e)}.
Url: ${b8(e)}`),!0):QIe(e,t.allowUrls)?!1:(pn&&it.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${du(e)}.
Url: ${b8(e)}`),!0)}function YIe(e,t){return e.type||!t||!t.length?!1:fY(e).some(n=>av(n,t))}function ZIe(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?av(n,t):!1}function qIe(e,t){if(!(t!=null&&t.length))return!1;const n=b8(e);return n?av(n,t):!1}function QIe(e,t){if(!(t!=null&&t.length))return!0;const n=b8(e);return n?av(n,t):!0}function JIe(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function eTe(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function b8(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?eTe(t):null}catch{return pn&&it.error(`Cannot extract url for event ${du(e)}`),null}}function tTe(e){var t,n;return e.type||!((n=(t=e.exception)==null?void 0:t.values)!=null&&n.length)?!1:!e.message&&!e.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value)}function nTe(e,t,n=250,r,i,o,s){var l;if(!((l=o.exception)!=null&&l.values)||!s||!oh(s.originalException,Error))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;a&&(o.exception.values=rTe(f9(e,t,i,s.originalException,r,o.exception.values,a,0),n))}function f9(e,t,n,r,i,o,s,a){if(o.length>=n+1)return o;let l=[...o];if(oh(r[i],Error)){RN(s,a);const c=e(t,r[i]),u=l.length;PN(c,i,u,a),l=f9(e,t,n,r[i],i,[c,...l],c,u)}return Array.isArray(r.errors)&&r.errors.forEach((c,u)=>{if(oh(c,Error)){RN(s,a);const d=e(t,c),f=l.length;PN(d,`errors[${u}]`,f,a),l=f9(e,t,n,c,i,[d,...l],d,f)}}),l}function RN(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function PN(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function rTe(e,t){return e.map(n=>(n.value&&(n.value=pg(n.value,t)),n))}function gY(e){const t="console";Th(t,e),xh(t,iTe)}function iTe(){"console"in mn&&g8.forEach(function(e){e in mn.console&&Oo(mn.console,e,function(t){return p8[e]=t,function(...n){pa("console",{args:n,level:e});const i=p8[e];i==null||i.apply(mn.console,n)}})})}function pY(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const oTe="CaptureConsole",sTe=(e={})=>{const t=e.levels||g8,n=e.handled??!0;return{name:oTe,setup(r){"console"in mn&&gY(({args:i,level:o})=>{Mi()!==r||!t.includes(o)||lTe(i,o,n)})}}},aTe=sTe;function lTe(e,t,n){const r={level:pY(t),extra:{arguments:e}};uS(i=>{if(i.addEventProcessor(a=>(a.logger="console",ah(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${m8(e.slice(1)," ")||"console.assert"}`;i.setExtra("arguments",e.slice(1)),_N(a,r)}return}const o=e.find(a=>a instanceof Error);if(o){gS(o,r);return}const s=m8(e," ");_N(s,r)})}const cTe="Dedupe",uTe=()=>{let e;return{name:cTe,processEvent(t){if(t.type)return t;try{if(fTe(t,e))return pn&&it.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},dTe=uTe;function fTe(e,t){return t?!!(hTe(e,t)||gTe(e,t)):!1}function hTe(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!UY(e,t)||!mY(e,t))}function gTe(e,t){const n=MN(t),r=MN(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!UY(e,t)||!mY(e,t))}function mY(e,t){let n=rN(e),r=rN(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const o=r[i],s=n[i];if(o.filename!==s.filename||o.lineno!==s.lineno||o.colno!==s.colno||o.function!==s.function)return!1}return!0}function UY(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function MN(e){var t;return((t=e.exception)==null?void 0:t.values)&&e.exception.values[0]}function y4(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function bY(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const y8=mn;function pTe(){return"history"in y8}function yY(){if(!("fetch"in y8))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function h9(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function mTe(){var n;if(typeof EdgeRuntime=="string")return!0;if(!yY())return!1;if(h9(y8.fetch))return!0;let e=!1;const t=y8.document;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(e=h9(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){Ih&&it.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function UTe(e,t){const n="fetch";Th(n,e),xh(n,()=>bTe(void 0,t))}function bTe(e,t=!1){t&&!mTe()||Oo(mn,"fetch",function(n){return function(...r){const i=new Error,{method:o,url:s}=yTe(r),a={args:r,fetchData:{method:o,url:s},startTimestamp:lc()*1e3,virtualError:i};return pa("fetch",{...a}),n.apply(mn,r).then(async l=>(pa("fetch",{...a,endTimestamp:lc()*1e3,response:l}),l),l=>{throw pa("fetch",{...a,endTimestamp:lc()*1e3,error:l}),rS(l)&&l.stack===void 0&&(l.stack=i.stack,sh(l,"framesToPop",1)),l})}})}function g9(e,t){return!!e&&typeof e=="object"&&!!e[t]}function LN(e){return typeof e=="string"?e:e?g9(e,"url")?e.url:e.toString?e.toString():"":""}function yTe(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:LN(n),method:g9(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:LN(t),method:g9(t,"method")?String(t.method).toUpperCase():"GET"}}function vTe(){return"npm"}const fr=mn;let p9=0;function vY(){return p9>0}function ETe(){p9++,setTimeout(()=>{p9--})}function Kg(e,t={}){function n(i){return typeof i=="function"}if(!n(e))return e;try{const i=e.__sentry_wrapped__;if(i)return typeof i=="function"?i:e;if(lS(e))return e}catch{return e}const r=function(...i){try{const o=i.map(s=>Kg(s,t));return e.apply(this,o)}catch(o){throw ETe(),uS(s=>{s.addEventProcessor(a=>(t.mechanism&&(s9(a,void 0),ah(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),gS(o)}),o}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}YK(r,e),sh(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function pS(e,t){const n=mS(e,t),r={type:xTe(t),value:STe(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function _Te(e,t,n,r){const i=Mi(),o=i==null?void 0:i.getOptions().normalizeDepth,s=PTe(t),a={__serialized__:sY(t,o)};if(s)return{exception:{values:[pS(e,s)]},extra:a};const l={exception:{values:[{type:ov(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:kTe(t,{isUnhandledRejection:r})}]},extra:a};if(n){const c=mS(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function v4(e,t){return{exception:{values:[pS(e,t)]}}}function mS(e,t){const n=t.stacktrace||t.stack||"",r=ITe(t),i=TTe(t);try{return e(n,r,i)}catch{}return[]}const wTe=/Minified React error #\d+;/i;function ITe(e){return e&&wTe.test(e.message)?1:0}function TTe(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function EY(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function xTe(e){const t=e==null?void 0:e.name;return!t&&EY(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function STe(e){const t=e==null?void 0:e.message;return EY(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function CTe(e,t,n,r){const i=(n==null?void 0:n.syntheticException)||void 0,o=US(e,t,i,r);return ah(o),o.level="error",n!=null&&n.event_id&&(o.event_id=n.event_id),lh(o)}function ATe(e,t,n="info",r,i){const o=(r==null?void 0:r.syntheticException)||void 0,s=m9(e,t,o,i);return s.level=n,r!=null&&r.event_id&&(s.event_id=r.event_id),lh(s)}function US(e,t,n,r,i){let o;if(XK(t)&&t.error)return v4(e,t.error);if(oN(t)||Dwe(t)){const s=t;if("stack"in t)o=v4(e,t);else{const a=s.name||(oN(s)?"DOMError":"DOMException"),l=s.message?`${a}: ${s.message}`:a;o=m9(e,l,n,r),s9(o,l)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}return rS(t)?v4(e,t):Gg(t)||ov(t)?(o=_Te(e,t,n,i),ah(o,{synthetic:!0}),o):(o=m9(e,t,n,r),s9(o,`${t}`),ah(o,{synthetic:!0}),o)}function m9(e,t,n,r){const i={};if(r&&n){const o=mS(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]}),ah(i,{synthetic:!0})}if(iS(t)){const{__sentry_template_string__:o,__sentry_template_values__:s}=t;return i.logentry={message:o,params:s},i}return i.message=t,i}function kTe(e,{isUnhandledRejection:t}){const n=Hwe(e),r=t?"promise rejection":"exception";return XK(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:ov(e)?`Event \`${RTe(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function RTe(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function PTe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class MTe extends wIe{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},r=fr.SENTRY_SDK_SOURCE||vTe();FIe(n,"browser",["browser"],r),super(n),n.sendClientReports&&fr.document&&fr.document.addEventListener("visibilitychange",()=>{fr.document.visibilityState==="hidden"&&this._flushOutcomes()}),this._options.sendDefaultPii&&(this.on("postprocessEvent",NIe),this.on("beforeSendSession",OIe))}eventFromException(t,n){return CTe(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return ATe(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,i){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,i)}}const LTe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,bo=mn,DTe=1e3;let DN,U9,b9;function NTe(e){const t="dom";Th(t,e),xh(t,OTe)}function OTe(){if(!bo.document)return;const e=pa.bind(null,"dom"),t=NN(e,!0);bo.document.addEventListener("click",t,!1),bo.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var o,s;const i=(o=bo[n])==null?void 0:o.prototype;(s=i==null?void 0:i.hasOwnProperty)!=null&&s.call(i,"addEventListener")&&(Oo(i,"addEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[l]=d[l]||{refCount:0};if(!f.handler){const g=NN(e);f.handler=g,a.call(this,l,g,u)}f.refCount++}catch{}return a.call(this,l,c,u)}}),Oo(i,"removeEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[l];f&&(f.refCount--,f.refCount<=0&&(a.call(this,l,f.handler,u),f.handler=void 0,delete d[l]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,c,u)}}))})}function FTe(e){if(e.type!==U9)return!1;try{if(!e.target||e.target._sentryId!==b9)return!1}catch{}return!0}function BTe(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function NN(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=$Te(n);if(BTe(n.type,r))return;sh(n,"_sentryCaptured",!0),r&&!r._sentryId&&sh(r,"_sentryId",xs());const i=n.type==="keypress"?"input":n.type;FTe(n)||(e({event:n,name:i,global:t}),U9=n.type,b9=r?r._sentryId:void 0),clearTimeout(DN),DN=bo.setTimeout(()=>{b9=void 0,U9=void 0},DTe)}}function $Te(e){try{return e.target}catch{return null}}let B5;function _Y(e){const t="history";Th(t,e),xh(t,zTe)}function zTe(){if(bo.addEventListener("popstate",()=>{const t=bo.location.href,n=B5;if(B5=t,n===t)return;pa("history",{from:n,to:t})}),!pTe())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const i=B5,o=String(r);if(B5=o,i===o)return;pa("history",{from:i,to:o})}return t.apply(this,n)}}Oo(bo.history,"pushState",e),Oo(bo.history,"replaceState",e)}const Nb={};function VTe(e){const t=Nb[e];if(t)return t;let n=bo[e];if(h9(n))return Nb[e]=n.bind(bo);const r=bo.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const o=i.contentWindow;o!=null&&o[e]&&(n=o[e]),r.head.removeChild(i)}catch(i){LTe&&it.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,i)}return n&&(Nb[e]=n.bind(bo))}function ON(e){Nb[e]=void 0}const Qp="__sentry_xhr_v3__";function HTe(e){const t="xhr";Th(t,e),xh(t,WTe)}function WTe(){if(!bo.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const i=new Error,o=lc()*1e3,s=ac(r[0])?r[0].toUpperCase():void 0,a=GTe(r[1]);if(!s||!a)return t.apply(n,r);n[Qp]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[Qp];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:lc()*1e3,startTimestamp:o,xhr:n,virtualError:i};pa("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[f,g]=d,U=u[Qp];return U&&ac(f)&&ac(g)&&(U.request_headers[f.toLowerCase()]=g),c.apply(u,d)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const i=n[Qp];if(!i)return t.apply(n,r);r[0]!==void 0&&(i.body=r[0]);const o={startTimestamp:lc()*1e3,xhr:n};return pa("xhr",o),t.apply(n,r)}})}function GTe(e){if(ac(e))return e;try{return e.toString()}catch{}}function XTe(e,t=VTe("fetch")){let n=0,r=0;function i(o){const s=o.body.length;n+=s,r++;const a={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return ON("fetch"),U8("No fetch implementation available");try{return t(e.url,a).then(l=>(n-=s,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return ON("fetch"),n-=s,r--,U8(l)}}return DIe(e,i)}const jTe=30,KTe=50;function y9(e,t,n,r){const i={filename:e,function:t==="<anonymous>"?ih:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const YTe=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ZTe=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,qTe=/\((\S*)(?::(\d+))(?::(\d+))\)/,QTe=e=>{const t=YTe.exec(e);if(t){const[,r,i,o]=t;return y9(r,ih,+i,+o)}const n=ZTe.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const s=qTe.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}const[i,o]=wY(n[1]||ih,n[2]);return y9(o,i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},JTe=[jTe,QTe],exe=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,txe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,nxe=e=>{const t=exe.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=txe.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],i=t[1]||ih;return[i,r]=wY(i,r),y9(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},rxe=[KTe,nxe],ixe=[JTe,rxe],oxe=WK(...ixe),wY=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:ih,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},M2=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$5=1024,sxe="Breadcrumbs",axe=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:sxe,setup(n){t.console&&gY(dxe(n)),t.dom&&NTe(uxe(n,t.dom)),t.xhr&&HTe(fxe(n)),t.fetch&&UTe(hxe(n)),t.history&&_Y(gxe(n)),t.sentry&&n.on("beforeSendEvent",cxe(n))}}},lxe=axe;function cxe(e){return function(n){Mi()===e&&ch({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:du(n)},{event:n})}}function uxe(e,t){return function(r){if(Mi()!==e)return;let i,o,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>$5&&(M2&&it.warn(`\`dom.maxStringLength\` cannot exceed ${$5}, but a value of ${a} was configured. Sentry will use ${$5} instead.`),a=$5),typeof s=="string"&&(s=[s]);try{const c=r.event,u=pxe(c)?c.target:c;i=KK(u,{keyAttrs:s,maxStringLength:a}),o=zwe(u)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${r.name}`,message:i};o&&(l.data={"ui.component_name":o}),ch(l,{event:r.event,name:r.name,global:r.global})}}function dxe(e){return function(n){if(Mi()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:pY(n.level),message:m8(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${m8(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;ch(r,{input:n.args,level:n.level})}}function fxe(e){return function(n){if(Mi()!==e)return;const{startTimestamp:r,endTimestamp:i}=n,o=n.xhr[Qp];if(!r||!i||!o)return;const{method:s,url:a,status_code:l,body:c}=o,u={method:s,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i},f=bY(l);ch({category:"xhr",data:u,type:"http",level:f},d)}}function hxe(e){return function(n){if(Mi()!==e)return;const{startTimestamp:r,endTimestamp:i}=n;if(!i||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;const o={method:n.fetchData.method,url:n.fetchData.url};if(n.error){const s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};ch({category:"fetch",data:o,level:"error",type:"http"},s)}else{const s=n.response;o.request_body_size=n.fetchData.request_body_size,o.response_body_size=n.fetchData.response_body_size,o.status_code=s==null?void 0:s.status;const a={input:n.args,response:s,startTimestamp:r,endTimestamp:i},l=bY(o.status_code);ch({category:"fetch",data:o,type:"http",level:l},a)}}}function gxe(e){return function(n){if(Mi()!==e)return;let r=n.from,i=n.to;const o=y4(fr.location.href);let s=r?y4(r):void 0;const a=y4(i);s!=null&&s.path||(s=o),o.protocol===a.protocol&&o.host===a.host&&(i=a.relative),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),ch({category:"navigation",data:{from:r,to:i}})}}function pxe(e){return!!e&&!!e.target}const mxe=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Uxe="BrowserApiErrors",bxe=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Uxe,setupOnce(){t.setTimeout&&Oo(fr,"setTimeout",FN),t.setInterval&&Oo(fr,"setInterval",FN),t.requestAnimationFrame&&Oo(fr,"requestAnimationFrame",vxe),t.XMLHttpRequest&&"XMLHttpRequest"in fr&&Oo(XMLHttpRequest.prototype,"send",Exe);const n=t.eventTarget;n&&(Array.isArray(n)?n:mxe).forEach(_xe)}}},yxe=bxe;function FN(e){return function(...t){const n=t[0];return t[0]=Kg(n,{mechanism:{data:{function:id(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function vxe(e){return function(t){return e.apply(this,[Kg(t,{mechanism:{data:{function:"requestAnimationFrame",handler:id(e)},handled:!1,type:"instrument"}})])}}function Exe(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&Oo(n,i,function(o){const s={mechanism:{data:{function:i,handler:id(o)},handled:!1,type:"instrument"}},a=lS(o);return a&&(s.mechanism.data.handler=id(a)),Kg(o,s)})}),e.apply(this,t)}}function _xe(e){var r,i;const n=(r=fr[e])==null?void 0:r.prototype;(i=n==null?void 0:n.hasOwnProperty)!=null&&i.call(n,"addEventListener")&&(Oo(n,"addEventListener",function(o){return function(s,a,l){try{wxe(a)&&(a.handleEvent=Kg(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:id(a),target:e},handled:!1,type:"instrument"}}))}catch{}return o.apply(this,[s,Kg(a,{mechanism:{data:{function:"addEventListener",handler:id(a),target:e},handled:!1,type:"instrument"}}),l])}}),Oo(n,"removeEventListener",function(o){return function(s,a,l){try{const c=a.__sentry_wrapped__;c&&o.call(this,s,c,l)}catch{}return o.call(this,s,a,l)}}))}function wxe(e){return typeof e.handleEvent=="function"}const Ixe=()=>({name:"BrowserSession",setupOnce(){if(typeof fr.document>"u"){M2&&it.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}wN({ignoreDuration:!0}),IN(),_Y(({from:e,to:t})=>{e!==void 0&&e!==t&&(wN({ignoreDuration:!0}),IN())})}}),Txe="GlobalHandlers",xxe=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Txe,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Cxe(n),BN("onerror")),t.onunhandledrejection&&(Axe(n),BN("onunhandledrejection"))}}},Sxe=xxe;function Cxe(e){Rwe(t=>{const{stackParser:n,attachStacktrace:r}=IY();if(Mi()!==e||vY())return;const{msg:i,url:o,line:s,column:a,error:l}=t,c=Pxe(US(n,l||i,void 0,r,!1),o,s,a);c.level="error",lY(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Axe(e){Mwe(t=>{const{stackParser:n,attachStacktrace:r}=IY();if(Mi()!==e||vY())return;const i=kxe(t),o=oS(i)?Rxe(i):US(n,i,void 0,r,!0);o.level="error",lY(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function kxe(e){if(oS(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Rxe(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Pxe(e,t,n,r){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},l=a.frames=a.frames||[],c=r,u=n,d=ac(t)&&t.length>0?t:aS();return l.length===0&&l.push({colno:c,filename:d,function:ih,in_app:!0,lineno:u}),e}function BN(e){M2&&it.log(`Global Handler attached: ${e}`)}function IY(){const e=Mi();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Mxe=()=>({name:"HttpContext",preprocessEvent(e){var s,a;if(!fr.navigator&&!fr.location&&!fr.document)return;const t=((s=e.request)==null?void 0:s.url)||aS(),{referrer:n}=fr.document||{},{userAgent:r}=fr.navigator||{},i={...(a=e.request)==null?void 0:a.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),Lxe="cause",Dxe=5,Nxe="LinkedErrors",Oxe=(e={})=>{const t=e.limit||Dxe,n=e.key||Lxe;return{name:Nxe,preprocessEvent(r,i,o){const s=o.getOptions();nTe(pS,s.stackParser,s.maxValueLength,n,t,r,i)}}},Fxe=Oxe;function Bxe(e){return[XIe(),VIe(),yxe(),lxe(),Sxe(),Fxe(),dTe(),Mxe(),Ixe()]}function $xe(e={}){var n;return{...{defaultIntegrations:Bxe(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=fr.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...zxe(e)}}function zxe(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const r=n;e[r]!==void 0&&(t[r]=e[r])}return t}function Vxe(){var l;const e=typeof fr.window<"u"&&fr;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],r=(l=n==null?void 0:n.runtime)==null?void 0:l.id,i=aS()||"",o=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],s=!!r&&fr===fr.top&&o.some(c=>i.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!r&&!s&&!a}function Hxe(e={}){const t=$xe(e);if(!t.skipBrowserExtensionCheck&&Vxe()){M2&&b0(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}M2&&!yY()&&it.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:Awe(t.stackParser||oxe),integrations:bIe(t),transport:t.transport||XTe};return xIe(MTe,n)}class Wxe extends Ee.Component{constructor(){super(...arguments);H(this,"state",{hasError:!1,sentryEventId:"",localStorage:""})}render(){return this.state.hasError?this.errorSplash():this.props.children}componentDidCatch(n,r){const i={};for(const[o,s]of Object.entries({...localStorage}))try{i[o]=JSON.parse(s)}catch{i[o]=s}uS(o=>{o.setExtras(r);const s=gS(n);this.setState(a=>({hasError:!0,sentryEventId:s,localStorage:JSON.stringify(i)}))})}selectTextArea(n){n.target!==document.activeElement&&(n.preventDefault(),n.target.select())}async createGithubIssue(){let n="";try{const r=(await Le(()=>import("./bug-issue-template-BID_ABWq.js"),__vite__mapDeps([]))).default;n=encodeURIComponent(r(this.state.sentryEventId))}catch(r){console.error(r)}window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`,"_blank","noopener noreferrer")}errorSplash(){return p("div",{className:"ErrorSplash excalidraw",children:z("div",{className:"ErrorSplash-messageContainer",children:[p("div",{className:"ErrorSplash-paragraph bigger align-center",children:p(Uo,{i18nKey:"errorSplash.headingMain",button:n=>p("button",{onClick:()=>window.location.reload(),children:n})})}),z("div",{className:"ErrorSplash-paragraph align-center",children:[p(Uo,{i18nKey:"errorSplash.clearCanvasMessage",button:n=>p("button",{onClick:()=>{try{localStorage.clear(),window.location.reload()}catch(r){console.error(r)}},children:n})}),p("br",{}),z("div",{className:"smaller",children:[p("span",{role:"img","aria-label":"warning",children:"⚠️"}),L("errorSplash.clearCanvasCaveat"),p("span",{role:"img","aria-hidden":"true",children:"⚠️"})]})]}),z("div",{children:[p("div",{className:"ErrorSplash-paragraph",children:L("errorSplash.trackedToSentry",{eventId:this.state.sentryEventId})}),p("div",{className:"ErrorSplash-paragraph",children:p(Uo,{i18nKey:"errorSplash.openIssueMessage",button:n=>p("button",{onClick:()=>this.createGithubIssue(),children:n})})}),p("div",{className:"ErrorSplash-paragraph",children:z("div",{className:"ErrorSplash-details",children:[p("label",{children:L("errorSplash.sceneContent")}),p("textarea",{rows:5,onPointerDown:this.selectTextArea,readOnly:!0,value:this.state.localStorage})]})})]})]})})}}const Gxe=300,Xxe=5e3,jxe=300,Kxe=500,$N=2e4,Yxe=50,Zxe=33,qxe=24*60*60*1e3,bS=3*1024*1024,Qxe=31536e3,Ob={SERVER_VOLATILE:"server-volatile-broadcast",SERVER:"server-broadcast",USER_FOLLOW_CHANGE:"user-follow",USER_FOLLOW_ROOM_CHANGE:"user-follow-room-change"};var Wi=(e=>(e.INVALID_RESPONSE="INVALID_RESPONSE",e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE",e.MOUSE_LOCATION="MOUSE_LOCATION",e.IDLE_STATUS="IDLE_STATUS",e.USER_VISIBLE_SCENE_BOUNDS="USER_VISIBLE_SCENE_BOUNDS",e))(Wi||{});const TY={shareLinkFiles:"/files/shareLinks",collabFiles:"/files/rooms"},Jxe=10,rr={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_THEME:"excalidraw-theme",LOCAL_STORAGE_DEBUG:"excalidraw-debug",VERSION_DATA_STATE:"version-dataState",VERSION_FILES:"version-files",IDB_LIBRARY:"excalidraw-library",__LEGACY_LOCAL_STORAGE_LIBRARY:"excalidraw-library"},eSe={AUTH_STATE_COOKIE:"excplus-auth"},uh=document.cookie.includes(eSe.AUTH_STATE_COOKIE);class xY{constructor({getFiles:t,saveFiles:n}){H(this,"fetchingFiles",new Map);H(this,"erroredFiles_fetch",new Map);H(this,"savingFiles",new Map);H(this,"savedFiles",new Map);H(this,"erroredFiles_save",new Map);H(this,"_getFiles");H(this,"_saveFiles");H(this,"isFileTracked",t=>this.savedFiles.has(t)||this.savingFiles.has(t)||this.fetchingFiles.has(t)||this.erroredFiles_fetch.has(t)||this.erroredFiles_save.has(t));H(this,"isFileSavedOrBeingSaved",t=>{const n=this.getFileVersion(t);return this.savedFiles.get(t.id)===n||this.savingFiles.get(t.id)===n});H(this,"getFileVersion",t=>t.version??1);H(this,"saveFiles",async({elements:t,files:n})=>{const r=new Map;for(const i of t){const o=dr(i)&&n[i.fileId];o&&!this.isFileSavedOrBeingSaved(o)&&(r.set(i.fileId,n[i.fileId]),this.savingFiles.set(i.fileId,this.getFileVersion(o)))}try{const{savedFiles:i,erroredFiles:o}=await this._saveFiles({addedFiles:r});for(const[s,a]of i)this.savedFiles.set(s,this.getFileVersion(a));for(const[s,a]of o)this.erroredFiles_save.set(s,this.getFileVersion(a));return{savedFiles:i,erroredFiles:o}}finally{for(const[i]of r)this.savingFiles.delete(i)}});H(this,"getFiles",async t=>{if(!t.length)return{loadedFiles:[],erroredFiles:new Map};for(const n of t)this.fetchingFiles.set(n,!0);try{const{loadedFiles:n,erroredFiles:r}=await this._getFiles(t);for(const i of n)this.savedFiles.set(i.id,this.getFileVersion(i));for(const[i]of r)this.erroredFiles_fetch.set(i,!0);return{loadedFiles:n,erroredFiles:r}}finally{for(const n of t)this.fetchingFiles.delete(n)}});H(this,"shouldPreventUnload",t=>t.some(n=>dr(n)&&!n.isDeleted&&this.savingFiles.has(n.fileId)));H(this,"shouldUpdateImageElementStatus",t=>dr(t)&&this.savedFiles.has(t.fileId)&&t.status==="pending");this._getFiles=t,this._saveFiles=n}reset(){this.fetchingFiles.clear(),this.savingFiles.clear(),this.savedFiles.clear(),this.erroredFiles_fetch.clear(),this.erroredFiles_save.clear()}}const yS=async({files:e,maxBytes:t,encryptionKey:n})=>{const r=[];for(const[i,o]of e){const s=new TextEncoder().encode(o.dataURL),a=await vW(s,{encryptionKey:n,metadata:{id:i,mimeType:o.mimeType,created:Date.now(),lastRetrieved:Date.now()}});if(s.byteLength>t)throw new Error(L("errors.fileTooBig",{maxSize:`${Math.trunc(t/1024/1024)}MB`}));r.push({id:i,buffer:a})}return r},Jp=e=>{e.erroredFiles.size&&e.excalidrawAPI.updateScene({elements:e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>dr(t)&&e.erroredFiles.has(t.fileId)?Xe(t,{status:"error"}):t),storeAction:ae.UPDATE})};var zN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SY=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},tSe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],s=e[n++],a=e[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},CY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],s=i+1<e.length,a=s?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,s||(f=64)),r.push(n[u],n[d],n[f],n[g])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(SY(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tSe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new nSe;const f=o<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const U=c<<6&192|d;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nSe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rSe=function(e){const t=SY(e);return CY.encodeByteArray(t,!0)},v8=function(e){return rSe(e).replace(/\./g,"")},iSe=function(e){try{return CY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oSe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sSe=()=>oSe().__FIREBASE_DEFAULTS__,aSe=()=>{if(typeof process>"u"||typeof zN>"u")return;const e=zN.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},lSe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&iSe(e[1]);return t&&JSON.parse(t)},vS=()=>{try{return sSe()||aSe()||lSe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},cSe=e=>{var t,n;return(n=(t=vS())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},AY=e=>{const t=cSe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},kY=()=>{var e;return(e=vS())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uSe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RY(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[v8(JSON.stringify(n)),v8(JSON.stringify(s)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dSe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fSe(){var e;const t=(e=vS())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hSe(){return!fSe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gSe(){try{return typeof indexedDB=="object"}catch{return!1}}function pSe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mSe="FirebaseError";class Sh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=mSe,Object.setPrototypeOf(this,Sh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,PY.prototype.create)}}class PY{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?USe(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Sh(i,a,r)}}function USe(e,t){return e.replace(bSe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const bSe=/\{\$([^}]+)}/g;function v9(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],s=t[i];if(VN(o)&&VN(s)){if(!v9(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function VN(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(e){return e&&e._delegate?e._delegate:e}class Yg{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ySe{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new uSe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ESe(t))try{this.getOrInitializeService({instanceIdentifier:nf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=nf){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=nf){return this.instances.has(t)}getOptions(t=nf){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vSe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=nf){return this.component?this.component.multipleInstances?t:nf:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vSe(e){return e===nf?void 0:e}function ESe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Se{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ySe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Lt||(Lt={}));const wSe={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},ISe=Lt.INFO,TSe={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},xSe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=TSe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class MY{constructor(t){this.name=t,this._logLevel=ISe,this._logHandler=xSe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wSe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}const SSe=(e,t)=>t.some(n=>e instanceof n);let HN,WN;function CSe(){return HN||(HN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ASe(){return WN||(WN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LY=new WeakMap,E9=new WeakMap,DY=new WeakMap,E4=new WeakMap,ES=new WeakMap;function kSe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Hu(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&LY.set(n,e)}).catch(()=>{}),ES.set(t,e),t}function RSe(e){if(E9.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});E9.set(e,t)}let _9={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return E9.get(e);if(t==="objectStoreNames")return e.objectStoreNames||DY.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hu(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function PSe(e){_9=e(_9)}function MSe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(_4(this),t,...n);return DY.set(r,t.sort?t.sort():[t]),Hu(r)}:ASe().includes(e)?function(...t){return e.apply(_4(this),t),Hu(LY.get(this))}:function(...t){return Hu(e.apply(_4(this),t))}}function LSe(e){return typeof e=="function"?MSe(e):(e instanceof IDBTransaction&&RSe(e),SSe(e,CSe())?new Proxy(e,_9):e)}function Hu(e){if(e instanceof IDBRequest)return kSe(e);if(E4.has(e))return E4.get(e);const t=LSe(e);return t!==e&&(E4.set(e,t),ES.set(t,e)),t}const _4=e=>ES.get(e);function DSe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=Hu(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Hu(s.result),l.oldVersion,l.newVersion,Hu(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NSe=["get","getKey","getAll","getAllKeys","count"],OSe=["put","add","delete","clear"],w4=new Map;function GN(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(w4.get(t))return w4.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=OSe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NSe.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return w4.set(t,o),o}PSe(e=>({...e,get:(t,n,r)=>GN(t,n)||e.get(t,n,r),has:(t,n)=>!!GN(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FSe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BSe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BSe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const w9="@firebase/app",XN="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new MY("@firebase/app"),$Se="@firebase/app-compat",zSe="@firebase/analytics-compat",VSe="@firebase/analytics",HSe="@firebase/app-check-compat",WSe="@firebase/app-check",GSe="@firebase/auth",XSe="@firebase/auth-compat",jSe="@firebase/database",KSe="@firebase/data-connect",YSe="@firebase/database-compat",ZSe="@firebase/functions",qSe="@firebase/functions-compat",QSe="@firebase/installations",JSe="@firebase/installations-compat",eCe="@firebase/messaging",tCe="@firebase/messaging-compat",nCe="@firebase/performance",rCe="@firebase/performance-compat",iCe="@firebase/remote-config",oCe="@firebase/remote-config-compat",sCe="@firebase/storage",aCe="@firebase/storage-compat",lCe="@firebase/firestore",cCe="@firebase/vertexai",uCe="@firebase/firestore-compat",dCe="firebase",fCe="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="[DEFAULT]",hCe={[w9]:"fire-core",[$Se]:"fire-core-compat",[VSe]:"fire-analytics",[zSe]:"fire-analytics-compat",[WSe]:"fire-app-check",[HSe]:"fire-app-check-compat",[GSe]:"fire-auth",[XSe]:"fire-auth-compat",[jSe]:"fire-rtdb",[KSe]:"fire-data-connect",[YSe]:"fire-rtdb-compat",[ZSe]:"fire-fn",[qSe]:"fire-fn-compat",[QSe]:"fire-iid",[JSe]:"fire-iid-compat",[eCe]:"fire-fcm",[tCe]:"fire-fcm-compat",[nCe]:"fire-perf",[rCe]:"fire-perf-compat",[iCe]:"fire-rc",[oCe]:"fire-rc-compat",[sCe]:"fire-gcs",[aCe]:"fire-gcs-compat",[lCe]:"fire-fst",[uCe]:"fire-fst-compat",[cCe]:"fire-vertex","fire-js":"fire-js",[dCe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=new Map,gCe=new Map,T9=new Map;function jN(e,t){try{e.container.addComponent(t)}catch(n){Cc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function L2(e){const t=e.name;if(T9.has(t))return Cc.debug(`There were multiple attempts to register component ${t}.`),!1;T9.set(t,e);for(const n of E8.values())jN(n,e);for(const n of gCe.values())jN(n,e);return!0}function NY(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function OY(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pCe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wu=new PY("app","Firebase",pCe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mCe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Wu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY=fCe;function BY(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:I9,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Wu.create("bad-app-name",{appName:String(i)});if(n||(n=kY()),!n)throw Wu.create("no-options");const o=E8.get(i);if(o){if(v9(n,o.options)&&v9(r,o.config))return o;throw Wu.create("duplicate-app",{appName:i})}const s=new _Se(i);for(const l of T9.values())s.addComponent(l);const a=new mCe(n,r,s);return E8.set(i,a),a}function $Y(e=I9){const t=E8.get(e);if(!t&&e===I9&&kY())return BY();if(!t)throw Wu.create("no-app",{appName:e});return t}function Gu(e,t,n){var r;let i=(r=hCe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cc.warn(a.join(" "));return}L2(new Yg(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UCe="firebase-heartbeat-database",bCe=1,D2="firebase-heartbeat-store";let I4=null;function zY(){return I4||(I4=DSe(UCe,bCe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(D2)}catch(n){console.warn(n)}}}}).catch(e=>{throw Wu.create("idb-open",{originalErrorMessage:e.message})})),I4}async function yCe(e){try{const n=(await zY()).transaction(D2),r=await n.objectStore(D2).get(VY(e));return await n.done,r}catch(t){if(t instanceof Sh)Cc.warn(t.message);else{const n=Wu.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Cc.warn(n.message)}}}async function KN(e,t){try{const r=(await zY()).transaction(D2,"readwrite");await r.objectStore(D2).put(t,VY(e)),await r.done}catch(n){if(n instanceof Sh)Cc.warn(n.message);else{const r=Wu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cc.warn(r.message)}}}function VY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vCe=1024,ECe=30;class _Ce{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ICe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=YN();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>ECe){const s=TCe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cc.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=YN(),{heartbeatsToSend:r,unsentEntries:i}=wCe(this._heartbeatsCache.heartbeats),o=v8(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cc.warn(n),""}}}function YN(){return new Date().toISOString().substring(0,10)}function wCe(e,t=vCe){const n=[];let r=e.slice();for(const i of e){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ZN(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ZN(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ICe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gSe()?pSe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yCe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return KN(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return KN(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ZN(e){return v8(JSON.stringify({version:2,heartbeats:e})).length}function TCe(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xCe(e){L2(new Yg("platform-logger",t=>new FSe(t),"PRIVATE")),L2(new Yg("heartbeat",t=>new _Ce(t),"PRIVATE")),Gu(w9,XN,e),Gu(w9,XN,"esm2017"),Gu("fire-js","")}xCe("");var SCe="firebase",CCe="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gu(SCe,CCe,"app");var qN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xu,HY;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,x){function C(){}C.prototype=x.prototype,S.D=x.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(R,O,F){for(var N=Array(arguments.length-2),J=2;J<arguments.length;J++)N[J-2]=arguments[J];return x.prototype[O].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,x,C){C||(C=0);var R=Array(16);if(typeof x=="string")for(var O=0;16>O;++O)R[O]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(O=0;16>O;++O)R[O]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=S.g[0],C=S.g[1],O=S.g[2];var F=S.g[3],N=x+(F^C&(O^F))+R[0]+3614090360&4294967295;x=C+(N<<7&4294967295|N>>>25),N=F+(O^x&(C^O))+R[1]+3905402710&4294967295,F=x+(N<<12&4294967295|N>>>20),N=O+(C^F&(x^C))+R[2]+606105819&4294967295,O=F+(N<<17&4294967295|N>>>15),N=C+(x^O&(F^x))+R[3]+3250441966&4294967295,C=O+(N<<22&4294967295|N>>>10),N=x+(F^C&(O^F))+R[4]+4118548399&4294967295,x=C+(N<<7&4294967295|N>>>25),N=F+(O^x&(C^O))+R[5]+1200080426&4294967295,F=x+(N<<12&4294967295|N>>>20),N=O+(C^F&(x^C))+R[6]+2821735955&4294967295,O=F+(N<<17&4294967295|N>>>15),N=C+(x^O&(F^x))+R[7]+4249261313&4294967295,C=O+(N<<22&4294967295|N>>>10),N=x+(F^C&(O^F))+R[8]+1770035416&4294967295,x=C+(N<<7&4294967295|N>>>25),N=F+(O^x&(C^O))+R[9]+2336552879&4294967295,F=x+(N<<12&4294967295|N>>>20),N=O+(C^F&(x^C))+R[10]+4294925233&4294967295,O=F+(N<<17&4294967295|N>>>15),N=C+(x^O&(F^x))+R[11]+2304563134&4294967295,C=O+(N<<22&4294967295|N>>>10),N=x+(F^C&(O^F))+R[12]+1804603682&4294967295,x=C+(N<<7&4294967295|N>>>25),N=F+(O^x&(C^O))+R[13]+4254626195&4294967295,F=x+(N<<12&4294967295|N>>>20),N=O+(C^F&(x^C))+R[14]+2792965006&4294967295,O=F+(N<<17&4294967295|N>>>15),N=C+(x^O&(F^x))+R[15]+1236535329&4294967295,C=O+(N<<22&4294967295|N>>>10),N=x+(O^F&(C^O))+R[1]+4129170786&4294967295,x=C+(N<<5&4294967295|N>>>27),N=F+(C^O&(x^C))+R[6]+3225465664&4294967295,F=x+(N<<9&4294967295|N>>>23),N=O+(x^C&(F^x))+R[11]+643717713&4294967295,O=F+(N<<14&4294967295|N>>>18),N=C+(F^x&(O^F))+R[0]+3921069994&4294967295,C=O+(N<<20&4294967295|N>>>12),N=x+(O^F&(C^O))+R[5]+3593408605&4294967295,x=C+(N<<5&4294967295|N>>>27),N=F+(C^O&(x^C))+R[10]+38016083&4294967295,F=x+(N<<9&4294967295|N>>>23),N=O+(x^C&(F^x))+R[15]+3634488961&4294967295,O=F+(N<<14&4294967295|N>>>18),N=C+(F^x&(O^F))+R[4]+3889429448&4294967295,C=O+(N<<20&4294967295|N>>>12),N=x+(O^F&(C^O))+R[9]+568446438&4294967295,x=C+(N<<5&4294967295|N>>>27),N=F+(C^O&(x^C))+R[14]+3275163606&4294967295,F=x+(N<<9&4294967295|N>>>23),N=O+(x^C&(F^x))+R[3]+4107603335&4294967295,O=F+(N<<14&4294967295|N>>>18),N=C+(F^x&(O^F))+R[8]+1163531501&4294967295,C=O+(N<<20&4294967295|N>>>12),N=x+(O^F&(C^O))+R[13]+2850285829&4294967295,x=C+(N<<5&4294967295|N>>>27),N=F+(C^O&(x^C))+R[2]+4243563512&4294967295,F=x+(N<<9&4294967295|N>>>23),N=O+(x^C&(F^x))+R[7]+1735328473&4294967295,O=F+(N<<14&4294967295|N>>>18),N=C+(F^x&(O^F))+R[12]+2368359562&4294967295,C=O+(N<<20&4294967295|N>>>12),N=x+(C^O^F)+R[5]+4294588738&4294967295,x=C+(N<<4&4294967295|N>>>28),N=F+(x^C^O)+R[8]+2272392833&4294967295,F=x+(N<<11&4294967295|N>>>21),N=O+(F^x^C)+R[11]+1839030562&4294967295,O=F+(N<<16&4294967295|N>>>16),N=C+(O^F^x)+R[14]+4259657740&4294967295,C=O+(N<<23&4294967295|N>>>9),N=x+(C^O^F)+R[1]+2763975236&4294967295,x=C+(N<<4&4294967295|N>>>28),N=F+(x^C^O)+R[4]+1272893353&4294967295,F=x+(N<<11&4294967295|N>>>21),N=O+(F^x^C)+R[7]+4139469664&4294967295,O=F+(N<<16&4294967295|N>>>16),N=C+(O^F^x)+R[10]+3200236656&4294967295,C=O+(N<<23&4294967295|N>>>9),N=x+(C^O^F)+R[13]+681279174&4294967295,x=C+(N<<4&4294967295|N>>>28),N=F+(x^C^O)+R[0]+3936430074&4294967295,F=x+(N<<11&4294967295|N>>>21),N=O+(F^x^C)+R[3]+3572445317&4294967295,O=F+(N<<16&4294967295|N>>>16),N=C+(O^F^x)+R[6]+76029189&4294967295,C=O+(N<<23&4294967295|N>>>9),N=x+(C^O^F)+R[9]+3654602809&4294967295,x=C+(N<<4&4294967295|N>>>28),N=F+(x^C^O)+R[12]+3873151461&4294967295,F=x+(N<<11&4294967295|N>>>21),N=O+(F^x^C)+R[15]+530742520&4294967295,O=F+(N<<16&4294967295|N>>>16),N=C+(O^F^x)+R[2]+3299628645&4294967295,C=O+(N<<23&4294967295|N>>>9),N=x+(O^(C|~F))+R[0]+4096336452&4294967295,x=C+(N<<6&4294967295|N>>>26),N=F+(C^(x|~O))+R[7]+1126891415&4294967295,F=x+(N<<10&4294967295|N>>>22),N=O+(x^(F|~C))+R[14]+2878612391&4294967295,O=F+(N<<15&4294967295|N>>>17),N=C+(F^(O|~x))+R[5]+4237533241&4294967295,C=O+(N<<21&4294967295|N>>>11),N=x+(O^(C|~F))+R[12]+1700485571&4294967295,x=C+(N<<6&4294967295|N>>>26),N=F+(C^(x|~O))+R[3]+2399980690&4294967295,F=x+(N<<10&4294967295|N>>>22),N=O+(x^(F|~C))+R[10]+4293915773&4294967295,O=F+(N<<15&4294967295|N>>>17),N=C+(F^(O|~x))+R[1]+2240044497&4294967295,C=O+(N<<21&4294967295|N>>>11),N=x+(O^(C|~F))+R[8]+1873313359&4294967295,x=C+(N<<6&4294967295|N>>>26),N=F+(C^(x|~O))+R[15]+4264355552&4294967295,F=x+(N<<10&4294967295|N>>>22),N=O+(x^(F|~C))+R[6]+2734768916&4294967295,O=F+(N<<15&4294967295|N>>>17),N=C+(F^(O|~x))+R[13]+1309151649&4294967295,C=O+(N<<21&4294967295|N>>>11),N=x+(O^(C|~F))+R[4]+4149444226&4294967295,x=C+(N<<6&4294967295|N>>>26),N=F+(C^(x|~O))+R[11]+3174756917&4294967295,F=x+(N<<10&4294967295|N>>>22),N=O+(x^(F|~C))+R[2]+718787259&4294967295,O=F+(N<<15&4294967295|N>>>17),N=C+(F^(O|~x))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+x&4294967295,S.g[1]=S.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+F&4294967295}r.prototype.u=function(S,x){x===void 0&&(x=S.length);for(var C=x-this.blockSize,R=this.B,O=this.h,F=0;F<x;){if(O==0)for(;F<=C;)i(this,S,F),F+=this.blockSize;if(typeof S=="string"){for(;F<x;)if(R[O++]=S.charCodeAt(F++),O==this.blockSize){i(this,R),O=0;break}}else for(;F<x;)if(R[O++]=S[F++],O==this.blockSize){i(this,R),O=0;break}}this.h=O,this.o+=x},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var x=1;x<S.length-8;++x)S[x]=0;var C=8*this.o;for(x=S.length-8;x<S.length;++x)S[x]=C&255,C/=256;for(this.u(S),S=Array(16),x=C=0;4>x;++x)for(var R=0;32>R;R+=8)S[C++]=this.g[x]>>>R&255;return S};function o(S,x){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=x(S)}function s(S,x){this.h=x;for(var C=[],R=!0,O=S.length-1;0<=O;O--){var F=S[O]|0;R&&F==x||(C[O]=F,R=!1)}this.g=C}var a={};function l(S){return-128<=S&&128>S?o(S,function(x){return new s([x|0],0>x?-1:0)}):new s([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return v(c(-S));for(var x=[],C=1,R=0;S>=C;R++)x[R]=S/C|0,C*=4294967296;return new s(x,0)}function u(S,x){if(S.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(S.charAt(0)=="-")return v(u(S.substring(1),x));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(x,8)),R=d,O=0;O<S.length;O+=8){var F=Math.min(8,S.length-O),N=parseInt(S.substring(O,O+F),x);8>F?(F=c(Math.pow(x,F)),R=R.j(F).add(c(N))):(R=R.j(C),R=R.add(c(N)))}return R}var d=l(0),f=l(1),g=l(16777216);e=s.prototype,e.m=function(){if(b(this))return-v(this).m();for(var S=0,x=1,C=0;C<this.g.length;C++){var R=this.i(C);S+=(0<=R?R:4294967296+R)*x,x*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(U(this))return"0";if(b(this))return"-"+v(this).toString(S);for(var x=c(Math.pow(S,6)),C=this,R="";;){var O=T(C,x).g;C=_(C,O.j(x));var F=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=O,U(C))return F+R;for(;6>F.length;)F="0"+F;R=F+R}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function U(S){if(S.h!=0)return!1;for(var x=0;x<S.g.length;x++)if(S.g[x]!=0)return!1;return!0}function b(S){return S.h==-1}e.l=function(S){return S=_(this,S),b(S)?-1:U(S)?0:1};function v(S){for(var x=S.g.length,C=[],R=0;R<x;R++)C[R]=~S.g[R];return new s(C,~S.h).add(f)}e.abs=function(){return b(this)?v(this):this},e.add=function(S){for(var x=Math.max(this.g.length,S.g.length),C=[],R=0,O=0;O<=x;O++){var F=R+(this.i(O)&65535)+(S.i(O)&65535),N=(F>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);R=N>>>16,F&=65535,N&=65535,C[O]=N<<16|F}return new s(C,C[C.length-1]&-2147483648?-1:0)};function _(S,x){return S.add(v(x))}e.j=function(S){if(U(this)||U(S))return d;if(b(this))return b(S)?v(this).j(v(S)):v(v(this).j(S));if(b(S))return v(this.j(v(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var x=this.g.length+S.g.length,C=[],R=0;R<2*x;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<S.g.length;O++){var F=this.i(R)>>>16,N=this.i(R)&65535,J=S.i(O)>>>16,K=S.i(O)&65535;C[2*R+2*O]+=N*K,E(C,2*R+2*O),C[2*R+2*O+1]+=F*K,E(C,2*R+2*O+1),C[2*R+2*O+1]+=N*J,E(C,2*R+2*O+1),C[2*R+2*O+2]+=F*J,E(C,2*R+2*O+2)}for(R=0;R<x;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=x;R<2*x;R++)C[R]=0;return new s(C,0)};function E(S,x){for(;(S[x]&65535)!=S[x];)S[x+1]+=S[x]>>>16,S[x]&=65535,x++}function w(S,x){this.g=S,this.h=x}function T(S,x){if(U(x))throw Error("division by zero");if(U(S))return new w(d,d);if(b(S))return x=T(v(S),x),new w(v(x.g),v(x.h));if(b(x))return x=T(S,v(x)),new w(v(x.g),x.h);if(30<S.g.length){if(b(S)||b(x))throw Error("slowDivide_ only works with positive integers.");for(var C=f,R=x;0>=R.l(S);)C=A(C),R=A(R);var O=M(C,1),F=M(R,1);for(R=M(R,2),C=M(C,2);!U(R);){var N=F.add(R);0>=N.l(S)&&(O=O.add(C),F=N),R=M(R,1),C=M(C,1)}return x=_(S,O.j(x)),new w(O,x)}for(O=d;0<=S.l(x);){for(C=Math.max(1,Math.floor(S.m()/x.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),F=c(C),N=F.j(x);b(N)||0<N.l(S);)C-=R,F=c(C),N=F.j(x);U(F)&&(F=f),O=O.add(F),S=_(S,N)}return new w(O,S)}e.A=function(S){return T(this,S).h},e.and=function(S){for(var x=Math.max(this.g.length,S.g.length),C=[],R=0;R<x;R++)C[R]=this.i(R)&S.i(R);return new s(C,this.h&S.h)},e.or=function(S){for(var x=Math.max(this.g.length,S.g.length),C=[],R=0;R<x;R++)C[R]=this.i(R)|S.i(R);return new s(C,this.h|S.h)},e.xor=function(S){for(var x=Math.max(this.g.length,S.g.length),C=[],R=0;R<x;R++)C[R]=this.i(R)^S.i(R);return new s(C,this.h^S.h)};function A(S){for(var x=S.g.length+1,C=[],R=0;R<x;R++)C[R]=S.i(R)<<1|S.i(R-1)>>>31;return new s(C,S.h)}function M(S,x){var C=x>>5;x%=32;for(var R=S.g.length-C,O=[],F=0;F<R;F++)O[F]=0<x?S.i(F+C)>>>x|S.i(F+C+1)<<32-x:S.i(F+C);return new s(O,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HY=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=u,Xu=s}).apply(typeof qN<"u"?qN:typeof self<"u"?self:typeof window<"u"?window:{});var z5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WY,em,GY,Fb,x9,XY,jY,KY;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,k,$){return y==Array.prototype||y==Object.prototype||(y[k]=$.value),y};function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof z5=="object"&&z5];for(var k=0;k<y.length;++k){var $=y[k];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var r=n(this);function i(y,k){if(k)e:{var $=r;y=y.split(".");for(var G=0;G<y.length-1;G++){var se=y[G];if(!(se in $))break e;$=$[se]}y=y[y.length-1],G=$[y],k=k(G),k!=G&&k!=null&&t($,y,{configurable:!0,writable:!0,value:k})}}function o(y,k){y instanceof String&&(y+="");var $=0,G=!1,se={next:function(){if(!G&&$<y.length){var ue=$++;return{value:k(ue,y[ue]),done:!1}}return G=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}i("Array.prototype.values",function(y){return y||function(){return o(this,function(k,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(y){var k=typeof y;return k=k!="object"?k:y?Array.isArray(y)?"array":k:"null",k=="array"||k=="object"&&typeof y.length=="number"}function c(y){var k=typeof y;return k=="object"&&y!=null||k=="function"}function u(y,k,$){return y.call.apply(y.bind,arguments)}function d(y,k,$){if(!y)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,G),y.apply(k,se)}}return function(){return y.apply(k,arguments)}}function f(y,k,$){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function g(y,k){var $=Array.prototype.slice.call(arguments,1);return function(){var G=$.slice();return G.push.apply(G,arguments),y.apply(this,G)}}function U(y,k){function $(){}$.prototype=k.prototype,y.aa=k.prototype,y.prototype=new $,y.prototype.constructor=y,y.Qb=function(G,se,ue){for(var xe=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)xe[Zt-2]=arguments[Zt];return k.prototype[se].apply(G,xe)}}function b(y){const k=y.length;if(0<k){const $=Array(k);for(let G=0;G<k;G++)$[G]=y[G];return $}return[]}function v(y,k){for(let $=1;$<arguments.length;$++){const G=arguments[$];if(l(G)){const se=y.length||0,ue=G.length||0;y.length=se+ue;for(let xe=0;xe<ue;xe++)y[se+xe]=G[xe]}else y.push(G)}}class _{constructor(k,$){this.i=k,this.j=$,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function E(y){return/^[\s\xa0]*$/.test(y)}function w(){var y=a.navigator;return y&&(y=y.userAgent)?y:""}function T(y){return T[" "](y),y}T[" "]=function(){};var A=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function M(y,k,$){for(const G in y)k.call($,y[G],G,y)}function S(y,k){for(const $ in y)k.call(void 0,y[$],$,y)}function x(y){const k={};for(const $ in y)k[$]=y[$];return k}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(y,k){let $,G;for(let se=1;se<arguments.length;se++){G=arguments[se];for($ in G)y[$]=G[$];for(let ue=0;ue<C.length;ue++)$=C[ue],Object.prototype.hasOwnProperty.call(G,$)&&(y[$]=G[$])}}function O(y){var k=1;y=y.split(":");const $=[];for(;0<k&&y.length;)$.push(y.shift()),k--;return y.length&&$.push(y.join(":")),$}function F(y){a.setTimeout(()=>{throw y},0)}function N(){var y=Z;let k=null;return y.g&&(k=y.g,y.g=y.g.next,y.g||(y.h=null),k.next=null),k}class J{constructor(){this.h=this.g=null}add(k,$){const G=K.get();G.set(k,$),this.h?this.h.next=G:this.g=G,this.h=G}}var K=new _(()=>new ne,y=>y.reset());class ne{constructor(){this.next=this.g=this.h=null}set(k,$){this.h=k,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,q=!1,Z=new J,te=()=>{const y=a.Promise.resolve(void 0);ee=()=>{y.then(pe)}};var pe=()=>{for(var y;y=N();){try{y.h.call(y.g)}catch($){F($)}var k=K;k.j(y),100>k.h&&(k.h++,y.next=k.g,k.g=y)}q=!1};function Ie(){this.s=this.s,this.C=this.C}Ie.prototype.s=!1,Ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(y,k){this.type=y,this.g=this.target=k,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var lt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var y=!1,k=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const $=()=>{};a.addEventListener("test",$,k),a.removeEventListener("test",$,k)}catch{}return y}();function at(y,k){if(Se.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var $=this.type=y.type,G=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=k,k=y.relatedTarget){if(A){e:{try{T(k.nodeName);var se=!0;break e}catch{}se=!1}se||(k=null)}}else $=="mouseover"?k=y.fromElement:$=="mouseout"&&(k=y.toElement);this.relatedTarget=k,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:gt[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&at.aa.h.call(this)}}U(at,Se);var gt={2:"touch",3:"pen",4:"mouse"};at.prototype.h=function(){at.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var ht="closure_listenable_"+(1e6*Math.random()|0),tn=0;function Kt(y,k,$,G,se){this.listener=y,this.proxy=null,this.src=k,this.type=$,this.capture=!!G,this.ha=se,this.key=++tn,this.da=this.fa=!1}function pt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function mt(y){this.src=y,this.g={},this.h=0}mt.prototype.add=function(y,k,$,G,se){var ue=y.toString();y=this.g[ue],y||(y=this.g[ue]=[],this.h++);var xe=Ia(y,k,G,se);return-1<xe?(k=y[xe],$||(k.fa=!1)):(k=new Kt(k,this.src,ue,!!G,se),k.fa=$,y.push(k)),k};function Ot(y,k){var $=k.type;if($ in y.g){var G=y.g[$],se=Array.prototype.indexOf.call(G,k,void 0),ue;(ue=0<=se)&&Array.prototype.splice.call(G,se,1),ue&&(pt(k),y.g[$].length==0&&(delete y.g[$],y.h--))}}function Ia(y,k,$,G){for(var se=0;se<y.length;++se){var ue=y[se];if(!ue.da&&ue.listener==k&&ue.capture==!!$&&ue.ha==G)return se}return-1}var gr="closure_lm_"+(1e6*Math.random()|0),fi={};function Yo(y,k,$,G,se){if(Array.isArray(k)){for(var ue=0;ue<k.length;ue++)Yo(y,k[ue],$,G,se);return null}return $=Oc($),y&&y[ht]?y.K(k,$,c(G)?!!G.capture:!!G,se):qn(y,k,$,!1,G,se)}function qn(y,k,$,G,se,ue){if(!k)throw Error("Invalid event type");var xe=c(se)?!!se.capture:!!se,Zt=Ta(y);if(Zt||(y[gr]=Zt=new mt(y)),$=Zt.add(k,$,G,xe,ue),$.proxy)return $;if(G=Ph(),$.proxy=G,G.src=y,G.listener=$,y.addEventListener)lt||(se=xe),se===void 0&&(se=!1),y.addEventListener(k.toString(),G,se);else if(y.attachEvent)y.attachEvent(Jr(k.toString()),G);else if(y.addListener&&y.removeListener)y.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return $}function Ph(){function y($){return k.call(y.src,y.listener,$)}const k=no;return y}function Ds(y,k,$,G,se){if(Array.isArray(k))for(var ue=0;ue<k.length;ue++)Ds(y,k[ue],$,G,se);else G=c(G)?!!G.capture:!!G,$=Oc($),y&&y[ht]?(y=y.i,k=String(k).toString(),k in y.g&&(ue=y.g[k],$=Ia(ue,$,G,se),-1<$&&(pt(ue[$]),Array.prototype.splice.call(ue,$,1),ue.length==0&&(delete y.g[k],y.h--)))):y&&(y=Ta(y))&&(k=y.g[k.toString()],y=-1,k&&(y=Ia(k,$,G,se)),($=-1<y?k[y]:null)&&Li($))}function Li(y){if(typeof y!="number"&&y&&!y.da){var k=y.src;if(k&&k[ht])Ot(k.i,y);else{var $=y.type,G=y.proxy;k.removeEventListener?k.removeEventListener($,G,y.capture):k.detachEvent?k.detachEvent(Jr($),G):k.addListener&&k.removeListener&&k.removeListener(G),($=Ta(k))?(Ot($,y),$.h==0&&($.src=null,k[gr]=null)):pt(y)}}}function Jr(y){return y in fi?fi[y]:fi[y]="on"+y}function no(y,k){if(y.da)y=!0;else{k=new at(k,this);var $=y.listener,G=y.ha||y.src;y.fa&&Li(y),y=$.call(G,k)}return y}function Ta(y){return y=y[gr],y instanceof mt?y:null}var yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oc(y){return typeof y=="function"?y:(y[yd]||(y[yd]=function(k){return y.handleEvent(k)}),y[yd])}function Fr(){Ie.call(this),this.i=new mt(this),this.M=this,this.F=null}U(Fr,Ie),Fr.prototype[ht]=!0,Fr.prototype.removeEventListener=function(y,k,$,G){Ds(this,y,k,$,G)};function ir(y,k){var $,G=y.F;if(G)for($=[];G;G=G.F)$.push(G);if(y=y.M,G=k.type||k,typeof k=="string")k=new Se(k,y);else if(k instanceof Se)k.target=k.target||y;else{var se=k;k=new Se(G,y),R(k,se)}if(se=!0,$)for(var ue=$.length-1;0<=ue;ue--){var xe=k.g=$[ue];se=Ns(xe,G,!0,k)&&se}if(xe=k.g=y,se=Ns(xe,G,!0,k)&&se,se=Ns(xe,G,!1,k)&&se,$)for(ue=0;ue<$.length;ue++)xe=k.g=$[ue],se=Ns(xe,G,!1,k)&&se}Fr.prototype.N=function(){if(Fr.aa.N.call(this),this.i){var y=this.i,k;for(k in y.g){for(var $=y.g[k],G=0;G<$.length;G++)pt($[G]);delete y.g[k],y.h--}}this.F=null},Fr.prototype.K=function(y,k,$,G){return this.i.add(String(y),k,!1,$,G)},Fr.prototype.L=function(y,k,$,G){return this.i.add(String(y),k,!0,$,G)};function Ns(y,k,$,G){if(k=y.i.g[String(k)],!k)return!0;k=k.concat();for(var se=!0,ue=0;ue<k.length;++ue){var xe=k[ue];if(xe&&!xe.da&&xe.capture==$){var Zt=xe.listener,xr=xe.ha||xe.src;xe.fa&&Ot(y.i,xe),se=Zt.call(xr,G)!==!1&&se}}return se&&!G.defaultPrevented}function Mh(y,k,$){if(typeof y=="function")$&&(y=f(y,$));else if(y&&typeof y.handleEvent=="function")y=f(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:a.setTimeout(y,k||0)}function Lh(y){y.g=Mh(()=>{y.g=null,y.i&&(y.i=!1,Lh(y))},y.l);const k=y.h;y.h=null,y.m.apply(null,k)}class I0 extends Ie{constructor(k,$){super(),this.m=k,this.l=$,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Lh(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yl(y){Ie.call(this),this.h=y,this.g={}}U(yl,Ie);var Dh=[];function Nh(y){M(y.g,function(k,$){this.g.hasOwnProperty($)&&Li(k)},y),y.g={}}yl.prototype.N=function(){yl.aa.N.call(this),Nh(this)},yl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vd=a.JSON.stringify,T0=a.JSON.parse,x0=class{stringify(y){return a.JSON.stringify(y,void 0)}parse(y){return a.JSON.parse(y,void 0)}};function S0(){}S0.prototype.h=null;function MU(y){return y.h||(y.h=y.i())}function LU(){}var Fc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oh(){Se.call(this,"d")}U(Oh,Se);function C0(){Se.call(this,"c")}U(C0,Se);var vl={},DU=null;function Fh(){return DU=DU||new Fr}vl.La="serverreachability";function A0(y){Se.call(this,vl.La,y)}U(A0,Se);function Ed(y){const k=Fh();ir(k,new A0(k))}vl.STAT_EVENT="statevent";function NU(y,k){Se.call(this,vl.STAT_EVENT,y),this.stat=k}U(NU,Se);function ei(y){const k=Fh();ir(k,new NU(k,y))}vl.Ma="timingevent";function Bh(y,k){Se.call(this,vl.Ma,y),this.size=k}U(Bh,Se);function _d(y,k){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){y()},k)}function El(){this.g=!0}El.prototype.xa=function(){this.g=!1};function wv(y,k,$,G,se,ue){y.info(function(){if(y.g)if(ue)for(var xe="",Zt=ue.split("&"),xr=0;xr<Zt.length;xr++){var St=Zt[xr].split("=");if(1<St.length){var nn=St[0];St=St[1];var pr=nn.split("_");xe=2<=pr.length&&pr[1]=="type"?xe+(nn+"="+St+"&"):xe+(nn+"=redacted&")}}else xe=null;else xe=ue;return"XMLHTTP REQ ("+G+") [attempt "+se+"]: "+k+`
`+$+`
`+xe})}function Iv(y,k,$,G,se,ue,xe){y.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+se+"]: "+k+`
`+$+`
`+ue+" "+xe})}function Bc(y,k,$,G){y.info(function(){return"XMLHTTP TEXT ("+k+"): "+xv(y,$)+(G?" "+G:"")})}function Tv(y,k){y.info(function(){return"TIMEOUT: "+k})}El.prototype.info=function(){};function xv(y,k){if(!y.g)return k;if(!k)return null;try{var $=JSON.parse(k);if($){for(y=0;y<$.length;y++)if(Array.isArray($[y])){var G=$[y];if(!(2>G.length)){var se=G[1];if(Array.isArray(se)&&!(1>se.length)){var ue=se[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var xe=1;xe<se.length;xe++)se[xe]=""}}}}return vd($)}catch{return k}}var $h={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},OU={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},k0;function wd(){}U(wd,S0),wd.prototype.g=function(){return new XMLHttpRequest},wd.prototype.i=function(){return{}},k0=new wd;function xa(y,k,$,G){this.j=y,this.i=k,this.l=$,this.R=G||1,this.U=new yl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new FU}function FU(){this.i=null,this.g="",this.h=!1}var BU={},R0={};function P0(y,k,$){y.L=1,y.v=zc(Zo(k)),y.m=$,y.P=!0,$U(y,null)}function $U(y,k){y.F=Date.now(),_l(y),y.A=Zo(y.v);var $=y.A,G=y.R;Array.isArray(G)||(G=[String(G)]),$0($.i,"t",G),y.C=0,$=y.j.J,y.h=new FU,y.g=a6(y.j,$?k:null,!y.m),0<y.O&&(y.M=new I0(f(y.Y,y,y.g),y.O)),k=y.U,$=y.g,G=y.ca;var se="readystatechange";Array.isArray(se)||(se&&(Dh[0]=se.toString()),se=Dh);for(var ue=0;ue<se.length;ue++){var xe=Yo($,se[ue],G||k.handleEvent,!1,k.h||k);if(!xe)break;k.g[xe.key]=xe}k=y.H?x(y.H):{},y.m?(y.u||(y.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,k)):(y.u="GET",y.g.ea(y.A,y.u,null,k)),Ed(),wv(y.i,y.u,y.A,y.l,y.R,y.m)}xa.prototype.ca=function(y){y=y.target;const k=this.M;k&&ti(y)==3?k.j():this.Y(y)},xa.prototype.Y=function(y){try{if(y==this.g)e:{const pr=ti(this.g);var k=this.g.Ba();const es=this.g.Z();if(!(3>pr)&&(pr!=3||this.g&&(this.h.h||this.g.oa()||H0(this.g)))){this.J||pr!=4||k==7||(k==8||0>=es?Ed(3):Ed(2)),M0(this);var $=this.g.Z();this.X=$;t:if(Id(this)){var G=H0(this.g);y="";var se=G.length,ue=ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sa(this),Td(this);var xe="";break t}this.h.i=new a.TextDecoder}for(k=0;k<se;k++)this.h.h=!0,y+=this.h.i.decode(G[k],{stream:!(ue&&k==se-1)});G.length=0,this.h.g+=y,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=$==200,Iv(this.i,this.u,this.A,this.l,this.R,pr,$),this.o){if(this.T&&!this.K){t:{if(this.g){var Zt,xr=this.g;if((Zt=xr.g?xr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Zt)){var St=Zt;break t}}St=null}if($=St)Bc(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zh(this,$);else{this.o=!1,this.s=3,ei(12),Sa(this),Td(this);break e}}if(this.P){$=!0;let ro;for(;!this.J&&this.C<xe.length;)if(ro=Sv(this,xe),ro==R0){pr==4&&(this.s=4,ei(14),$=!1),Bc(this.i,this.l,null,"[Incomplete Response]");break}else if(ro==BU){this.s=4,ei(15),Bc(this.i,this.l,xe,"[Invalid Chunk]"),$=!1;break}else Bc(this.i,this.l,ro,null),zh(this,ro);if(Id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pr!=4||xe.length!=0||this.h.h||(this.s=1,ei(16),$=!1),this.o=this.o&&$,!$)Bc(this.i,this.l,xe,"[Invalid Chunked Response]"),Sa(this),Td(this);else if(0<xe.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Jo(nn),nn.M=!0,ei(11))}}else Bc(this.i,this.l,xe,null),zh(this,xe);pr==4&&Sa(this),this.o&&!this.J&&(pr==4?yn(this.j,this):(this.o=!1,_l(this)))}else W0(this.g),$==400&&0<xe.indexOf("Unknown SID")?(this.s=3,ei(12)):(this.s=0,ei(13)),Sa(this),Td(this)}}}catch{}finally{}};function Id(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Sv(y,k){var $=y.C,G=k.indexOf(`
`,$);return G==-1?R0:($=Number(k.substring($,G)),isNaN($)?BU:(G+=1,G+$>k.length?R0:(k=k.slice(G,G+$),y.C=G+$,k)))}xa.prototype.cancel=function(){this.J=!0,Sa(this)};function _l(y){y.S=Date.now()+y.I,zU(y,y.I)}function zU(y,k){if(y.B!=null)throw Error("WatchDog timer not null");y.B=_d(f(y.ba,y),k)}function M0(y){y.B&&(a.clearTimeout(y.B),y.B=null)}xa.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Tv(this.i,this.A),this.L!=2&&(Ed(),ei(17)),Sa(this),this.s=2,Td(this)):zU(this,this.S-y)};function Td(y){y.j.G==0||y.J||yn(y.j,y)}function Sa(y){M0(y);var k=y.M;k&&typeof k.ma=="function"&&k.ma(),y.M=null,Nh(y.U),y.g&&(k=y.g,y.g=null,k.abort(),k.ma())}function zh(y,k){try{var $=y.j;if($.G!=0&&($.g==y||L0($.h,y))){if(!y.K&&L0($.h,y)&&$.G==3){try{var G=$.Da.g.parse(k)}catch{G=null}if(Array.isArray(G)&&G.length==3){var se=G;if(se[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<y.F)Wc($),Cd($);else break e;jh($),ei(18)}}else $.za=se[1],0<$.za-$.T&&37500>se[2]&&$.F&&$.v==0&&!$.C&&($.C=_d(f($.Za,$),6e3));if(1>=GU($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else Fs($,11)}else if((y.K||$.g==y)&&Wc($),!E(k))for(se=$.Da.g.parse(k),k=0;k<se.length;k++){let St=se[k];if($.T=St[0],St=St[1],$.G==2)if(St[0]=="c"){$.K=St[1],$.ia=St[2];const nn=St[3];nn!=null&&($.la=nn,$.j.info("VER="+$.la));const pr=St[4];pr!=null&&($.Aa=pr,$.j.info("SVER="+$.Aa));const es=St[5];es!=null&&typeof es=="number"&&0<es&&(G=1.5*es,$.L=G,$.j.info("backChannelRequestTimeoutMs_="+G)),G=$;const ro=y.g;if(ro){const Md=ro.g?ro.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Md){var ue=G.h;ue.g||Md.indexOf("spdy")==-1&&Md.indexOf("quic")==-1&&Md.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Vh(ue,ue.h),ue.h=null))}if(G.D){const j0=ro.g?ro.g.getResponseHeader("X-HTTP-Session-Id"):null;j0&&(G.ya=j0,fn(G.I,G.D,j0))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-y.F,$.j.info("Handshake RTT: "+$.R+"ms")),G=$;var xe=y;if(G.qa=Kh(G,G.J?G.ia:null,G.W),xe.K){D0(G.h,xe);var Zt=xe,xr=G.L;xr&&(Zt.I=xr),Zt.B&&(M0(Zt),_l(Zt)),G.g=xe}else o6(G);0<$.i.length&&Ad($)}else St[0]!="stop"&&St[0]!="close"||Fs($,7);else $.G==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?Fs($,7):Xh($):St[0]!="noop"&&$.l&&$.l.ta(St),$.v=0)}}Ed(4)}catch{}}var VU=class{constructor(y,k){this.g=y,this.map=k}};function HU(y){this.l=y||10,a.PerformanceNavigationTiming?(y=a.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function WU(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function GU(y){return y.h?1:y.g?y.g.size:0}function L0(y,k){return y.h?y.h==k:y.g?y.g.has(k):!1}function Vh(y,k){y.g?y.g.add(k):y.h=k}function D0(y,k){y.h&&y.h==k?y.h=null:y.g&&y.g.has(k)&&y.g.delete(k)}HU.prototype.cancel=function(){if(this.i=N0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function N0(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let k=y.i;for(const $ of y.g.values())k=k.concat($.D);return k}return b(y.i)}function O0(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var k=[],$=y.length,G=0;G<$;G++)k.push(y[G]);return k}k=[],$=0;for(G in y)k[$++]=y[G];return k}function Cv(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var k=[];y=y.length;for(var $=0;$<y;$++)k.push($);return k}k=[],$=0;for(const G in y)k[$++]=G;return k}}}function F0(y,k){if(y.forEach&&typeof y.forEach=="function")y.forEach(k,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,k,void 0);else for(var $=Cv(y),G=O0(y),se=G.length,ue=0;ue<se;ue++)k.call(void 0,G[ue],$&&$[ue],y)}var xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XU(y,k){if(y){y=y.split("&");for(var $=0;$<y.length;$++){var G=y[$].indexOf("="),se=null;if(0<=G){var ue=y[$].substring(0,G);se=y[$].substring(G+1)}else ue=y[$];k(ue,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function wl(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof wl){this.h=y.h,Sd(this,y.j),this.o=y.o,this.g=y.g,$c(this,y.s),this.l=y.l;var k=y.i,$=new Vc;$.i=k.i,k.g&&($.g=new Map(k.g),$.h=k.h),jU(this,$),this.m=y.m}else y&&(k=String(y).match(xd))?(this.h=!1,Sd(this,k[1]||"",!0),this.o=Il(k[2]||""),this.g=Il(k[3]||"",!0),$c(this,k[4]),this.l=Il(k[5]||"",!0),jU(this,k[6]||"",!0),this.m=Il(k[7]||"")):(this.h=!1,this.i=new Vc(null,this.h))}wl.prototype.toString=function(){var y=[],k=this.j;k&&y.push(qo(k,B0,!0),":");var $=this.g;return($||k=="file")&&(y.push("//"),(k=this.o)&&y.push(qo(k,B0,!0),"@"),y.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&y.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&y.push("/"),y.push(qo($,$.charAt(0)=="/"?YU:Av,!0))),($=this.i.toString())&&y.push("?",$),($=this.m)&&y.push("#",qo($,qU)),y.join("")};function Zo(y){return new wl(y)}function Sd(y,k,$){y.j=$?Il(k,!0):k,y.j&&(y.j=y.j.replace(/:$/,""))}function $c(y,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);y.s=k}else y.s=null}function jU(y,k,$){k instanceof Vc?(y.i=k,kv(y.i,y.h)):($||(k=qo(k,ZU)),y.i=new Vc(k,y.h))}function fn(y,k,$){y.i.set(k,$)}function zc(y){return fn(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Il(y,k){return y?k?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function qo(y,k,$){return typeof y=="string"?(y=encodeURI(y).replace(k,KU),$&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function KU(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var B0=/[#\/\?@]/g,Av=/[#\?:]/g,YU=/[#\?]/g,ZU=/[#\?@]/g,qU=/#/g;function Vc(y,k){this.h=this.g=null,this.i=y||null,this.j=!!k}function Ca(y){y.g||(y.g=new Map,y.h=0,y.i&&XU(y.i,function(k,$){y.add(decodeURIComponent(k.replace(/\+/g," ")),$)}))}e=Vc.prototype,e.add=function(y,k){Ca(this),this.i=null,y=Hc(this,y);var $=this.g.get(y);return $||this.g.set(y,$=[]),$.push(k),this.h+=1,this};function QU(y,k){Ca(y),k=Hc(y,k),y.g.has(k)&&(y.i=null,y.h-=y.g.get(k).length,y.g.delete(k))}function JU(y,k){return Ca(y),k=Hc(y,k),y.g.has(k)}e.forEach=function(y,k){Ca(this),this.g.forEach(function($,G){$.forEach(function(se){y.call(k,se,G,this)},this)},this)},e.na=function(){Ca(this);const y=Array.from(this.g.values()),k=Array.from(this.g.keys()),$=[];for(let G=0;G<k.length;G++){const se=y[G];for(let ue=0;ue<se.length;ue++)$.push(k[G])}return $},e.V=function(y){Ca(this);let k=[];if(typeof y=="string")JU(this,y)&&(k=k.concat(this.g.get(Hc(this,y))));else{y=Array.from(this.g.values());for(let $=0;$<y.length;$++)k=k.concat(y[$])}return k},e.set=function(y,k){return Ca(this),this.i=null,y=Hc(this,y),JU(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[k]),this.h+=1,this},e.get=function(y,k){return y?(y=this.V(y),0<y.length?String(y[0]):k):k};function $0(y,k,$){QU(y,k),0<$.length&&(y.i=null,y.g.set(Hc(y,k),b($)),y.h+=$.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],k=Array.from(this.g.keys());for(var $=0;$<k.length;$++){var G=k[$];const ue=encodeURIComponent(String(G)),xe=this.V(G);for(G=0;G<xe.length;G++){var se=ue;xe[G]!==""&&(se+="="+encodeURIComponent(String(xe[G]))),y.push(se)}}return this.i=y.join("&")};function Hc(y,k){return k=String(k),y.j&&(k=k.toLowerCase()),k}function kv(y,k){k&&!y.j&&(Ca(y),y.i=null,y.g.forEach(function($,G){var se=G.toLowerCase();G!=se&&(QU(this,G),$0(this,se,$))},y)),y.j=k}function Rv(y,k){const $=new El;if(a.Image){const G=new Image;G.onload=g(Qo,$,"TestLoadImage: loaded",!0,k,G),G.onerror=g(Qo,$,"TestLoadImage: error",!1,k,G),G.onabort=g(Qo,$,"TestLoadImage: abort",!1,k,G),G.ontimeout=g(Qo,$,"TestLoadImage: timeout",!1,k,G),a.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=y}else k(!1)}function Pv(y,k){const $=new El,G=new AbortController,se=setTimeout(()=>{G.abort(),Qo($,"TestPingServer: timeout",!1,k)},1e4);fetch(y,{signal:G.signal}).then(ue=>{clearTimeout(se),ue.ok?Qo($,"TestPingServer: ok",!0,k):Qo($,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(se),Qo($,"TestPingServer: error",!1,k)})}function Qo(y,k,$,G,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),G($)}catch{}}function Mv(){this.g=new x0}function Lv(y,k,$){const G=$||"";try{F0(y,function(se,ue){let xe=se;c(se)&&(xe=vd(se)),k.push(G+ue+"="+encodeURIComponent(xe))})}catch(se){throw k.push(G+"type="+encodeURIComponent("_badmap")),se}}function Hh(y){this.l=y.Ub||null,this.j=y.eb||!1}U(Hh,S0),Hh.prototype.g=function(){return new Wh(this.l,this.j)},Hh.prototype.i=function(y){return function(){return y}}({});function Wh(y,k){Fr.call(this),this.D=y,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Wh,Fr),e=Wh.prototype,e.open=function(y,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=k,this.readyState=1,Ht(this)},e.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(k.body=y),(this.D||a).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yt(this)),this.readyState=0},e.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;e6(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function e6(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}e.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var k=y.value?y.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!y.done}))&&(this.response=this.responseText+=k)}y.done?Yt(this):Ht(this),this.readyState==3&&e6(this)}},e.Ra=function(y){this.g&&(this.response=this.responseText=y,Yt(this))},e.Qa=function(y){this.g&&(this.response=y,Yt(this))},e.ga=function(){this.g&&Yt(this)};function Yt(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Ht(y)}e.setRequestHeader=function(y,k){this.u.append(y,k)},e.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],k=this.h.entries();for(var $=k.next();!$.done;)$=$.value,y.push($[0]+": "+$[1]),$=k.next();return y.join(`\r
`)};function Ht(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Wh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function t6(y){let k="";return M(y,function($,G){k+=G,k+=":",k+=$,k+=`\r
`}),k}function z0(y,k,$){e:{for(G in $){var G=!1;break e}G=!0}G||($=t6($),typeof y=="string"?$!=null&&encodeURIComponent(String($)):fn(y,k,$))}function Mn(y){Fr.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Mn,Fr);var Dv=/^https?$/i,Nv=["POST","PUT"];e=Mn.prototype,e.Ha=function(y){this.J=y},e.ea=function(y,k,$,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);k=k?k.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():k0.g(),this.v=this.o?MU(this.o):MU(k0),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(k,String(y),!0),this.B=!1}catch(ue){n6(this,ue);return}if(y=$||"",$=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var se in G)$.set(se,G[se]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const ue of G.keys())$.set(ue,G.get(ue));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from($.keys()).find(ue=>ue.toLowerCase()=="content-type"),se=a.FormData&&y instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Nv,k,void 0))||G||se||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,xe]of $)this.g.setRequestHeader(ue,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gh(this),this.u=!0,this.g.send(y),this.u=!1}catch(ue){n6(this,ue)}};function n6(y,k){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=k,y.m=5,V0(y),Qn(y)}function V0(y){y.A||(y.A=!0,ir(y,"complete"),ir(y,"error"))}e.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,ir(this,"complete"),ir(this,"abort"),Qn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qn(this,!0)),Mn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?r6(this):this.bb())},e.bb=function(){r6(this)};function r6(y){if(y.h&&typeof s<"u"&&(!y.v[1]||ti(y)!=4||y.Z()!=2)){if(y.u&&ti(y)==4)Mh(y.Ea,0,y);else if(ir(y,"readystatechange"),ti(y)==4){y.h=!1;try{const xe=y.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var $;if(!($=k)){var G;if(G=xe===0){var se=String(y.D).match(xd)[1]||null;!se&&a.self&&a.self.location&&(se=a.self.location.protocol.slice(0,-1)),G=!Dv.test(se?se.toLowerCase():"")}$=G}if($)ir(y,"complete"),ir(y,"success");else{y.m=6;try{var ue=2<ti(y)?y.g.statusText:""}catch{ue=""}y.l=ue+" ["+y.Z()+"]",V0(y)}}finally{Qn(y)}}}}function Qn(y,k){if(y.g){Gh(y);const $=y.g,G=y.v[0]?()=>{}:null;y.g=null,y.v=null,k||ir(y,"ready");try{$.onreadystatechange=G}catch{}}}function Gh(y){y.I&&(a.clearTimeout(y.I),y.I=null)}e.isActive=function(){return!!this.g};function ti(y){return y.g?y.g.readyState:0}e.Z=function(){try{return 2<ti(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(y){if(this.g){var k=this.g.responseText;return y&&k.indexOf(y)==0&&(k=k.substring(y.length)),T0(k)}};function H0(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function W0(y){const k={};y=(y.g&&2<=ti(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<y.length;G++){if(E(y[G]))continue;var $=O(y[G]);const se=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const ue=k[se]||[];k[se]=ue,ue.push($)}S(k,function(G){return G.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(y,k,$){return $&&$.internalChannelParams&&$.internalChannelParams[y]||k}function G0(y){this.Aa=0,this.i=[],this.j=new El,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Br("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Br("baseRetryDelayMs",5e3,y),this.cb=Br("retryDelaySeedMs",1e4,y),this.Wa=Br("forwardChannelMaxRetries",2,y),this.wa=Br("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new HU(y&&y.concurrentRequestLimit),this.Da=new Mv,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=G0.prototype,e.la=8,e.G=1,e.connect=function(y,k,$,G){ei(0),this.W=y,this.H=k||{},$&&G!==void 0&&(this.H.OSID=$,this.H.OAID=G),this.F=this.X,this.I=Kh(this,null,this.W),Ad(this)};function Xh(y){if(X0(y),y.G==3){var k=y.U++,$=Zo(y.I);if(fn($,"SID",y.K),fn($,"RID",k),fn($,"TYPE","terminate"),kd(y,$),k=new xa(y,y.j,k),k.L=2,k.v=zc(Zo($)),$=!1,a.navigator&&a.navigator.sendBeacon)try{$=a.navigator.sendBeacon(k.v.toString(),"")}catch{}!$&&a.Image&&(new Image().src=k.v,$=!0),$||(k.g=a6(k.j,null),k.g.ea(k.v)),k.F=Date.now(),_l(k)}s6(y)}function Cd(y){y.g&&(Jo(y),y.g.cancel(),y.g=null)}function X0(y){Cd(y),y.u&&(a.clearTimeout(y.u),y.u=null),Wc(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&a.clearTimeout(y.s),y.s=null)}function Ad(y){if(!WU(y.h)&&!y.s){y.s=!0;var k=y.Ga;ee||te(),q||(ee(),q=!0),Z.add(k,y),y.B=0}}function i6(y,k){return GU(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=k.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=_d(f(y.Ga,y,k),Os(y,y.B)),y.B++,!0)}e.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const se=new xa(this,this.j,y);let ue=this.o;if(this.S&&(ue?(ue=x(ue),R(ue,this.S)):ue=this.S),this.m!==null||this.O||(se.H=ue,ue=null),this.P)e:{for(var k=0,$=0;$<this.i.length;$++){t:{var G=this.i[$];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(k+=G,4096<k){k=$;break e}if(k===4096||$===this.i.length-1){k=$+1;break e}}k=1e3}else k=1e3;k=Di(this,se,k),$=Zo(this.I),fn($,"RID",y),fn($,"CVER",22),this.D&&fn($,"X-HTTP-Session-Id",this.D),kd(this,$),ue&&(this.O?k="headers="+encodeURIComponent(String(t6(ue)))+"&"+k:this.m&&z0($,this.m,ue)),Vh(this.h,se),this.Ua&&fn($,"TYPE","init"),this.P?(fn($,"$req",k),fn($,"SID","null"),se.T=!0,P0(se,$,null)):P0(se,$,k),this.G=2}}else this.G==3&&(y?hi(this,y):this.i.length==0||WU(this.h)||hi(this))};function hi(y,k){var $;k?$=k.l:$=y.U++;const G=Zo(y.I);fn(G,"SID",y.K),fn(G,"RID",$),fn(G,"AID",y.T),kd(y,G),y.m&&y.o&&z0(G,y.m,y.o),$=new xa(y,y.j,$,y.B+1),y.m===null&&($.H=y.o),k&&(y.i=k.D.concat(y.i)),k=Di(y,$,1e3),$.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Vh(y.h,$),P0($,G,k)}function kd(y,k){y.H&&M(y.H,function($,G){fn(k,G,$)}),y.l&&F0({},function($,G){fn(k,G,$)})}function Di(y,k,$){$=Math.min(y.i.length,$);var G=y.l?f(y.l.Na,y.l,y):null;e:{var se=y.i;let ue=-1;for(;;){const xe=["count="+$];ue==-1?0<$?(ue=se[0].g,xe.push("ofs="+ue)):ue=0:xe.push("ofs="+ue);let Zt=!0;for(let xr=0;xr<$;xr++){let St=se[xr].g;const nn=se[xr].map;if(St-=ue,0>St)ue=Math.max(0,se[xr].g-100),Zt=!1;else try{Lv(nn,xe,"req"+St+"_")}catch{G&&G(nn)}}if(Zt){G=xe.join("&");break e}}}return y=y.i.splice(0,$),k.D=y,G}function o6(y){if(!y.g&&!y.u){y.Y=1;var k=y.Fa;ee||te(),q||(ee(),q=!0),Z.add(k,y),y.v=0}}function jh(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=_d(f(y.Fa,y),Os(y,y.v)),y.v++,!0)}e.Fa=function(){if(this.u=null,Rd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=_d(f(this.ab,this),y)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ei(10),Cd(this),Rd(this))};function Jo(y){y.A!=null&&(a.clearTimeout(y.A),y.A=null)}function Rd(y){y.g=new xa(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var k=Zo(y.qa);fn(k,"RID","rpc"),fn(k,"SID",y.K),fn(k,"AID",y.T),fn(k,"CI",y.F?"0":"1"),!y.F&&y.ja&&fn(k,"TO",y.ja),fn(k,"TYPE","xmlhttp"),kd(y,k),y.m&&y.o&&z0(k,y.m,y.o),y.L&&(y.g.I=y.L);var $=y.g;y=y.ia,$.L=1,$.v=zc(Zo(k)),$.m=null,$.P=!0,$U($,y)}e.Za=function(){this.C!=null&&(this.C=null,Cd(this),jh(this),ei(19))};function Wc(y){y.C!=null&&(a.clearTimeout(y.C),y.C=null)}function yn(y,k){var $=null;if(y.g==k){Wc(y),Jo(y),y.g=null;var G=2}else if(L0(y.h,k))$=k.D,D0(y.h,k),G=1;else return;if(y.G!=0){if(k.o)if(G==1){$=k.m?k.m.length:0,k=Date.now()-k.F;var se=y.B;G=Fh(),ir(G,new Bh(G,$)),Ad(y)}else o6(y);else if(se=k.s,se==3||se==0&&0<k.X||!(G==1&&i6(y,k)||G==2&&jh(y)))switch($&&0<$.length&&(k=y.h,k.i=k.i.concat($)),se){case 1:Fs(y,5);break;case 4:Fs(y,10);break;case 3:Fs(y,6);break;default:Fs(y,2)}}}function Os(y,k){let $=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||($*=2),$*k}function Fs(y,k){if(y.j.info("Error code "+k),k==2){var $=f(y.fb,y),G=y.Xa;const se=!G;G=new wl(G||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sd(G,"https"),zc(G),se?Rv(G.toString(),$):Pv(G.toString(),$)}else ei(2);y.G=0,y.l&&y.l.sa(k),s6(y),X0(y)}e.fb=function(y){y?(this.j.info("Successfully pinged google.com"),ei(2)):(this.j.info("Failed to ping google.com"),ei(1))};function s6(y){if(y.G=0,y.ka=[],y.l){const k=N0(y.h);(k.length!=0||y.i.length!=0)&&(v(y.ka,k),v(y.ka,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.ra()}}function Kh(y,k,$){var G=$ instanceof wl?Zo($):new wl($);if(G.g!="")k&&(G.g=k+"."+G.g),$c(G,G.s);else{var se=a.location;G=se.protocol,k=k?k+"."+se.hostname:se.hostname,se=+se.port;var ue=new wl(null);G&&Sd(ue,G),k&&(ue.g=k),se&&$c(ue,se),$&&(ue.l=$),G=ue}return $=y.D,k=y.ya,$&&k&&fn(G,$,k),fn(G,"VER",y.la),kd(y,G),G}function a6(y,k,$){if(k&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=y.Ca&&!y.pa?new Mn(new Hh({eb:$})):new Mn(y.pa),k.Ha(y.J),k}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function l6(){}e=l6.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Yh(){}Yh.prototype.g=function(y,k){return new gi(y,k)};function gi(y,k){Fr.call(this),this.g=new G0(k),this.l=y,this.h=k&&k.messageUrlParams||null,y=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(y?y["X-WebChannel-Content-Type"]=k.messageContentType:y={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(y?y["X-WebChannel-Client-Profile"]=k.va:y={"X-WebChannel-Client-Profile":k.va}),this.g.S=y,(y=k&&k.Sb)&&!E(y)&&(this.g.m=y),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!E(k)&&(this.g.D=k,y=this.h,y!==null&&k in y&&(y=this.h,k in y&&delete y[k])),this.j=new Gc(this)}U(gi,Fr),gi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gi.prototype.close=function(){Xh(this.g)},gi.prototype.o=function(y){var k=this.g;if(typeof y=="string"){var $={};$.__data__=y,y=$}else this.u&&($={},$.__data__=vd(y),y=$);k.i.push(new VU(k.Ya++,y)),k.G==3&&Ad(k)},gi.prototype.N=function(){this.g.l=null,delete this.j,Xh(this.g),delete this.g,gi.aa.N.call(this)};function Pd(y){Oh.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var k=y.__sm__;if(k){e:{for(const $ in k){y=$;break e}y=void 0}(this.i=y)&&(y=this.i,k=k!==null&&y in k?k[y]:void 0),this.data=k}else this.data=y}U(Pd,Oh);function Tl(){C0.call(this),this.status=1}U(Tl,C0);function Gc(y){this.g=y}U(Gc,l6),Gc.prototype.ua=function(){ir(this.g,"a")},Gc.prototype.ta=function(y){ir(this.g,new Pd(y))},Gc.prototype.sa=function(y){ir(this.g,new Tl)},Gc.prototype.ra=function(){ir(this.g,"b")},Yh.prototype.createWebChannel=Yh.prototype.g,gi.prototype.send=gi.prototype.o,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,KY=function(){return new Yh},jY=function(){return Fh()},XY=vl,x9={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$h.NO_ERROR=0,$h.TIMEOUT=8,$h.HTTP_ERROR=6,Fb=$h,OU.COMPLETE="complete",GY=OU,LU.EventType=Fc,Fc.OPEN="a",Fc.CLOSE="b",Fc.ERROR="c",Fc.MESSAGE="d",Fr.prototype.listen=Fr.prototype.K,em=LU,Mn.prototype.listenOnce=Mn.prototype.L,Mn.prototype.getLastError=Mn.prototype.Ka,Mn.prototype.getLastErrorCode=Mn.prototype.Ba,Mn.prototype.getStatus=Mn.prototype.Z,Mn.prototype.getResponseJson=Mn.prototype.Oa,Mn.prototype.getResponseText=Mn.prototype.oa,Mn.prototype.send=Mn.prototype.ea,Mn.prototype.setWithCredentials=Mn.prototype.Ha,WY=Mn}).apply(typeof z5<"u"?z5:typeof self<"u"?self:typeof window<"u"?window:{});const QN="@firebase/firestore",JN="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v0="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new MY("@firebase/firestore");function I1(){return dh.logLevel}function Fe(e,...t){if(dh.logLevel<=Lt.DEBUG){const n=t.map(_S);dh.debug(`Firestore (${v0}): ${e}`,...n)}}function Ac(e,...t){if(dh.logLevel<=Lt.ERROR){const n=t.map(_S);dh.error(`Firestore (${v0}): ${e}`,...n)}}function Zg(e,...t){if(dh.logLevel<=Lt.WARN){const n=t.map(_S);dh.warn(`Firestore (${v0}): ${e}`,...n)}}function _S(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e="Unexpected state"){const t=`FIRESTORE (${v0}) INTERNAL ASSERTION FAILED: `+e;throw Ac(t),new Error(t)}function wn(e,t){e||Ye()}function Tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Sh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ACe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ii.UNAUTHENTICATED))}shutdown(){}}class kCe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RCe{constructor(t){this.t=t,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){wn(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new ju;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ju,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ju)}},0),s()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wn(typeof r.accessToken=="string"),new YY(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return wn(t===null||typeof t=="string"),new Ii(t)}}class PCe{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class MCe{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new PCe(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eO{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LCe{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,OY(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){wn(this.o===void 0);const r=o=>{o.error!=null&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Fe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new eO(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(wn(typeof n.token=="string"),this.R=n.token,new eO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DCe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=DCe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%62))}return r}}function Nt(e,t){return e<t?-1:e>t?1:0}function qg(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=-62135596800,nO=1e6;class qr{static now(){return qr.fromMillis(Date.now())}static fromDate(t){return qr.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*nO);return new qr(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<tO)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nO}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-tO;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(t){return new tt(t)}static min(){return new tt(new qr(0,0))}static max(){return new tt(new qr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="__name__";class Xa{constructor(t,n,r){n===void 0?n=0:n>t.length&&Ye(),r===void 0?r=t.length-n:r>t.length-n&&Ye(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Xa.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Xa?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const o=Xa.compareSegments(t.get(i),n.get(i));if(o!==0)return o}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Xa.isNumericId(t),i=Xa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Xa.extractNumericId(t).compare(Xa.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xu.fromString(t.substring(4,t.length-2))}}class zn extends Xa{construct(t,n,r){return new zn(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new zn(n)}static emptyPath(){return new zn([])}}const NCe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ci extends Xa{construct(t,n,r){return new Ci(t,n,r)}static isValidIdentifier(t){return NCe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ci.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rO}static keyField(){return new Ci([rO])}static fromServerFormat(t){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Ve(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ve(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ve(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ci(n)}static emptyPath(){return new Ci([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.path=t}static fromPath(t){return new Ze(zn.fromString(t))}static fromName(t){return new Ze(zn.fromString(t).popFirst(5))}static empty(){return new Ze(zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&zn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return zn.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ze(new zn(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=-1;function OCe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=tt.fromTimestamp(r===1e9?new qr(n+1,0):new qr(n,r));return new sd(i,Ze.empty(),t)}function FCe(e){return new sd(e.readTime,e.key,N2)}class sd{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new sd(tt.min(),Ze.empty(),N2)}static max(){return new sd(tt.max(),Ze.empty(),N2)}}function BCe(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ze.comparator(e.documentKey,t.documentKey),n!==0?n:Nt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zCe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(e){if(e.code!==ve.FAILED_PRECONDITION||e.message!==$Ce)throw e;Fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new be((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):be.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):be.reject(n)}static resolve(t){return new be((n,r)=>{n(t)})}static reject(t){return new be((n,r)=>{r(t)})}static waitFor(t){return new be((n,r)=>{let i=0,o=0,s=!1;t.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(t){let n=be.resolve(!1);for(const r of t)n=n.next(i=>i?be.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(t,n){return new be((r,i)=>{const o=t.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(t[c]).next(u=>{s[c]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(t,n){return new be((r,i)=>{const o=()=>{t()===!0?n().next(()=>{o()},i):r()};o()})}}function VCe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function E0(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}uv.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HCe=-1;function CU(e){return e==null}function _8(e){return e===0&&1/e==-1/0}function WCe(e){return typeof e=="number"&&Number.isInteger(e)&&!_8(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qY="";function GCe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=iO(t)),t=XCe(e.get(n),t);return iO(t)}function XCe(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const o=e.charAt(i);switch(o){case"\0":n+="";break;case qY:n+="";break;default:n+=o}}return n}function iO(e){return e+qY+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ch(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function QY(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,n){this.comparator=t,this.root=n||si.EMPTY}insert(t,n){return new hr(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,si.BLACK,null,null))}remove(t){return new hr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,si.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new V5(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new V5(this.root,t,this.comparator,!1)}getReverseIterator(){return new V5(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new V5(this.root,t,this.comparator,!0)}}class V5{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class si{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??si.RED,this.left=i??si.EMPTY,this.right=o??si.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,o){return new si(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ye();const t=this.left.check();if(t!==this.right.check())throw Ye();return t+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1;si.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye()}get value(){throw Ye()}get color(){throw Ye()}get left(){throw Ye()}get right(){throw Ye()}copy(t,n,r,i,o){return this}insert(t,n,r){return new si(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this.comparator=t,this.data=new hr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new sO(this.data.getIterator())}getIteratorFrom(t){return new sO(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Nr)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Nr(this.comparator);return n.data=t,n}}class sO{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t){this.fields=t,t.sort(Ci.comparator)}static empty(){return new vs([])}unionWith(t){let n=new Nr(Ci.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new vs(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return qg(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JY("Invalid base64 string: "+o):o}}(t);return new di(n)}static fromUint8Array(t){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(t);return new di(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}di.EMPTY_BYTE_STRING=new di("");const jCe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ad(e){if(wn(!!e),typeof e=="string"){let t=0;const n=jCe.exec(e);if(wn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:cr(e.seconds),nanos:cr(e.nanos)}}function cr(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ld(e){return typeof e=="string"?di.fromBase64String(e):di.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eZ="server_timestamp",tZ="__type__",nZ="__previous_value__",rZ="__local_write_time__";function wS(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[tZ])===null||n===void 0?void 0:n.stringValue)===eZ}function dv(e){const t=e.mapValue.fields[nZ];return wS(t)?dv(t):t}function O2(e){const t=ad(e.mapValue.fields[rZ].timestampValue);return new qr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KCe{constructor(t,n,r,i,o,s,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const w8="(default)";class F2{constructor(t,n){this.projectId=t,this.database=n||w8}static empty(){return new F2("","")}get isDefaultDatabase(){return this.database===w8}isEqual(t){return t instanceof F2&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iZ="__type__",oZ="__max__",H5={mapValue:{fields:{__type__:{stringValue:oZ}}}},sZ="__vector__",I8="value";function cd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wS(e)?4:ZCe(e)?9007199254740991:YCe(e)?10:11:Ye()}function gl(e,t){if(e===t)return!0;const n=cd(e);if(n!==cd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return O2(e).isEqual(O2(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ad(i.timestampValue),a=ad(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return ld(i.bytesValue).isEqual(ld(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return cr(i.geoPointValue.latitude)===cr(o.geoPointValue.latitude)&&cr(i.geoPointValue.longitude)===cr(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return cr(i.integerValue)===cr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=cr(i.doubleValue),a=cr(o.doubleValue);return s===a?_8(s)===_8(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return qg(e.arrayValue.values||[],t.arrayValue.values||[],gl);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(oO(s)!==oO(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!gl(s[l],a[l])))return!1;return!0}(e,t);default:return Ye()}}function B2(e,t){return(e.values||[]).find(n=>gl(n,t))!==void 0}function Qg(e,t){if(e===t)return 0;const n=cd(e),r=cd(t);if(n!==r)return Nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(e.booleanValue,t.booleanValue);case 2:return function(o,s){const a=cr(o.integerValue||o.doubleValue),l=cr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return aO(e.timestampValue,t.timestampValue);case 4:return aO(O2(e),O2(t));case 5:return Nt(e.stringValue,t.stringValue);case 6:return function(o,s){const a=ld(o),l=ld(s);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Nt(a[c],l[c]);if(u!==0)return u}return Nt(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){const a=Nt(cr(o.latitude),cr(s.latitude));return a!==0?a:Nt(cr(o.longitude),cr(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return lO(e.arrayValue,t.arrayValue);case 10:return function(o,s){var a,l,c,u;const d=o.fields||{},f=s.fields||{},g=(a=d[I8])===null||a===void 0?void 0:a.arrayValue,U=(l=f[I8])===null||l===void 0?void 0:l.arrayValue,b=Nt(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=U==null?void 0:U.values)===null||u===void 0?void 0:u.length)||0);return b!==0?b:lO(g,U)}(e.mapValue,t.mapValue);case 11:return function(o,s){if(o===H5.mapValue&&s===H5.mapValue)return 0;if(o===H5.mapValue)return 1;if(s===H5.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Nt(l[d],u[d]);if(f!==0)return f;const g=Qg(a[l[d]],c[u[d]]);if(g!==0)return g}return Nt(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Ye()}}function aO(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Nt(e,t);const n=ad(e),r=ad(t),i=Nt(n.seconds,r.seconds);return i!==0?i:Nt(n.nanos,r.nanos)}function lO(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Qg(n[i],r[i]);if(o)return o}return Nt(n.length,r.length)}function Jg(e){return S9(e)}function S9(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ad(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ld(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ze.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=S9(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${S9(n.fields[s])}`;return i+"}"}(e.mapValue):Ye()}function Bb(e){switch(cd(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=dv(e);return t?16+Bb(t):16;case 5:return 2*e.stringValue.length;case 6:return ld(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Bb(o),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return Ch(r.fields,(o,s)=>{i+=o.length+Bb(s)}),i}(e.mapValue);default:throw Ye()}}function C9(e){return!!e&&"integerValue"in e}function IS(e){return!!e&&"arrayValue"in e}function cO(e){return!!e&&"nullValue"in e}function uO(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function T4(e){return!!e&&"mapValue"in e}function YCe(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[iZ])===null||n===void 0?void 0:n.stringValue)===sZ}function Lm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ch(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Lm(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lm(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ZCe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===oZ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t){this.value=t}static empty(){return new go({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!T4(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Lm(n)}setAll(t){let n=Ci.emptyPath(),r={},i=[];t.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Lm(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(t){const n=this.field(t.popLast());T4(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return gl(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];T4(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Ch(n,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new go(Lm(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,n,r,i,o,s,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new Xr(t,0,tt.min(),tt.min(),tt.min(),go.empty(),0)}static newFoundDocument(t,n,r,i){return new Xr(t,1,n,tt.min(),r,i,0)}static newNoDocument(t,n){return new Xr(t,2,n,tt.min(),tt.min(),go.empty(),0)}static newUnknownDocument(t,n){return new Xr(t,3,n,tt.min(),tt.min(),go.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=go.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=go.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(t,n){this.position=t,this.inclusive=n}}function dO(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(o.field.isKeyField()?r=Ze.comparator(Ze.fromName(s.referenceValue),n.key):r=Qg(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function fO(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!gl(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(t,n="asc"){this.field=t,this.dir=n}}function qCe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{}class Lr extends aZ{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new JCe(t,n,r):n==="array-contains"?new nAe(t,r):n==="in"?new rAe(t,r):n==="not-in"?new iAe(t,r):n==="array-contains-any"?new oAe(t,r):new Lr(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new eAe(t,r):new tAe(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qg(n,this.value)):n!==null&&cd(this.value)===cd(n)&&this.matchesComparison(Qg(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pl extends aZ{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new pl(t,n)}matches(t){return lZ(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function lZ(e){return e.op==="and"}function cZ(e){return QCe(e)&&lZ(e)}function QCe(e){for(const t of e.filters)if(t instanceof pl)return!1;return!0}function A9(e){if(e instanceof Lr)return e.field.canonicalString()+e.op.toString()+Jg(e.value);if(cZ(e))return e.filters.map(t=>A9(t)).join(",");{const t=e.filters.map(n=>A9(n)).join(",");return`${e.op}(${t})`}}function uZ(e,t){return e instanceof Lr?function(r,i){return i instanceof Lr&&r.op===i.op&&r.field.isEqual(i.field)&&gl(r.value,i.value)}(e,t):e instanceof pl?function(r,i){return i instanceof pl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&uZ(s,i.filters[a]),!0):!1}(e,t):void Ye()}function dZ(e){return e instanceof Lr?function(n){return`${n.field.canonicalString()} ${n.op} ${Jg(n.value)}`}(e):e instanceof pl?function(n){return n.op.toString()+" {"+n.getFilters().map(dZ).join(" ,")+"}"}(e):"Filter"}class JCe extends Lr{constructor(t,n,r){super(t,n,r),this.key=Ze.fromName(r.referenceValue)}matches(t){const n=Ze.comparator(t.key,this.key);return this.matchesComparison(n)}}class eAe extends Lr{constructor(t,n){super(t,"in",n),this.keys=fZ("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class tAe extends Lr{constructor(t,n){super(t,"not-in",n),this.keys=fZ("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function fZ(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class nAe extends Lr{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return IS(n)&&B2(n.arrayValue,this.value)}}class rAe extends Lr{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&B2(this.value.arrayValue,n)}}class iAe extends Lr{constructor(t,n){super(t,"not-in",n)}matches(t){if(B2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!B2(this.value.arrayValue,n)}}class oAe extends Lr{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!IS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>B2(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sAe{constructor(t,n=null,r=[],i=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}}function hO(e,t=null,n=[],r=[],i=null,o=null,s=null){return new sAe(e,t,n,r,i,o,s)}function TS(e){const t=Tt(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>A9(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),CU(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Jg(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Jg(r)).join(",")),t.le=n}return t.le}function xS(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qCe(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!uZ(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fO(e.startAt,t.startAt)&&fO(e.endAt,t.endAt)}function k9(e){return Ze.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function aAe(e,t,n,r,i,o,s,a){return new fv(e,t,n,r,i,o,s,a)}function SS(e){return new fv(e)}function gO(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function lAe(e){return e.collectionGroup!==null}function Dm(e){const t=Tt(e);if(t.he===null){t.he=[];const n=new Set;for(const o of t.explicitOrderBy)t.he.push(o),n.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Nr(Ci.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.he.push(new x8(o,r))}),n.has(Ci.keyField().canonicalString())||t.he.push(new x8(Ci.keyField(),r))}return t.he}function ol(e){const t=Tt(e);return t.Pe||(t.Pe=cAe(t,Dm(e))),t.Pe}function cAe(e,t){if(e.limitType==="F")return hO(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new x8(i.field,o)});const n=e.endAt?new T8(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new T8(e.startAt.position,e.startAt.inclusive):null;return hO(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function R9(e,t,n){return new fv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hv(e,t){return xS(ol(e),ol(t))&&e.limitType===t.limitType}function hZ(e){return`${TS(ol(e))}|lt:${e.limitType}`}function T1(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>dZ(i)).join(", ")}]`),CU(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jg(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jg(i)).join(",")),`Target(${r})`}(ol(e))}; limitType=${e.limitType})`}function gv(e,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ze.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(const o of Dm(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=dO(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,Dm(r),i)||r.endAt&&!function(s,a,l){const c=dO(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,Dm(r),i))}(e,t)}function uAe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gZ(e){return(t,n)=>{let r=!1;for(const i of Dm(e)){const o=dAe(i,t,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function dAe(e,t,n){const r=e.field.isKeyField()?Ze.comparator(t.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?Qg(l,c):Ye()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ch(this.inner,(n,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return QY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fAe=new hr(Ze.comparator);function ud(){return fAe}const pZ=new hr(Ze.comparator);function tm(...e){let t=pZ;for(const n of e)t=t.insert(n.key,n);return t}function hAe(e){let t=pZ;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function _f(){return Nm()}function mZ(){return Nm()}function Nm(){return new Ah(e=>e.toString(),(e,t)=>e.isEqual(t))}const gAe=new Nr(Ze.comparator);function zt(...e){let t=gAe;for(const n of e)t=t.add(n);return t}const pAe=new Nr(Nt);function mAe(){return pAe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_8(t)?"-0":t}}function UZ(e){return{integerValue:""+e}}function UAe(e,t){return WCe(t)?UZ(t):CS(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this._=void 0}}function bAe(e,t,n){return e instanceof S8?function(i,o){const s={fields:{[tZ]:{stringValue:eZ},[rZ]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wS(o)&&(o=dv(o)),o&&(s.fields[nZ]=o),{mapValue:s}}(n,t):e instanceof $2?bZ(e,t):e instanceof z2?yZ(e,t):function(i,o){const s=vAe(i,o),a=pO(s)+pO(i.Ie);return C9(s)&&C9(i.Ie)?UZ(a):CS(i.serializer,a)}(e,t)}function yAe(e,t,n){return e instanceof $2?bZ(e,t):e instanceof z2?yZ(e,t):n}function vAe(e,t){return e instanceof C8?function(r){return C9(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class S8 extends pv{}class $2 extends pv{constructor(t){super(),this.elements=t}}function bZ(e,t){const n=vZ(t);for(const r of e.elements)n.some(i=>gl(i,r))||n.push(r);return{arrayValue:{values:n}}}class z2 extends pv{constructor(t){super(),this.elements=t}}function yZ(e,t){let n=vZ(t);for(const r of e.elements)n=n.filter(i=>!gl(i,r));return{arrayValue:{values:n}}}class C8 extends pv{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function pO(e){return cr(e.integerValue||e.doubleValue)}function vZ(e){return IS(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function EAe(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof $2&&i instanceof $2||r instanceof z2&&i instanceof z2?qg(r.elements,i.elements,gl):r instanceof C8&&i instanceof C8?gl(r.Ie,i.Ie):r instanceof S8&&i instanceof S8}(e.transform,t.transform)}class gs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new gs}static exists(t){return new gs(void 0,t)}static updateTime(t){return new gs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $b(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class mv{}function EZ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new AS(e.key,gs.none()):new AU(e.key,e.data,gs.none());{const n=e.data,r=go.empty();let i=new Nr(Ci.comparator);for(let o of t.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new kh(e.key,r,new vs(i.toArray()),gs.none())}}function _Ae(e,t,n){e instanceof AU?function(i,o,s){const a=i.value.clone(),l=UO(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof kh?function(i,o,s){if(!$b(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=UO(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(_Z(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(e,t,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function Om(e,t,n,r){return e instanceof AU?function(o,s,a,l){if(!$b(o.precondition,s))return a;const c=o.value.clone(),u=bO(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof kh?function(o,s,a,l){if(!$b(o.precondition,s))return a;const c=bO(o.fieldTransforms,l,s),u=s.data;return u.setAll(_Z(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(e,t,n,r):function(o,s,a){return $b(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(e,t,n)}function mO(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qg(r,i,(o,s)=>EAe(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class AU extends mv{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kh extends mv{constructor(t,n,r,i,o=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function _Z(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function UO(e,t,n){const r=new Map;wn(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,yAe(s,a,n[i]))}return r}function bO(e,t,n){const r=new Map;for(const i of e){const o=i.transform,s=n.data.field(i.field);r.set(i.field,bAe(o,s,t))}return r}class AS extends mv{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wZ extends mv{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wAe{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&_Ae(o,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Om(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Om(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=mZ();return this.mutations.forEach(i=>{const o=t.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=EZ(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(tt.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zt())}isEqual(t){return this.batchId===t.batchId&&qg(this.mutations,t.mutations,(n,r)=>mO(n,r))&&qg(this.baseMutations,t.baseMutations,(n,r)=>mO(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IAe{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TAe{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var br,Pt;function xAe(e){switch(e){case ve.OK:return Ye();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Ye()}}function IZ(e){if(e===void 0)return Ac("GRPC error has no .code"),ve.UNKNOWN;switch(e){case br.OK:return ve.OK;case br.CANCELLED:return ve.CANCELLED;case br.UNKNOWN:return ve.UNKNOWN;case br.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case br.INTERNAL:return ve.INTERNAL;case br.UNAVAILABLE:return ve.UNAVAILABLE;case br.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case br.NOT_FOUND:return ve.NOT_FOUND;case br.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case br.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case br.ABORTED:return ve.ABORTED;case br.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case br.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case br.DATA_LOSS:return ve.DATA_LOSS;default:return Ye()}}(Pt=br||(br={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SAe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CAe=new Xu([4294967295,4294967295],0);function yO(e){const t=SAe().encode(e),n=new HY;return n.update(t),new Uint8Array(n.digest())}function vO(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Xu([n,r],0),new Xu([i,o],0)]}class kS{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nm(`Invalid padding: ${n}`);if(r<0)throw new nm(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new nm(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new nm(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=Xu.fromNumber(this.Ee)}Ae(t,n,r){let i=t.add(n.multiply(Xu.fromNumber(r)));return i.compare(CAe)===1&&(i=new Xu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=yO(t),[r,i]=vO(n);for(let o=0;o<this.hashCount;o++){const s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new kS(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(t){if(this.Ee===0)return;const n=yO(t),[r,i]=vO(n);for(let o=0;o<this.hashCount;o++){const s=this.Ae(r,i,o);this.Ve(s)}}Ve(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,kU.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Uv(tt.min(),i,new hr(Nt),ud(),zt())}}class kU{constructor(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new kU(r,n,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t,n,r,i){this.me=t,this.removedTargetIds=n,this.key=r,this.fe=i}}class TZ{constructor(t,n){this.targetId=t,this.ge=n}}class xZ{constructor(t,n,r=di.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class EO{constructor(){this.pe=0,this.ye=_O(),this.we=di.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=zt(),n=zt(),r=zt();return this.ye.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ye()}}),new kU(this.we,this.Se,t,n,r)}Me(){this.be=!1,this.ye=_O()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,wn(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class AAe{constructor(t){this.ke=t,this.qe=new Map,this.Qe=ud(),this.$e=W5(),this.Ke=W5(),this.Ue=new hr(Nt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const r=this.He(n);switch(t.state){case 0:this.Je(n)&&r.Ce(t.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(t.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(t.resumeToken));break;default:Ye()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((r,i)=>{this.Je(i)&&n(i)})}Ze(t){const n=t.targetId,r=t.ge.count,i=this.Xe(n);if(i){const o=i.target;if(k9(o))if(r===0){const s=new Ze(o.path);this.ze(n,s,Xr.newNoDocument(s,tt.min()))}else wn(r===1);else{const s=this.et(n);if(s!==r){const a=this.tt(t),l=a?this.nt(a,t,s):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=ld(r).toUint8Array()}catch(l){if(l instanceof JY)return Zg("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kS(s,i,o)}catch(l){return Zg(l instanceof nm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,n,r){return n.ge.count===r-this.st(t,n.targetId)?0:2}st(t,n){const r=this.ke.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.ze(n,o,null),i++)}),i}ot(t){const n=new Map;this.qe.forEach((o,s)=>{const a=this.Xe(s);if(a){if(o.current&&k9(a.target)){const l=new Ze(a.target.path);this._t(l).has(s)||this.ut(s,l)||this.ze(s,l,Xr.newNoDocument(l,t))}o.ve&&(n.set(s,o.Fe()),o.Me())}});let r=zt();this.Ke.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(t));const i=new Uv(t,n,this.Ue,this.Qe,r);return this.Qe=ud(),this.$e=W5(),this.Ke=W5(),this.Ue=new hr(Nt),i}Ge(t,n){if(!this.Je(t))return;const r=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,r){if(!this.Je(t))return;const i=this.He(t);this.ut(t,n)?i.xe(n,1):i.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new EO,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new Nr(Nt),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Nr(Nt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||Fe("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new EO),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function W5(){return new hr(Ze.comparator)}function _O(){return new hr(Ze.comparator)}const kAe={asc:"ASCENDING",desc:"DESCENDING"},RAe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PAe={and:"AND",or:"OR"};class MAe{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function P9(e,t){return e.useProto3Json||CU(t)?t:{value:t}}function A8(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function SZ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function LAe(e,t){return A8(e,t.toTimestamp())}function cc(e){return wn(!!e),tt.fromTimestamp(function(n){const r=ad(n);return new qr(r.seconds,r.nanos)}(e))}function RS(e,t){return M9(e,t).canonicalString()}function M9(e,t){const n=function(i){return new zn(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function CZ(e){const t=zn.fromString(e);return wn(MZ(t)),t}function k8(e,t){return RS(e.databaseId,t.path)}function Fm(e,t){const n=CZ(t);if(n.get(1)!==e.databaseId.projectId)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ze(kZ(n))}function AZ(e,t){return RS(e.databaseId,t)}function DAe(e){const t=CZ(e);return t.length===4?zn.emptyPath():kZ(t)}function wO(e){return new zn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kZ(e){return wn(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function IO(e,t,n){return{name:k8(e,t),fields:n.value.mapValue.fields}}function NAe(e,t){return"found"in t?function(r,i){wn(!!i.found),i.found.name,i.found.updateTime;const o=Fm(r,i.found.name),s=cc(i.found.updateTime),a=i.found.createTime?cc(i.found.createTime):tt.min(),l=new go({mapValue:{fields:i.found.fields}});return Xr.newFoundDocument(o,s,a,l)}(e,t):"missing"in t?function(r,i){wn(!!i.missing),wn(!!i.readTime);const o=Fm(r,i.missing),s=cc(i.readTime);return Xr.newNoDocument(o,s)}(e,t):Ye()}function OAe(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ye()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(wn(u===void 0||typeof u=="string"),di.fromBase64String(u||"")):(wn(u===void 0||u instanceof Buffer||u instanceof Uint8Array),di.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(c){const u=c.code===void 0?ve.UNKNOWN:IZ(c.code);return new Ve(u,c.message||"")}(s);n=new xZ(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fm(e,r.document.name),o=cc(r.document.updateTime),s=r.document.createTime?cc(r.document.createTime):tt.min(),a=new go({mapValue:{fields:r.document.fields}}),l=Xr.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new zb(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Fm(e,r.document),o=r.readTime?cc(r.readTime):tt.min(),s=Xr.newNoDocument(i,o),a=r.removedTargetIds||[];n=new zb([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Fm(e,r.document),o=r.removedTargetIds||[];n=new zb([],o,i,null)}else{if(!("filter"in t))return Ye();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new TAe(i,o),a=r.targetId;n=new TZ(a,s)}}return n}function FAe(e,t){let n;if(t instanceof AU)n={update:IO(e,t.key,t.value)};else if(t instanceof AS)n={delete:k8(e,t.key)};else if(t instanceof kh)n={update:IO(e,t.key,t.data),updateMask:XAe(t.fieldMask)};else{if(!(t instanceof wZ))return Ye();n={verify:k8(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof S8)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $2)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof z2)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof C8)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Ye()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:LAe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ye()}(e,t.precondition)),n}function BAe(e,t){return{documents:[AZ(e,t.path)]}}function $Ae(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AZ(e,i);const o=function(c){if(c.length!==0)return PZ(pl.create(c,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:x1(f.field),direction:HAe(f.dir)}}(u))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=P9(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:n,parent:i}}function zAe(e){let t=DAe(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wn(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:t=t.child(u.collectionId)}let o=[];n.where&&(o=function(d){const f=RZ(d);return f instanceof pl&&cZ(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(U){return new x8(S1(U.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,CU(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new T8(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new T8(g,f)}(n.endAt)),aAe(t,i,s,o,a,"F",l,c)}function VAe(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function RZ(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=S1(n.unaryFilter.field);return Lr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=S1(n.unaryFilter.field);return Lr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=S1(n.unaryFilter.field);return Lr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=S1(n.unaryFilter.field);return Lr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ye()}}(e):e.fieldFilter!==void 0?function(n){return Lr.create(S1(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ye()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return pl.create(n.compositeFilter.filters.map(r=>RZ(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ye()}}(n.compositeFilter.op))}(e):Ye()}function HAe(e){return kAe[e]}function WAe(e){return RAe[e]}function GAe(e){return PAe[e]}function x1(e){return{fieldPath:e.canonicalString()}}function S1(e){return Ci.fromServerFormat(e.fieldPath)}function PZ(e){return e instanceof Lr?function(n){if(n.op==="=="){if(uO(n.value))return{unaryFilter:{field:x1(n.field),op:"IS_NAN"}};if(cO(n.value))return{unaryFilter:{field:x1(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uO(n.value))return{unaryFilter:{field:x1(n.field),op:"IS_NOT_NAN"}};if(cO(n.value))return{unaryFilter:{field:x1(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:x1(n.field),op:WAe(n.op),value:n.value}}}(e):e instanceof pl?function(n){const r=n.getFilters().map(i=>PZ(i));return r.length===1?r[0]:{compositeFilter:{op:GAe(n.op),filters:r}}}(e):Ye()}function XAe(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function MZ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t,n,r,i,o=tt.min(),s=tt.min(),a=di.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Cu(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jAe{constructor(t){this.Tt=t}}function KAe(e){const t=zAe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?R9(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YAe{constructor(){this.Tn=new ZAe}addToCollectionParentIndex(t,n){return this.Tn.add(n),be.resolve()}getCollectionParents(t,n){return be.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return be.resolve()}deleteFieldIndex(t,n){return be.resolve()}deleteAllFieldIndexes(t){return be.resolve()}createTargetIndexes(t,n){return be.resolve()}getDocumentsMatchingTarget(t,n){return be.resolve(null)}getIndexType(t,n){return be.resolve(0)}getFieldIndexes(t,n){return be.resolve([])}getNextCollectionGroupToUpdate(t){return be.resolve(null)}getMinOffset(t,n){return be.resolve(sd.min())}getMinOffsetFromCollectionGroup(t,n){return be.resolve(sd.min())}updateCollectionGroup(t,n,r){return be.resolve()}updateIndexEntries(t,n){return be.resolve()}}class ZAe{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Nr(zn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Nr(zn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LZ=41943040;class uo{static withCacheSize(t){return new uo(t,uo.DEFAULT_COLLECTION_PERCENTILE,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uo.DEFAULT_COLLECTION_PERCENTILE=10,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uo.DEFAULT=new uo(LZ,uo.DEFAULT_COLLECTION_PERCENTILE,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uo.DISABLED=new uo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new e0(0)}static Un(){return new e0(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="LruGarbageCollector",qAe=1048576;function SO([e,t],[n,r]){const i=Nt(e,n);return i===0?Nt(t,r):i}class QAe{constructor(t){this.Hn=t,this.buffer=new Nr(SO),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();SO(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JAe{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Fe(xO,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){E0(n)?Fe(xO,"Ignoring IndexedDB error during garbage collection: ",n):await cv(n)}await this.er(3e5)})}}class eke{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return be.resolve(uv.ae);const r=new QAe(n);return this.tr.forEachTarget(t,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(t,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.tr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(TO)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TO):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let r,i,o,s,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(t,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(t,r,n))).next(d=>(o=d,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(d=>(c=Date.now(),I1()<=Lt.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}}function tke(e,t){return new eke(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nke{constructor(){this.changes=new Ah(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Xr.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?be.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rke{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ike{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Om(r.mutation,i,vs.empty(),qr.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zt()){const i=_f();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(o=>{let s=tm();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,n){const r=_f();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zt()))}populateOverlays(t,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(t,n,r,i){let o=ud();const s=Nm(),a=function(){return Nm()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof kh)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),Om(u.mutation,c,u.mutation.getFieldMask(),qr.now())):s.set(c.key,vs.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new rke(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Nm();let i=new hr((s,a)=>s-a),o=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||vs.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||zt()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=mZ();u.forEach(f=>{if(!o.has(f)){const g=EZ(n.get(f),r.get(f));g!==null&&d.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(t,c,d))}return be.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(s){return Ze.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):lAe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-o.size):be.resolve(_f());let a=N2,l=o;return s.next(c=>be.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?be.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,o)).next(()=>this.computeViews(t,l,c,zt())).next(u=>({batchId:a,changes:hAe(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ze(n)).next(r=>{let i=tm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const o=n.collectionGroup;let s=tm();return this.indexManager.getCollectionParents(t,o).next(a=>be.forEach(a,l=>{const c=function(d,f){return new fv(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,c,r,i).next(u=>{u.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,Xr.newInvalidDocument(u)))});let a=tm();return s.forEach((l,c)=>{const u=o.get(l);u!==void 0&&Om(u.mutation,c,vs.empty(),qr.now()),gv(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oke{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return be.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cc(i.createTime)}}(n)),be.resolve()}getNamedQuery(t,n){return be.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(i){return{name:i.name,query:KAe(i.bundledQuery),readTime:cc(i.readTime)}}(n)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ske{constructor(){this.overlays=new hr(Ze.comparator),this.Rr=new Map}getOverlay(t,n){return be.resolve(this.overlays.get(n))}getOverlays(t,n){const r=_f();return be.forEach(n,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,o)=>{this.Et(t,n,o)}),be.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),be.resolve()}getOverlaysForCollection(t,n,r){const i=_f(),o=n.length+1,s=new Ze(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return be.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let o=new hr((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=o.get(c.largestBatchId);u===null&&(u=_f(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=_f(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return be.resolve(a)}Et(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new IAe(n,r));let o=this.Rr.get(n);o===void 0&&(o=zt(),this.Rr.set(n,o)),this.Rr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ake{constructor(){this.sessionToken=di.EMPTY_BYTE_STRING}getSessionToken(t){return be.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.Vr=new Nr(Hr.mr),this.gr=new Nr(Hr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const r=new Hr(t,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.wr(new Hr(t,n))}Sr(t,n){t.forEach(r=>this.removeReference(r,n))}br(t){const n=new Ze(new zn([])),r=new Hr(n,t),i=new Hr(n,t+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Ze(new zn([])),r=new Hr(n,t),i=new Hr(n,t+1);let o=zt();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(t){const n=new Hr(t,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Hr{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Ze.comparator(t.key,n.key)||Nt(t.Cr,n.Cr)}static pr(t,n){return Nt(t.Cr,n.Cr)||Ze.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lke{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Nr(Hr.mr)}checkEmpty(t){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new wAe(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Mr=this.Mr.add(new Hr(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return be.resolve(s)}lookupMutationBatch(t,n){return be.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Nr(r),o=i<0?0:i;return be.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?HCe:this.Fr-1)}getAllMutationBatches(t){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Hr(n,0),i=new Hr(n,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{const a=this.Or(s.Cr);o.push(a)}),be.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Nr(Nt);return n.forEach(i=>{const o=new Hr(i,0),s=new Hr(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),be.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let o=r;Ze.isDocumentKey(o)||(o=o.child(""));const s=new Hr(new Ze(o),0);let a=new Nr(Nt);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Cr)),!0)},s),be.resolve(this.Br(a))}Br(t){const n=[];return t.forEach(r=>{const i=this.Or(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){wn(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return be.forEach(n.mutations,i=>{const o=new Hr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Mr=r})}qn(t){}containsKey(t,n){const r=new Hr(n,0),i=this.Mr.firstAfterOrEqual(r);return be.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,be.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cke{constructor(t){this.kr=t,this.docs=function(){return new hr(Ze.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return be.resolve(r?r.document.mutableCopy():Xr.newInvalidDocument(n))}getEntries(t,n){let r=ud();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xr.newInvalidDocument(i))}),be.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let o=ud();const s=n.path,a=new Ze(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||BCe(FCe(u),r)<=0||(i.has(u.key)||gv(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return be.resolve(o)}getAllFromCollectionGroup(t,n,r,i){Ye()}qr(t,n){return be.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new uke(this)}getSize(t){return be.resolve(this.size)}}class uke extends nke{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(r)}),be.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dke{constructor(t){this.persistence=t,this.Qr=new Ah(n=>TS(n),xS),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new PS,this.targetCount=0,this.Ur=e0.Kn()}forEachTarget(t,n){return this.Qr.forEach((r,i)=>n(i)),be.resolve()}getLastRemoteSnapshotVersion(t){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return be.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),be.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new e0(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,be.resolve()}updateTargetData(t,n){return this.zn(n),be.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(t,n,r){let i=0;const o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),be.waitFor(o).next(()=>i)}getTargetCount(t){return be.resolve(this.targetCount)}getTargetData(t,n){const r=this.Qr.get(n)||null;return be.resolve(r)}addMatchingKeys(t,n,r){return this.Kr.yr(n,r),be.resolve()}removeMatchingKeys(t,n,r){this.Kr.Sr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(t,s))}),be.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Kr.br(n),be.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Kr.vr(n);return be.resolve(r)}containsKey(t,n){return be.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZ{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new uv(0),this.zr=!1,this.zr=!0,this.jr=new ake,this.referenceDelegate=t(this),this.Hr=new dke(this),this.indexManager=new YAe,this.remoteDocumentCache=function(i){return new cke(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new jAe(n),this.Yr=new oke(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new ske,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Wr[t.toKey()];return r||(r=new lke(n,this.referenceDelegate),this.Wr[t.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,r){Fe("MemoryPersistence","Starting transaction:",t);const i=new fke(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(t,n){return be.or(Object.values(this.Wr).map(r=>()=>r.containsKey(t,n)))}}class fke extends zCe{constructor(t){super(),this.currentSequenceNumber=t}}class MS{constructor(t){this.persistence=t,this.ti=new PS,this.ni=null}static ri(t){return new MS(t)}get ii(){if(this.ni)return this.ni;throw Ye()}addReference(t,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),be.resolve()}removeReference(t,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),be.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),be.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.ii,r=>{const i=Ze.fromPath(r);return this.si(t,i).next(o=>{o||n.removeEntry(i,tt.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return be.or([()=>be.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class R8{constructor(t,n){this.persistence=t,this.oi=new Ah(r=>GCe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=tke(this,n)}static ri(t,n){return new R8(t,n)}Zr(){}Xr(t){return be.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}sr(t){let n=0;return this.rr(t,r=>{n++}).next(()=>n)}rr(t,n){return be.forEach(this.oi,(r,i)=>this.ar(t,r,i).next(o=>o?be.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(t,s=>this.ar(t,s,n).next(a=>{a||(r++,o.removeEntry(s,tt.min()))})).next(()=>o.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),be.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.oi.set(r,t.currentSequenceNumber),be.resolve()}removeReference(t,n,r){return this.oi.set(r,t.currentSequenceNumber),be.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),be.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Bb(t.data.value)),n}ar(t,n,r){return be.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.oi.get(n);return be.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Hi=r,this.Ji=i}static Yi(t,n){let r=zt(),i=zt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new LS(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hke{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gke{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return hSe()?8:VCe(dSe())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,r,i){const o={result:null};return this.rs(t,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(t,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new hke;return this._s(t,n,s).next(a=>{if(o.result=a,this.Xi)return this.us(t,n,s,a.size)})}).next(()=>o.result)}us(t,n,r,i){return r.documentReadCount<this.es?(I1()<=Lt.DEBUG&&Fe("QueryEngine","SDK will not create cache indexes for query:",T1(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),be.resolve()):(I1()<=Lt.DEBUG&&Fe("QueryEngine","Query:",T1(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(I1()<=Lt.DEBUG&&Fe("QueryEngine","The SDK decides to create cache indexes for query:",T1(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ol(n))):be.resolve())}rs(t,n){if(gO(n))return be.resolve(null);let r=ol(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=R9(n,null,"F"),r=ol(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const s=zt(...o);return this.ns.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.cs(n,a);return this.ls(n,c,s,l.readTime)?this.rs(t,R9(n,null,"F")):this.hs(t,c,n,l)}))})))}ss(t,n,r,i){return gO(n)||i.isEqual(tt.min())?be.resolve(null):this.ns.getDocuments(t,r).next(o=>{const s=this.cs(n,o);return this.ls(n,s,r,i)?be.resolve(null):(I1()<=Lt.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),T1(n)),this.hs(t,s,n,OCe(i,N2)).next(a=>a))})}cs(t,n){let r=new Nr(gZ(t));return n.forEach((i,o)=>{gv(t,o)&&(r=r.add(o))}),r}ls(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(t,n,r){return I1()<=Lt.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",T1(n)),this.ns.getDocumentsMatchingQuery(t,n,sd.min(),r)}hs(t,n,r,i){return this.ns.getDocumentsMatchingQuery(t,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="LocalStore",pke=3e8;class mke{constructor(t,n,r,i){this.persistence=t,this.Ps=n,this.serializer=i,this.Ts=new hr(Nt),this.Is=new Ah(o=>TS(o),xS),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ike(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function Uke(e,t,n,r){return new mke(e,t,n,r)}async function NZ(e,t){const n=Tt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.As(t),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=zt();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Rs:c,removedBatchIds:s,addedBatchIds:a}))})})}function OZ(e){const t=Tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function bke(e,t){const n=Tt(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const a=[];t.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(o,u.addedDocuments,d)));let g=f.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(d)!==null?g=g.withResumeToken(di.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(d,g),function(b,v,_){return b.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=pke?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,g,u)&&a.push(n.Hr.updateTargetData(o,g))});let l=ud(),c=zt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(yke(o,s,t.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!r.isEqual(tt.min())){const u=n.Hr.getLastRemoteSnapshotVersion(o).next(d=>n.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return be.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.Ts=i,o))}function yke(e,t,n){let r=zt(),i=zt();return n.forEach(o=>r=r.add(o)),t.getEntries(e,r).next(o=>{let s=ud();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(tt.min())?(t.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),s=s.insert(a,l)):Fe(DS,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:s,fs:i}})}function vke(e,t){const n=Tt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Hr.getTargetData(r,t).next(o=>o?(i=o,be.resolve(i)):n.Hr.allocateTargetId(r).next(s=>(i=new Cu(t,s,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(t,r.targetId)),r})}async function L9(e,t,n){const r=Tt(e),i=r.Ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!E0(s))throw s;Fe(DS,`Failed to update sequence numbers for target ${t}: ${s}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function CO(e,t,n){const r=Tt(e);let i=tt.min(),o=zt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const d=Tt(l),f=d.Is.get(u);return f!==void 0?be.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(r,s,ol(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,t,n?i:tt.min(),n?o:zt())).next(a=>(Eke(r,uAe(t),a),{documents:a,gs:o})))}function Eke(e,t,n){let r=e.Es.get(t)||tt.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),e.Es.set(t,r)}class AO{constructor(){this.activeTargetIds=mAe()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _ke{constructor(){this.ho=new AO,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,r){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new AO,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wke{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="ConnectivityMonitor";class RO{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Fe(kO,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Fe(kO,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G5=null;function D9(){return G5===null?G5=function(){return 268435456+Math.round(2147483648*Math.random())}():G5++,"0x"+G5.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="RestConnection",Ike={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tke{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===w8?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(t,n,r,i,o){const s=D9(),a=this.bo(t,n.toUriEncodedString());Fe(x4,`Sending RPC '${t}' ${s}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,o),this.vo(t,a,l,r).then(c=>(Fe(x4,`Received RPC '${t}' ${s}: `,c),c),c=>{throw Zg(x4,`RPC '${t}' ${s} failed with error: `,c,"url: ",a,"request:",r),c})}Co(t,n,r,i,o,s){return this.So(t,n,r,i,o)}Do(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+v0}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>t[o]=i),r&&r.headers.forEach((i,o)=>t[o]=i)}bo(t,n){const r=Ike[t];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xke{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="WebChannelConnection";class Ske extends Tke{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,r,i){const o=D9();return new Promise((s,a)=>{const l=new WY;l.setWithCredentials(!0),l.listenOnce(GY.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fb.NO_ERROR:const u=l.getResponseJson();Fe(vi,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(u)),s(u);break;case Fb.TIMEOUT:Fe(vi,`RPC '${t}' ${o} timed out`),a(new Ve(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Fb.HTTP_ERROR:const d=l.getStatus();if(Fe(vi,`RPC '${t}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const U=function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(_)>=0?_:ve.UNKNOWN}(g.status);a(new Ve(U,g.message))}else a(new Ve(ve.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ve(ve.UNAVAILABLE,"Connection failed."));break;default:Ye()}}finally{Fe(vi,`RPC '${t}' ${o} completed.`)}});const c=JSON.stringify(i);Fe(vi,`RPC '${t}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Wo(t,n,r){const i=D9(),o=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=KY(),a=jY(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=o.join("");Fe(vi,`Creating RPC '${t}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);let f=!1,g=!1;const U=new xke({Fo:v=>{g?Fe(vi,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(f||(Fe(vi,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),Fe(vi,`RPC '${t}' stream ${i} sending:`,v),d.send(v))},Mo:()=>d.close()}),b=(v,_,E)=>{v.listen(_,w=>{try{E(w)}catch(T){setTimeout(()=>{throw T},0)}})};return b(d,em.EventType.OPEN,()=>{g||(Fe(vi,`RPC '${t}' stream ${i} transport opened.`),U.Qo())}),b(d,em.EventType.CLOSE,()=>{g||(g=!0,Fe(vi,`RPC '${t}' stream ${i} transport closed`),U.Ko())}),b(d,em.EventType.ERROR,v=>{g||(g=!0,Zg(vi,`RPC '${t}' stream ${i} transport errored:`,v),U.Ko(new Ve(ve.UNAVAILABLE,"The operation could not be completed")))}),b(d,em.EventType.MESSAGE,v=>{var _;if(!g){const E=v.data[0];wn(!!E);const w=E,T=(w==null?void 0:w.error)||((_=w[0])===null||_===void 0?void 0:_.error);if(T){Fe(vi,`RPC '${t}' stream ${i} received error:`,T);const A=T.status;let M=function(C){const R=br[C];if(R!==void 0)return IZ(R)}(A),S=T.message;M===void 0&&(M=ve.INTERNAL,S="Unknown error status: "+A+" with message "+T.message),g=!0,U.Ko(new Ve(M,S)),d.close()}else Fe(vi,`RPC '${t}' stream ${i} received:`,E),U.Uo(E)}}),b(a,XY.STAT_EVENT,v=>{v.stat===x9.PROXY?Fe(vi,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===x9.NOPROXY&&Fe(vi,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{U.$o()},0),U}}function S4(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(e){return new MAe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(t,n,r=1e3,i=1.5,o=6e4){this.Ti=t,this.timerId=n,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="PersistentStream";class Cke{constructor(t,n,r,i,o,s,a,l){this.Ti=t,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new NS(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Ac(n.toString()),Ac("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===n&&this.V_(r,i)},r=>{t(()=>{const i=new Ve(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(t,n){const r=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Fe(PO,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(Fe(PO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ake extends Cke{constructor(t,n,r,i,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=OAe(this.serializer,t),r=function(o){if(!("targetChange"in o))return tt.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?tt.min():s.readTime?cc(s.readTime):tt.min()}(t);return this.listener.p_(n,r)}y_(t){const n={};n.database=wO(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=k9(l)?{documents:BAe(o,l)}:{query:$Ae(o,l).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=SZ(o,s.resumeToken);const c=P9(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(tt.min())>0){a.readTime=A8(o,s.snapshotVersion.toTimestamp());const c=P9(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=VAe(this.serializer,t);r&&(n.labels=r),this.I_(n)}w_(t){const n={};n.database=wO(this.serializer),n.removeTarget=t,this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kke{}class Rke extends kke{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(t,M9(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(ve.UNKNOWN,o.toString())})}Co(t,n,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(t,M9(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(ve.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Pke{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ac(n),this.N_=!1):Fe("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="RemoteStore";class Mke{constructor(t,n,r,i,o){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(async()=>{PU(this)&&(Fe(t0,"Restarting streams for network reachability change."),await async function(l){const c=Tt(l);c.W_.add(4),await RU(c),c.j_.set("Unknown"),c.W_.delete(4),await yv(c)}(this))})}),this.j_=new Pke(r,i)}}async function yv(e){if(PU(e))for(const t of e.G_)await t(!0)}async function RU(e){for(const t of e.G_)await t(!1)}function FZ(e,t){const n=Tt(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),$S(n)?BS(n):_0(n).c_()&&FS(n,t))}function OS(e,t){const n=Tt(e),r=_0(n);n.U_.delete(t),r.c_()&&BZ(n,t),n.U_.size===0&&(r.c_()?r.P_():PU(n)&&n.j_.set("Unknown"))}function FS(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}_0(e).y_(t)}function BZ(e,t){e.H_.Ne(t),_0(e).w_(t)}function BS(e){e.H_=new AAe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),_0(e).start(),e.j_.B_()}function $S(e){return PU(e)&&!_0(e).u_()&&e.U_.size>0}function PU(e){return Tt(e).W_.size===0}function $Z(e){e.H_=void 0}async function Lke(e){e.j_.set("Online")}async function Dke(e){e.U_.forEach((t,n)=>{FS(e,t)})}async function Nke(e,t){$Z(e),$S(e)?(e.j_.q_(t),BS(e)):e.j_.set("Unknown")}async function Oke(e,t,n){if(e.j_.set("Online"),t instanceof xZ&&t.state===2&&t.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.U_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.U_.delete(a),i.H_.removeTarget(a))}(e,t)}catch(r){Fe(t0,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await MO(e,r)}else if(t instanceof zb?e.H_.We(t):t instanceof TZ?e.H_.Ze(t):e.H_.je(t),!n.isEqual(tt.min()))try{const r=await OZ(e.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.H_.ot(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.U_.get(c);u&&o.U_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const u=o.U_.get(l);if(!u)return;o.U_.set(l,u.withResumeToken(di.EMPTY_BYTE_STRING,u.snapshotVersion)),BZ(o,l);const d=new Cu(u.target,l,c,u.sequenceNumber);FS(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Fe(t0,"Failed to raise snapshot:",r),await MO(e,r)}}async function MO(e,t,n){if(!E0(t))throw t;e.W_.add(1),await RU(e),e.j_.set("Offline"),n||(n=()=>OZ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Fe(t0,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await yv(e)})}async function LO(e,t){const n=Tt(e);n.asyncQueue.verifyOperationInProgress(),Fe(t0,"RemoteStore received new credentials");const r=PU(n);n.W_.add(3),await RU(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await yv(n)}async function Fke(e,t){const n=Tt(e);t?(n.W_.delete(2),await yv(n)):t||(n.W_.add(2),await RU(n),n.j_.set("Unknown"))}function _0(e){return e.J_||(e.J_=function(n,r,i){const o=Tt(n);return o.M_(),new Ake(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{xo:Lke.bind(null,e),No:Dke.bind(null,e),Lo:Nke.bind(null,e),p_:Oke.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),$S(e)?BS(e):e.j_.set("Unknown")):(await e.J_.stop(),$Z(e))})),e.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ju,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,o){const s=Date.now()+r,a=new zS(t,n,s,i,o);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(ve.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zZ(e,t){if(Ac("AsyncQueue",`${t}: ${e}`),E0(e))return new Ve(ve.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{static emptySet(t){return new mg(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ze.comparator(n.key,r.key):(n,r)=>Ze.comparator(n.key,r.key),this.keyedMap=tm(),this.sortedSet=new hr(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof mg)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new mg;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.Z_=new hr(Ze.comparator)}track(t){const n=t.doc.key,r=this.Z_.get(n);r?t.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Z_=this.Z_.remove(n):t.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Ye():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class n0{constructor(t,n,r,i,o,s,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new n0(t,n,mg.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bke{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class $ke{constructor(){this.queries=NO(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const i=Tt(n),o=i.queries;i.queries=NO(),o.forEach((s,a)=>{for(const l of a.ta)l.onError(r)})})(this,new Ve(ve.ABORTED,"Firestore shutting down"))}}function NO(){return new Ah(e=>hZ(e),hv)}async function zke(e,t){const n=Tt(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.na()&&t.ra()&&(r=2):(o=new Bke,r=t.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(i,!0);break;case 1:o.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=zZ(s,`Initialization of query '${T1(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,o),o.ta.push(t),t.sa(n.onlineState),o.ea&&t.oa(o.ea)&&VS(n)}async function Vke(e,t){const n=Tt(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const s=o.ta.indexOf(t);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=t.ra()?0:1:!o.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Hke(e,t){const n=Tt(e);let r=!1;for(const i of t){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&VS(n)}function Wke(e,t,n){const r=Tt(e),i=r.queries.get(t);if(i)for(const o of i.ta)o.onError(n);r.queries.delete(t)}function VS(e){e.ia.forEach(t=>{t.next()})}var N9,OO;(OO=N9||(N9={}))._a="default",OO.Cache="cache";class Gke{constructor(t,n,r){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new n0(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=n0.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==N9.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VZ{constructor(t){this.key=t}}class HZ{constructor(t){this.key=t}}class Xke{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=zt(),this.mutatedKeys=zt(),this.ya=gZ(t),this.wa=new mg(this.ya)}get Sa(){return this.fa}ba(t,n){const r=n?n.Da:new DO,i=n?n.wa:this.wa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((u,d)=>{const f=i.get(u),g=gv(this.query,d)?d:null,U=!!f&&this.mutatedKeys.has(f.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let v=!1;f&&g?f.data.isEqual(g.data)?U!==b&&(r.track({type:3,doc:g}),v=!0):this.va(f,g)||(r.track({type:2,doc:g}),v=!0,(l&&this.ya(g,l)>0||c&&this.ya(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),v=!0):f&&!g&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(g?(s=s.add(g),o=b?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const o=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const s=t.Da.X_();s.sort((u,d)=>function(g,U){const b=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye()}};return b(g)-b(U)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(r),i=i!=null&&i;const a=n&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,c=l!==this.ga;return this.ga=l,s.length!==0||c?{snapshot:new n0(this.query,t.wa,o,s,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new DO,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=zt(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return t.forEach(r=>{this.pa.has(r)||n.push(new HZ(r))}),this.pa.forEach(r=>{t.has(r)||n.push(new VZ(r))}),n}Oa(t){this.fa=t.gs,this.pa=zt();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return n0.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const HS="SyncEngine";class jke{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Kke{constructor(t){this.key=t,this.Ba=!1}}class Yke{constructor(t,n,r,i,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Ah(a=>hZ(a),hv),this.qa=new Map,this.Qa=new Set,this.$a=new hr(Ze.comparator),this.Ka=new Map,this.Ua=new PS,this.Wa={},this.Ga=new Map,this.za=e0.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Zke(e,t,n=!0){const r=KZ(e);let i;const o=r.ka.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await WZ(r,t,n,!0),i}async function qke(e,t){const n=KZ(e);await WZ(n,t,!0,!1)}async function WZ(e,t,n,r){const i=await vke(e.localStore,ol(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await Qke(e,t,o,s==="current",i.resumeToken)),e.isPrimaryClient&&n&&FZ(e.remoteStore,i),a}async function Qke(e,t,n,r,i){e.Ha=(d,f,g)=>async function(b,v,_,E){let w=v.view.ba(_);w.ls&&(w=await CO(b.localStore,v.query,!1).then(({documents:S})=>v.view.ba(S,w)));const T=E&&E.targetChanges.get(v.targetId),A=E&&E.targetMismatches.get(v.targetId)!=null,M=v.view.applyChanges(w,b.isPrimaryClient,T,A);return BO(b,v.targetId,M.Ma),M.snapshot}(e,d,f,g);const o=await CO(e.localStore,t,!0),s=new Xke(t,o.gs),a=s.ba(o.documents),l=kU.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),c=s.applyChanges(a,e.isPrimaryClient,l);BO(e,n,c.Ma);const u=new jke(t,n,s);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function Jke(e,t,n){const r=Tt(e),i=r.ka.get(t),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!hv(s,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await L9(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&OS(r.remoteStore,i.targetId),O9(r,i.targetId)}).catch(cv)):(O9(r,i.targetId),await L9(r.localStore,i.targetId,!0))}async function eRe(e,t){const n=Tt(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),OS(n.remoteStore,r.targetId))}async function GZ(e,t){const n=Tt(e);try{const r=await bke(n.localStore,t);t.targetChanges.forEach((i,o)=>{const s=n.Ka.get(o);s&&(wn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?wn(s.Ba):i.removedDocuments.size>0&&(wn(s.Ba),s.Ba=!1))}),await jZ(n,r,t)}catch(r){await cv(r)}}function FO(e,t,n){const r=Tt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ka.forEach((o,s)=>{const a=s.view.sa(t);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Tt(s);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&VS(l)}(r.eventManager,t),i.length&&r.La.p_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function tRe(e,t,n){const r=Tt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ka.get(t),o=i&&i.key;if(o){let s=new hr(Ze.comparator);s=s.insert(o,Xr.newNoDocument(o,tt.min()));const a=zt().add(o),l=new Uv(tt.min(),new Map,new hr(Nt),s,a);await GZ(r,l),r.$a=r.$a.remove(o),r.Ka.delete(t),WS(r)}else await L9(r.localStore,t,!1).then(()=>O9(r,t,n)).catch(cv)}function O9(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach(r=>{e.Ua.containsKey(r)||XZ(e,r)})}function XZ(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(OS(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),WS(e))}function BO(e,t,n){for(const r of n)r instanceof VZ?(e.Ua.addReference(r.key,t),nRe(e,r)):r instanceof HZ?(Fe(HS,"Document no longer in limbo: "+r.key),e.Ua.removeReference(r.key,t),e.Ua.containsKey(r.key)||XZ(e,r.key)):Ye()}function nRe(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(Fe(HS,"New document in limbo: "+n),e.Qa.add(r),WS(e))}function WS(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Ze(zn.fromString(t)),r=e.za.next();e.Ka.set(r,new Kke(n)),e.$a=e.$a.insert(n,r),FZ(e.remoteStore,new Cu(ol(SS(n.path)),r,"TargetPurposeLimboResolution",uv.ae))}}async function jZ(e,t,n){const r=Tt(e),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{s.push(r.Ha(l,t,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=LS.Yi(l.targetId,c);o.push(d)}}))}),await Promise.all(s),r.La.p_(i),await async function(l,c){const u=Tt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>be.forEach(c,f=>be.forEach(f.Hi,g=>u.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>be.forEach(f.Ji,g=>u.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!E0(d))throw d;Fe(DS,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=u.Ts.get(f),U=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(U);u.Ts=u.Ts.insert(f,b)}}}(r.localStore,o))}async function rRe(e,t){const n=Tt(e);if(!n.currentUser.isEqual(t)){Fe(HS,"User change. New user:",t.toKey());const r=await NZ(n.localStore,t);n.currentUser=t,function(o,s){o.Ga.forEach(a=>{a.forEach(l=>{l.reject(new Ve(ve.CANCELLED,s))})}),o.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await jZ(n,r.Rs)}}function iRe(e,t){const n=Tt(e),r=n.Ka.get(t);if(r&&r.Ba)return zt().add(r.key);{let i=zt();const o=n.qa.get(t);if(!o)return i;for(const s of o){const a=n.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function KZ(e){const t=Tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=GZ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iRe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tRe.bind(null,t),t.La.p_=Hke.bind(null,t.eventManager),t.La.Ja=Wke.bind(null,t.eventManager),t}class P8{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=bv(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return Uke(this.persistence,new gke,t.initialUser,this.serializer)}Xa(t){return new DZ(MS.ri,this.serializer)}Za(t){return new _ke}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}P8.provider={build:()=>new P8};class oRe extends P8{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){wn(this.persistence.referenceDelegate instanceof R8);const r=this.persistence.referenceDelegate.garbageCollector;return new JAe(r,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?uo.withCacheSize(this.cacheSizeBytes):uo.DEFAULT;return new DZ(r=>R8.ri(r,n),this.serializer)}}class F9{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rRe.bind(null,this.syncEngine),await Fke(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new $ke}()}createDatastore(t){const n=bv(t.databaseInfo.databaseId),r=function(o){return new Ske(o)}(t.databaseInfo);return function(o,s,a,l){return new Rke(o,s,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,o,s,a){return new Mke(r,i,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,n=>FO(this.syncEngine,n,0),function(){return RO.D()?new RO:new wke}())}createSyncEngine(t,n){return function(i,o,s,a,l,c,u){const d=new Yke(i,o,s,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const o=Tt(i);Fe(t0,"RemoteStore shutting down."),o.W_.add(5),await RU(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}F9.provider={build:()=>new F9};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sRe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Ac("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aRe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ve(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,o){const s=Tt(i),a={documents:o.map(d=>k8(s.serializer,d))},l=await s.Co("BatchGetDocuments",s.serializer.databaseId,zn.emptyPath(),a,o.length),c=new Map;l.forEach(d=>{const f=NAe(s.serializer,d);c.set(f.key.toString(),f)});const u=[];return o.forEach(d=>{const f=c.get(d.toString());wn(!!f),u.push(f)}),u}(this.datastore,t);return n.forEach(r=>this.recordVersion(r)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new AS(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,r)=>{const i=Ze.fromPath(r);this.mutations.push(new wZ(i,this.precondition(i)))}),await async function(r,i){const o=Tt(r),s={writes:i.map(a=>FAe(o.serializer,a))};await o.So("Commit",o.serializer.databaseId,zn.emptyPath(),s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Ye();n=tt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new Ve(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(tt.min())?gs.exists(!1):gs.updateTime(n):gs.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(tt.min()))throw new Ve(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gs.updateTime(n)}return gs.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lRe{constructor(t,n,r,i,o){this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Tu=r.maxAttempts,this.a_=new NS(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new aRe(this.datastore),n=this.du(t);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Au(i)}))}).catch(r=>{this.Au(r)})})}du(t){try{const n=this.updateFunction(t);return!CU(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xAe(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="FirestoreClient";class cRe{constructor(t,n,r,i,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ii.UNAUTHENTICATED,this.clientId=ZY.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{Fe(dd,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Fe(dd,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ju;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=zZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function C4(e,t){e.asyncQueue.verifyOperationInProgress(),Fe(dd,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await NZ(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function $O(e,t){e.asyncQueue.verifyOperationInProgress();const n=await uRe(e);Fe(dd,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>LO(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>LO(t.remoteStore,i)),e._onlineComponents=t}async function uRe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Fe(dd,"Using user provided OfflineComponentProvider");try{await C4(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Zg("Error using user provided cache. Falling back to memory cache: "+n),await C4(e,new P8)}}else Fe(dd,"Using default OfflineComponentProvider"),await C4(e,new oRe(void 0));return e._offlineComponents}async function YZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Fe(dd,"Using user provided OnlineComponentProvider"),await $O(e,e._uninitializedComponentsProvider._online)):(Fe(dd,"Using default OnlineComponentProvider"),await $O(e,new F9))),e._onlineComponents}function dRe(e){return YZ(e).then(t=>t.datastore)}async function fRe(e){const t=await YZ(e),n=t.eventManager;return n.onListen=Zke.bind(null,t.syncEngine),n.onUnlisten=Jke.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=qke.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=eRe.bind(null,t.syncEngine),n}function hRe(e,t,n={}){const r=new ju;return e.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const u=new sRe({next:f=>{u.su(),s.enqueueAndForget(()=>Vke(o,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new Ve(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new Ve(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Gke(SS(a.path),u,{includeMetadataChanges:!0,Ta:!0});return zke(o,d)}(await fRe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZZ(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gRe(e,t,n){if(!n)throw new Ve(ve.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pRe(e,t,n,r){if(t===!0&&r===!0)throw new Ve(ve.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function VO(e){if(!Ze.isDocumentKey(e))throw new Ve(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function GS(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ye()}function M8(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ve(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=GS(e);throw new Ve(ve.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qZ="firestore.googleapis.com",HO=!0;class WO{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ve(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qZ,this.ssl=HO}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:HO;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=LZ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<qAe)throw new Ve(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}pRe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZZ((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class XS{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WO({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ve(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WO(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ACe;switch(r.type){case"firstParty":return new MCe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ve(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zO.get(n);r&&(Fe("ComponentProvider","Removing Datastore"),zO.delete(n),r.terminate())}(this),Promise.resolve()}}function mRe(e,t,n,r={}){var i;const o=(e=M8(e,XS))._getSettings(),s=`${t}:${n}`;if(o.host!==qZ&&o.host!==s&&Zg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ii.MOCK_USER;else{a=RY(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ve(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ii(c)}e._authCredentials=new kCe(new YY(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new jS(this.firestore,t,this._query)}}class Ss{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new V2(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ss(this.firestore,t,this._key)}}class V2 extends jS{constructor(t,n,r){super(t,n,SS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ss(this.firestore,null,new Ze(t))}withConverter(t){return new V2(this.firestore,t,this._path)}}function QZ(e,t,...n){if(e=va(e),arguments.length===1&&(t=ZY.newId()),gRe("doc","path",t),e instanceof XS){const r=zn.fromString(t,...n);return VO(r),new Ss(e,null,new Ze(r))}{if(!(e instanceof Ss||e instanceof V2))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(zn.fromString(t,...n));return VO(r),new Ss(e.firestore,e instanceof V2?e.converter:null,new Ze(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="AsyncQueue";class XO{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new NS(this,"async_queue_retry"),this.Su=()=>{const r=S4();r&&Fe(GO,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=t;const n=S4();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=S4();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new ju;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!E0(t))throw t;Fe(GO,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ac("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(t,n,r){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const i=zS.createAndSchedule(this,t,n,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&Ye()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class KS extends XS{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new XO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new XO(t),this._firestoreClient=void 0,await t}}}function URe(e,t){const n=typeof e=="object"?e:$Y(),r=typeof e=="string"?e:w8,i=NY(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=AY("firestore");o&&mRe(i,...o)}return i}function JZ(e){if(e._terminated)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||bRe(e),e._firestoreClient}function bRe(e){var t,n,r;const i=e._freezeSettings(),o=function(a,l,c,u){return new KCe(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,ZZ(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new cRe(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new kc(di.fromBase64String(t))}catch(n){throw new Ve(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new kc(di.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ve(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ve(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ve(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yRe=/^__.*__$/;class vRe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new kh(t,this.data,this.fieldMask,n,this.fieldTransforms):new AU(t,this.data,n,this.fieldTransforms)}}class eq{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new kh(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function tq(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye()}}class QS{constructor(t,n,r,i,o,s){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new QS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.ku({path:r,Qu:!1});return i.$u(t),i}Ku(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return L8(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(tq(this.Lu)&&yRe.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class ERe{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||bv(t)}ju(t,n,r,i=!1){return new QS({Lu:t,methodName:n,zu:r,path:Ci.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _Re(e){const t=e._freezeSettings(),n=bv(e._databaseId);return new ERe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wRe(e,t,n,r,i,o={}){const s=e.ju(o.merge||o.mergeFields?2:0,t,n,i);JS("Data must be an object, but it was:",s,r);const a=nq(r,s);let l,c;if(o.merge)l=new vs(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const d of o.mergeFields){const f=B9(t,d,n);if(!s.contains(f))throw new Ve(ve.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);iq(u,f)||u.push(f)}l=new vs(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new vRe(new go(a),l,c)}class Ev extends YS{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ev}}function IRe(e,t,n,r){const i=e.ju(1,t,n);JS("Data must be an object, but it was:",i,r);const o=[],s=go.empty();Ch(r,(l,c)=>{const u=eC(t,l,n);c=va(c);const d=i.Ku(u);if(c instanceof Ev)o.push(u);else{const f=_v(c,d);f!=null&&(o.push(u),s.set(u,f))}});const a=new vs(o);return new eq(s,a,i.fieldTransforms)}function TRe(e,t,n,r,i,o){const s=e.ju(1,t,n),a=[B9(t,r,n)],l=[i];if(o.length%2!=0)throw new Ve(ve.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(B9(t,o[f])),l.push(o[f+1]);const c=[],u=go.empty();for(let f=a.length-1;f>=0;--f)if(!iq(c,a[f])){const g=a[f];let U=l[f];U=va(U);const b=s.Ku(g);if(U instanceof Ev)c.push(g);else{const v=_v(U,b);v!=null&&(c.push(g),u.set(g,v))}}const d=new vs(c);return new eq(u,d,s.fieldTransforms)}function _v(e,t){if(rq(e=va(e)))return JS("Unsupported field value:",t,e),nq(e,t);if(e instanceof YS)return function(r,i){if(!tq(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=_v(a,i.Uu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=va(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UAe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=qr.fromDate(r);return{timestampValue:A8(i.serializer,o)}}if(r instanceof qr){const o=new qr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:A8(i.serializer,o)}}if(r instanceof ZS)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kc)return{bytesValue:SZ(i.serializer,r._byteString)};if(r instanceof Ss){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qS)return function(s,a){return{mapValue:{fields:{[iZ]:{stringValue:sZ},[I8]:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return CS(a.serializer,c)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${GS(r)}`)}(e,t)}function nq(e,t){const n={};return QY(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ch(e,(r,i)=>{const o=_v(i,t.qu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function rq(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof qr||e instanceof ZS||e instanceof kc||e instanceof Ss||e instanceof YS||e instanceof qS)}function JS(e,t,n){if(!rq(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=GS(n);throw r==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function B9(e,t,n){if((t=va(t))instanceof vv)return t._internalPath;if(typeof t=="string")return eC(e,t);throw L8("Field path arguments must be of type string or ",e,!1,void 0,n)}const xRe=new RegExp("[~\\*/\\[\\]]");function eC(e,t,n){if(t.search(xRe)>=0)throw L8(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new vv(...t.split("."))._internalPath}catch{throw L8(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function L8(e,t,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Ve(ve.INVALID_ARGUMENT,a+e+l)}function iq(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new SRe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(oq("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SRe extends D8{data(){return super.data()}}function oq(e,t){return typeof t=="string"?eC(e,t):t instanceof vv?t._internalPath:t._delegate._internalPath}class sq{convertValue(t,n="none"){switch(cd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return cr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ld(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ye()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ch(t,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(t){var n,r,i;const o=(i=(r=(n=t.fields)===null||n===void 0?void 0:n[I8].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>cr(s.doubleValue));return new qS(o)}convertGeoPoint(t){return new ZS(cr(t.latitude),cr(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=dv(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(O2(t));default:return null}}convertTimestamp(t){const n=ad(t);return new qr(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=zn.fromString(t);wn(MZ(r));const i=new F2(r.get(1),r.get(3)),o=new Ze(r.popFirst(5));return i.isEqual(n)||Ac(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CRe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ARe extends sq{constructor(t){super(),this.firestore=t}convertBytes(t){return new kc(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ss(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class tC extends D8{constructor(t,n,r,i,o,s){super(t,n,r,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new kRe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(oq("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class kRe extends tC{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RRe(e){e=M8(e,Ss);const t=M8(e.firestore,KS);return hRe(JZ(t),e._key).then(n=>PRe(t,e,n))}class lq extends sq{constructor(t){super(),this.firestore=t}convertBytes(t){return new kc(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ss(this.firestore,null,n)}}function PRe(e,t,n){const r=n.docs.get(t._key),i=new lq(e);return new tC(e,i,t._key,r,new aq(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MRe={maxAttempts:5};function rm(e,t){if((e=va(e)).firestore!==t)throw new Ve(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LRe{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=_Re(t)}get(t){const n=rm(t,this._firestore),r=new ARe(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Ye();const o=i[0];if(o.isFoundDocument())return new D8(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new D8(this._firestore,r,n._key,null,n.converter);throw Ye()})}set(t,n,r){const i=rm(t,this._firestore),o=CRe(i.converter,n,r),s=wRe(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(t,n,r,...i){const o=rm(t,this._firestore);let s;return s=typeof(n=va(n))=="string"||n instanceof vv?TRe(this._dataReader,"Transaction.update",o._key,n,r,i):IRe(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(t){const n=rm(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DRe extends LRe{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=rm(t,this._firestore),r=new lq(this._firestore);return super.get(t).then(i=>new tC(this._firestore,r,n._key,i._document,new aq(!1,!1),n.converter))}}function NRe(e,t,n){e=M8(e,KS);const r=Object.assign(Object.assign({},MRe),n);return function(o){if(o.maxAttempts<1)throw new Ve(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const l=new ju;return o.asyncQueue.enqueueAndForget(async()=>{const c=await dRe(o);new lRe(o.asyncQueue,c,a,s,l).Iu()}),l.promise}(JZ(e),i=>t(new DRe(e,i)),r)}(function(t,n=!0){(function(i){v0=i})(FY),L2(new Yg("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new KS(new RCe(r.getProvider("auth-internal")),new LCe(s,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ve(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new F2(c.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gu(QN,JN,t),Gu(QN,JN,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq="firebasestorage.googleapis.com",uq="storageBucket",ORe=2*60*1e3,FRe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Sh{constructor(t,n,r=0){super(A4(t),`Firebase Storage: ${n} (${A4(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tr.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return A4(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wr;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wr||(wr={}));function A4(e){return"storage/"+e}function nC(){const e="An unknown error occurred, please check the error payload for server response.";return new Tr(wr.UNKNOWN,e)}function BRe(e){return new Tr(wr.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $Re(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tr(wr.UNAUTHENTICATED,e)}function zRe(){return new Tr(wr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function VRe(e){return new Tr(wr.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function HRe(){return new Tr(wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WRe(){return new Tr(wr.CANCELED,"User canceled the upload/download.")}function GRe(e){return new Tr(wr.INVALID_URL,"Invalid URL '"+e+"'.")}function XRe(e){return new Tr(wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function jRe(){return new Tr(wr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uq+"' property when initializing the app?")}function KRe(){return new Tr(wr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YRe(e){return new Tr(wr.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $9(e){return new Tr(wr.INVALID_ARGUMENT,e)}function dq(){return new Tr(wr.APP_DELETED,"The Firebase app was deleted.")}function ZRe(e){return new Tr(wr.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bm(e,t){return new Tr(wr.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Lp(e){throw new Tr(wr.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Bo.makeFromUrl(t,n)}catch{return new Bo(t,"")}if(r.path==="")return r;throw XRe(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(T){T.path_=decodeURIComponent(T.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),U={bucket:1,path:3},b=n===cq?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",_=new RegExp(`^https?://${b}/${i}/${v}`,"i"),w=[{regex:a,indices:l,postModify:o},{regex:g,indices:U,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let T=0;T<w.length;T++){const A=w[T],M=A.regex.exec(t);if(M){const S=M[A.indices.bucket];let x=M[A.indices.path];x||(x=""),r=new Bo(S,x),A.postModify(r);break}}if(r==null)throw GRe(t);return r}}class qRe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QRe(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...v){c||(c=!0,t.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,e(g,l())},v)}function f(){o&&clearTimeout(o)}function g(v,..._){if(c){f();return}if(v){f(),u.call(null,v,..._);return}if(l()||s){f(),u.call(null,v,..._);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,d(w)}let U=!1;function b(v){U||(U=!0,f(),!c&&(i!==null?(v||(a=2),clearTimeout(i),d(0)):v||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,b(!0)},n),b}function JRe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ePe(e){return e!==void 0}function tPe(e){return typeof e=="object"&&!Array.isArray(e)}function fq(e){return typeof e=="string"||e instanceof String}function jO(e){return rC()&&e instanceof Blob}function rC(){return typeof Blob<"u"}function KO(e,t,n,r){if(r<t)throw $9(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw $9(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nPe(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function rPe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Df;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Df||(Df={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iPe(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oPe{constructor(t,n,r,i,o,s,a,l,c,u,d,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,U)=>{this.resolve_=g,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new X5(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Df.NO_ERROR,l=o.getStatus();if(!a||iPe(l,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===Df.ABORT;r(!1,new X5(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new X5(c,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());ePe(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=nC();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?dq():WRe();s(l)}else{const l=HRe();s(l)}};this.canceled_?n(!1,new X5(!1,null,!0)):this.backoffId_=QRe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&JRe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class X5{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function sPe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function aPe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function lPe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function cPe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function uPe(e,t,n,r,i,o,s=!0){const a=rPe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return lPe(c,t),sPe(c,n),aPe(c,o),cPe(c,r),new oPe(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dPe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fPe(...e){const t=dPe();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(rC())return new Blob(e);throw new Tr(wr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hPe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gPe(e){if(typeof atob>"u")throw YRe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class k4{constructor(t,n){this.data=t,this.contentType=n||null}}function pPe(e,t){switch(e){case tl.RAW:return new k4(hq(t));case tl.BASE64:case tl.BASE64URL:return new k4(gq(e,t));case tl.DATA_URL:return new k4(UPe(t),bPe(t))}throw nC()}function hq(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const o=r,s=e.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function mPe(e){let t;try{t=decodeURIComponent(e)}catch{throw Bm(tl.DATA_URL,"Malformed data URL.")}return hq(t)}function gq(e,t){switch(e){case tl.BASE64:{const i=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(i||o)throw Bm(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case tl.BASE64URL:{const i=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(i||o)throw Bm(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gPe(t)}catch(i){throw i.message.includes("polyfill")?i:Bm(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class pq{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Bm(tl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=yPe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function UPe(e){const t=new pq(e);return t.base64?gq(tl.BASE64,t.rest):mPe(t.rest)}function bPe(e){return new pq(e).contentType}function yPe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,n){let r=0,i="";jO(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(jO(this.data_)){const r=this.data_,i=hPe(r,t,n);return i===null?null:new bu(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new bu(r,!0)}}static getBlob(...t){if(rC()){const n=t.map(r=>r instanceof bu?r.data_:r);return new bu(fPe.apply(null,n))}else{const n=t.map(s=>fq(s)?pPe(tl.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new bu(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vPe(e){let t;try{t=JSON.parse(e)}catch{return null}return tPe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EPe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function _Pe(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function mq(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wPe(e,t){return t}class Bi{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||wPe}}let j5=null;function IPe(e){return!fq(e)||e.length<2?e:mq(e)}function TPe(){if(j5)return j5;const e=[];e.push(new Bi("bucket")),e.push(new Bi("generation")),e.push(new Bi("metageneration")),e.push(new Bi("name","fullPath",!0));function t(o,s){return IPe(s)}const n=new Bi("name");n.xform=t,e.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Bi("size");return i.xform=r,e.push(i),e.push(new Bi("timeCreated")),e.push(new Bi("updated")),e.push(new Bi("md5Hash",null,!0)),e.push(new Bi("cacheControl",null,!0)),e.push(new Bi("contentDisposition",null,!0)),e.push(new Bi("contentEncoding",null,!0)),e.push(new Bi("contentLanguage",null,!0)),e.push(new Bi("contentType",null,!0)),e.push(new Bi("metadata","customMetadata",!0)),j5=e,j5}function xPe(e,t){function n(){const r=e.bucket,i=e.fullPath,o=new Bo(r,i);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function SPe(e,t,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,t[s.server])}return xPe(r,e),r}function CPe(e,t,n){const r=vPe(t);return r===null?null:SPe(e,r,n)}function APe(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}class kPe{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RPe(e){if(!e)throw nC()}function PPe(e,t){function n(r,i){const o=CPe(e,i,t);return RPe(o!==null),o}return n}function MPe(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=zRe():i=$Re():n.getStatus()===402?i=BRe(e.bucket):n.getStatus()===403?i=VRe(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function LPe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function DPe(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=LPe(null,t)),r}function NPe(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let T=0;T<2;T++)w=w+Math.random().toString().slice(2);return w}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=DPe(t,r,i),u=APe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",g=bu.getBlob(d,r,f);if(g===null)throw KRe();const U={name:c.fullPath},b=nPe(o,e.host,e._protocol),v="POST",_=e.maxUploadRetryTime,E=new kPe(b,v,PPe(e,n),_);return E.urlParams=U,E.headers=s,E.body=g.uploadData(),E.errorHandler=MPe(t),E}class OPe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Df.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Df.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Df.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw Lp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class FPe extends OPe{initXhr(){this.xhr_.responseType="text"}}function BPe(){return new FPe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t,n){this._service=t,n instanceof Bo?this._location=n:this._location=Bo.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new fh(t,n)}get root(){const t=new Bo(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mq(this._location.path)}get storage(){return this._service}get parent(){const t=EPe(this._location.path);if(t===null)return null;const n=new Bo(this._location.bucket,t);return new fh(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw ZRe(t)}}function $Pe(e,t,n){e._throwIfRoot("uploadBytes");const r=NPe(e.storage,e._location,TPe(),new bu(t,!0),n);return e.storage.makeRequestWithTokens(r,BPe).then(i=>({metadata:i,ref:e}))}function zPe(e,t){const n=_Pe(e._location.path,t),r=new Bo(e._location.bucket,n);return new fh(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VPe(e){return/^[A-Za-z]+:\/\//.test(e)}function HPe(e,t){return new fh(e,t)}function Uq(e,t){if(e instanceof iC){const n=e;if(n._bucket==null)throw jRe();const r=new fh(n,n._bucket);return t!=null?Uq(r,t):r}else return t!==void 0?zPe(e,t):e}function WPe(e,t){if(t&&VPe(t)){if(e instanceof iC)return HPe(e,t);throw $9("To use ref(service, url), the first argument must be a Storage instance.")}else return Uq(e,t)}function YO(e,t){const n=t==null?void 0:t[uq];return n==null?null:Bo.makeFromBucketSpec(n,e)}function GPe(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:RY(i,e.app.options.projectId))}class iC{constructor(t,n,r,i,o){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=cq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ORe,this._maxUploadRetryTime=FRe,this._requests=new Set,i!=null?this._bucket=Bo.makeFromBucketSpec(i,this._host):this._bucket=YO(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Bo.makeFromBucketSpec(this._url,t):this._bucket=YO(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){KO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){KO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(OY(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new fh(this,t)}_makeRequest(t,n,r,i,o=!0){if(this._deleted)return new qRe(dq());{const s=uPe(t,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const ZO="@firebase/storage",qO="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq="storage";function yq(e,t,n){return e=va(e),$Pe(e,t,n)}function vq(e,t){return e=va(e),WPe(e,t)}function XPe(e=$Y(),t){e=va(e);const r=NY(e,bq).getImmediate({identifier:t}),i=AY("storage");return i&&jPe(r,...i),r}function jPe(e,t,n,r={}){GPe(e,t,n,r)}function KPe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new iC(n,r,i,t,FY)}function YPe(){L2(new Yg(bq,KPe,"PUBLIC").setMultipleInstances(!0)),Gu(ZO,qO,""),Gu(ZO,qO,"esm2017")}YPe();let N8;try{N8=JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')}catch{console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),N8={}}let R4=null,P4=null,M4=null;const Eq=()=>(R4||(R4=BY(N8)),R4),_q=()=>(P4||(P4=URe(Eq())),P4),ZPe=()=>(M4||(M4=XPe(Eq())),M4),wq=async()=>ZPe(),qPe=async(e,t)=>{const n=JSON.stringify(t),r=new TextEncoder().encode(n),{encryptedBuffer:i,iv:o}=await w3(e,r);return{ciphertext:i,iv:o}},z9=async(e,t)=>{const n=e.ciphertext.toUint8Array(),r=e.iv.toUint8Array(),i=await v2(r,n,t),o=new TextDecoder("utf-8").decode(new Uint8Array(i));return JSON.parse(o)},cf=class cf{};H(cf,"cache",new WeakMap),H(cf,"get",t=>cf.cache.get(t)),H(cf,"set",(t,n)=>{cf.cache.set(t,Uu(n))});let H2=cf;const Iq=(e,t)=>{if(e.socket&&e.roomId&&e.roomKey){const n=Uu(t);return H2.get(e.socket)===n}return!0},oC=async({prefix:e,files:t})=>{const n=await wq(),r=[],i=[];return await Promise.all(t.map(async({id:o,buffer:s})=>{try{const a=vq(n,`${e}/${o}`);await yq(a,s,{cacheControl:`public, max-age=${Qxe}`}),i.push(o)}catch{r.push(o)}})),{savedFiles:i,erroredFiles:r}},QO=async(e,t)=>{const n=Uu(e),{ciphertext:r,iv:i}=await qPe(t,e);return{sceneVersion:n,ciphertext:kc.fromUint8Array(new Uint8Array(r)),iv:kc.fromUint8Array(i)}},QPe=async(e,t,n)=>{const{roomId:r,roomKey:i,socket:o}=e;if(!r||!i||!o||Iq(e,t))return null;const s=_q(),a=QZ(s,"scenes",r),l=await NRe(s,async u=>{const d=await u.get(a);if(!d.exists()){const v=await QO(t,i);return u.set(a,v),v}const f=d.data(),g=Au(Jf(await z9(f,i),null)),U=Au(Gx(t,g,n)),b=await QO(U,i);return u.update(a,b),b}),c=Au(Jf(await z9(l,i),null));return H2.set(o,c),c},JPe=async(e,t,n)=>{const r=_q(),i=QZ(r,"scenes",e),o=await RRe(i);if(!o.exists())return null;const s=o.data(),a=Au(Jf(await z9(s,t),null));return n&&H2.set(n,a),a},Tq=async(e,t,n)=>{const r=[],i=new Map;return await Promise.all([...new Set(n)].map(async o=>{try{const s=`https://firebasestorage.googleapis.com/v0/b/${N8.storageBucket}/o/${encodeURIComponent(e.replace(/^\//,""))}%2F${o}`,a=await fetch(`${s}?alt=media`);if(a.status<400){const l=await a.arrayBuffer(),{data:c,metadata:u}=await EW(new Uint8Array(l),{decryptionKey:t}),d=new TextDecoder().decode(c);r.push({mimeType:u.mimeType||Ne.binary,id:o,dataURL:d,created:(u==null?void 0:u.created)||Date.now(),lastRetrieved:(u==null?void 0:u.created)||Date.now()})}else i.set(o,!0)}catch(s){i.set(o,!0),console.error(s)}})),{loadedFiles:r,erroredFiles:i}},xq=e=>e.isDeleted?e.updated>Date.now()-qxe:!nh(e),Au=e=>e.filter(t=>xq(t)),eMe="https://json.excalidraw.com/api/v2/",tMe="https://json.excalidraw.com/api/v2/post/",nMe=async()=>{const e=new Uint8Array(Jxe);return window.crypto.getRandomValues(e),tV(e)},Sq=/^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/,JO=e=>{const t=new URL(e).hash;return Sq.test(t)},rMe=e=>{const n=new URL(e).hash.match(Sq);return n&&n[2].length!==22?(window.alert(L("alerts.invalidEncryptionKey")),null):n?{roomId:n[1],roomKey:n[2]}:null},iMe=async()=>{const e=await nMe(),t=await FT();if(!t)throw new Error("Couldn't generate room key");return{roomId:e,roomKey:t}},oMe=e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`,sMe=async({buffer:e,decryptionKey:t})=>{let n;try{const o=e.slice(0,Tb),s=e.slice(Tb,e.byteLength);n=await v2(new Uint8Array(o),s,t)}catch{const s=new Uint8Array(Tb);n=await v2(s,e,t)}const r=new window.TextDecoder("utf-8").decode(new Uint8Array(n)),i=JSON.parse(r);return{elements:i.elements||null,appState:i.appState||null}},aMe=async(e,t)=>{try{const n=await fetch(`${eMe}${e}`);if(!n.ok)return window.alert(L("alerts.importBackendFailed")),{};const r=await n.arrayBuffer();try{const{data:i}=await EW(new Uint8Array(r),{decryptionKey:t}),o=JSON.parse(new TextDecoder().decode(i));return{elements:o.elements||null,appState:o.appState||null}}catch(i){return console.warn("error when decoding shareLink data using the new format:",i),sMe({buffer:r,decryptionKey:t})}}catch(n){return window.alert(L("alerts.importBackendFailed")),console.error(n),{}}},eF=async(e,t,n)=>{let r;return e!=null&&t!=null?r=eh(await aMe(e,t),n==null?void 0:n.appState,n==null?void 0:n.elements,{repairBindings:!0,refreshDimensions:!1}):r=eh(n||null,null,null,{repairBindings:!0}),{elements:r.elements,appState:r.appState,files:r.files}},lMe=async(e,t,n)=>{const r=await FT("string"),i=await vW(new TextEncoder().encode(h0(e,t,n,"database")),{encryptionKey:r});try{const o=new Map;for(const c of e)dr(c)&&n[c.fileId]&&o.set(c.fileId,n[c.fileId]);const s=await yS({files:o,encryptionKey:r,maxBytes:bS}),l=await(await fetch(tMe,{method:"POST",body:i.buffer})).json();if(l.id){const c=new URL(window.location.href);c.hash=`json=${l.id},${r}`;const u=c.toString();return await oC({prefix:`/files/shareLinks/${l.id}`,files:s}),{url:u,errorMessage:null}}else if(l.error_class==="RequestTooLargeError")return{url:null,errorMessage:L("alerts.couldNotCreateShareableLinkTooBig")};return{url:null,errorMessage:L("alerts.couldNotCreateShareableLink")}}catch(o){return console.error(o),{url:null,errorMessage:L("alerts.couldNotCreateShareableLink")}}},cMe=e=>{try{localStorage.setItem(rr.LOCAL_STORAGE_COLLAB,JSON.stringify({username:e}))}catch(t){console.error(t)}},Cq=()=>{try{const e=localStorage.getItem(rr.LOCAL_STORAGE_COLLAB);if(e)return JSON.parse(e).username}catch(e){console.error(e)}return null},Aq=()=>{let e=null,t=null;try{e=localStorage.getItem(rr.LOCAL_STORAGE_ELEMENTS),t=localStorage.getItem(rr.LOCAL_STORAGE_APP_STATE)}catch(i){console.error(i)}let n=[];if(e)try{n=NG(JSON.parse(e))}catch(i){console.error(i)}let r=null;if(t)try{r={...ks(),...z$(JSON.parse(t))}}catch(i){console.error(i)}return{elements:n,appState:r}},kq=()=>{try{const e=localStorage.getItem(rr.LOCAL_STORAGE_ELEMENTS);return(e==null?void 0:e.length)||0}catch(e){return console.error(e),0}},uMe=()=>{try{const e=localStorage.getItem(rr.LOCAL_STORAGE_APP_STATE),t=localStorage.getItem(rr.LOCAL_STORAGE_COLLAB),n=(e==null?void 0:e.length)||0,r=(t==null?void 0:t.length)||0;return n+r+kq()}catch(e){return console.error(e),0}};class dMe{constructor(t){H(this,"collab");H(this,"socket",null);H(this,"socketInitialized",!1);H(this,"roomId",null);H(this,"roomKey",null);H(this,"broadcastedElementVersions",new Map);H(this,"queueFileUpload",ql(async()=>{try{await this.collab.fileManager.saveFiles({elements:this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),files:this.collab.excalidrawAPI.getFiles()})}catch(r){r.name!=="AbortError"&&this.collab.excalidrawAPI.updateScene({appState:{errorMessage:r.message}})}let t=!1;const n=this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(r=>this.collab.fileManager.shouldUpdateImageElementStatus(r)?(t=!0,Xe(r,{status:"saved"})):r);t&&this.collab.excalidrawAPI.updateScene({elements:n,storeAction:ae.UPDATE})},jxe));H(this,"broadcastScene",async(t,n,r)=>{if(t===Wi.INIT&&!r)throw new Error("syncAll must be true when sending SCENE.INIT");const i=n.reduce((s,a)=>((r||!this.broadcastedElementVersions.has(a.id)||a.version>this.broadcastedElementVersions.get(a.id))&&xq(a)&&s.push(a),s),[]),o={type:t,payload:{elements:i}};for(const s of i)this.broadcastedElementVersions.set(s.id,s.version);this.queueFileUpload(),await this._broadcastSocketData(o)});H(this,"broadcastIdleChange",t=>{var n;if((n=this.socket)!=null&&n.id){const r={type:Wi.IDLE_STATUS,payload:{socketId:this.socket.id,userState:t,username:this.collab.state.username}};return this._broadcastSocketData(r,!0)}});H(this,"broadcastMouseLocation",t=>{var n;if((n=this.socket)!=null&&n.id){const r={type:Wi.MOUSE_LOCATION,payload:{socketId:this.socket.id,pointer:t.pointer,button:t.button||"up",selectedElementIds:this.collab.excalidrawAPI.getAppState().selectedElementIds,username:this.collab.state.username}};return this._broadcastSocketData(r,!0)}});H(this,"broadcastVisibleSceneBounds",(t,n)=>{var r;if((r=this.socket)!=null&&r.id){const i={type:Wi.USER_VISIBLE_SCENE_BOUNDS,payload:{socketId:this.socket.id,username:this.collab.state.username,sceneBounds:t.sceneBounds}};return this._broadcastSocketData(i,!0,n)}});H(this,"broadcastUserFollowed",t=>{var n;(n=this.socket)!=null&&n.id&&this.socket.emit(Ob.USER_FOLLOW_CHANGE,t)});this.collab=t}open(t,n,r){return this.socket=t,this.roomId=n,this.roomKey=r,this.socket.on("init-room",()=>{this.socket&&(this.socket.emit("join-room",this.roomId),Dt("share","room joined"))}),this.socket.on("new-user",async i=>{this.broadcastScene(Wi.INIT,this.collab.getSceneElementsIncludingDeleted(),!0)}),this.socket.on("room-user-change",i=>{this.collab.setCollaborators(i)}),t}close(){this.socket&&(this.queueFileUpload.flush(),this.socket.close(),this.socket=null,this.roomId=null,this.roomKey=null,this.socketInitialized=!1,this.broadcastedElementVersions=new Map)}isOpen(){return!!(this.socketInitialized&&this.socket&&this.roomId&&this.roomKey)}async _broadcastSocketData(t,n=!1,r){var i;if(this.isOpen()){const o=JSON.stringify(t),s=new TextEncoder().encode(o),{encryptedBuffer:a,iv:l}=await w3(this.roomKey,s);(i=this.socket)==null||i.emit(n?Ob.SERVER_VOLATILE:Ob.SERVER,r??this.roomId,a,l)}}}const O8={[rr.VERSION_DATA_STATE]:-1,[rr.VERSION_FILES]:-1},tF=e=>JSON.parse(localStorage.getItem(e)||"-1")>O8[e],Rq=e=>{const t=Date.now();try{localStorage.setItem(e,JSON.stringify(t)),O8[e]=t}catch(n){console.error("error while updating browser state verison",n)}},fMe=()=>{try{for(const e of Object.keys(O8))localStorage.setItem(e,JSON.stringify(-1)),O8[e]=-1}catch(e){console.error("error while resetting browser state verison",e)}};function hMe(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Rh(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function sC(e,t){const n=hMe().then(()=>{const r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),Rh(r)});return(r,i)=>n.then(o=>i(o.transaction(t,r).objectStore(t)))}let L4;function w0(){return L4||(L4=sC("keyval-store","keyval")),L4}function gMe(e,t=w0()){return t("readonly",n=>Rh(n.get(e)))}function Pq(e,t,n=w0()){return n("readwrite",r=>(r.put(t,e),Rh(r.transaction)))}function pMe(e,t=w0()){return t("readwrite",n=>(e.forEach(r=>n.put(r[1],r[0])),Rh(n.transaction)))}function mMe(e,t=w0()){return t("readonly",n=>Promise.all(e.map(r=>Rh(n.get(r)))))}function UMe(e,t=w0()){return t("readwrite",n=>(n.delete(e),Rh(n.transaction)))}function bMe(e,t){return e("readonly",n=>(n.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Rh(n.transaction)))}function yMe(e=w0()){const t=[];return bMe(e,n=>t.push([n.key,n.value])).then(()=>t)}class vMe{constructor(){H(this,"locks",new Map);H(this,"lock",t=>{this.locks.set(t,!0)});H(this,"unlock",t=>(this.locks.delete(t),!this.isLocked()))}isLocked(t){return t?this.locks.has(t):!!this.locks.size}}const $m=sC("files-db","files-store");class EMe extends xY{constructor(){super(...arguments);H(this,"clearObsoleteFiles",async n=>{await yMe($m).then(r=>{for(const[i,o]of r)(!o.lastRetrieved||Date.now()-o.lastRetrieved>24*3600*1e3)&&!n.currentFileIds.includes(i)&&UMe(i,$m)})})}}const _Me=(e,t)=>{var n;try{const r=z$(t);((n=r.openSidebar)==null?void 0:n.name)===ws.name&&r.openSidebar.tab===Tf&&(r.openSidebar=null),localStorage.setItem(rr.LOCAL_STORAGE_ELEMENTS,JSON.stringify(NG(e))),localStorage.setItem(rr.LOCAL_STORAGE_APP_STATE,JSON.stringify(r)),Rq(rr.VERSION_DATA_STATE)}catch(r){console.error(r)}},ri=class ri{};H(ri,"_save",mc(async(t,n,r,i)=>{_Me(t,n),await ri.fileStorage.saveFiles({elements:t,files:r}),i()},Gxe)),H(ri,"save",(t,n,r,i)=>{ri.isSavePaused()||ri._save(t,n,r,i)}),H(ri,"flushSave",()=>{ri._save.flush()}),H(ri,"locker",new vMe),H(ri,"pauseSave",t=>{ri.locker.lock(t)}),H(ri,"resumeSave",t=>{ri.locker.unlock(t)}),H(ri,"isSavePaused",()=>document.hidden||ri.locker.isLocked()),H(ri,"fileStorage",new EMe({getFiles(t){return mMe(t,$m).then(async n=>{const r=[],i=new Map,o=[];n.forEach((s,a)=>{const l=t[a];if(s){const c={...s,lastRetrieved:Date.now()};o.push([l,c]),r.push(c)}else i.set(l,!0)});try{pMe(o,$m)}catch(s){console.warn(s)}return{loadedFiles:r,erroredFiles:i}})},async saveFiles({addedFiles:t}){const n=new Map,r=new Map;return Rq(rr.VERSION_FILES),await Promise.all([...t].map(async([i,o])=>{try{await Pq(i,o,$m),n.set(i,o)}catch(s){console.error(s),r.set(i,o)}})),{savedFiles:n,erroredFiles:r}}}));let oi=ri;const Ys=class Ys{static async load(){return await gMe(Ys.key,Ys.store)||null}static save(t){return Pq(Ys.key,t,Ys.store)}};H(Ys,"idb_name",rr.IDB_LIBRARY),H(Ys,"key","libraryData"),H(Ys,"store",sC(`${Ys.idb_name}-db`,`${Ys.idb_name}-store`));let F8=Ys;class wMe{static load(){const t=localStorage.getItem(rr.__LEGACY_LOCAL_STORAGE_LIBRARY);if(t!=null){const n=JSON.parse(t);if(n)return{libraryItems:n}}return null}static clear(){localStorage.removeItem(rr.__LEGACY_LOCAL_STORAGE_LIBRARY)}}const au=q2(),IMe=(e,t)=>{const[n,r]=Sg(e);return D.useLayoutEffect(()=>{r(typeof t=="function"?t():t)},[]),[n,r]},V9=Pn({message:null,nonce:0}),Mq=({collabError:e})=>{const[t,n]=D.useState(!1),r=D.useRef();return D.useEffect(()=>(n(!0),r.current=setTimeout(()=>{n(!1)},1e3),()=>{clearTimeout(r.current)}),[e.message,e.nonce]),e.message?p(xc,{label:e.message,long:!0,children:p("div",{className:Re("collab-errors-button",{"collab-errors-button-shake":t}),children:fde})}):null};Mq.displayName="CollabError";const Lq=Pn(null),H9=Pn(!1),Dq=Pn(!1),Nq=Pn(null);class TMe extends D.PureComponent{constructor(n){super(n);H(this,"portal");H(this,"fileManager");H(this,"excalidrawAPI");H(this,"activeIntervalId");H(this,"idleTimeoutId");H(this,"socketInitializationTimer");H(this,"lastBroadcastedOrReceivedSceneVersion",-1);H(this,"collaborators",new Map);H(this,"onUmmount",null);H(this,"onOfflineStatusToggle",()=>{au.set(Dq,!window.navigator.onLine)});H(this,"isCollaborating",()=>au.get(H9));H(this,"setIsCollaborating",n=>{au.set(H9,n)});H(this,"onUnload",()=>{this.destroySocketClient({isUnload:!0})});H(this,"beforeUnload",Nn(n=>{const r=Au(this.getSceneElementsIncludingDeleted());this.isCollaborating()&&(this.fileManager.shouldPreventUnload(r)||!Iq(this.portal,r))&&(this.saveCollabRoomToFirebase(r),JI(n))}));H(this,"saveCollabRoomToFirebase",async n=>{try{const r=await QPe(this.portal,n,this.excalidrawAPI.getAppState());this.resetErrorIndicator(),this.isCollaborating()&&r&&this.handleRemoteSceneUpdate(this._reconcileElements(r))}catch(r){const i=/is longer than.*?bytes/.test(r.message)?L("errors.collabSaveFailed_sizeExceeded"):L("errors.collabSaveFailed");(!this.state.dialogNotifiedErrors[i]||!this.isCollaborating())&&(this.setErrorDialog(i),this.setState({dialogNotifiedErrors:{...this.state.dialogNotifiedErrors,[i]:!0}})),this.isCollaborating()&&this.setErrorIndicator(i),console.error(r)}});H(this,"stopCollaboration",(n=!0)=>{if(this.queueBroadcastAllElements.cancel(),this.queueSaveToFirebase.cancel(),this.loadImageFiles.cancel(),this.resetErrorIndicator(!0),this.saveCollabRoomToFirebase(Au(this.excalidrawAPI.getSceneElementsIncludingDeleted())),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),!n)oi.fileStorage.reset(),this.destroySocketClient();else if(window.confirm(L("alerts.collabStopOverridePrompt"))){fMe(),window.history.pushState({},nc,window.location.origin),this.destroySocketClient(),oi.fileStorage.reset();const r=this.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>kt(i)&&i.status==="saved"?Xe(i,{status:"pending"}):i);this.excalidrawAPI.updateScene({elements:r,storeAction:ae.UPDATE})}});H(this,"destroySocketClient",n=>{this.lastBroadcastedOrReceivedSceneVersion=-1,this.portal.close(),this.fileManager.reset(),n!=null&&n.isUnload||(this.setIsCollaborating(!1),this.setActiveRoomLink(null),this.collaborators=new Map,this.excalidrawAPI.updateScene({collaborators:this.collaborators}),oi.resumeSave("collaboration"))});H(this,"fetchImageFilesFromFirebase",async n=>{const r=n.elements.filter(i=>dr(i)&&!this.fileManager.isFileTracked(i.fileId)&&!i.isDeleted&&(n.forceFetchFiles?i.status!=="pending"||Date.now()-i.updated>1e4:i.status==="saved")).map(i=>i.fileId);return await this.fileManager.getFiles(r)});H(this,"decryptPayload",async(n,r,i)=>{try{const o=await v2(n,r,i),s=new TextDecoder("utf-8").decode(new Uint8Array(o));return JSON.parse(s)}catch(o){return window.alert(L("alerts.decryptFailed")),console.error(o),{type:Wi.INVALID_RESPONSE}}});H(this,"fallbackInitializationHandler",null);H(this,"startCollaboration",async n=>{if(this.state.username||Le(()=>import("./random-username.esm-__vdrxyo.js"),__vite__mapDeps([])).then(({getRandomUsername:l})=>{const c=l();this.setUsername(c)}),this.portal.socket)return null;let r,i;n?{roomId:r,roomKey:i}=n:({roomId:r,roomKey:i}=await iMe(),window.history.pushState({},nc,oMe({roomId:r,roomKey:i})));const o=l3();this.setIsCollaborating(!0),oi.pauseSave("collaboration");const{default:s}=await Le(()=>import("./index-ChGp7972.js"),__vite__mapDeps([])),a=()=>{this.initializeRoom({roomLinkData:n,fetchScene:!0}).then(l=>{o.resolve(l)})};this.fallbackInitializationHandler=a;try{this.portal.socket=this.portal.open(s("https://oss-collab.excalidraw.com",{transports:["websocket","polling"]}),r,i),this.portal.socket.once("connect_error",a)}catch(l){return console.error(l),this.setErrorDialog(l.message),null}if(!n){const l=this.excalidrawAPI.getSceneElements().map(c=>kt(c)&&c.status==="saved"?Xe(c,{status:"pending"}):c);this.excalidrawAPI.updateScene({elements:l,storeAction:ae.UPDATE}),this.saveCollabRoomToFirebase(Au(l))}return this.socketInitializationTimer=window.setTimeout(a,Xxe),this.portal.socket.on("client-broadcast",async(l,c)=>{var d;if(!this.portal.roomKey)return;const u=await this.decryptPayload(c,l,this.portal.roomKey);switch(u.type){case Wi.INVALID_RESPONSE:return;case Wi.INIT:{if(!this.portal.socketInitialized){this.initializeRoom({fetchScene:!1});const f=u.payload.elements,g=this._reconcileElements(f);this.handleRemoteSceneUpdate(g),o.resolve({elements:g,scrollToContent:!0})}break}case Wi.UPDATE:this.handleRemoteSceneUpdate(this._reconcileElements(u.payload.elements));break;case Wi.MOUSE_LOCATION:{const{pointer:f,button:g,username:U,selectedElementIds:b}=u.payload,v=u.payload.socketId||u.payload.socketID;this.updateCollaborator(v,{pointer:f,button:g,selectedElementIds:b,username:U});break}case Wi.USER_VISIBLE_SCENE_BOUNDS:{const{sceneBounds:f,socketId:g}=u.payload,U=this.excalidrawAPI.getAppState();if(((d=U.userToFollow)==null?void 0:d.socketId)!==g){console.warn(`receiving remote client's (from ${g}) viewport bounds even though we're not subscribed to it!`);return}if(U.userToFollow&&U.followedBy.has(U.userToFollow.socketId))return;this.excalidrawAPI.updateScene({appState:BX({appState:U,bounds:f,fitToViewport:!0,viewportZoomFactor:1}).appState});break}case Wi.IDLE_STATUS:{const{userState:f,socketId:g,username:U}=u.payload;this.updateCollaborator(g,{userState:f,username:U});break}default:qu(u,null)}}),this.portal.socket.on("first-in-room",async()=>{this.portal.socket&&this.portal.socket.off("first-in-room");const l=await this.initializeRoom({fetchScene:!0,roomLinkData:n});o.resolve(l)}),this.portal.socket.on(Ob.USER_FOLLOW_ROOM_CHANGE,l=>{this.excalidrawAPI.updateScene({appState:{followedBy:new Set(l)}}),this.relayVisibleSceneBounds({force:!0})}),this.initializeIdleDetector(),this.setActiveRoomLink(window.location.href),o});H(this,"initializeRoom",async({fetchScene:n,roomLinkData:r})=>{if(clearTimeout(this.socketInitializationTimer),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),n&&r&&this.portal.socket){this.excalidrawAPI.resetScene();try{const i=await JPe(r.roomId,r.roomKey,this.portal.socket);if(i)return this.setLastBroadcastedOrReceivedSceneVersion(Uu(i)),{elements:i,scrollToContent:!0}}catch(i){console.error(i)}finally{this.portal.socketInitialized=!0}}else this.portal.socketInitialized=!0;return null});H(this,"_reconcileElements",n=>{const r=this.getSceneElementsIncludingDeleted(),i=this.excalidrawAPI.getAppState(),o=Jf(n,null),s=Gx(r,o,i);return this.setLastBroadcastedOrReceivedSceneVersion(Uu(s)),s});H(this,"loadImageFiles",ql(async()=>{const{loadedFiles:n,erroredFiles:r}=await this.fetchImageFilesFromFirebase({elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()});this.excalidrawAPI.addFiles(n),Jp({excalidrawAPI:this.excalidrawAPI,erroredFiles:r,elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()})},Kxe));H(this,"handleRemoteSceneUpdate",n=>{this.excalidrawAPI.updateScene({elements:n,storeAction:ae.UPDATE}),this.loadImageFiles()});H(this,"onPointerMove",()=>{this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.idleTimeoutId=window.setTimeout(this.reportIdle,cR),this.activeIntervalId||(this.activeIntervalId=window.setInterval(this.reportActive,uR))});H(this,"onVisibilityChange",()=>{document.hidden?(this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.onIdleStateChange(bf.AWAY)):(this.idleTimeoutId=window.setTimeout(this.reportIdle,cR),this.activeIntervalId=window.setInterval(this.reportActive,uR),this.onIdleStateChange(bf.ACTIVE))});H(this,"reportIdle",()=>{this.onIdleStateChange(bf.IDLE),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null)});H(this,"reportActive",()=>{this.onIdleStateChange(bf.ACTIVE)});H(this,"initializeIdleDetector",()=>{document.addEventListener(ge.POINTER_MOVE,this.onPointerMove),document.addEventListener(ge.VISIBILITY_CHANGE,this.onVisibilityChange)});H(this,"updateCollaborator",(n,r)=>{var s;const i=new Map(this.collaborators),o=Object.assign({},i.get(n),r,{isCurrentUser:n===((s=this.portal.socket)==null?void 0:s.id)});i.set(n,o),this.collaborators=i,this.excalidrawAPI.updateScene({collaborators:i})});H(this,"setLastBroadcastedOrReceivedSceneVersion",n=>{this.lastBroadcastedOrReceivedSceneVersion=n});H(this,"getLastBroadcastedOrReceivedSceneVersion",()=>this.lastBroadcastedOrReceivedSceneVersion);H(this,"getSceneElementsIncludingDeleted",()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());H(this,"onPointerUpdate",ql(n=>{n.pointersMap.size<2&&this.portal.socket&&this.portal.broadcastMouseLocation(n)},Zxe));H(this,"relayVisibleSceneBounds",n=>{const r=this.excalidrawAPI.getAppState();this.portal.socket&&(r.followedBy.size>0||n!=null&&n.force)&&this.portal.broadcastVisibleSceneBounds({sceneBounds:bG(r)},`follow@${this.portal.socket.id}`)});H(this,"onIdleStateChange",n=>{this.portal.broadcastIdleChange(n)});H(this,"broadcastElements",n=>{Uu(n)>this.getLastBroadcastedOrReceivedSceneVersion()&&(this.portal.broadcastScene(Wi.UPDATE,n,!1),this.lastBroadcastedOrReceivedSceneVersion=Uu(n),this.queueBroadcastAllElements())});H(this,"syncElements",n=>{this.broadcastElements(n),this.queueSaveToFirebase()});H(this,"queueBroadcastAllElements",ql(()=>{this.portal.broadcastScene(Wi.UPDATE,this.excalidrawAPI.getSceneElementsIncludingDeleted(),!0);const n=this.getLastBroadcastedOrReceivedSceneVersion(),r=Math.max(n,Uu(this.getSceneElementsIncludingDeleted()));this.setLastBroadcastedOrReceivedSceneVersion(r)},$N));H(this,"queueSaveToFirebase",ql(()=>{this.portal.socketInitialized&&this.saveCollabRoomToFirebase(Au(this.excalidrawAPI.getSceneElementsIncludingDeleted()))},$N,{leading:!1}));H(this,"setUsername",n=>{this.setState({username:n}),cMe(n)});H(this,"getUsername",()=>this.state.username);H(this,"setActiveRoomLink",n=>{this.setState({activeRoomLink:n}),au.set(Nq,n)});H(this,"getActiveRoomLink",()=>this.state.activeRoomLink);H(this,"setErrorIndicator",n=>{au.set(V9,{message:n,nonce:Date.now()})});H(this,"resetErrorIndicator",(n=!1)=>{au.set(V9,{message:null,nonce:0}),n&&this.setState({dialogNotifiedErrors:{}})});H(this,"setErrorDialog",n=>{this.setState({errorMessage:n})});this.state={errorMessage:null,dialogNotifiedErrors:{},username:Cq()||"",activeRoomLink:null},this.portal=new dMe(this),this.fileManager=new xY({getFiles:async r=>{const{roomId:i,roomKey:o}=this.portal;if(!i||!o)throw new kg;return Tq(`files/rooms/${i}`,o,r)},saveFiles:async({addedFiles:r})=>{const{roomId:i,roomKey:o}=this.portal;if(!i||!o)throw new kg;const{savedFiles:s,erroredFiles:a}=await oC({prefix:`${TY.collabFiles}/${i}`,files:await yS({files:r,encryptionKey:o,maxBytes:bS})});return{savedFiles:s.reduce((l,c)=>{const u=r.get(c);return u&&l.set(c,u),l},new Map),erroredFiles:a.reduce((l,c)=>{const u=r.get(c);return u&&l.set(c,u),l},new Map)}}}),this.excalidrawAPI=n.excalidrawAPI,this.activeIntervalId=null,this.idleTimeoutId=null}componentDidMount(){window.addEventListener(ge.BEFORE_UNLOAD,this.beforeUnload),window.addEventListener("online",this.onOfflineStatusToggle),window.addEventListener("offline",this.onOfflineStatusToggle),window.addEventListener(ge.UNLOAD,this.onUnload);const n=this.excalidrawAPI.onUserFollow(s=>{this.portal.socket&&this.portal.broadcastUserFollowed(s)}),r=a0(this.relayVisibleSceneBounds),i=this.excalidrawAPI.onScrollChange(()=>r());this.onUmmount=()=>{n(),i()},this.onOfflineStatusToggle();const o={isCollaborating:this.isCollaborating,onPointerUpdate:this.onPointerUpdate,startCollaboration:this.startCollaboration,syncElements:this.syncElements,fetchImageFilesFromFirebase:this.fetchImageFilesFromFirebase,stopCollaboration:this.stopCollaboration,setUsername:this.setUsername,getUsername:this.getUsername,getActiveRoomLink:this.getActiveRoomLink,setCollabError:this.setErrorDialog};au.set(Lq,o)}componentWillUnmount(){var n;window.removeEventListener("online",this.onOfflineStatusToggle),window.removeEventListener("offline",this.onOfflineStatusToggle),window.removeEventListener(ge.BEFORE_UNLOAD,this.beforeUnload),window.removeEventListener(ge.UNLOAD,this.onUnload),window.removeEventListener(ge.POINTER_MOVE,this.onPointerMove),window.removeEventListener(ge.VISIBILITY_CHANGE,this.onVisibilityChange),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),(n=this.onUmmount)==null||n.call(this)}setCollaborators(n){var i;const r=new Map;for(const o of n)r.set(o,Object.assign({},this.collaborators.get(o),{isCurrentUser:o===((i=this.portal.socket)==null?void 0:i.id)}));this.collaborators=r,this.excalidrawAPI.updateScene({collaborators:r})}render(){const{errorMessage:n}=this.state;return p(ke,{children:n!=null&&p(nS,{onClose:()=>this.setErrorDialog(null),children:n})})}}const xMe=500,nF=mc(e=>{e({scene:kq(),total:uMe()})},xMe),SMe=e=>{const[t,n]=D.useState({scene:0,total:0});D.useEffect(()=>{nF(s=>{n(s)})},[e.elements,e.appState]),D.useEffect(()=>()=>nF.cancel(),[]);const r=W_();let i,o;return r!==L$?(o=r.slice(0,16).replace("T"," "),i=r.slice(21)):o=L("stats.versionNotAvailable"),z(jl.StatsRows,{order:-1,children:[p(jl.StatsRow,{heading:!0,children:L("stats.version")}),z(jl.StatsRow,{style:{textAlign:"center",cursor:"pointer"},onClick:async()=>{try{await bd(W_()),e.setToast(L("toast.copyToClipboard"))}catch{}},title:L("stats.versionCopy"),children:[o,p("br",{}),i]}),p(jl.StatsRow,{heading:!0,children:L("stats.storage")}),z(jl.StatsRow,{columns:2,children:[p("div",{children:L("stats.scene")}),p("div",{children:OR(t.scene,1)})]}),z(jl.StatsRow,{columns:2,children:[p("div",{children:L("stats.total")}),p("div",{children:OR(t.total,1)})]})]})},W9=async(e,t,n,r)=>{const i=await wq(),o=`${a3(12)}`,s=await FT(),a=await w3(s,h0(e,t,n,"database")),l=new Blob([a.iv,new Uint8Array(a.encryptedBuffer)],{type:Ne.binary}),c=vq(i,`/migrations/scenes/${o}`);await yq(c,l,{customMetadata:{data:JSON.stringify({version:2,name:r}),created:Date.now().toString()}});const u=new Map;for(const d of e)dr(d)&&n[d.fileId]&&u.set(d.fileId,n[d.fileId]);if(u.size){const d=await yS({files:u,encryptionKey:s,maxBytes:bS});await oC({prefix:`/migrations/files/scenes/${o}`,files:d})}window.open(`https://app.excalidraw.com/import?excalidraw=${o},${s}`)},CMe=({elements:e,appState:t,files:n,name:r,onError:i,onSuccess:o})=>{const{t:s}=Zn();return z(qw,{color:"primary",children:[p("div",{className:"Card-icon",children:p(bK,{style:{"--color-logo-icon":"#fff",width:"2.8rem",height:"2.8rem"}})}),p("h2",{children:"Excalidraw+"}),p("div",{className:"Card-details",children:s("exportDialog.excalidrawplus_description")}),p(vt,{className:"Card-button",type:"button",title:s("exportDialog.excalidrawplus_button"),"aria-label":s("exportDialog.excalidrawplus_button"),showAriaLabel:!0,onClick:async()=>{try{Dt("export","eplus",`ui (${nU()})`),await W9(e,t,n,r),o()}catch(a){console.error(a),a.name!=="AbortError"&&i(new Error(s("exportDialog.excalidrawplus_exportError")))}}})]})};function AMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W2(e){"@babel/helpers - typeof";return W2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W2(e)}function kMe(e,t){if(W2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(W2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RMe(e){var t=kMe(e,"string");return W2(t)=="symbol"?t:t+""}function PMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RMe(r.key),r)}}function MMe(e,t,n){return t&&PMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Oq=[],LMe=Oq.forEach,DMe=Oq.slice;function NMe(e){return LMe.call(DMe.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var rF=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,OMe=function(t,n,r){var i=r||{};i.path=i.path||"/";var o=encodeURIComponent(n),s=t+"="+o;if(i.maxAge>0){var a=i.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");s+="; Max-Age="+Math.floor(a)}if(i.domain){if(!rF.test(i.domain))throw new TypeError("option domain is invalid");s+="; Domain="+i.domain}if(i.path){if(!rF.test(i.path))throw new TypeError("option path is invalid");s+="; Path="+i.path}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},iF={create:function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+r*60*1e3)),i&&(o.domain=i),document.cookie=OMe(t,encodeURIComponent(n),o)},read:function(t){for(var n=t+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var o=r[i];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(n)===0)return o.substring(n.length,o.length)}return null},remove:function(t){this.create(t,"",-1)}},FMe={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var r=iF.read(t.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&iF.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},BMe={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),o=i.split("&"),s=0;s<o.length;s++){var a=o[s].indexOf("=");if(a>0){var l=o[s].substring(0,a);l===t.lookupQuerystring&&(n=o[s].substring(a+1))}}}return n}},Dp=null,oF=function(){if(Dp!==null)return Dp;try{Dp=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Dp=!1}return Dp},$Me={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&oF()){var r=window.localStorage.getItem(t.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&oF()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},Np=null,sF=function(){if(Np!==null)return Np;try{Np=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Np=!1}return Np},zMe={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&sF()){var r=window.sessionStorage.getItem(t.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&sF()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},VMe={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},HMe={name:"htmlTag",lookup:function(t){var n,r=t.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},WMe={name:"path",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof r[t.lookupFromPathIndex]!="string")return;n=r[t.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},GMe={name:"subdomain",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);r instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?n=r[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n=r[0].replace("http://","").replace("https://","").replace(".",""))}return n}};function XMe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var Fq=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};AMe(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return MMe(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=NMe(r,this.options||{},XMe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(FMe),this.addDetector(BMe),this.addDetector($Me),this.addDetector(zMe),this.addDetector(VMe),this.addDetector(HMe),this.addDetector(WMe),this.addDetector(GMe)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var i=[];return n.forEach(function(o){if(r.detectors[o]){var s=r.detectors[o].lookup(r.options);s&&typeof s=="string"&&(s=[s]),s&&(i=i.concat(s))}}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(o){i.detectors[o]&&i.detectors[o].cacheUserLanguage(n,i.options)}))}}]),e}();Fq.type="languageDetector";const aC=new Fq;aC.init({languageUtils:{}});const Bq=()=>{var r;const e=aC.detect(),t=Array.isArray(e)?e[0]:e;return(t?(r=o3.find(i=>i.code.startsWith(t)))==null?void 0:r.code:null)||ph.code},$q=Pn(Bq()),jMe=()=>{const[e,t]=Sg($q);return D.useEffect(()=>{aC.cacheUserLanguage(e)},[e]),[e,t]},KMe=({style:e})=>{const{t,langCode:n}=Zn(),r=YI($q);return p("select",{className:"dropdown-select dropdown-select__language",onChange:({target:i})=>r(i.value),value:n,"aria-label":t("buttons.selectLanguage"),style:e,children:o3.map(i=>p("option",{value:i.code,children:i.label},i.code))})},YMe=(e,t,n,r)=>{e.save(),e.strokeStyle=r,e.beginPath(),e.moveTo(n[0][0]*t,n[0][1]*t),e.lineTo(n[1][0]*t,n[1][1]*t),e.stroke(),e.restore()},ZMe=(e,t)=>{e.strokeStyle="#888",e.save(),e.beginPath(),e.moveTo(-10*t,-10*t),e.lineTo(10*t,10*t),e.moveTo(10*t,-10*t),e.lineTo(-10*t,10*t),e.stroke(),e.save()},aF=(e,t,n)=>{e.forEach(r=>{switch(!0){case vce(r.data):YMe(t,n.zoom.value,r.data,r.color);break}})},qMe=(e,t,n,r)=>{var a,l,c,u;const[i,o]=x3(e,n);(t.height!==e.height||t.width!==e.width)&&r();const s=S3({canvas:e,scale:n,normalizedWidth:i,normalizedHeight:o,viewBackgroundColor:"transparent"});if(s.save(),s.translate(t.scrollX*t.zoom.value,t.scrollY*t.zoom.value),ZMe(s,t.zoom.value),(a=window.visualDebug)!=null&&a.currentFrame&&((l=window.visualDebug)!=null&&l.data)&&window.visualDebug.data.length>0){const[d]=QMe();aF(window.visualDebug.data[d],s,t)}else(c=window.visualDebug)==null||c.data.forEach(d=>{aF(d,s,t)});window.visualDebug&&(window.visualDebug.data=((u=window.visualDebug)==null?void 0:u.data.map(d=>d.filter(f=>f.permanent)))??[])},QMe=()=>{var n,r,i;const e=((n=window.visualDebug)==null?void 0:n.currentFrame)??0,t=((r=window.visualDebug)==null?void 0:r.data.length)??0;return t>0?[e%t,((i=window.visualDebug)==null?void 0:i.currentFrame)??0]:[0,0]},JMe=a0((e,t,n,r)=>{qMe(e,t,n,r)},{trailing:!0}),zq=()=>{var e;return Array.isArray((e=window.visualDebug)==null?void 0:e.data)},eLe=({onChange:e})=>{const t=D.useCallback(()=>{var o,s;(!((o=window.visualDebug)!=null&&o.currentFrame)||isNaN(((s=window.visualDebug)==null?void 0:s.currentFrame)??-1))&&(window.visualDebug.currentFrame=0),window.visualDebug.currentFrame+=1,e()},[e]),n=D.useCallback(()=>{var o,s,a;(!((o=window.visualDebug)!=null&&o.currentFrame)||isNaN(((s=window.visualDebug)==null?void 0:s.currentFrame)??-1)||((a=window.visualDebug)==null?void 0:a.currentFrame)<1)&&(window.visualDebug.currentFrame=1),window.visualDebug.currentFrame-=1,e()},[e]),r=D.useCallback(()=>{window.visualDebug.currentFrame=void 0,e()},[e]),i=D.useCallback(()=>{window.visualDebug&&(window.visualDebug.currentFrame=void 0,window.visualDebug.data=[]),e()},[e]);return z(ke,{children:[p("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:i,children:p("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:Ju})}),p("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:n,children:p("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:p(J_,{flip:!0})})}),p("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:r,children:p("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:Uh})}),p("button",{className:"ToolIcon_type_button","data-testid":"debug-backward","aria-label":"Move backward",type:"button",onClick:t,children:p("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:p(J_,{})})})]})},tLe=D.forwardRef(({appState:e,scale:t},n)=>{const{width:r,height:i}=e,o=D.useRef(null);return D.useImperativeHandle(n,()=>o.current,[o]),p("canvas",{style:{width:r,height:i,position:"absolute",zIndex:2,pointerEvents:"none"},width:r*t,height:i*t,ref:o,children:"Debug Canvas"})}),nLe=Ee.memo(e=>z(Xt,{children:[p(Xt.DefaultItems.LoadScene,{}),p(Xt.DefaultItems.SaveToActiveFile,{}),p(Xt.DefaultItems.Export,{}),p(Xt.DefaultItems.SaveAsImage,{}),e.isCollabEnabled&&p(Xt.DefaultItems.LiveCollaborationTrigger,{isCollaborating:e.isCollaborating,onSelect:()=>e.onCollabDialogOpen()}),p(Xt.DefaultItems.CommandPalette,{className:"highlighted"}),p(Xt.DefaultItems.SearchMenu,{}),p(Xt.DefaultItems.Help,{}),p(Xt.DefaultItems.ClearCanvas,{}),p(Xt.Separator,{}),p(Xt.ItemLink,{icon:Y_,href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=hamburger",className:"",children:"Excalidraw+"}),p(Xt.DefaultItems.Socials,{}),p(Xt.ItemLink,{icon:GV,href:`https://app.excalidraw.com${uh?"":"/sign-up"}?utm_source=signin&utm_medium=app&utm_content=hamburger`,className:"highlighted",children:uh?"Sign in":"Sign up"}),!1,p(Xt.Separator,{}),p(Xt.DefaultItems.ToggleTheme,{allowSystemTheme:!0,theme:e.theme,onSelect:e.setTheme}),p(Xt.ItemCustom,{children:p(KMe,{style:{width:"100%"}})}),p(Xt.DefaultItems.ChangeCanvasBackground,{})]})),rLe=Ee.memo(e=>{const{t}=Zn();let n;return uh?n=t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((r,i)=>r==="Excalidraw+"?p("a",{style:{pointerEvents:Yd.inheritFromUI},href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",children:"Excalidraw+"},i):r):n=t("welcomeScreen.app.center_heading"),z(zi,{children:[p(zi.Hints.MenuHint,{children:t("welcomeScreen.app.menuHint")}),p(zi.Hints.ToolbarHint,{}),p(zi.Hints.HelpHint,{}),z(zi.Center,{children:[p(zi.Center.Logo,{}),p(zi.Center.Heading,{children:n}),z(zi.Center.Menu,{children:[p(zi.Center.MenuItemLoadScene,{}),p(zi.Center.MenuItemHelp,{}),e.isCollabEnabled&&p(zi.Center.MenuItemLiveCollaborationTrigger,{onSelect:()=>e.onCollabDialogOpen()}),!uh&&p(zi.Center.MenuItemLink,{href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenGuest",shortcut:null,icon:GV,children:"Sign up"})]})]})]})}),iLe=()=>{const{t:e}=Zn();return p("a",{className:"encrypted-icon tooltip",href:"https://plus.excalidraw.com/blog/end-to-end-encryption",target:"_blank",rel:"noopener noreferrer","aria-label":e("encrypted.link"),children:p(xc,{label:e("encrypted.tooltip"),long:!0,children:bde})})},oLe=()=>uh?p("a",{href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",target:"_blank",rel:"noreferrer",className:"plus-button",children:"Go to Excalidraw+"}):null,sLe=Ee.memo(({onChange:e})=>p(UK,{children:z("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[zq()&&p(eLe,{onChange:e}),uh?p(oLe,{}):p(iLe,{})]})})),aLe=({link:e,onCloseRequest:t,setErrorMessage:n})=>{const{t:r}=Zn(),[,i]=D.useState(!1),o=D.useRef(0),s=D.useRef(null),a=async()=>{var u;try{await bd(e)}catch{n(r("errors.copyToSystemClipboardFailed"))}i(!0),o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{i(!1)},3e3),(u=s.current)==null||u.select()},{onCopy:l,copyStatus:c}=Rx();return p(Ko,{onCloseRequest:t,title:!1,size:"small",children:z("div",{className:"ShareableLinkDialog",children:[p("h3",{children:"Shareable link"}),z("div",{className:"ShareableLinkDialog__linkRow",children:[p(Vg,{ref:s,label:"Link",readonly:!0,fullWidth:!0,value:e,selectOnRender:!0}),p(ga,{size:"large",label:r("buttons.copyLink"),icon:sU,status:c,onClick:()=>{l(),a()}})]}),z("div",{className:"ShareableLinkDialog__description",children:["🔒 ",r("alerts.uploadedSecurly")]})]})})},Vq=Pn({isOpen:!1}),lLe=()=>{const e=window.navigator,t=/Apple/.test(e.vendor),n=e.appVersion.indexOf("Win")!==-1;return t?hde:n?pde:fT},cLe=({collabAPI:e,activeRoomLink:t,handleClose:n})=>{const{t:r}=Zn(),[,i]=D.useState(!1),o=D.useRef(0),s=D.useRef(null),a="share"in navigator,{onCopy:l,copyStatus:c}=Rx(),u=async()=>{var f;try{await bd(t)}catch{e.setCollabError(r("errors.copyToSystemClipboardFailed"))}i(!0),o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{i(!1)},3e3),(f=s.current)==null||f.select()},d=async()=>{try{await navigator.share({title:r("roomDialog.shareTitle"),text:r("roomDialog.shareTitle"),url:t})}catch{}};return z(ke,{children:[p("h3",{className:"ShareDialog__active__header",children:r("labels.liveCollaboration").replace(/\./g,"")}),p(Vg,{defaultValue:e.getUsername(),placeholder:"Your name",label:"Your name",onChange:e.setUsername,onKeyDown:f=>f.key===j.ENTER&&n()}),z("div",{className:"ShareDialog__active__linkRow",children:[p(Vg,{ref:s,label:"Link",readonly:!0,fullWidth:!0,value:t}),a&&p(ga,{size:"large",variant:"icon",label:"Share",icon:lLe(),className:"ShareDialog__active__share",onClick:d}),p(ga,{size:"large",label:r("buttons.copyLink"),icon:sU,status:c,onClick:()=>{u(),l()}})]}),z("div",{className:"ShareDialog__active__description",children:[z("p",{children:[z("span",{role:"img","aria-hidden":"true",className:"ShareDialog__active__description__emoji",children:["🔒"," "]}),r("roomDialog.desc_privacy")]}),p("p",{children:r("roomDialog.desc_exitSession")})]}),p("div",{className:"ShareDialog__active__actions",children:p(ga,{size:"large",variant:"outlined",color:"danger",label:r("roomDialog.button_stopSession"),icon:ife,onClick:()=>{Dt("share","room closed"),e.stopCollaboration(),e.isCollaborating()||n()}})})]})},uLe=e=>{const{t}=Zn(),{collabAPI:n}=e,r=n?z(ke,{children:[p("div",{className:"ShareDialog__picker__header",children:t("labels.liveCollaboration").replace(/\./g,"")}),z("div",{className:"ShareDialog__picker__description",children:[p("div",{style:{marginBottom:"1em"},children:t("roomDialog.desc_intro")}),t("roomDialog.desc_privacy")]}),p("div",{className:"ShareDialog__picker__button",children:p(ga,{size:"large",label:t("roomDialog.button_startSession"),icon:rfe,onClick:()=>{Dt("share","room creation",`ui (${nU()})`),n.startCollaboration(null)}})}),e.type==="share"&&p("div",{className:"ShareDialog__separator",children:p("span",{children:t("shareDialog.or")})})]}):null;return z(ke,{children:[r,e.type==="share"&&z(ke,{children:[p("div",{className:"ShareDialog__picker__header",children:t("exportDialog.link_title")}),p("div",{className:"ShareDialog__picker__description",children:t("exportDialog.link_details")}),p("div",{className:"ShareDialog__picker__button",children:p(ga,{size:"large",label:t("exportDialog.link_button"),icon:Sy,onClick:async()=>{await e.onExportToBackend(),e.handleClose()}})})]})]})},dLe=e=>{const t=a2(Nq);return p(Ko,{size:"small",onCloseRequest:e.handleClose,title:!1,children:p("div",{className:"ShareDialog",children:e.collabAPI&&t?p(cLe,{collabAPI:e.collabAPI,activeRoomLink:t,handleClose:e.handleClose}):p(uLe,{...e})})})},fLe=e=>{const[t,n]=Sg(Vq),{openDialog:r}=Qr();return D.useEffect(()=>{r&&n({isOpen:!1})},[r,n]),t.isOpen?p(dLe,{handleClose:()=>n({isOpen:!1}),collabAPI:e.collabAPI,onExportToBackend:e.onExportToBackend,type:t.type}):null},lF=()=>{var e;return(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)")},hLe=()=>{const[e,t]=D.useState(()=>localStorage.getItem(rr.LOCAL_STORAGE_THEME)||Ge.LIGHT),[n,r]=D.useState(Ge.LIGHT);return D.useEffect(()=>{const i=lF(),o=a=>{r(a.matches?Ge.DARK:Ge.LIGHT)};e==="system"&&(i==null||i.addEventListener("change",o));const s=a=>{!a[j.CTRL_OR_CMD]&&a.altKey&&a.shiftKey&&a.code===It.D&&(a.preventDefault(),a.stopImmediatePropagation(),t(n===Ge.DARK?Ge.LIGHT:Ge.DARK))};return document.addEventListener(ge.KEYDOWN,s,{capture:!0}),()=>{i==null||i.removeEventListener("change",o),document.removeEventListener(ge.KEYDOWN,s,{capture:!0})}},[e,n,t]),D.useLayoutEffect(()=>{var i;localStorage.setItem(rr.LOCAL_STORAGE_THEME,e),r(e==="system"?(i=lF())!=null&&i.matches?Ge.DARK:Ge.LIGHT:e)},[e]),{editorTheme:n,appTheme:e,setAppTheme:t}},gLe=({excalidrawAPI:e})=>z(ke,{children:[p(h_e,{generate:async({frame:t,children:n})=>{const r=e.getAppState(),i=await i5e({elements:n,appState:{...r,exportBackground:!0,viewBackgroundColor:r.viewBackgroundColor},exportingFrame:t,files:e.getFiles(),mimeType:Ne.jpg}),o=await Ew(i),s=wG(n),a=await fetch("https://oss-ai.excalidraw.com/v1/ai/diagram-to-code/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({texts:s,image:o,theme:r.theme})});if(!a.ok){const l=await a.text(),c=Vce(l);if(!c)throw new Error(l);if(c.statusCode===429)return{html:`<html>
                <body style="margin: 0; text-align: center">
                <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; height: 100vh; padding: 0 60px">
                  <div style="color:red">Too many requests today,</br>please try again tomorrow!</div>
                  </br>
                  </br>
                  <div>You can also try <a href="https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=d2c" target="_blank" rel="noreferrer noopener">Excalidraw+</a> to get more requests.</div>
                </div>
                </body>
                </html>`};throw new Error(c.message||l)}try{const{html:l}=await a.json();if(!l)throw new Error("Generation failed (invalid response)");return{html:l}}catch{throw new Error("Generation failed (invalid response)")}}}),p(PK,{onTextSubmit:async t=>{try{const n=await fetch("https://oss-ai.excalidraw.com/v1/ai/text-to-diagram/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t})}),r=n.headers.has("X-Ratelimit-Limit")?parseInt(n.headers.get("X-Ratelimit-Limit")||"0",10):void 0,i=n.headers.has("X-Ratelimit-Remaining")?parseInt(n.headers.get("X-Ratelimit-Remaining")||"0",10):void 0,o=await n.json();if(!n.ok){if(n.status===429)return{rateLimit:r,rateLimitRemaining:i,error:new Error("Too many requests today, please try again tomorrow!")};throw new Error(o.message||"Generation failed...")}const s=o.generatedResponse;if(!s)throw new Error("Generation failed...");return{generatedResponse:s,rateLimit:r,rateLimitRemaining:i}}catch{throw new Error("Request failed")}}})]}),pLe="REQUEST_SCENE",K5="https://app.excalidraw.com",mLe=async({rawElementsString:e,rawAppStateString:t})=>{if(!e||!t)throw new Us("Elements or appstate is missing.");try{const n=JSON.parse(e);if(!n.length)throw new Us("Scene is empty, nothing to export.");const r=JSON.parse(t),i=n.reduce((s,a)=>("fileId"in a&&a.fileId&&s.push(a.fileId),s),[]),o=await oi.fileStorage.getFiles(i);return{type:"SCENE_DATA",elements:n,appState:r,files:o}}catch(n){throw n instanceof Us?n:new Us("Failed to parse scene data.")}},ULe=async({token:e,publicKey:t})=>{try{if(!t)throw new Us("Public key is undefined");const[n,r,i]=e.split(".");if(!n||!r||!i)throw new Us("Invalid JWT format");const o=pM(r),s=pM(i),a=`${n}.${r}`,l=Uint8Array.from(s,b=>b.charCodeAt(0)),c=t.replace(/-----\w+ PUBLIC KEY-----/g,""),u=Uint8Array.from(atob(c),b=>b.charCodeAt(0)),d=await crypto.subtle.importKey("spki",u,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"]);if(!await crypto.subtle.verify("RSASSA-PKCS1-v1_5",d,l,new TextEncoder().encode(a)))throw new Error("Invalid JWT");const g=JSON.parse(o),U=Math.floor(Date.now()/1e3);if(g.exp&&g.exp<U)throw new Error("JWT has expired")}catch(n){throw console.error("Failed to verify JWT:",n),new Error(n instanceof Error?n.message:"Invalid JWT")}},bLe=()=>{const e=D.useRef(!1);return D.useLayoutEffect(()=>{const t=async n=>{if(n.origin!==K5)throw new Us("Invalid origin");if(n.data.type===pLe){if(!n.data.jwt)throw new Us("JWT is missing");try{try{await ULe({token:n.data.jwt,publicKey:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`})}catch(i){throw console.error(`Failed to verify JWT: ${i.message}`),new Us("Failed to verify JWT")}const r=await mLe({rawAppStateString:localStorage.getItem(rr.LOCAL_STORAGE_APP_STATE),rawElementsString:localStorage.getItem(rr.LOCAL_STORAGE_ELEMENTS)});n.source.postMessage(r,{targetOrigin:K5})}catch(r){const i={type:"ERROR",message:r instanceof Us?r.message:"Failed to export scene data"};n.source.postMessage(i,{targetOrigin:K5})}}};if(window.addEventListener("message",t),!e.current){e.current=!0;const n={type:"READY"};window.parent.postMessage(n,K5)}return()=>{window.removeEventListener("message",t)}},[]),null};I$();window.EXCALIDRAW_THROTTLE_RENDER=!0;let C1=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),C1=e});let Hq=!1;if(window.self!==window.top)try{const e=new URL(document.referrer),t=new URL(window.location.href);e.origin===t.origin&&(Hq=!0)}catch{}const cF={title:L("overwriteConfirm.modal.shareableLink.title"),description:p(Uo,{i18nKey:"overwriteConfirm.modal.shareableLink.description",bold:e=>p("strong",{children:e}),br:()=>p("br",{})}),actionLabel:L("overwriteConfirm.modal.shareableLink.button"),color:"danger"},G9=async e=>{var c,u;const n=new URLSearchParams(window.location.search).get("id"),r=window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/),i=window.location.hash.match(/^#url=(.*)$/),o=Aq();let s=await eF(null,null,o),a=rMe(window.location.href);const l=!!(n||r||a);if(l)if(!s.elements.length||a||await Jw(cF))r&&(s=await eF(r[1],r[2],o)),s.scrollToContent=!0,a||window.history.replaceState({},nc,window.location.origin);else{if(document.hidden)return new Promise((d,f)=>{window.addEventListener("focus",()=>G9(e).then(d).catch(f),{once:!0})});a=null,window.history.replaceState({},nc,window.location.origin)}else if(i){window.history.replaceState({},nc,window.location.origin);const d=i[1];try{const f=await fetch(window.decodeURIComponent(d)),g=await $T(await f.blob(),null,null);if(!s.elements.length||await Jw(cF))return{scene:g,isExternalScene:l}}catch{return{scene:{appState:{errorMessage:L("alerts.invalidSceneUrl")}},isExternalScene:l}}}if(a&&e.collabAPI){const{excalidrawAPI:d}=e,f=await e.collabAPI.startCollaboration(a);return{scene:{...f,appState:{..._W({...f==null?void 0:f.appState,theme:((c=o==null?void 0:o.appState)==null?void 0:c.theme)||((u=f==null?void 0:f.appState)==null?void 0:u.theme)},d.getAppState()),isLoading:!1},elements:Gx((f==null?void 0:f.elements)||[],d.getSceneElementsIncludingDeleted(),d.getAppState())},isExternalScene:!0,id:a.roomId,key:a.roomKey}}else if(s)return l&&r?{scene:s,isExternalScene:l,id:r[1],key:r[2]}:{scene:s,isExternalScene:!1};return{scene:null,isExternalScene:!1}},yLe=()=>{const[e,t]=D.useState(""),n=Fce(),{editorTheme:r,appTheme:i,setAppTheme:o}=hLe(),[s,a]=jMe(),l=D.useRef({promise:null});l.current.promise||(l.current.promise=l3());const c=D.useRef(null);D.useEffect(()=>{Dt("load","frame",nU()),setTimeout(()=>{Dt("load","version",W_())},kae)},[]);const[u,d]=Bz(),[,f]=Sg(Vq),[g]=Sg(Lq),[U]=IMe(H9,()=>JO(window.location.href)),b=a2(V9);k7e({excalidrawAPI:u,adapter:F8,migrationAdapter:wMe});const[,v]=D.useState(!1);D.useEffect(()=>{},[u]),D.useEffect(()=>{if(!u||!n&&!g)return;const R=(ne,ee=!1)=>{var q;if(ne.scene)if(g!=null&&g.isCollaborating())ne.scene.elements&&g.fetchImageFilesFromFirebase({elements:ne.scene.elements,forceFetchFiles:!0}).then(({loadedFiles:Z,erroredFiles:te})=>{u.addFiles(Z),Jp({excalidrawAPI:u,erroredFiles:te,elements:u.getSceneElementsIncludingDeleted()})});else{const Z=((q=ne.scene.elements)==null?void 0:q.reduce((te,pe)=>dr(pe)?te.concat(pe.fileId):te,[]))||[];ne.isExternalScene?Tq(`${TY.shareLinkFiles}/${ne.id}`,ne.key,Z).then(({loadedFiles:te,erroredFiles:pe})=>{u.addFiles(te),Jp({excalidrawAPI:u,erroredFiles:pe,elements:u.getSceneElementsIncludingDeleted()})}):ee&&(Z.length&&oi.fileStorage.getFiles(Z).then(({loadedFiles:te,erroredFiles:pe})=>{te.length&&u.addFiles(te),Jp({excalidrawAPI:u,erroredFiles:pe,elements:u.getSceneElementsIncludingDeleted()})}),oi.fileStorage.clearObsoleteFiles({currentFileIds:Z}))}};G9({collabAPI:g,excalidrawAPI:u}).then(async ne=>{R(ne,!0),l.current.promise.resolve(ne.scene)});const O=async ne=>{ne.preventDefault(),jw()||(g!=null&&g.isCollaborating()&&!JO(window.location.href)&&g.stopCollaboration(!1),u.updateScene({appState:{isLoading:!0}}),G9({collabAPI:g,excalidrawAPI:u}).then(q=>{R(q),q.scene&&u.updateScene({...q.scene,...eh(q.scene,null,null,{repairBindings:!0}),storeAction:ae.CAPTURE})}))},F=setTimeout(()=>document.title=nc,Aae),N=mc(()=>{if(!document.hidden&&(g&&!g.isCollaborating()||n)){if(tF(rr.VERSION_DATA_STATE)){const ne=Aq(),ee=Cq();a(Bq()),u.updateScene({...ne,storeAction:ae.UPDATE}),F8.load().then(q=>{q&&u.updateLibrary({libraryItems:q.libraryItems})}),g==null||g.setUsername(ee||"")}if(tF(rr.VERSION_FILES)){const ne=u.getSceneElementsIncludingDeleted(),ee=u.getFiles(),q=(ne==null?void 0:ne.reduce((Z,te)=>dr(te)&&!ee[te.fileId]?Z.concat(te.fileId):Z,[]))||[];q.length&&oi.fileStorage.getFiles(q).then(({loadedFiles:Z,erroredFiles:te})=>{Z.length&&u.addFiles(Z),Jp({excalidrawAPI:u,erroredFiles:te,elements:u.getSceneElementsIncludingDeleted()})})}}},Yxe),J=()=>{oi.flushSave()},K=ne=>{(ne.type===ge.BLUR||document.hidden)&&oi.flushSave(),(ne.type===ge.VISIBILITY_CHANGE||ne.type===ge.FOCUS)&&N()};return window.addEventListener(ge.HASHCHANGE,O,!1),window.addEventListener(ge.UNLOAD,J,!1),window.addEventListener(ge.BLUR,K,!1),document.addEventListener(ge.VISIBILITY_CHANGE,K,!1),window.addEventListener(ge.FOCUS,K,!1),()=>{window.removeEventListener(ge.HASHCHANGE,O,!1),window.removeEventListener(ge.UNLOAD,J,!1),window.removeEventListener(ge.BLUR,K,!1),window.removeEventListener(ge.FOCUS,K,!1),document.removeEventListener(ge.VISIBILITY_CHANGE,K,!1),clearTimeout(F)}},[n,g,u,a]),D.useEffect(()=>{const R=O=>{oi.flushSave(),u&&oi.fileStorage.shouldPreventUnload(u.getSceneElements())&&JI(O)};return window.addEventListener(ge.BEFORE_UNLOAD,R),()=>{window.removeEventListener(ge.BEFORE_UNLOAD,R)}},[u]);const _=(R,O,F)=>{g!=null&&g.isCollaborating()&&g.syncElements(R),oi.isSavePaused()||oi.save(R,O,F,()=>{if(u){let N=!1;const J=u.getSceneElementsIncludingDeleted().map(K=>{if(oi.fileStorage.shouldUpdateImageElementStatus(K)){const ne=Xe(K,{status:"saved"});return ne!==K&&(N=!0),ne}return K});N&&u.updateScene({elements:J,storeAction:ae.UPDATE})}}),c.current&&u&&JMe(c.current,O,window.devicePixelRatio,()=>v(N=>!N))},[E,w]=D.useState(null),T=async(R,O,F)=>{if(R.length===0)throw new Error(L("alerts.cannotExportEmptyCanvas"));try{const{url:N,errorMessage:J}=await lMe(R,{...O,viewBackgroundColor:O.exportBackground?O.viewBackgroundColor:ks().viewBackgroundColor},F);if(J)throw new Error(J);N&&w(N)}catch(N){if(N.name!=="AbortError"){const{width:J,height:K}=O;throw console.error(N,{width:J,height:K,devicePixelRatio:window.devicePixelRatio}),new Error(N.message)}}},A=(R,O)=>p(SMe,{setToast:F=>u.setToast({message:F}),appState:O,elements:R}),M=a2(Dq),S=D.useCallback(()=>f({isOpen:!0,type:"collaborationOnly"}),[f]);if(Hq)return p("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},children:p("h1",{children:"I'm not a pretzel!"})});const x={label:"Excalidraw+",category:$t.links,predicate:!0,icon:p("div",{style:{width:14},children:Y_}),keywords:["plus","cloud","server"],perform:()=>{window.open("https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}},C={label:"Sign up",category:$t.links,predicate:!0,icon:p("div",{style:{width:14},children:Y_}),keywords:["excalidraw","plus","cloud","server","signin","login","signup"],perform:()=>{window.open("https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}};return p("div",{style:{height:"100%"},className:Re("excalidraw-app",{"is-collaborating":U}),children:z(wK,{excalidrawAPI:d,onChange:_,initialData:l.current.promise,isCollaborating:U,onPointerUpdate:g==null?void 0:g.onPointerUpdate,UIOptions:{canvasActions:{toggleTheme:!0,export:{onExportToBackend:T,renderCustomUI:u?(R,O,F)=>p(CMe,{elements:R,appState:O,files:F,name:u.getName(),onError:N=>{u==null||u.updateScene({appState:{errorMessage:N.message}})},onSuccess:()=>{u.updateScene({appState:{openDialog:null}})}}):void 0}}},langCode:s,renderCustomStats:A,detectScroll:!1,handleKeyboardGlobally:!0,autoFocus:!0,theme:r,renderTopRightUI:R=>R||!g||n?null:z("div",{className:"top-right-ui",children:[b.message&&p(Mq,{collabError:b}),p(EK,{isCollaborating:U,onSelect:()=>f({isOpen:!0,type:"share"})})]}),onLinkOpen:(R,O)=>{R.link&&ug(R.link)&&(O.preventDefault(),u==null||u.scrollToContent(R.link,{animate:!0}))},children:[p(nLe,{onCollabDialogOpen:S,isCollaborating:U,isCollabEnabled:!n,theme:i,setTheme:R=>o(R),refresh:()=>v(R=>!R)}),p(rLe,{onCollabDialogOpen:S,isCollabEnabled:!n}),z(Ef,{children:[p(Ef.Actions.ExportToImage,{}),p(Ef.Actions.SaveToDisk,{}),u&&p(Ef.Action,{title:L("overwriteConfirm.action.excalidrawPlus.title"),actionLabel:L("overwriteConfirm.action.excalidrawPlus.button"),onClick:()=>{W9(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())},children:L("overwriteConfirm.action.excalidrawPlus.description")})]}),p(sLe,{onChange:()=>u==null?void 0:u.refresh()}),u&&p(gLe,{excalidrawAPI:u}),p(_K,{}),U&&M&&p("div",{className:"collab-offline-warning",children:L("alerts.collabOfflineWarning")}),E&&p(aLe,{link:E,onCloseRequest:()=>w(null),setErrorMessage:t}),u&&!n&&p(TMe,{excalidrawAPI:u}),p(fLe,{collabAPI:g,onExportToBackend:async()=>{if(u)try{await T(u.getSceneElements(),u.getAppState(),u.getFiles())}catch(R){t(R.message)}}}),e&&p(nS,{onClose:()=>t(""),children:e}),p(UD,{customCommandPaletteItems:[{label:L("labels.liveCollaboration"),category:$t.app,keywords:["team","multiplayer","share","public","session","invite"],icon:hT,perform:()=>{f({isOpen:!0,type:"collaborationOnly"})}},{label:L("roomDialog.button_stopSession"),category:$t.app,predicate:()=>!!(g!=null&&g.isCollaborating()),keywords:["stop","session","end","leave","close","exit","collaboration"],perform:()=>{g&&(g.stopCollaboration(),g.isCollaborating()||f({isOpen:!1}))}},{label:L("labels.share"),category:$t.app,predicate:!0,icon:fT,keywords:["link","shareable","readonly","export","publish","snapshot","url","collaborate","invite"],perform:async()=>{f({isOpen:!0,type:"share"})}},{label:"GitHub",icon:uT,category:$t.links,predicate:!0,keywords:["issues","bugs","requests","report","features","social","community"],perform:()=>{window.open("https://github.com/excalidraw/excalidraw","_blank","noopener noreferrer")}},{label:L("labels.followUs"),icon:PV,category:$t.links,predicate:!0,keywords:["twitter","contact","social","community"],perform:()=>{window.open("https://x.com/excalidraw","_blank","noopener noreferrer")}},{label:L("labels.discordChat"),category:$t.links,predicate:!0,icon:RV,keywords:["chat","talk","contact","bugs","requests","report","feedback","suggestions","social","community"],perform:()=>{window.open("https://discord.gg/UexuTaE","_blank","noopener noreferrer")}},{label:"YouTube",icon:XV,category:$t.links,predicate:!0,keywords:["features","tutorials","howto","help","community"],perform:()=>{window.open("https://youtube.com/@excalidraw","_blank","noopener noreferrer")}},...uh?[{...C,label:"Sign in / Go to Excalidraw+"}]:[x,C],{label:L("overwriteConfirm.action.excalidrawPlus.button"),category:$t.export,icon:gde,predicate:!0,keywords:["plus","export","save","backup"],perform:()=>{u&&W9(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())}},{...UD.defaultItems.toggleTheme,perform:()=>{o(r===Ge.DARK?Ge.LIGHT:Ge.DARK)}},{label:L("labels.installPWA"),category:$t.app,predicate:()=>!!C1,perform:()=>{C1&&(C1.prompt(),C1.userChoice.then(()=>{C1=null}))}}]}),zq()&&u&&p(tLe,{appState:u.getAppState(),scale:window.devicePixelRatio,ref:c})]})})},vLe=()=>window.location.pathname==="/excalidraw-plus-export"?p(bLe,{}):p(Wxe,{children:p(sle,{store:au,children:p(yLe,{})})});function ELe(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:s}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){const{Workbox:d}=await Le(()=>import("./workbox-window.prod.es5-D5gOYdM7.js"),__vite__mapDeps([]));a=new d("/sw.js",{scope:"/",type:"classic"}),a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),a.register({immediate:t}).then(f=>{o?o("/sw.js",f):i==null||i(f)}).catch(f=>{s==null||s(f)})}}return l=u(),c}function _Le(){const e=Error.prepareStackTrace;try{let t=[];return Error.prepareStackTrace=(n,r)=>{const i=r.slice(1);return t=i,i},new Error().stack,t}finally{Error.prepareStackTrace=e}}var wLe={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Wq={"excalidraw.com":"production","staging.excalidraw.com":"staging","vercel.app":"staging"},ILe=wLe.VITE_APP_DISABLE_SENTRY==="true",D4=!ILe&&Object.keys(Wq).find(e=>window.location.hostname.indexOf(e)>=0);Hxe({dsn:D4?"https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260":void 0,environment:D4?Wq[D4]:void 0,release:"",ignoreErrors:["undefined is not an object (evaluating 'window.__pad.performLoop')","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.",/(Failed to fetch|(fetch|loading) dynamically imported module)/i,/QuotaExceededError: (The quota has been exceeded|.*setItem.*Storage)/i,"Internal error opening backing store for indexedDB.open"],integrations:[aTe({levels:["error"]})],beforeSend(e){var t;return(t=e.request)!=null&&t.url&&(e.request.url=e.request.url.replace(/#.*$/,"")),e.exception||(e.exception={values:[{type:"ConsoleError",value:e.message??"Unknown error",stacktrace:{frames:_Le().slice(1).filter(n=>{var r;return n.getFileName()&&!((r=n.getFileName())!=null&&r.includes("@sentry_browser.js"))}).map(n=>{var r;return{filename:n.getFileName()??void 0,function:n.getFunctionName()??void 0,in_app:!(((r=n.getFileName())==null?void 0:r.includes("node_modules"))??!1),lineno:n.getLineNumber()??void 0,colno:n.getColumnNumber()??void 0}})},mechanism:{type:"instrument",handled:!0,data:{function:"console.error",handler:"Sentry.beforeSend"}}}]}),e}});window.__EXCALIDRAW_SHA__="";const TLe=document.getElementById("root"),xLe=w$(TLe);ELe();xLe.render(p(D.StrictMode,{children:p(vLe,{})}));export{Le as _,Ka as c,fd as g,wV as s};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/subset-worker.chunk-BQzNBZro.js","assets/subset-shared.chunk-xwIkZ9An.js","assets/pica-Cm97YrSP.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-BHqQJCmq.js.map
